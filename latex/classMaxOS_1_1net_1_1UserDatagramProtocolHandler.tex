\doxysection{Max\+OS\+::net\+::User\+Datagram\+Protocol\+Handler Class Reference}
\hypertarget{classMaxOS_1_1net_1_1UserDatagramProtocolHandler}{}\label{classMaxOS_1_1net_1_1UserDatagramProtocolHandler}\index{MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}}


Handles the UDP protocol.  




{\ttfamily \#include $<$udp.\+h$>$}

Inheritance diagram for Max\+OS\+::net\+::User\+Datagram\+Protocol\+Handler\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classMaxOS_1_1net_1_1UserDatagramProtocolHandler}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a2409877c189863ac8cbfa20fa22caca1}{User\+Datagram\+Protocol\+Handler}} (\mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolHandler}{Internet\+Protocol\+Handler}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1net_1_1IPV4PayloadHandler_a8f837ba5e88224d46e5653239ffed050}{internet\+\_\+protocol\+\_\+handler}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} \texorpdfstring{$\ast$}{*}error\+\_\+messages)
\begin{DoxyCompactList}\small\item\em Construct a new User Datagram Protocol Handler object. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bool}} \mbox{\hyperlink{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_ab0ad7b1cf1620915edbadd42b1af6639}{handle\+\_\+internet\+\_\+protocol\+\_\+payload}} (\mbox{\hyperlink{ipv4_8h_af037c025feb88b952b167f4dfa2709a0}{net\+::\+Internet\+Protocol\+Address}} source\+\_\+ip, \mbox{\hyperlink{ipv4_8h_af037c025feb88b952b167f4dfa2709a0}{net\+::\+Internet\+Protocol\+Address}} destination\+\_\+ip, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{payload\+\_\+data}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} size) \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{override}}
\begin{DoxyCompactList}\small\item\em Handle the recivement of an UDP packet. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a4818e0611b6b82c63bad642ed6411190}{connect}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ip}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{port}})
\item 
\mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a779f0da0f3211d493fb5caa14063d84e}{listen}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{port}})
\begin{DoxyCompactList}\small\item\em Listens for incoming packets on the port. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a4335f3e7a955d85d8014fa856c8b236d}{disconnect}} (\mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}} \texorpdfstring{$\ast$}{*}socket)
\begin{DoxyCompactList}\small\item\em Disconnects the socket from the remote IP and port. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_ac90579f126c715f3ca88c818add4ae0f}{send}} (\mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}} \texorpdfstring{$\ast$}{*}socket, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \texorpdfstring{$\ast$}{*}data, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\+\_\+t}} size)
\begin{DoxyCompactList}\small\item\em Sends a packet to the remote IP and port. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{static}} \mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a359f10538d0bbf5a85246db10f01ba85}{connect}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}} \mbox{\hyperlink{string_8h_a4a6e5834af96b66d8015f5a24c09e1b3}{string}} \&address)
\begin{DoxyCompactList}\small\item\em Connects to a remote host through the UDP protocol. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{static}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a7c9a415e8ca459a58e6e102ac3b36aa8}{bind}} (\mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}} \texorpdfstring{$\ast$}{*}socket, \mbox{\hyperlink{classMaxOS_1_1net_1_1UDPPayloadHandler}{UDPPayload\+Handler}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{udp\+\_\+payload\+\_\+handler}})
\begin{DoxyCompactList}\small\item\em Binds a handler to the socket. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Vector}{common\+::\+Vector}}$<$ \mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}} \texorpdfstring{$\ast$}{*} $>$ \mbox{\hyperlink{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a53f36b366144c23f079c8a01eeedf1dd}{sockets}}
\begin{DoxyCompactList}\small\item\em The list of UDP sockets. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_ac81cf9554a9fa32b9435db1dd4c30c4d}{error\+Messages}}
\begin{DoxyCompactList}\small\item\em Where to write error messages. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Protected Attributes}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{udp_8h_a1e02f448b921ead1ac5c22bd5c83ead9}{User\+Datagram\+Protocol\+Port}} \mbox{\hyperlink{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a3791b93416b621ee2a0288392ac858dc}{free\+\_\+ports}} = 0x8000
\begin{DoxyCompactList}\small\item\em The next free port number. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Handles the UDP protocol. 

Definition at line \mbox{\hyperlink{udp_8h_source_l00113}{113}} of file \mbox{\hyperlink{udp_8h_source}{udp.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a2409877c189863ac8cbfa20fa22caca1}\label{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a2409877c189863ac8cbfa20fa22caca1} 
\index{MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}!UserDatagramProtocolHandler@{UserDatagramProtocolHandler}}
\index{UserDatagramProtocolHandler@{UserDatagramProtocolHandler}!MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}}
\doxysubsubsection{\texorpdfstring{UserDatagramProtocolHandler()}{UserDatagramProtocolHandler()}}
{\footnotesize\ttfamily User\+Datagram\+Protocol\+Handler\+::\+User\+Datagram\+Protocol\+Handler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolHandler}{Internet\+Protocol\+Handler}} \texorpdfstring{$\ast$}{*}}]{internet\+\_\+protocol\+\_\+handler,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} \texorpdfstring{$\ast$}{*}}]{error\+\_\+messages }\end{DoxyParamCaption})}



Construct a new User Datagram Protocol Handler object. 


\begin{DoxyParams}{Parameters}
{\em internet\+\_\+protocol\+\_\+handler} & The Internet protocol handler \\
\hline
{\em error\+\_\+messages} & Where to write error messages \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{udp_8cpp_source_l00112}{112}} of file \mbox{\hyperlink{udp_8cpp_source}{udp.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00113\ :\ \mbox{\hyperlink{classMaxOS_1_1net_1_1IPV4PayloadHandler}{IPV4PayloadHandler}}(\mbox{\hyperlink{classMaxOS_1_1net_1_1IPV4PayloadHandler_a8f837ba5e88224d46e5653239ffed050}{internet\_protocol\_handler}},\ 0x11)\ \ \ \ \textcolor{comment}{//0x11\ is\ the\ UDP\ protocol\ number}}
\DoxyCodeLine{00114\ \{}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keyword}{this}\ -\/>\ \mbox{\hyperlink{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_ac81cf9554a9fa32b9435db1dd4c30c4d}{errorMessages}}\ =\ error\_messages;}
\DoxyCodeLine{00116\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{udp_8h_source_l00117}{error\+Messages}}.



\doxysubsection{Member Function Documentation}
\Hypertarget{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a7c9a415e8ca459a58e6e102ac3b36aa8}\label{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a7c9a415e8ca459a58e6e102ac3b36aa8} 
\index{MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}!bind@{bind}}
\index{bind@{bind}!MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}}
\doxysubsubsection{\texorpdfstring{bind()}{bind()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} User\+Datagram\+Protocol\+Handler\+::bind (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}} \texorpdfstring{$\ast$}{*}}]{socket,  }\item[{\mbox{\hyperlink{classMaxOS_1_1net_1_1UDPPayloadHandler}{UDPPayload\+Handler}} \texorpdfstring{$\ast$}{*}}]{udp\+\_\+payload\+\_\+handler }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Binds a handler to the socket. 


\begin{DoxyParams}{Parameters}
{\em socket} & The socket to bind the handler to \\
\hline
{\em udp\+\_\+payload\+\_\+handler} & The handler to bind \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{udp_8cpp_source_l00308}{308}} of file \mbox{\hyperlink{udp_8cpp_source}{udp.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ socket-\/>\mbox{\hyperlink{classMaxOS_1_1common_1_1EventManager_aeb26c8e6b4a6f00ecaec79a67d7bb815}{m\_handlers}}.push\_back(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{udp\_payload\_handler}});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ handler\ of\ the\ socket\ to\ the\ handler\ that\ was\ passed\ in}}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ }
\DoxyCodeLine{00313\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{eventHandler_8h_source_l00068}{Max\+OS\+::common\+::\+Event\+Manager$<$ Event\+Type $>$\+::m\+\_\+handlers}}.

\Hypertarget{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a359f10538d0bbf5a85246db10f01ba85}\label{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a359f10538d0bbf5a85246db10f01ba85} 
\index{MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}!connect@{connect}}
\index{connect@{connect}!MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}}
\doxysubsubsection{\texorpdfstring{connect()}{connect()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}} \texorpdfstring{$\ast$}{*} User\+Datagram\+Protocol\+Handler\+::connect (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}} \mbox{\hyperlink{string_8h_a4a6e5834af96b66d8015f5a24c09e1b3}{string}} \&}]{address }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Connects to a remote host through the UDP protocol. 


\begin{DoxyParams}{Parameters}
{\em address} & The address to connect to in the form "{}\+IP\+:\+PORT"{} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The socket that is connected to the remote host, nullptr if it failed
\end{DoxyReturn}
\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000075}{Todo}}]Implement string parsing to extract IP and port \end{DoxyRefDesc}


Definition at line \mbox{\hyperlink{udp_8cpp_source_l00211}{211}} of file \mbox{\hyperlink{udp_8cpp_source}{udp.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00214\ \}}

\end{DoxyCode}
\Hypertarget{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a4818e0611b6b82c63bad642ed6411190}\label{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a4818e0611b6b82c63bad642ed6411190} 
\index{MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}!connect@{connect}}
\index{connect@{connect}!MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}}
\doxysubsubsection{\texorpdfstring{connect()}{connect()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}} \texorpdfstring{$\ast$}{*} User\+Datagram\+Protocol\+Handler\+::connect (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{ip,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\+\_\+t}}}]{port }\end{DoxyParamCaption})}

Connects the socket to the remote IP and port 
\begin{DoxyParams}{Parameters}
{\em ip} & The remote IP address in big endian \\
\hline
{\em port} & The remote port \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The socket that was connected 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{udp_8cpp_source_l00181}{181}} of file \mbox{\hyperlink{udp_8cpp_source}{udp.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{keyword}{auto}*\ socket\ =\ (\mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}}*)\mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_a983c849ff604367f7c8a0e70172bb331}{MemoryManager::kmalloc}}(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}}));\ \ \ \textcolor{comment}{//Allocate\ memory\ for\ the\ socket}}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{keywordflow}{if}(socket\ !=\ \textcolor{keyword}{nullptr})\ \textcolor{comment}{//If\ the\ socket\ was\ created}}
\DoxyCodeLine{00187\ \ \ \ \ \{}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ (socket)\ \mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}}();\ \ \ \ \textcolor{comment}{//Create\ the\ socket}}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \textcolor{comment}{//Configure\ the\ socket}}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ socket\ -\/>\ remote\_port\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{port}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Port\ to\ that\ application\ wants\ to\ connect\ to}}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ socket\ -\/>\ remote\_ip\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ip}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//IP\ to\ that\ application\ wants\ to\ connect\ to}}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ socket\ -\/>\ local\_port\ =\ \mbox{\hyperlink{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a3791b93416b621ee2a0288392ac858dc}{free\_ports}}++;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Port\ that\ we\ will\ use\ to\ connect\ to\ the\ remote\ application\ \ (note,\ local\ port\ doesnt\ have\ to\ be\ the\ same\ as\ remote)}}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ socket\ -\/>\ local\_ip\ =\ \mbox{\hyperlink{classMaxOS_1_1net_1_1IPV4PayloadHandler_a8f837ba5e88224d46e5653239ffed050}{internet\_protocol\_handler}}-\/>\mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolHandler_a1c7b476a4ff9f946407a44be120871da}{get\_internet\_protocol\_address}}();\ \ \ \ \textcolor{comment}{//IP\ that\ we\ will\ use\ to\ connect\ to\ the\ remote\ application}}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ socket\ -\/>\ user\_datagram\_protocol\_handler\ =\ \textcolor{keyword}{this};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ UDP\ handler}}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a53f36b366144c23f079c8a01eeedf1dd}{sockets}}.push\_back(socket);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Add\ the\ socket\ to\ the\ list\ of\ sockets}}
\DoxyCodeLine{00198\ \ \ \ \ \}}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{keywordflow}{return}\ socket;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Return\ the\ socket}}
\DoxyCodeLine{00201\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{udp_8h_source_l00116}{free\+\_\+ports}}, \mbox{\hyperlink{ipv4_8cpp_source_l00345}{Max\+OS\+::net\+::\+Internet\+Protocol\+Handler\+::get\+\_\+internet\+\_\+protocol\+\_\+address()}}, \mbox{\hyperlink{ipv4_8h_source_l00070}{Max\+OS\+::net\+::\+IPV4\+Payload\+Handler\+::internet\+\_\+protocol\+\_\+handler}}, \mbox{\hyperlink{memorymanagement_8cpp_source_l00085}{Max\+OS\+::memory\+::\+Memory\+Manager\+::kmalloc()}}, and \mbox{\hyperlink{udp_8h_source_l00115}{sockets}}.

\Hypertarget{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a4335f3e7a955d85d8014fa856c8b236d}\label{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a4335f3e7a955d85d8014fa856c8b236d} 
\index{MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}!disconnect@{disconnect}}
\index{disconnect@{disconnect}!MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}}
\doxysubsubsection{\texorpdfstring{disconnect()}{disconnect()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} User\+Datagram\+Protocol\+Handler\+::disconnect (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}} \texorpdfstring{$\ast$}{*}}]{socket }\end{DoxyParamCaption})}



Disconnects the socket from the remote IP and port. 


\begin{DoxyParams}{Parameters}
{\em socket} & The socket to disconnect \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{udp_8cpp_source_l00248}{248}} of file \mbox{\hyperlink{udp_8cpp_source}{udp.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Pair}{Vector<UDPSocket*>::iterator}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{current\_socket}}\ =\ \mbox{\hyperlink{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a53f36b366144c23f079c8a01eeedf1dd}{sockets}}.begin();\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{current\_socket}}\ !=\ \mbox{\hyperlink{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a53f36b366144c23f079c8a01eeedf1dd}{sockets}}.end();\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{current\_socket}}++)\ \{}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}((*\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{current\_socket}})\ ==\ socket)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//If\ the\ socket\ is\ the\ same\ as\ the\ socket\ that\ is\ being\ checked}}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a53f36b366144c23f079c8a01eeedf1dd}{sockets}}.erase(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{current\_socket}});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Remove\ the\ socket\ from\ the\ list\ of\ sockets}}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_abaa5e54c1428654efa1c81b69e12eb20}{MemoryManager::kfree}}(socket);\ \ \ \ \ \ \textcolor{comment}{//Free\ the\ socket}}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Break\ out\ of\ the\ loop}}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00258\ \ \ \ \ \}}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00260\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{memorymanagement_8cpp_source_l00172}{Max\+OS\+::memory\+::\+Memory\+Manager\+::kfree()}}, and \mbox{\hyperlink{udp_8h_source_l00115}{sockets}}.



Referenced by \mbox{\hyperlink{udp_8cpp_source_l00096}{Max\+OS\+::net\+::\+UDPSocket\+::disconnect()}}.

\Hypertarget{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_ab0ad7b1cf1620915edbadd42b1af6639}\label{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_ab0ad7b1cf1620915edbadd42b1af6639} 
\index{MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}!handle\_internet\_protocol\_payload@{handle\_internet\_protocol\_payload}}
\index{handle\_internet\_protocol\_payload@{handle\_internet\_protocol\_payload}!MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}}
\doxysubsubsection{\texorpdfstring{handle\_internet\_protocol\_payload()}{handle\_internet\_protocol\_payload()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bool}} User\+Datagram\+Protocol\+Handler\+::handle\+\_\+internet\+\_\+protocol\+\_\+payload (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ipv4_8h_af037c025feb88b952b167f4dfa2709a0}{net\+::\+Internet\+Protocol\+Address}}}]{source\+\_\+ip,  }\item[{\mbox{\hyperlink{ipv4_8h_af037c025feb88b952b167f4dfa2709a0}{net\+::\+Internet\+Protocol\+Address}}}]{destination\+\_\+ip,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{payload\+\_\+data,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Handle the recivement of an UDP packet. 


\begin{DoxyParams}{Parameters}
{\em source\+\_\+ip} & The source IP address in big endian \\
\hline
{\em destination\+\_\+ip} & The destination IP address in big endian \\
\hline
{\em payload\+\_\+data} & The UDP payload \\
\hline
{\em size} & The size of the UDP payload \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if the packet is to be sent back to the sender 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classMaxOS_1_1net_1_1IPV4PayloadHandler_a0a77f0da7508cabc239b0f7830ef03dc}{Max\+OS\+::net\+::\+IPV4\+Payload\+Handler}}.



Definition at line \mbox{\hyperlink{udp_8cpp_source_l00129}{129}} of file \mbox{\hyperlink{udp_8cpp_source}{udp.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{comment}{//Check\ the\ size}}
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{keywordflow}{if}(size\ <\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1UDPHeader}{UDPHeader}}))\ \{}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00134\ \ \ \ \ \}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{comment}{//Get\ the\ header}}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keyword}{auto}*\ header\ =\ (\mbox{\hyperlink{structMaxOS_1_1net_1_1UDPHeader}{UDPHeader}}*)\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{payload\_data}};}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{comment}{//Set\ the\ local\ and\ remote\ ports}}
\DoxyCodeLine{00140\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}}\ local\_port\ =\ header\ -\/>\ destination\_port;}
\DoxyCodeLine{00141\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}}\ remote\_port\ =\ header\ -\/>\ source\_port;}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}}*\ socket\ =\ \textcolor{keyword}{nullptr};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//The\ socket\ that\ will\ be\ used}}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\ \&\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{current\_socket}}\ :\ \mbox{\hyperlink{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a53f36b366144c23f079c8a01eeedf1dd}{sockets}})\ \{}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{current\_socket}}-\/>local\_port\ ==\ local\_port\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//If\ the\ local\ port\ (header\ dst,\ our\ port)\ is\ the\ same\ as\ the\ local\ port\ of\ the\ socket}}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \&\&\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{current\_socket}}-\/>local\_ip\ ==\ destination\_ip\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//If\ the\ local\ IP\ (packet\ dst,\ our\ IP)\ is\ the\ same\ as\ the\ local\ IP\ of\ the\ socket}}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \&\&\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{current\_socket}}-\/>listening)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//If\ the\ socket\ is\ listening}}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ socket\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{current\_socket}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ socket\ to\ the\ socket\ that\ is\ being\ checked}}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ socket-\/>\mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket_ae604b79b521e651be0334c02cf4c3219}{listening}}\ =\ \textcolor{keyword}{false};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ socket\ to\ not\ listening,\ as\ it\ is\ now\ in\ use}}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ socket-\/>\mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket_a6e36137ae67f52da03abc54a65384967}{remote\_port}}\ =\ remote\_port;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ remote\ port\ of\ the\ socket\ to\ the\ remote\ port\ of\ the\ packet}}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ socket-\/>\mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket_a4e93771ea419d6623469d20e307d8d93}{remote\_ip}}\ =\ source\_ip;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ remote\ IP\ of\ the\ socket\ to\ the\ remote\ IP\ of\ the\ packet}}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{current\_socket}}-\/>local\_port\ ==\ local\_port\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//If\ the\ local\ port\ (header\ dst,\ our\ port)\ is\ the\ same\ as\ the\ local\ port\ of\ the\ socket}}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{current\_socket}}-\/>local\_ip\ ==\ destination\_ip\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//If\ the\ local\ IP\ (packet\ dst,\ our\ IP)\ is\ the\ same\ as\ the\ local\ IP\ of\ the\ socket}}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{current\_socket}}-\/>remote\_port\ ==\ remote\_port\ \ \ \ \ \ \ \ \ \textcolor{comment}{//If\ the\ remote\ port\ (header\ src,\ their\ port)\ is\ the\ same\ as\ the\ remote\ port\ of\ the\ socket}}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{current\_socket}}-\/>remote\_ip\ ==\ source\_ip)\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//If\ the\ remote\ IP\ (packet\ src,\ their\ IP)\ is\ the\ same\ as\ the\ remote\ IP\ of\ the\ socket}}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ socket\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{current\_socket}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ socket\ to\ the\ current\ socket}}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ \ \ \}}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{keywordflow}{if}(socket\ !=\ \textcolor{keyword}{nullptr})\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//If\ the\ socket\ is\ not\ null\ then\ pass\ the\ data\ to\ the\ socket}}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ socket-\/>\mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket_af9b2fcc1f9a7b871c287dbb6c10486c8}{handle\_user\_datagram\_protocol\_payload}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{payload\_data}}\ +\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1UDPHeader}{UDPHeader}}),}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ size\ -\/\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1UDPHeader}{UDPHeader}}));}
\DoxyCodeLine{00168\ \ \ \ \ \}}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{comment}{//UDP\ doesn't\ send\ back\ packets,\ so\ always\ return\ false}}
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{udp_8cpp_source_l00072}{Max\+OS\+::net\+::\+UDPSocket\+::handle\+\_\+user\+\_\+datagram\+\_\+protocol\+\_\+payload()}}, \mbox{\hyperlink{udp_8h_source_l00089}{Max\+OS\+::net\+::\+UDPSocket\+::listening}}, \mbox{\hyperlink{udp_8h_source_l00095}{Max\+OS\+::net\+::\+UDPSocket\+::remote\+\_\+ip}}, \mbox{\hyperlink{udp_8h_source_l00092}{Max\+OS\+::net\+::\+UDPSocket\+::remote\+\_\+port}}, and \mbox{\hyperlink{udp_8h_source_l00115}{sockets}}.

\Hypertarget{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a779f0da0f3211d493fb5caa14063d84e}\label{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a779f0da0f3211d493fb5caa14063d84e} 
\index{MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}!listen@{listen}}
\index{listen@{listen}!MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}}
\doxysubsubsection{\texorpdfstring{listen()}{listen()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}} \texorpdfstring{$\ast$}{*} User\+Datagram\+Protocol\+Handler\+::listen (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\+\_\+t}}}]{port }\end{DoxyParamCaption})}



Listens for incoming packets on the port. 


\begin{DoxyParams}{Parameters}
{\em port} & The port to listen on \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The socket that is listening 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{udp_8cpp_source_l00222}{222}} of file \mbox{\hyperlink{udp_8cpp_source}{udp.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ \ \ \textcolor{keyword}{auto}*\ socket\ =\ (\mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}}*)\mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_a983c849ff604367f7c8a0e70172bb331}{MemoryManager::kmalloc}}(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}}));\ \ \ \textcolor{comment}{//Allocate\ memory\ for\ the\ socket}}
\DoxyCodeLine{00225\ }
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keywordflow}{if}(socket\ !=\ \textcolor{keyword}{nullptr})\ \textcolor{comment}{//If\ the\ socket\ was\ created}}
\DoxyCodeLine{00227\ \ \ \ \ \{}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ (socket)\ \mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}}();\ \ \ \ \textcolor{comment}{//Create\ the\ socket}}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \textcolor{comment}{//Configure\ the\ socket}}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ socket\ -\/>\ listening\ =\ \textcolor{keyword}{true};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ socket\ to\ listening}}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ socket\ -\/>\ local\_port\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{port}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Port\ that\ we\ will\ use\ to\ connect\ to\ the\ remote\ application\ \ (note,\ local\ port\ doesnt\ have\ to\ be\ the\ same\ as\ remote)}}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ socket\ -\/>\ local\_ip\ =\ \mbox{\hyperlink{classMaxOS_1_1net_1_1IPV4PayloadHandler_a8f837ba5e88224d46e5653239ffed050}{internet\_protocol\_handler}}-\/>\mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolHandler_a1c7b476a4ff9f946407a44be120871da}{get\_internet\_protocol\_address}}();\ \ \ \ \textcolor{comment}{//IP\ that\ we\ will\ use\ to\ connect\ to\ the\ remote\ application}}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ socket\ -\/>\ user\_datagram\_protocol\_handler\ =\ \textcolor{keyword}{this};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ UDP\ handler}}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a53f36b366144c23f079c8a01eeedf1dd}{sockets}}.push\_back(socket);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Add\ the\ socket\ to\ the\ list\ of\ sockets}}
\DoxyCodeLine{00237\ \ \ \ \ \}}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \ \ \ \ \textcolor{keywordflow}{return}\ socket;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Return\ the\ socket}}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{ipv4_8cpp_source_l00345}{Max\+OS\+::net\+::\+Internet\+Protocol\+Handler\+::get\+\_\+internet\+\_\+protocol\+\_\+address()}}, \mbox{\hyperlink{ipv4_8h_source_l00070}{Max\+OS\+::net\+::\+IPV4\+Payload\+Handler\+::internet\+\_\+protocol\+\_\+handler}}, \mbox{\hyperlink{memorymanagement_8cpp_source_l00085}{Max\+OS\+::memory\+::\+Memory\+Manager\+::kmalloc()}}, and \mbox{\hyperlink{udp_8h_source_l00115}{sockets}}.

\Hypertarget{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_ac90579f126c715f3ca88c818add4ae0f}\label{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_ac90579f126c715f3ca88c818add4ae0f} 
\index{MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}!send@{send}}
\index{send@{send}!MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}}
\doxysubsubsection{\texorpdfstring{send()}{send()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} User\+Datagram\+Protocol\+Handler\+::send (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}} \texorpdfstring{$\ast$}{*}}]{socket,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{data,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\+\_\+t}}}]{size }\end{DoxyParamCaption})}



Sends a packet to the remote IP and port. 


\begin{DoxyParams}{Parameters}
{\em socket} & The socket to send the packet from \\
\hline
{\em data} & The data to send \\
\hline
{\em size} & The size of the data \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{udp_8cpp_source_l00269}{269}} of file \mbox{\hyperlink{udp_8cpp_source}{udp.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{total\_size}}\ =\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1UDPHeader}{UDPHeader}})\ +\ size;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Get\ the\ total\ size\ of\ the\ packet}}
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{keyword}{auto}*\ buffer\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}}*)\mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_a983c849ff604367f7c8a0e70172bb331}{MemoryManager::kmalloc}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{total\_size}});\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Allocate\ memory\ for\ the\ packet}}
\DoxyCodeLine{00273\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}}*\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{buffer2}}\ =\ buffer\ +\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1UDPHeader}{UDPHeader}});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Get\ the\ buffer\ that\ will\ be\ used\ to\ store\ the\ data}}
\DoxyCodeLine{00274\ }
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keyword}{auto}*\ header\ =\ (\mbox{\hyperlink{structMaxOS_1_1net_1_1UDPHeader}{UDPHeader}}*)buffer;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Create\ the\ header\ of\ the\ packet}}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{comment}{//Set\ the\ header}}
\DoxyCodeLine{00278\ \ \ \ \ header\ -\/>\ source\_port\ =\ socket\ -\/>\ local\_port;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ source\ port\ to\ the\ local\ port\ of\ the\ socket\ \ \ \ (this\ is\ the\ port\ that\ the\ packet\ will\ be\ sent\ from)}}
\DoxyCodeLine{00279\ \ \ \ \ header\ -\/>\ destination\_port\ =\ socket\ -\/>\ remote\_port;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ destination\ port\ to\ the\ remote\ port\ of\ the\ socket\ (this\ is\ the\ port\ that\ the\ packet\ will\ be\ sent\ to)}}
\DoxyCodeLine{00280\ \ \ \ \ header\ -\/>\ length\ =\ ((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{total\_size}}\ \&\ 0x00FF)\ <<\ 8)\ |\ ((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{total\_size}}\ \&\ 0xFF00)\ >>\ 8);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ length\ of\ the\ packet}}
\DoxyCodeLine{00281\ }
\DoxyCodeLine{00282\ \ \ \ \ \textcolor{comment}{//\ Convert\ the\ ports\ into\ big\ endian}}
\DoxyCodeLine{00283\ \ \ \ \ header\ -\/>\ source\_port\ =\ ((header\ -\/>\ source\_port\ \&\ 0x00FF)\ <<\ 8)\ |\ ((header\ -\/>\ source\_port\ \&\ 0xFF00)\ >>\ 8);}
\DoxyCodeLine{00284\ \ \ \ \ header\ -\/>\ destination\_port\ =\ ((header\ -\/>\ destination\_port\ \&\ 0x00FF)\ <<\ 8)\ |\ ((header\ -\/>\ destination\_port\ \&\ 0xFF00)\ >>\ 8);}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00286\ \ \ \ \ \textcolor{comment}{//Copy\ the\ data\ to\ the\ buffer}}
\DoxyCodeLine{00287\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ size;\ ++i)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Loop\ through\ the\ data}}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{buffer2}}[i]\ =\ data[i];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Copy\ the\ data\ to\ the\ buffer}}
\DoxyCodeLine{00289\ \ \ \ \ \}}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00291\ \ \ \ \ \textcolor{comment}{//Set\ the\ checksum}}
\DoxyCodeLine{00292\ \ \ \ \ header\ -\/>\ checksum\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ checksum\ to\ 0,\ this\ is\ becuase\ UDP\ doesnt\ have\ to\ have\ a\ checksum}}
\DoxyCodeLine{00293\ }
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{comment}{//Send\ the\ packet}}
\DoxyCodeLine{00295\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1IPV4PayloadHandler_a2bb888c9e34031fe53b58add430d604e}{IPV4PayloadHandler::send}}(socket-\/>\mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket_a4e93771ea419d6623469d20e307d8d93}{remote\_ip}},\ buffer,\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{total\_size}});}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{comment}{//Free\ the\ buffer}}
\DoxyCodeLine{00298\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_abaa5e54c1428654efa1c81b69e12eb20}{MemoryManager::kfree}}(buffer);}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{memorymanagement_8cpp_source_l00172}{Max\+OS\+::memory\+::\+Memory\+Manager\+::kfree()}}, \mbox{\hyperlink{memorymanagement_8cpp_source_l00085}{Max\+OS\+::memory\+::\+Memory\+Manager\+::kmalloc()}}, \mbox{\hyperlink{udp_8h_source_l00095}{Max\+OS\+::net\+::\+UDPSocket\+::remote\+\_\+ip}}, and \mbox{\hyperlink{ipv4_8cpp_source_l00093}{Max\+OS\+::net\+::\+IPV4\+Payload\+Handler\+::send()}}.



Referenced by \mbox{\hyperlink{udp_8cpp_source_l00087}{Max\+OS\+::net\+::\+UDPSocket\+::send()}}.



\doxysubsection{Member Data Documentation}
\Hypertarget{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_ac81cf9554a9fa32b9435db1dd4c30c4d}\label{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_ac81cf9554a9fa32b9435db1dd4c30c4d} 
\index{MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}!errorMessages@{errorMessages}}
\index{errorMessages@{errorMessages}!MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}}
\doxysubsubsection{\texorpdfstring{errorMessages}{errorMessages}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}}\texorpdfstring{$\ast$}{*} Max\+OS\+::net\+::\+User\+Datagram\+Protocol\+Handler\+::error\+Messages\hspace{0.3cm}{\ttfamily [protected]}}



Where to write error messages. 



Definition at line \mbox{\hyperlink{udp_8h_source_l00117}{117}} of file \mbox{\hyperlink{udp_8h_source}{udp.\+h}}.



Referenced by \mbox{\hyperlink{udp_8cpp_source_l00112}{User\+Datagram\+Protocol\+Handler()}}.

\Hypertarget{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a3791b93416b621ee2a0288392ac858dc}\label{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a3791b93416b621ee2a0288392ac858dc} 
\index{MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}!free\_ports@{free\_ports}}
\index{free\_ports@{free\_ports}!MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}}
\doxysubsubsection{\texorpdfstring{free\_ports}{free\_ports}}
{\footnotesize\ttfamily \mbox{\hyperlink{udp_8h_a1e02f448b921ead1ac5c22bd5c83ead9}{User\+Datagram\+Protocol\+Port}} User\+Datagram\+Protocol\+Handler\+::free\+\_\+ports = 0x8000\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}



The next free port number. 

{\bfseries{Provider}} 

Definition at line \mbox{\hyperlink{udp_8h_source_l00116}{116}} of file \mbox{\hyperlink{udp_8h_source}{udp.\+h}}.



Referenced by \mbox{\hyperlink{udp_8cpp_source_l00181}{connect()}}.

\Hypertarget{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a53f36b366144c23f079c8a01eeedf1dd}\label{classMaxOS_1_1net_1_1UserDatagramProtocolHandler_a53f36b366144c23f079c8a01eeedf1dd} 
\index{MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}!sockets@{sockets}}
\index{sockets@{sockets}!MaxOS::net::UserDatagramProtocolHandler@{MaxOS::net::UserDatagramProtocolHandler}}
\doxysubsubsection{\texorpdfstring{sockets}{sockets}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Vector}{common\+::\+Vector}}$<$\mbox{\hyperlink{classMaxOS_1_1net_1_1UDPSocket}{UDPSocket}}\texorpdfstring{$\ast$}{*}$>$ Max\+OS\+::net\+::\+User\+Datagram\+Protocol\+Handler\+::sockets\hspace{0.3cm}{\ttfamily [protected]}}



The list of UDP sockets. 



Definition at line \mbox{\hyperlink{udp_8h_source_l00115}{115}} of file \mbox{\hyperlink{udp_8h_source}{udp.\+h}}.



Referenced by \mbox{\hyperlink{udp_8cpp_source_l00181}{connect()}}, \mbox{\hyperlink{udp_8cpp_source_l00248}{disconnect()}}, \mbox{\hyperlink{udp_8cpp_source_l00129}{handle\+\_\+internet\+\_\+protocol\+\_\+payload()}}, and \mbox{\hyperlink{udp_8cpp_source_l00222}{listen()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/include/net/\mbox{\hyperlink{udp_8h}{udp.\+h}}\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/src/net/\mbox{\hyperlink{udp_8cpp}{udp.\+cpp}}\end{DoxyCompactItemize}
