\doxysection{Max\+OS\+::processes\+::Shared\+Message\+Endpoint Class Reference}
\hypertarget{classMaxOS_1_1processes_1_1SharedMessageEndpoint}{}\label{classMaxOS_1_1processes_1_1SharedMessageEndpoint}\index{MaxOS::processes::SharedMessageEndpoint@{MaxOS::processes::SharedMessageEndpoint}}


A endpoint that allows processes to queue messages on.  




{\ttfamily \#include $<$ipc.\+h$>$}

Inheritance diagram for Max\+OS\+::processes\+::Shared\+Message\+Endpoint\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classMaxOS_1_1processes_1_1SharedMessageEndpoint}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1processes_1_1SharedMessageEndpoint_a8b0e1d6f7972ed1caaae03f4ee4890d4}{Shared\+Message\+Endpoint}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}} \mbox{\hyperlink{string_8h_a4a6e5834af96b66d8015f5a24c09e1b3}{string}} \&\mbox{\hyperlink{classMaxOS_1_1processes_1_1Resource_a78265383b9068d644a5d45b854a5c49c}{name}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{size\+\_\+t}} size, \mbox{\hyperlink{resource_8h_a9ac9ad12caad00b9d7eb53504318c263}{resource\+\_\+type\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1processes_1_1Resource_a87de16e1adbdafc3764341d85e0228b5}{type}})
\begin{DoxyCompactList}\small\item\em Creates a new shared message endpoint. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1processes_1_1SharedMessageEndpoint_ae2982bf11f12533a986d08477d4c8d65}{\texorpdfstring{$\sim$}{\string~}\+Shared\+Message\+Endpoint}} () \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em Destroys the shared message endpoint and frees all messages. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{int}} \mbox{\hyperlink{classMaxOS_1_1processes_1_1SharedMessageEndpoint_a6baad0e7f448b66b3f811b4c0d8345e4}{read}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \texorpdfstring{$\ast$}{*}buffer, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{size\+\_\+t}} size, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{size\+\_\+t}} flags) \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em Reads the first message from the endpoint or will yield until a message has been written. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{int}} \mbox{\hyperlink{classMaxOS_1_1processes_1_1SharedMessageEndpoint_a42c842d145d71738706a6034ed881f9e}{write}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \texorpdfstring{$\ast$}{*}buffer, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{size\+\_\+t}} size, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{size\+\_\+t}} flags) \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em Handles writing to the message endpoint resource by writing the buffer as a message. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classMaxOS_1_1processes_1_1Resource}{Max\+OS\+::processes\+::\+Resource}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1processes_1_1Resource_ad99ecb91199db5716d6164e88904a42c}{Resource}} (const \mbox{\hyperlink{string_8h_a4a6e5834af96b66d8015f5a24c09e1b3}{string}} \&\mbox{\hyperlink{classMaxOS_1_1processes_1_1Resource_a78265383b9068d644a5d45b854a5c49c}{name}}, size\+\_\+t flags, \mbox{\hyperlink{resource_8h_a9ac9ad12caad00b9d7eb53504318c263}{resource\+\_\+type\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1processes_1_1Resource_a87de16e1adbdafc3764341d85e0228b5}{type}})
\begin{DoxyCompactList}\small\item\em Constructs a new \doxylink{classMaxOS_1_1processes_1_1Resource}{Resource} object. \end{DoxyCompactList}\item 
\mbox{\hyperlink{string_8h_a4a6e5834af96b66d8015f5a24c09e1b3}{string}} \mbox{\hyperlink{classMaxOS_1_1processes_1_1Resource_a78265383b9068d644a5d45b854a5c49c}{name}} ()
\begin{DoxyCompactList}\small\item\em Gets the name of this resource. \end{DoxyCompactList}\item 
\mbox{\hyperlink{resource_8h_a9ac9ad12caad00b9d7eb53504318c263}{resource\+\_\+type\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1processes_1_1Resource_a87de16e1adbdafc3764341d85e0228b5}{type}} ()
\begin{DoxyCompactList}\small\item\em Gets the type of this resource. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classMaxOS_1_1processes_1_1Resource_a0107efaff3db22e7e96522bb57568ec0}{open}} (size\+\_\+t flags)
\begin{DoxyCompactList}\small\item\em Opens the resource. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classMaxOS_1_1processes_1_1Resource_a6b3338b5fba95173feaf3cf759efba0f}{close}} (size\+\_\+t flags)
\begin{DoxyCompactList}\small\item\em Closes the resource. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
A endpoint that allows processes to queue messages on. 

Definition at line \mbox{\hyperlink{ipc_8h_source_l00054}{54}} of file \mbox{\hyperlink{ipc_8h_source}{ipc.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classMaxOS_1_1processes_1_1SharedMessageEndpoint_a8b0e1d6f7972ed1caaae03f4ee4890d4}\label{classMaxOS_1_1processes_1_1SharedMessageEndpoint_a8b0e1d6f7972ed1caaae03f4ee4890d4} 
\index{MaxOS::processes::SharedMessageEndpoint@{MaxOS::processes::SharedMessageEndpoint}!SharedMessageEndpoint@{SharedMessageEndpoint}}
\index{SharedMessageEndpoint@{SharedMessageEndpoint}!MaxOS::processes::SharedMessageEndpoint@{MaxOS::processes::SharedMessageEndpoint}}
\doxysubsubsection{\texorpdfstring{SharedMessageEndpoint()}{SharedMessageEndpoint()}}
{\footnotesize\ttfamily Shared\+Message\+Endpoint\+::\+Shared\+Message\+Endpoint (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}} \mbox{\hyperlink{string_8h_a4a6e5834af96b66d8015f5a24c09e1b3}{string}} \&}]{name,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{size\+\_\+t}}}]{size,  }\item[{\mbox{\hyperlink{resource_8h_a9ac9ad12caad00b9d7eb53504318c263}{resource\+\_\+type\+\_\+t}}}]{type }\end{DoxyParamCaption})}



Creates a new shared message endpoint. 


\begin{DoxyParams}{Parameters}
{\em name} & The name of the endpoint \\
\hline
{\em size} & The size of messages that can be sent \\
\hline
{\em type} & The type of resource \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{ipc_8cpp_source_l00112}{112}} of file \mbox{\hyperlink{ipc_8cpp_source}{ipc.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00113\ :\ \mbox{\hyperlink{classMaxOS_1_1processes_1_1Resource}{Resource}}(\mbox{\hyperlink{classMaxOS_1_1processes_1_1Resource_a78265383b9068d644a5d45b854a5c49c}{name}},\ size,\ \mbox{\hyperlink{classMaxOS_1_1processes_1_1Resource_a87de16e1adbdafc3764341d85e0228b5}{type}})}
\DoxyCodeLine{00114\ \{}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \}}

\end{DoxyCode}
\Hypertarget{classMaxOS_1_1processes_1_1SharedMessageEndpoint_ae2982bf11f12533a986d08477d4c8d65}\label{classMaxOS_1_1processes_1_1SharedMessageEndpoint_ae2982bf11f12533a986d08477d4c8d65} 
\index{MaxOS::processes::SharedMessageEndpoint@{MaxOS::processes::SharedMessageEndpoint}!````~SharedMessageEndpoint@{\texorpdfstring{$\sim$}{\string~}SharedMessageEndpoint}}
\index{````~SharedMessageEndpoint@{\texorpdfstring{$\sim$}{\string~}SharedMessageEndpoint}!MaxOS::processes::SharedMessageEndpoint@{MaxOS::processes::SharedMessageEndpoint}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}SharedMessageEndpoint()}{\string~SharedMessageEndpoint()}}
{\footnotesize\ttfamily Shared\+Message\+Endpoint\+::\texorpdfstring{$\sim$}{\string~}\+Shared\+Message\+Endpoint (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}}



Destroys the shared message endpoint and frees all messages. 



Definition at line \mbox{\hyperlink{ipc_8cpp_source_l00121}{121}} of file \mbox{\hyperlink{ipc_8cpp_source}{ipc.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{comment}{//\ Free\ the\ messages}}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\&\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{message}}\ :\ m\_queue)}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{delete}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{message}};}
\DoxyCodeLine{00126\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classMaxOS_1_1processes_1_1SharedMessageEndpoint_a6baad0e7f448b66b3f811b4c0d8345e4}\label{classMaxOS_1_1processes_1_1SharedMessageEndpoint_a6baad0e7f448b66b3f811b4c0d8345e4} 
\index{MaxOS::processes::SharedMessageEndpoint@{MaxOS::processes::SharedMessageEndpoint}!read@{read}}
\index{read@{read}!MaxOS::processes::SharedMessageEndpoint@{MaxOS::processes::SharedMessageEndpoint}}
\doxysubsubsection{\texorpdfstring{read()}{read()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{int}} Shared\+Message\+Endpoint\+::read (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \texorpdfstring{$\ast$}{*}}]{buffer,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{size\+\_\+t}}}]{size,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{size\+\_\+t}}}]{flags }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



Reads the first message from the endpoint or will yield until a message has been written. 


\begin{DoxyParams}{Parameters}
{\em buffer} & Where to write the message to \\
\hline
{\em size} & Max size of the message to be read \\
\hline
{\em flags} & Unused \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The amount of bytes read 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classMaxOS_1_1processes_1_1Resource_aec6b715d7857511fe90ed7f1524ac76a}{Max\+OS\+::processes\+::\+Resource}}.



Definition at line \mbox{\hyperlink{ipc_8cpp_source_l00136}{136}} of file \mbox{\hyperlink{ipc_8cpp_source}{ipc.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{comment}{//\ Wait\ for\ a\ message}}
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keywordflow}{if}(m\_queue.empty())}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1\ *\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{int}})resource\_error\_base\_t::SHOULD\_BLOCK;}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{comment}{//\ Read\ the\ message\ into\ the\ buffer}}
\DoxyCodeLine{00143\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer}{buffer\_t}}*\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{message}}\ =\ m\_queue.pop\_front();}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{readable}}\ =\ size\ >\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{message}}-\/>capacity()\ ?\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{message}}-\/>capacity()\ :\ size;}
\DoxyCodeLine{00145\ \ \ \ \ \mbox{\hyperlink{memoryIO_8h_a5d860365491e432b125606a6f8e464bc}{memcpy}}(buffer,\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{message}}\ -\/>\ raw(),\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{readable}});}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{readable}};}
\DoxyCodeLine{00148\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{memoryIO_8cpp_source_l00165}{memcpy()}}.

\Hypertarget{classMaxOS_1_1processes_1_1SharedMessageEndpoint_a42c842d145d71738706a6034ed881f9e}\label{classMaxOS_1_1processes_1_1SharedMessageEndpoint_a42c842d145d71738706a6034ed881f9e} 
\index{MaxOS::processes::SharedMessageEndpoint@{MaxOS::processes::SharedMessageEndpoint}!write@{write}}
\index{write@{write}!MaxOS::processes::SharedMessageEndpoint@{MaxOS::processes::SharedMessageEndpoint}}
\doxysubsubsection{\texorpdfstring{write()}{write()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{int}} Shared\+Message\+Endpoint\+::write (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \texorpdfstring{$\ast$}{*}}]{buffer,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{size\+\_\+t}}}]{size,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{size\+\_\+t}}}]{flags }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



Handles writing to the message endpoint resource by writing the buffer as a message. 


\begin{DoxyParams}{Parameters}
{\em buffer} & The message to write to the endpoint \\
\hline
{\em size} & The size of the message \\
\hline
{\em flags} & Unused \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The amount of bytes written 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classMaxOS_1_1processes_1_1Resource_a9dbd5fa42056a2fc4d82881f7b7f9838}{Max\+OS\+::processes\+::\+Resource}}.



Definition at line \mbox{\hyperlink{ipc_8cpp_source_l00158}{158}} of file \mbox{\hyperlink{ipc_8cpp_source}{ipc.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ \ \ m\_message\_lock.\mbox{\hyperlink{classMaxOS_1_1common_1_1Spinlock_a27a03c3d6b4cdd677e7d16e59689e38e}{lock}}();}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \ \ \textcolor{comment}{//\ Create\ the\ message}}
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{keyword}{auto}*\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{new\_message}}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer}{buffer\_t}}(size);}
\DoxyCodeLine{00164\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{new\_message}}-\/>copy\_from(buffer,\ size);}
\DoxyCodeLine{00165\ \ \ \ \ m\_queue.push\_back(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{new\_message}});}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \ \ m\_message\_lock.\mbox{\hyperlink{classMaxOS_1_1common_1_1Spinlock_a7c26334ccfa43ef932ef3c73e2c11492}{unlock}}();}
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{keywordflow}{return}\ size;}
\DoxyCodeLine{00169\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{spinlock_8cpp_source_l00024}{Max\+OS\+::common\+::\+Spinlock\+::lock()}}, and \mbox{\hyperlink{spinlock_8cpp_source_l00032}{Max\+OS\+::common\+::\+Spinlock\+::unlock()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/include/processes/\mbox{\hyperlink{ipc_8h}{ipc.\+h}}\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/src/processes/\mbox{\hyperlink{ipc_8cpp}{ipc.\+cpp}}\end{DoxyCompactItemize}
