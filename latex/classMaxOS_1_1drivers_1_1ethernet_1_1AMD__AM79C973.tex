\doxysection{Max\+OS\+::drivers\+::ethernet\+::AMD\+\_\+\+AM79\+C973 Class Reference}
\hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973}{}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973}\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}


\doxylink{classMaxOS_1_1drivers_1_1Driver}{Driver} for the AMD AM79\+C973 Ethernet Controller.  




{\ttfamily \#include $<$amd\+\_\+am79c973.\+h$>$}

Inheritance diagram for Max\+OS\+::drivers\+::ethernet\+::AMD\+\_\+\+AM79\+C973\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=1.609195cm]{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a600f7e035ce585e05d89084856201240}{AMD\+\_\+\+AM79\+C973}} (\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1PCIDeviceDescriptor}{hardwarecommunication\+::\+PCIDevice\+Descriptor}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dev}})
\begin{DoxyCompactList}\small\item\em Constructs a new \doxylink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973}{AMD\+\_\+\+AM79\+C973} Ethernet driver, reads the MAC address and sets up the initialisation block and buffer descriptors. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a1f92c35763581a0454dac5783d693c33}{reset}} () \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em This function resets the device. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a53c3ac082e5eab68d8543b9b90cc21bd}{activate}} () \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em This function activates the device and starts it (Runs when the driver-\/manger calls activate\+All()) \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_af71695cfd40bf9bc49ac865521264fd9}{deactivate}} () \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em Deactivate the driver. \end{DoxyCompactList}\item 
\mbox{\hyperlink{string_8h_a4a6e5834af96b66d8015f5a24c09e1b3}{string}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a287dbe7304c0b56850b9b339c1299618}{vendor\+\_\+name}} () \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em Get who created the device. \end{DoxyCompactList}\item 
\mbox{\hyperlink{string_8h_a4a6e5834af96b66d8015f5a24c09e1b3}{string}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a426beb375fff8d28dbc4aee45a0c71b5}{device\+\_\+name}} () \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em Get the device name of the driver. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a8edad1ca75667f1e4d407178b5493f7a}{handle\+\_\+interrupt}} () \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em This function handles the interrupt for the device. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_ae298c2fab9186c4b36f1e0f3ec9bad64}{do\+\_\+send}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \texorpdfstring{$\ast$}{*}buffer, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} size) \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em This function sends a package. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_aca8230bce11a76894d893998c52204cb}{get\+\_\+media\+\_\+access\+\_\+control\+\_\+address}} () \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em This function gets the MAC address. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver}{Max\+OS\+::drivers\+::ethernet\+::\+Ethernet\+Driver}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver_a4b165209d0c09c6c7684bf4650f1fca7}{send}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \texorpdfstring{$\ast$}{*}buffer, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} size)
\begin{DoxyCompactList}\small\item\em send data to the network via the driver backend \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1Driver}{Max\+OS\+::drivers\+::\+Driver}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{virtual}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1Driver_a87dab1f49da667742d00da02d6e8ef8e}{initialise}} ()
\begin{DoxyCompactList}\small\item\em Initialise the driver. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classMaxOS_1_1common_1_1EventManager}{Max\+OS\+::common\+::\+Event\+Manager$<$ Ethernet\+Driver\+Events $>$}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1common_1_1EventManager_ab8e353bbb4b256d394968a02cc1447ca}{connect\+\_\+event\+\_\+handler}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1EventHandler}{Event\+Handler}}$<$ Ethernet\+Driver\+Events $>$ \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{handler}})
\begin{DoxyCompactList}\small\item\em connect an event handler to the event manager if it is not already connected \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1common_1_1EventManager_a6f0dbfda9c65048761e3728c2acddb1d}{disconnect\+\_\+event\+\_\+handler}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1EventHandler}{Event\+Handler}}$<$ Ethernet\+Driver\+Events $>$ \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{handler}})
\begin{DoxyCompactList}\small\item\em disconnect an event handler from the event manager if it is connected \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Vector}{Vector}}$<$ \mbox{\hyperlink{classMaxOS_1_1common_1_1Event}{Event}}$<$ Ethernet\+Driver\+Events $>$ \texorpdfstring{$\ast$}{*} $>$ \mbox{\hyperlink{classMaxOS_1_1common_1_1EventManager_a5f25cd0e7747ab76ee9e057ad43966c9}{raise\+\_\+event}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Event}{Event}}$<$ Ethernet\+Driver\+Events $>$ \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{event}})
\begin{DoxyCompactList}\small\item\em Calls the on\+\_\+event function of all the event m\+\_\+handlers connected to the event manager and returns a list of the results. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Handler}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{virtual}} \mbox{\hyperlink{cpu_8h_a605489186b2c614af947b15ae8a77418}{system\+::cpu\+\_\+status\+\_\+t}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler_a3f4303652151fbba92aa7b4513ae0875}{handle\+\_\+interrupt}} (\mbox{\hyperlink{cpu_8h_a605489186b2c614af947b15ae8a77418}{system\+::cpu\+\_\+status\+\_\+t}} \texorpdfstring{$\ast$}{*}status)
\begin{DoxyCompactList}\small\item\em Handles an interrupt and returns the status. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Static Public Member Functions inherited from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver}{Max\+OS\+::drivers\+::ethernet\+::\+Ethernet\+Driver}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{static}} \mbox{\hyperlink{ethernet_8h_a65f54d2d9dfdb9eafd1affd62abe8d18}{Media\+Access\+Control\+Address}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver_a2cfbe13ac9f10a6f9dc0c065ca980cff}{create\+\_\+media\+\_\+access\+\_\+control\+\_\+address}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{digit1}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{digit2}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{digit3}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{digit4}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{digit5}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{digit6}})
\begin{DoxyCompactList}\small\item\em Create a Media Access Control Address. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions inherited from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver}{Max\+OS\+::drivers\+::ethernet\+::\+Ethernet\+Driver}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver_a788f4c5744af1a13a4dd0a09c82d8a1b}{fire\+\_\+data\+\_\+received}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \texorpdfstring{$\ast$}{*}buffer, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} size)
\begin{DoxyCompactList}\small\item\em Handle the recieved data. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver_afc00907b5c51714928b3ebac5439a0ea}{fire\+\_\+data\+\_\+sent}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \texorpdfstring{$\ast$}{*}buffer, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} size)
\begin{DoxyCompactList}\small\item\em send data \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions inherited from \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Handler}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler_a79b1054c04bbcc2c72a6d6938212909c}{Interrupt\+Handler}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} interrupt\+\_\+number, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{int64\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{redirect}}=-\/1, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{redirect\+\_\+index}}=0)
\begin{DoxyCompactList}\small\item\em Creates a new interrupt handler and registers it with the interrupt manager. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler_a12b87c89015a61b702184070354e7876}{\texorpdfstring{$\sim$}{\string~}\+Interrupt\+Handler}} ()
\begin{DoxyCompactList}\small\item\em Destroys the interrupt handler and unregisters it from the interrupt manager. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes inherited from \mbox{\hyperlink{classMaxOS_1_1common_1_1EventManager}{Max\+OS\+::common\+::\+Event\+Manager$<$ Ethernet\+Driver\+Events $>$}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Vector}{Vector}}$<$ \mbox{\hyperlink{classMaxOS_1_1common_1_1EventHandler}{Event\+Handler}}$<$ Ethernet\+Driver\+Events $>$ \texorpdfstring{$\ast$}{*} $>$ \mbox{\hyperlink{classMaxOS_1_1common_1_1EventManager_aeb26c8e6b4a6f00ecaec79a67d7bb815}{m\+\_\+handlers}}
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes inherited from \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Handler}}}
\begin{DoxyCompactItemize}
\item 
uint8\+\_\+t \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler_aac2ba4da525d342fc83fe344780c1850}{m\+\_\+interrupt\+\_\+number}}
\begin{DoxyCompactList}\small\item\em The interrupt number this handler handles. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\doxylink{classMaxOS_1_1drivers_1_1Driver}{Driver} for the AMD AM79\+C973 Ethernet Controller. 

Definition at line \mbox{\hyperlink{amd__am79c973_8h_source_l00065}{65}} of file \mbox{\hyperlink{amd__am79c973_8h_source}{amd\+\_\+am79c973.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a600f7e035ce585e05d89084856201240}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a600f7e035ce585e05d89084856201240} 
\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}!AMD\_AM79C973@{AMD\_AM79C973}}
\index{AMD\_AM79C973@{AMD\_AM79C973}!MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}
\doxysubsubsection{\texorpdfstring{AMD\_AM79C973()}{AMD\_AM79C973()}}
{\footnotesize\ttfamily AMD\+\_\+\+AM79\+C973\+::\+AMD\+\_\+\+AM79\+C973 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1PCIDeviceDescriptor}{hardwarecommunication\+::\+PCIDevice\+Descriptor}} \texorpdfstring{$\ast$}{*}}]{dev }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Constructs a new \doxylink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973}{AMD\+\_\+\+AM79\+C973} Ethernet driver, reads the MAC address and sets up the initialisation block and buffer descriptors. 

MAX OS NET CODE\+: All the old (this) networking code poorly written and not used, this will be moved to userspace in the future but is kept here as a reference for now. 
\begin{DoxyParams}{Parameters}
{\em dev} & The PCI device descriptor for this device \\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000053}{Todo}}]move all this to initilise() \end{DoxyRefDesc}


Definition at line \mbox{\hyperlink{amd__am79c973_8cpp_source_l00026}{26}} of file \mbox{\hyperlink{amd__am79c973_8cpp_source}{amd\+\_\+am79c973.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00027\ :\ \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler}{InterruptHandler}}(0x20\ +\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dev}}-\/>interrupt),}
\DoxyCodeLine{00028\ mac\_address\_0\_port(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dev}}-\/>port\_base),}
\DoxyCodeLine{00029\ mac\_address\_2\_port(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dev}}-\/>port\_base\ +\ 0x02),}
\DoxyCodeLine{00030\ mac\_address\_4\_port(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dev}}-\/>port\_base\ +\ 0x04),}
\DoxyCodeLine{00031\ register\_data\_port(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dev}}-\/>port\_base\ +\ 0x10),}
\DoxyCodeLine{00032\ register\_address\_port(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dev}}-\/>port\_base\ +\ 0x12),}
\DoxyCodeLine{00033\ bus\_control\_register\_data\_port(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dev}}-\/>port\_base\ +\ 0x16),}
\DoxyCodeLine{00034\ reset\_port(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dev}}-\/>port\_base\ +\ 0x14),}
\DoxyCodeLine{00035\ init\_block(),}
\DoxyCodeLine{00036\ send\_buffers(),}
\DoxyCodeLine{00037\ recv\_buffers()\ \{}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{comment}{//\ No\ active\ buffer\ at\ the\ start}}
\DoxyCodeLine{00039\ \ \ \ \ current\_send\_buffer\ =\ 0;}
\DoxyCodeLine{00040\ \ \ \ \ current\_recv\_buffer\ =\ 0;}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{comment}{//Not\ active\ or\ initialised}}
\DoxyCodeLine{00043\ \ \ \ \ active\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00044\ \ \ \ \ init\_done\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ MAC\ addresses\ (split\ up\ in\ little\ endian\ order)}}
\DoxyCodeLine{00049\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{mac\_0}}\ =\ mac\_address\_0\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}()\ \%\ 256;}
\DoxyCodeLine{00050\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{mac\_1}}\ =\ mac\_address\_0\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}()\ /\ 256;}
\DoxyCodeLine{00051\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{mac\_2}}\ =\ mac\_address\_2\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}()\ \%\ 256;}
\DoxyCodeLine{00052\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{mac\_3}}\ =\ mac\_address\_2\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}()\ /\ 256;}
\DoxyCodeLine{00053\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{mac\_4}}\ =\ mac\_address\_4\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}()\ \%\ 256;}
\DoxyCodeLine{00054\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{mac\_5}}\ =\ mac\_address\_4\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}()\ /\ 256;}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{comment}{//\ Combine\ MAC\ addresses\ into\ one\ 48\ bit\ number}}
\DoxyCodeLine{00057\ \ \ \ \ own\_mac\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{mac\_5}}\ <<\ 40}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{mac\_4}}\ <<\ 32}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{mac\_3}}\ <<\ 24}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{mac\_2}}\ <<\ 16}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{mac\_1}}\ <<\ 8}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{mac\_0}};}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{comment}{//\ Set\ the\ device\ to\ 32\ bit\ mode}}
\DoxyCodeLine{00065\ \ \ \ \ register\_address\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(20);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ write\ to\ register\ 20}}
\DoxyCodeLine{00066\ \ \ \ \ bus\_control\_register\_data\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0x102);\ \ \ \ \textcolor{comment}{//\ write\ desired\ data}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{comment}{//\ Reset\ the\ stop\ bit\ (tell\ device\ it's\ not\ supposed\ to\ be\ reset\ now)}}
\DoxyCodeLine{00069\ \ \ \ \ register\_address\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ write\ to\ register\ 0}}
\DoxyCodeLine{00070\ \ \ \ \ register\_data\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0x04);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ write\ desired\ data}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{comment}{//\ Set\ the\ initialization\ block}}
\DoxyCodeLine{00073\ \ \ \ \ init\_block.mode\ =\ 0x0000;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Promiscuous\ mode\ =\ false\ \ \ (\ promiscuous\ mode\ tells\ it\ to\ receive\ all\ packets,\ not\ just\ broadcasts\ and\ those\ for\ its\ own\ MAC\ address)}}
\DoxyCodeLine{00074\ \ \ \ \ init\_block.reserved1\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reserved}}
\DoxyCodeLine{00075\ \ \ \ \ init\_block.num\_send\_buffers\ =\ 3;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Means\ 8\ because\ 2\string^8\ (number\ of\ bits\ used)}}
\DoxyCodeLine{00076\ \ \ \ \ init\_block.reserved2\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reserved}}
\DoxyCodeLine{00077\ \ \ \ \ init\_block.num\_recv\_buffers\ =\ 3;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Means\ 8\ because\ 2\string^8\ (number\ of\ bits\ used)}}
\DoxyCodeLine{00078\ \ \ \ \ init\_block.physical\_address\ =\ own\_mac;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ the\ physical\ address\ to\ the\ MAC\ address}}
\DoxyCodeLine{00079\ \ \ \ \ init\_block.reserved3\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reserved}}
\DoxyCodeLine{00080\ \ \ \ \ init\_block.logical\_address\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ None\ for\ now}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{comment}{//\ Set\ Buffer\ descriptors\ memory}}
\DoxyCodeLine{00083\ \ \ \ \ send\_buffer\_descr\ =\ (\mbox{\hyperlink{structMaxOS_1_1drivers_1_1ethernet_1_1BufferDescriptor}{BufferDescriptor}}*)\ (\mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_a983c849ff604367f7c8a0e70172bb331}{MemoryManager::kmalloc}}((\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1drivers_1_1ethernet_1_1BufferDescriptor}{BufferDescriptor}})\ *\ 8)\ +\ 15));\ \ \textcolor{comment}{//\ Allocate\ memory\ for\ 8\ buffer\ descriptors}}
\DoxyCodeLine{00084\ \ \ \ \ init\_block.send\_buffer\_descr\_address\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}})\ send\_buffer\_descr;}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \ \ recv\_buffer\_descr\ =\ (\mbox{\hyperlink{structMaxOS_1_1drivers_1_1ethernet_1_1BufferDescriptor}{BufferDescriptor}}*)\ (\mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_a983c849ff604367f7c8a0e70172bb331}{MemoryManager::kmalloc}}((\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1drivers_1_1ethernet_1_1BufferDescriptor}{BufferDescriptor}})\ *\ 8)\ +\ 15));\ \ \textcolor{comment}{//\ Allocate\ memory\ for\ 8\ buffer\ descriptors}}
\DoxyCodeLine{00087\ \ \ \ \ init\_block.recv\_buffer\_descr\_address\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}})\ recv\_buffer\_descr;}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}}\ i\ =\ 0;\ i\ <\ 8;\ i++)\ \{}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Send\ buffer\ descriptors}}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ send\_buffer\_descr[i].address\ =\ (((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}})\ \&send\_buffers[i])\ +\ 15)\ \&\ \string~(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}})\ 0xF;\ \ \ \ \ \ \ \textcolor{comment}{//\ Same\ as\ above}}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ send\_buffer\_descr[i].flags\ =}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ 0x7FF\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Length\ of\ descriptor}}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ |\ 0xF000;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ it\ to\ send\ buffer}}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ send\_buffer\_descr[i].flags2\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ "{}Flags2"{}\ shows\ whether\ an\ error\ occurred\ while\ sending\ and\ should\ therefore\ be\ set\ to\ 0\ by\ the\ drive}}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ send\_buffer\_descr[i].avail\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ IF\ it\ is\ in\ use}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Receive}}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ recv\_buffer\_descr[i].address\ =\ (((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}})\ \&recv\_buffers[i])\ +\ 15)\ \&\ \string~(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}})\ 0xF;\ \ \ \textcolor{comment}{//\ Same\ as\ above}}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ recv\_buffer\_descr[i].flags\ =}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ 0xF7FF\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Length\ of\ descriptor\ \ \ \ \ \ \ \ (This\ 0xF7FF\ is\ what\ was\ causing\ the\ problem,\ it\ used\ to\ be\ 0x7FF)}}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ |\ 0x80000000;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ it\ to\ receive\ buffer}}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ recv\_buffer\_descr[i].flags2\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ "{}Flags2"{}\ shows\ whether\ an\ error\ occurred\ while\ sending\ and\ should\ therefore\ be\ set\ to\ 0\ by\ the\ drive}}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ recv\_buffer\_descr[i].avail\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ IF\ it\ is\ in\ use}}
\DoxyCodeLine{00106\ \ \ \ \ \}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{comment}{//\ Move\ initialization\ block\ into\ device}}
\DoxyCodeLine{00109\ \ \ \ \ register\_address\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(1);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ write\ to\ register\ 1}}
\DoxyCodeLine{00110\ \ \ \ \ register\_data\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}})\ (\&init\_block)\ \&}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0xFFFF);\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ write\ address\ data}}
\DoxyCodeLine{00112\ \ \ \ \ register\_address\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(2);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ write\ to\ register\ 2}}
\DoxyCodeLine{00113\ \ \ \ \ register\_data\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}})\ (\&init\_block)\ >>\ 16)\ \&}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0xFFFF);\ \ \ \ \ \textcolor{comment}{//\ write\ shifted\ address\ data}}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{memorymanagement_8cpp_source_l00085}{Max\+OS\+::memory\+::\+Memory\+Manager\+::kmalloc()}}, \mbox{\hyperlink{port_8cpp_source_l00105}{Max\+OS\+::hardwarecommunication\+::\+Port16\+Bit\+::read()}}, and \mbox{\hyperlink{port_8cpp_source_l00095}{Max\+OS\+::hardwarecommunication\+::\+Port16\+Bit\+::write()}}.



\doxysubsection{Member Function Documentation}
\Hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a53c3ac082e5eab68d8543b9b90cc21bd}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a53c3ac082e5eab68d8543b9b90cc21bd} 
\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}!activate@{activate}}
\index{activate@{activate}!MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}
\doxysubsubsection{\texorpdfstring{activate()}{activate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} AMD\+\_\+\+AM79\+C973\+::activate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



This function activates the device and starts it (Runs when the driver-\/manger calls activate\+All()) 

\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000054}{Todo}}]Re-\/implement this class \end{DoxyRefDesc}


Reimplemented from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1Driver_a92276c08d77279b6a86c900190ef797b}{Max\+OS\+::drivers\+::\+Driver}}.



Definition at line \mbox{\hyperlink{amd__am79c973_8cpp_source_l00127}{127}} of file \mbox{\hyperlink{amd__am79c973_8cpp_source}{amd\+\_\+am79c973.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \ \ init\_done\ =\ \textcolor{keyword}{false};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ initDone\ to\ false}}
\DoxyCodeLine{00132\ \ \ \ \ register\_address\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ write\ to\ register\ 0}}
\DoxyCodeLine{00133\ \ \ \ \ register\_data\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0x41);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Enable\ Interrupts\ and\ start\ the\ device}}
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{keywordflow}{while}(!init\_done);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Wait\ for\ initDone\ to\ be\ set\ to\ true}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ register\_address\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(4);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ read\ from\ register\ 4}}
\DoxyCodeLine{00137\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}}\ =\ register\_data\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ current\ data}}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \ \ register\_address\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(4);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ write\ to\ register\ 4}}
\DoxyCodeLine{00140\ \ \ \ \ register\_data\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}}\ |}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0xC00);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Bitwise\ OR\ function\ on\ data\ (This\ automatically\ enlarges\ packets\ smaller\ than\ 64\ bytes\ to\ that\ size\ and\ removes\ some\ relatively\ superfluous\ information\ from\ received\ packets.)}}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ register\_address\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ write\ to\ register\ 0}}
\DoxyCodeLine{00144\ \ \ \ \ register\_data\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(}
\DoxyCodeLine{00145\ \ \ \ \ 0x42);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ that\ it\ is\ initialised\ and\ can\ begin\ operating}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ active\ =\ \textcolor{keyword}{true};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ active\ to\ true}}
\DoxyCodeLine{00148\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{port_8cpp_source_l00105}{Max\+OS\+::hardwarecommunication\+::\+Port16\+Bit\+::read()}}, and \mbox{\hyperlink{port_8cpp_source_l00095}{Max\+OS\+::hardwarecommunication\+::\+Port16\+Bit\+::write()}}.

\Hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_af71695cfd40bf9bc49ac865521264fd9}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_af71695cfd40bf9bc49ac865521264fd9} 
\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}!deactivate@{deactivate}}
\index{deactivate@{deactivate}!MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}
\doxysubsubsection{\texorpdfstring{deactivate()}{deactivate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} AMD\+\_\+\+AM79\+C973\+::deactivate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



Deactivate the driver. 



Reimplemented from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1Driver_aa8d91fd440659b56c4ecf5c877925210}{Max\+OS\+::drivers\+::\+Driver}}.



Definition at line \mbox{\hyperlink{amd__am79c973_8cpp_source_l00305}{305}} of file \mbox{\hyperlink{amd__am79c973_8cpp_source}{amd\+\_\+am79c973.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00306\ }
\DoxyCodeLine{00307\ \}}

\end{DoxyCode}
\Hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a426beb375fff8d28dbc4aee45a0c71b5}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a426beb375fff8d28dbc4aee45a0c71b5} 
\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}!device\_name@{device\_name}}
\index{device\_name@{device\_name}!MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}
\doxysubsubsection{\texorpdfstring{device\_name()}{device\_name()}}
{\footnotesize\ttfamily \mbox{\hyperlink{string_8h_a4a6e5834af96b66d8015f5a24c09e1b3}{string}} AMD\+\_\+\+AM79\+C973\+::device\+\_\+name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



Get the device name of the driver. 

\begin{DoxyReturn}{Returns}
The device name of the driver 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1Driver_a2870bc0edff29cd802f10e6acc50cf89}{Max\+OS\+::drivers\+::\+Driver}}.



Definition at line \mbox{\hyperlink{amd__am79c973_8cpp_source_l00313}{313}} of file \mbox{\hyperlink{amd__am79c973_8cpp_source}{amd\+\_\+am79c973.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00314\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}PCnet-\/Fast\ III\ (Am79C973)"{}};}
\DoxyCodeLine{00315\ \}}

\end{DoxyCode}
\Hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_ae298c2fab9186c4b36f1e0f3ec9bad64}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_ae298c2fab9186c4b36f1e0f3ec9bad64} 
\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}!do\_send@{do\_send}}
\index{do\_send@{do\_send}!MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}
\doxysubsubsection{\texorpdfstring{do\_send()}{do\_send()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} AMD\+\_\+\+AM79\+C973\+::do\+\_\+send (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{buffer,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



This function sends a package. 


\begin{DoxyParams}{Parameters}
{\em buffer} & The buffer to send \\
\hline
{\em size} & The size of the buffer \\
\hline
\end{DoxyParams}


Reimplemented from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver_ad13f1122a7bedf091f8c9ad6388e6094}{Max\+OS\+::drivers\+::ethernet\+::\+Ethernet\+Driver}}.



Definition at line \mbox{\hyperlink{amd__am79c973_8cpp_source_l00210}{210}} of file \mbox{\hyperlink{amd__am79c973_8cpp_source}{amd\+\_\+am79c973.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \ \ \ \ \textcolor{keywordflow}{while}(!active);}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{send\_descriptor}}\ =\ current\_send\_buffer;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ where\ data\ has\ been\ written\ to}}
\DoxyCodeLine{00215\ \ \ \ \ current\_send\_buffer\ =\ (current\_send\_buffer\ +\ 1)\ \%}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 8;\ \ \ \ \textcolor{comment}{//\ Move\ send\ buffer\ to\ next\ send\ buffer\ (div\ by\ 8\ so\ that\ it\ is\ cycled)\ (this\ allows\ for\ data\ to\ be\ sent\ from\ different\ m\_tasks\ in\ parallel)}}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \ \ \textcolor{keywordflow}{if}(size\ >}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ 1518)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ attempt\ to\ send\ more\ than\ 1518\ bytes\ at\ once\ it\ will\ be\ too\ large}}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ size\ =\ 1518;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Discard\ all\ data\ after\ that\ \ (Generally\ if\ data\ is\ bigger\ than\ that\ at\ driver\ level\ then\ a\ higher\ up\ network\ layer\ must\ have\ made\ a\ mistake)}}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00222\ \ \ \ \ \}}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ \ \ \textcolor{comment}{//\ What\ this\ loop\ does\ is\ copy\ the\ information\ passed\ as\ the\ parameter\ buffer\ (src)\ to\ the\ send\ buffer\ in\ the\ ram\ (dst)\ which\ the\ card\ will\ then\ use\ to\ send\ the\ data}}
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}}*\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{src}}\ =\ buffer\ +\ size\ -\/}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ src\ pointer\ to\ the\ end\ of\ the\ data\ that\ is\ being\ sent}}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ *\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dst}}\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}}*)\ (send\_buffer\_descr[\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{send\_descriptor}}].address\ +\ size\ -\/}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1);\ \ \ \ \ \ \ \textcolor{comment}{//\ Take\ the\ buffer\ that\ has\ been\ selected}}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{src}}\ >=}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ buffer;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ While\ there\ is\ still\ information\ in\ the\ buffer\ that\ hasn't\ been\ written\ to\ src}}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{src}}-\/-\/,\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dst}}-\/-\/\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Move\ 2\ pointers\ to\ the\ end\ of\ the\ buffers}}
\DoxyCodeLine{00232\ \ \ \ \ )\ \{}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ *\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dst}}\ =\ *\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{src}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Copy\ data\ from\ source\ buffer\ to\ destination\ buffer}}
\DoxyCodeLine{00234\ \ \ \ \ \}}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \ \ \ \ send\_buffer\_descr[\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{send\_descriptor}}].avail\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ that\ this\ buffer\ is\ in\ use}}
\DoxyCodeLine{00238\ \ \ \ \ send\_buffer\_descr[\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{send\_descriptor}}].flags2\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Clear\ any\ previous\ error\ messages}}
\DoxyCodeLine{00239\ \ \ \ \ send\_buffer\_descr[\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{send\_descriptor}}].flags\ =\ 0x8300F000\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Encode\ the\ size\ of\ what\ is\ being\ sent}}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ ((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\ ((-\/size)\ \&\ 0xFFF));}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \ \ register\_address\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ write\ to\ register\ 0}}
\DoxyCodeLine{00243\ \ \ \ \ register\_data\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(}
\DoxyCodeLine{00244\ \ \ \ \ 0x48);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ send\ the\ data\ currently\ in\ the\ buffer}}
\DoxyCodeLine{00245\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{port_8cpp_source_l00095}{Max\+OS\+::hardwarecommunication\+::\+Port16\+Bit\+::write()}}.

\Hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_aca8230bce11a76894d893998c52204cb}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_aca8230bce11a76894d893998c52204cb} 
\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}!get\_media\_access\_control\_address@{get\_media\_access\_control\_address}}
\index{get\_media\_access\_control\_address@{get\_media\_access\_control\_address}!MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}
\doxysubsubsection{\texorpdfstring{get\_media\_access\_control\_address()}{get\_media\_access\_control\_address()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\+\_\+t}} AMD\+\_\+\+AM79\+C973\+::get\+\_\+media\+\_\+access\+\_\+control\+\_\+address (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



This function gets the MAC address. 

\begin{DoxyReturn}{Returns}
The MAC address 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver_a42c15c21c898dc336fa4423c92e2461d}{Max\+OS\+::drivers\+::ethernet\+::\+Ethernet\+Driver}}.



Definition at line \mbox{\hyperlink{amd__am79c973_8cpp_source_l00300}{300}} of file \mbox{\hyperlink{amd__am79c973_8cpp_source}{amd\+\_\+am79c973.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00301\ \ \ \ \ \textcolor{keywordflow}{while}(own\_mac\ ==\ 0);}
\DoxyCodeLine{00302\ \ \ \ \ \textcolor{keywordflow}{return}\ own\_mac;}
\DoxyCodeLine{00303\ \}}

\end{DoxyCode}
\Hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a8edad1ca75667f1e4d407178b5493f7a}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a8edad1ca75667f1e4d407178b5493f7a} 
\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}!handle\_interrupt@{handle\_interrupt}}
\index{handle\_interrupt@{handle\_interrupt}!MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}
\doxysubsubsection{\texorpdfstring{handle\_interrupt()}{handle\_interrupt()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} AMD\+\_\+\+AM79\+C973\+::handle\+\_\+interrupt (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



This function handles the interrupt for the device. 



Reimplemented from \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler_abd792bc53ec7dd1b70c8386853cc3c33}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Handler}}.



Definition at line \mbox{\hyperlink{amd__am79c973_8cpp_source_l00168}{168}} of file \mbox{\hyperlink{amd__am79c973_8cpp_source}{amd\+\_\+am79c973.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{comment}{//\ Similar\ to\ PIC,\ data\ needs\ to\ be\ read\ when\ an\ interrupt\ is\ sent,\ or\ it\ hangs}}
\DoxyCodeLine{00171\ \ \ \ \ register\_address\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ read\ from\ register\ 0}}
\DoxyCodeLine{00172\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}}\ =\ register\_data\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ current\ data}}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{comment}{//\ Note:\ Cant\ be\ switch\ case\ as\ multiple\ errors\ can\ occur\ at\ the\ same\ time}}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{comment}{//\ Errors}}
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{keywordflow}{if}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}}\ \&\ 0x8000)\ ==\ 0x8000)}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1Logger_a4cc5871bd96523f5c50a2ac8ccbf44f3}{Logger::WARNING}}()\ <<\ \textcolor{stringliteral}{"{}AMD\ am79c973\ ERROR:\ "{}};}
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{keywordflow}{if}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}}\ \&\ 0x2000)\ ==\ 0x2000)}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1Logger_a4cc5871bd96523f5c50a2ac8ccbf44f3}{Logger::WARNING}}()\ <<\ \textcolor{stringliteral}{"{}COLLISION\ ERROR\(\backslash\)n"{}};}
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{keywordflow}{if}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}}\ \&\ 0x1000)\ ==\ 0x1000)}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1Logger_a4cc5871bd96523f5c50a2ac8ccbf44f3}{Logger::WARNING}}()\ <<\ \textcolor{stringliteral}{"{}MISSED\ FRAME\(\backslash\)n"{}};}
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{keywordflow}{if}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}}\ \&\ 0x0800)\ ==\ 0x0800)}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1Logger_a4cc5871bd96523f5c50a2ac8ccbf44f3}{Logger::WARNING}}()\ <<\ \textcolor{stringliteral}{"{}MEMORY\ ERROR\(\backslash\)n"{}};}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{comment}{//\ Responses}}
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keywordflow}{if}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}}\ \&\ 0x0400)\ ==\ 0x0400)\ fetch\_data\_received();}
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{keywordflow}{if}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}}\ \&\ 0x0200)\ ==\ 0x0200)\ fetch\_data\_sent();}
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{keywordflow}{if}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}}\ \&\ 0x0100)\ ==\ 0x0100)\ init\_done\ =\ \textcolor{keyword}{true};\textcolor{comment}{//}}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{comment}{//\ Reply\ that\ it\ was\ received}}
\DoxyCodeLine{00193\ \ \ \ \ register\_address\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ write\ to\ register\ 0}}
\DoxyCodeLine{00194\ \ \ \ \ register\_data\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ that\ the\ interrupt\ was\ received}}
\DoxyCodeLine{00195\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{port_8cpp_source_l00105}{Max\+OS\+::hardwarecommunication\+::\+Port16\+Bit\+::read()}}, \mbox{\hyperlink{logger_8cpp_source_l00205}{Max\+OS\+::\+Logger\+::\+WARNING()}}, and \mbox{\hyperlink{port_8cpp_source_l00095}{Max\+OS\+::hardwarecommunication\+::\+Port16\+Bit\+::write()}}.

\Hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a1f92c35763581a0454dac5783d693c33}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a1f92c35763581a0454dac5783d693c33} 
\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}!reset@{reset}}
\index{reset@{reset}!MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} AMD\+\_\+\+AM79\+C973\+::reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



This function resets the device. 

\begin{DoxyReturn}{Returns}
The amount of ms to wait 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1Driver_a2371d6b69c1bf351e9c80bde265ac8be}{Max\+OS\+::drivers\+::\+Driver}}.



Definition at line \mbox{\hyperlink{amd__am79c973_8cpp_source_l00155}{155}} of file \mbox{\hyperlink{amd__am79c973_8cpp_source}{amd\+\_\+am79c973.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00157\ \ \ \ \ reset\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}();}
\DoxyCodeLine{00158\ \ \ \ \ reset\_port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0);}
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{keywordflow}{return}\ 10;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 10\ means\ wait\ for\ 10ms}}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{port_8cpp_source_l00105}{Max\+OS\+::hardwarecommunication\+::\+Port16\+Bit\+::read()}}, and \mbox{\hyperlink{port_8cpp_source_l00095}{Max\+OS\+::hardwarecommunication\+::\+Port16\+Bit\+::write()}}.

\Hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a287dbe7304c0b56850b9b339c1299618}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a287dbe7304c0b56850b9b339c1299618} 
\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}!vendor\_name@{vendor\_name}}
\index{vendor\_name@{vendor\_name}!MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}
\doxysubsubsection{\texorpdfstring{vendor\_name()}{vendor\_name()}}
{\footnotesize\ttfamily \mbox{\hyperlink{string_8h_a4a6e5834af96b66d8015f5a24c09e1b3}{string}} AMD\+\_\+\+AM79\+C973\+::vendor\+\_\+name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



Get who created the device. 

\begin{DoxyReturn}{Returns}
The vendor name of the driver 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1Driver_a1d0f9643af1af6964724b898cecd1bae}{Max\+OS\+::drivers\+::\+Driver}}.



Definition at line \mbox{\hyperlink{amd__am79c973_8cpp_source_l00309}{309}} of file \mbox{\hyperlink{amd__am79c973_8cpp_source}{amd\+\_\+am79c973.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00310\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}AMD"{}};}
\DoxyCodeLine{00311\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/include/drivers/ethernet/\mbox{\hyperlink{amd__am79c973_8h}{amd\+\_\+am79c973.\+h}}\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/src/drivers/ethernet/\mbox{\hyperlink{amd__am79c973_8cpp}{amd\+\_\+am79c973.\+cpp}}\end{DoxyCompactItemize}
