\doxysection{Max\+OS\+::drivers\+::ethernet\+::AMD\+\_\+\+AM79\+C973 Class Reference}
\hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973}{}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973}\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}


{\ttfamily \#include $<$amd\+\_\+am79c973.\+h$>$}

Inheritance diagram for Max\+OS\+::drivers\+::ethernet\+::AMD\+\_\+\+AM79\+C973\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=1.609195cm]{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a08afe3edf22e71249b94731a0d3e7fad}{AMD\+\_\+\+AM79\+C973}} (\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1PeripheralComponentInterconnectDeviceDescriptor}{hardwarecommunication\+::\+Peripheral\+Component\+Interconnect\+Device\+Descriptor}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{device\+\_\+descriptor}})
\item 
\mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_af625f7f64ef62f0429ca030aeaca40ab}{\texorpdfstring{$\sim$}{\string~}\+AMD\+\_\+\+AM79\+C973}} ()
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a1f92c35763581a0454dac5783d693c33}{reset}} () \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em This function resets the device. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a53c3ac082e5eab68d8543b9b90cc21bd}{activate}} () \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em This function activates the device and starts it (Runs when the driver-\/manger calls activate\+All()) \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_af71695cfd40bf9bc49ac865521264fd9}{deactivate}} () \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em deactivate the driver \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespaceMaxOS_afa22b691550d34d82dd6a5e3f77b31cb}{string}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a287dbe7304c0b56850b9b339c1299618}{vendor\+\_\+name}} () \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em Get who created the device. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespaceMaxOS_afa22b691550d34d82dd6a5e3f77b31cb}{string}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a426beb375fff8d28dbc4aee45a0c71b5}{device\+\_\+name}} () \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em Get the device name of the driver. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a8edad1ca75667f1e4d407178b5493f7a}{handle\+\_\+interrupt}} () \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em This function handles the interrupt for the device. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a3ccea4e9d4dd97d5e60f795fcfdc06f6}{Do\+Send}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \texorpdfstring{$\ast$}{*}buffer, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{ext2_8h_aaba88b24a21a6c70c895c0d55f4a69a0}{size}}) \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em This function sends a package. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_ae13b08554a3a18a35ea5f4ff50aafcf2}{Get\+Media\+Access\+Control\+Address}} () \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em This function gets the MAC address. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver}{Max\+OS\+::drivers\+::ethernet\+::\+Ethernet\+Driver}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver_a4f3a23191fb094f9aaf9850d92b92edf}{Ethernet\+Driver}} ()
\begin{DoxyCompactList}\small\item\em \+\_\+\+\_\+\+ETHERNET DRIVER\+\_\+\+\_\+\+\_\+ \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver_a2f2b841c2ff58da54140154a84c0151f}{\texorpdfstring{$\sim$}{\string~}\+Ethernet\+Driver}} ()
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver_a1c818854c5dbe5c784ac1fdef3621806}{Send}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \texorpdfstring{$\ast$}{*}buffer, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{ext2_8h_aaba88b24a21a6c70c895c0d55f4a69a0}{size}})
\begin{DoxyCompactList}\small\item\em Send data to the network via the driver backend. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1Driver}{Max\+OS\+::drivers\+::\+Driver}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1drivers_1_1Driver_af0658d103e3e810a8e9ef0a53bb2e261}{Driver}} ()
\item 
\mbox{\hyperlink{classMaxOS_1_1drivers_1_1Driver_ac7645eea8d3ce2bc39ddbda5e840297a}{\texorpdfstring{$\sim$}{\string~}\+Driver}} ()
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{virtual}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1Driver_a87dab1f49da667742d00da02d6e8ef8e}{initialise}} ()
\begin{DoxyCompactList}\small\item\em Initialise the driver. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classMaxOS_1_1common_1_1EventManager}{Max\+OS\+::common\+::\+Event\+Manager$<$ Ethernet\+Driver\+Events $>$}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1EventManager_ae78ca3d4cc0c28d02475928d0116d297}{Event\+Manager}} ()
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1EventManager_afc81b98a6480f4aab404e2ed79765bfc}{\texorpdfstring{$\sim$}{\string~}\+Event\+Manager}} ()
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1common_1_1EventManager_ab8e353bbb4b256d394968a02cc1447ca}{connect\+\_\+event\+\_\+handler}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1EventHandler}{Event\+Handler}}$<$ Ethernet\+Driver\+Events $>$ \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{handler}})
\begin{DoxyCompactList}\small\item\em Connect an event handler to the event manager if it is not already connected. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1common_1_1EventManager_a6f0dbfda9c65048761e3728c2acddb1d}{disconnect\+\_\+event\+\_\+handler}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1EventHandler}{Event\+Handler}}$<$ Ethernet\+Driver\+Events $>$ \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{handler}})
\begin{DoxyCompactList}\small\item\em Disconnect an event handler from the event manager if it is connected. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Vector}{Vector}}$<$ \mbox{\hyperlink{classMaxOS_1_1common_1_1Event}{Event}}$<$ Ethernet\+Driver\+Events $>$ \texorpdfstring{$\ast$}{*} $>$ \mbox{\hyperlink{classMaxOS_1_1common_1_1EventManager_a5f25cd0e7747ab76ee9e057ad43966c9}{raise\+\_\+event}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Event}{Event}}$<$ Ethernet\+Driver\+Events $>$ \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{event}})
\begin{DoxyCompactList}\small\item\em Calls the on\+\_\+event function of all the event m\+\_\+handlers connected to the event manager and returns a list of the results. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Handler}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{virtual}} system\+::cpu\+\_\+status\+\_\+t \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler_a3f4303652151fbba92aa7b4513ae0875}{handle\+\_\+interrupt}} (system\+::cpu\+\_\+status\+\_\+t \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}})
\begin{DoxyCompactList}\small\item\em Handles an interrupt and returns the status. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Static Public Member Functions inherited from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver}{Max\+OS\+::drivers\+::ethernet\+::\+Ethernet\+Driver}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{static}} \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1ethernet_a65f54d2d9dfdb9eafd1affd62abe8d18}{Media\+Access\+Control\+Address}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver_a6f9da09673454cba63cb38400443667c}{Create\+Media\+Access\+Control\+Address}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{digit1}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{digit2}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{digit3}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{digit4}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{digit5}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{digit6}})
\begin{DoxyCompactList}\small\item\em Create a Media Access Control Address. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions inherited from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver}{Max\+OS\+::drivers\+::ethernet\+::\+Ethernet\+Driver}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver_ac859773753c9aa3b3cc53836bf9f2410}{Fire\+Data\+Received}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \texorpdfstring{$\ast$}{*}buffer, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{ext2_8h_aaba88b24a21a6c70c895c0d55f4a69a0}{size}})
\begin{DoxyCompactList}\small\item\em Handle the recieved data. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver_a0b59585667450732b6cf28cabc4a6a6a}{Fire\+Data\+Sent}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \texorpdfstring{$\ast$}{*}buffer, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{ext2_8h_aaba88b24a21a6c70c895c0d55f4a69a0}{size}})
\begin{DoxyCompactList}\small\item\em Send data. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions inherited from \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Handler}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler_a79b1054c04bbcc2c72a6d6938212909c}{Interrupt\+Handler}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} interrupt\+\_\+number, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{int64\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{redirect}}=-\/1, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{redirect\+\_\+index}}=0)
\item 
\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler_a12b87c89015a61b702184070354e7876}{\texorpdfstring{$\sim$}{\string~}\+Interrupt\+Handler}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes inherited from \mbox{\hyperlink{classMaxOS_1_1common_1_1EventManager}{Max\+OS\+::common\+::\+Event\+Manager$<$ Ethernet\+Driver\+Events $>$}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Vector}{Vector}}$<$ \mbox{\hyperlink{classMaxOS_1_1common_1_1EventHandler}{Event\+Handler}}$<$ Ethernet\+Driver\+Events $>$ \texorpdfstring{$\ast$}{*} $>$ \mbox{\hyperlink{classMaxOS_1_1common_1_1EventManager_aeb26c8e6b4a6f00ecaec79a67d7bb815}{m\+\_\+handlers}}
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes inherited from \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Handler}}}
\begin{DoxyCompactItemize}
\item 
uint8\+\_\+t \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler_aac2ba4da525d342fc83fe344780c1850}{m\+\_\+interrupt\+\_\+number}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{amd__am79c973_8h_source_l00027}{27}} of file \mbox{\hyperlink{amd__am79c973_8h_source}{amd\+\_\+am79c973.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a08afe3edf22e71249b94731a0d3e7fad}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a08afe3edf22e71249b94731a0d3e7fad} 
\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}!AMD\_AM79C973@{AMD\_AM79C973}}
\index{AMD\_AM79C973@{AMD\_AM79C973}!MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}
\doxysubsubsection{\texorpdfstring{AMD\_AM79C973()}{AMD\_AM79C973()}}
{\footnotesize\ttfamily AMD\+\_\+\+AM79\+C973\+::\+AMD\+\_\+\+AM79\+C973 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1PeripheralComponentInterconnectDeviceDescriptor}{hardwarecommunication\+::\+Peripheral\+Component\+Interconnect\+Device\+Descriptor}} \texorpdfstring{$\ast$}{*}}]{device\+\_\+descriptor }\end{DoxyParamCaption})}

MAX OS NET CODE\+: All the old (this) networking code poorly written and not used, this will be moved to userspace in the future but is kept here as a reference for now. 

Definition at line \mbox{\hyperlink{amd__am79c973_8cpp_source_l00018}{18}} of file \mbox{\hyperlink{amd__am79c973_8cpp_source}{amd\+\_\+am79c973.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00019\ :\ \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler}{InterruptHandler}}(0x20\ +\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dev}}\ -\/>\ interrupt),}
\DoxyCodeLine{00020\ \ \ MACAddress0Port(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dev}}\ -\/>port\_base),}
\DoxyCodeLine{00021\ \ \ MACAddress2Port(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dev}}\ -\/>port\_base\ +\ 0x02),}
\DoxyCodeLine{00022\ \ \ MACAddress4Port(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dev}}\ -\/>port\_base\ +\ 0x04),}
\DoxyCodeLine{00023\ \ \ registerDataPort(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dev}}\ -\/>port\_base\ +\ 0x10),}
\DoxyCodeLine{00024\ \ \ registerAddressPort(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dev}}\ -\/>port\_base\ +\ 0x12),}
\DoxyCodeLine{00025\ \ \ busControlRegisterDataPort(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dev}}\ -\/>port\_base\ +\ 0x16),}
\DoxyCodeLine{00026\ \ \ resetPort(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dev}}\ -\/>port\_base\ +\ 0x14),}
\DoxyCodeLine{00027\ \ \ initBlock(),}
\DoxyCodeLine{00028\ \ \ sendBuffers(),}
\DoxyCodeLine{00029\ \ \ recvBuffers()}
\DoxyCodeLine{00030\ \{}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{comment}{//\ No\ active\ buffer\ at\ the\ start}}
\DoxyCodeLine{00032\ \ \ \ \ currentSendBuffer\ =\ 0;}
\DoxyCodeLine{00033\ \ \ \ \ currentRecvBuffer\ =\ 0;}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{comment}{//Not\ active\ or\ initialized}}
\DoxyCodeLine{00036\ \ \ \ \ active\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00037\ \ \ \ \ initDone\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ MAC\ addresses\ (split\ up\ in\ little\ endian\ order)}}
\DoxyCodeLine{00040\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{MAC0}}\ =\ MACAddress0Port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}()\ \%\ 256;}
\DoxyCodeLine{00041\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{MAC1}}\ =\ MACAddress0Port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}()\ /\ 256;}
\DoxyCodeLine{00042\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{MAC2}}\ =\ MACAddress2Port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}()\ \%\ 256;}
\DoxyCodeLine{00043\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{MAC3}}\ =\ MACAddress2Port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}()\ /\ 256;}
\DoxyCodeLine{00044\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{MAC4}}\ =\ MACAddress4Port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}()\ \%\ 256;}
\DoxyCodeLine{00045\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{MAC5}}\ =\ MACAddress4Port.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}()\ /\ 256;}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{comment}{//\ Combine\ MAC\ addresses\ into\ one\ 48\ bit\ number}}
\DoxyCodeLine{00048\ \ \ \ \ ownMAC\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{MAC5}}\ <<\ 40}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{MAC4}}\ <<\ 32}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{MAC3}}\ <<\ 24}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{MAC2}}\ <<\ 16}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{MAC1}}\ <<\ 8}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{MAC0}};}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{comment}{//\ Set\ the\ device\ to\ 32\ bit\ mode}}
\DoxyCodeLine{00056\ \ \ \ \ registerAddressPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(20);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ write\ to\ register\ 20}}
\DoxyCodeLine{00057\ \ \ \ \ busControlRegisterDataPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0x102);\ \ \ \ \textcolor{comment}{//\ write\ desired\ data}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{comment}{//\ Reset\ the\ stop\ bit\ (tell\ device\ it's\ not\ supposed\ to\ be\ reset\ now)}}
\DoxyCodeLine{00060\ \ \ \ \ registerAddressPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ write\ to\ register\ 0}}
\DoxyCodeLine{00061\ \ \ \ \ registerDataPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0x04);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ write\ desired\ data}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{comment}{//\ Set\ the\ initialization\ block}}
\DoxyCodeLine{00064\ \ \ \ \ initBlock.mode\ =\ 0x0000;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Promiscuous\ mode\ =\ false\ \ \ (\ promiscuous\ mode\ tells\ it\ to\ receive\ all\ packets,\ not\ just\ broadcasts\ and\ those\ for\ its\ own\ MAC\ address)}}
\DoxyCodeLine{00065\ \ \ \ \ initBlock.reserved1\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reserved}}
\DoxyCodeLine{00066\ \ \ \ \ initBlock.numSendBuffers\ =\ 3;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Means\ 8\ because\ 2\string^8\ (number\ of\ bits\ used)}}
\DoxyCodeLine{00067\ \ \ \ \ initBlock.reserved2\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reserved}}
\DoxyCodeLine{00068\ \ \ \ \ initBlock.numRecvBuffers\ =\ 3;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Means\ 8\ because\ 2\string^8\ (number\ of\ bits\ used)}}
\DoxyCodeLine{00069\ \ \ \ \ initBlock.physicalAddress\ =\ ownMAC;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ the\ physical\ address\ to\ the\ MAC\ address}}
\DoxyCodeLine{00070\ \ \ \ \ initBlock.reserved3\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reserved}}
\DoxyCodeLine{00071\ \ \ \ \ initBlock.logicalAddress\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ None\ for\ now}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{comment}{//TODO:\ Use\ malloc?}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{comment}{//\ Set\ Buffer\ descriptors\ memory}}
\DoxyCodeLine{00077\ \ \ \ \ sendBufferDescr\ =\ (BufferDescriptor*)(\mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_a983c849ff604367f7c8a0e70172bb331}{MemoryManager::kmalloc}}((\textcolor{keyword}{sizeof}(BufferDescriptor)\ *\ 8)\ +\ 15));\ \ \textcolor{comment}{//\ Allocate\ memory\ for\ 8\ buffer\ descriptors}}
\DoxyCodeLine{00078\ \ \ \ \ initBlock.sendBufferDescrAddress\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}})sendBufferDescr;}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \ \ recvBufferDescr\ =\ (BufferDescriptor*)(\mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_a983c849ff604367f7c8a0e70172bb331}{MemoryManager::kmalloc}}((\textcolor{keyword}{sizeof}(BufferDescriptor)\ *\ 8)\ +\ 15));\ \ \textcolor{comment}{//\ Allocate\ memory\ for\ 8\ buffer\ descriptors}}
\DoxyCodeLine{00081\ \ \ \ \ initBlock.recvBufferDescrAddress\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}})recvBufferDescr;}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}}\ i\ =\ 0;\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ 8;\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}++)}
\DoxyCodeLine{00084\ \ \ \ \ \{}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Send\ buffer\ descriptors}}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ sendBufferDescr[\mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}].address\ =\ (((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}})\&sendBuffers[i])\ +\ 15\ )\ \&\ \string~(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}})0xF;\ \ \ \ \ \ \ \textcolor{comment}{//\ Same\ as\ above}}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ sendBufferDescr[\mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}].flags\ =\ 0x7FF\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Length\ of\ descriptor}}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ 0xF000;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ it\ to\ send\ buffer}}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ sendBufferDescr[\mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}].flags2\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ "{}Flags2"{}\ shows\ whether\ an\ error\ occurred\ while\ sending\ and\ should\ therefore\ be\ set\ to\ 0\ by\ the\ drive}}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ sendBufferDescr[\mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}].avail\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ IF\ it\ is\ in\ use}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Receive}}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ recvBufferDescr[\mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}].address\ =\ (((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}})\&recvBuffers[i])\ +\ 15\ )\ \&\ \string~(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}})0xF;\ \ \ \textcolor{comment}{//\ Same\ as\ above}}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ recvBufferDescr[\mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}].flags\ =\ 0xF7FF\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Length\ of\ descriptor\ \ \ \ \ \ \ \ (This\ 0xF7FF\ is\ what\ was\ causing\ the\ problem,\ it\ used\ to\ be\ 0x7FF)}}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ 0x80000000;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ it\ to\ receive\ buffer}}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ recvBufferDescr[\mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}].flags2\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ "{}Flags2"{}\ shows\ whether\ an\ error\ occurred\ while\ sending\ and\ should\ therefore\ be\ set\ to\ 0\ by\ the\ drive}}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ recvBufferDescr[\mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}].avail\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ IF\ it\ is\ in\ use}}
\DoxyCodeLine{00099\ \ \ \ \ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{comment}{//\ Move\ initialization\ block\ into\ device}}
\DoxyCodeLine{00102\ \ \ \ \ registerAddressPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(1);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ write\ to\ register\ 1}}
\DoxyCodeLine{00103\ \ \ \ \ registerDataPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}})(\&initBlock)\ \&}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0xFFFF);\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ write\ address\ data}}
\DoxyCodeLine{00105\ \ \ \ \ registerAddressPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(2);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ write\ to\ register\ 2}}
\DoxyCodeLine{00106\ \ \ \ \ registerDataPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}})(\&initBlock)\ >>\ 16)\ \&}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0xFFFF);\ \ \ \ \ \textcolor{comment}{//\ write\ shifted\ address\ data}}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{memorymanagement_8cpp_source_l00074}{Max\+OS\+::memory\+::\+Memory\+Manager\+::kmalloc()}}, \mbox{\hyperlink{port_8cpp_source_l00082}{Max\+OS\+::hardwarecommunication\+::\+Port16\+Bit\+::read()}}, and \mbox{\hyperlink{port_8cpp_source_l00072}{Max\+OS\+::hardwarecommunication\+::\+Port16\+Bit\+::write()}}.

\Hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_af625f7f64ef62f0429ca030aeaca40ab}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_af625f7f64ef62f0429ca030aeaca40ab} 
\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}!````~AMD\_AM79C973@{\texorpdfstring{$\sim$}{\string~}AMD\_AM79C973}}
\index{````~AMD\_AM79C973@{\texorpdfstring{$\sim$}{\string~}AMD\_AM79C973}!MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}AMD\_AM79C973()}{\string~AMD\_AM79C973()}}
{\footnotesize\ttfamily AMD\+\_\+\+AM79\+C973\+::\texorpdfstring{$\sim$}{\string~}\+AMD\+\_\+\+AM79\+C973 (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



\doxysubsection{Member Function Documentation}
\Hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a53c3ac082e5eab68d8543b9b90cc21bd}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a53c3ac082e5eab68d8543b9b90cc21bd} 
\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}!activate@{activate}}
\index{activate@{activate}!MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}
\doxysubsubsection{\texorpdfstring{activate()}{activate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} AMD\+\_\+\+AM79\+C973\+::activate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



This function activates the device and starts it (Runs when the driver-\/manger calls activate\+All()) 



Reimplemented from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1Driver_a92276c08d77279b6a86c900190ef797b}{Max\+OS\+::drivers\+::\+Driver}}.



Definition at line \mbox{\hyperlink{amd__am79c973_8cpp_source_l00119}{119}} of file \mbox{\hyperlink{amd__am79c973_8cpp_source}{amd\+\_\+am79c973.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00120\ \{}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{comment}{//\ TODO:\ Have\ a\ look\ at\ re\ -\/\ implementing\ this\ again\ someday}}
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ initDone\ =\ \textcolor{keyword}{false};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ initDone\ to\ false}}
\DoxyCodeLine{00126\ \ \ \ \ registerAddressPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ write\ to\ register\ 0}}
\DoxyCodeLine{00127\ \ \ \ \ registerDataPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0x41);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Enable\ Interrupts\ and\ start\ the\ device}}
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keywordflow}{while}(!initDone);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Wait\ for\ initDone\ to\ be\ set\ to\ true}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \ \ registerAddressPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(4);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ read\ from\ register\ 4}}
\DoxyCodeLine{00131\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}}\ =\ registerDataPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ current\ data}}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \ \ registerAddressPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(4);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ write\ to\ register\ 4}}
\DoxyCodeLine{00134\ \ \ \ \ registerDataPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}}\ |\ 0xC00);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Bitwise\ OR\ function\ on\ data\ (This\ automatically\ enlarges\ packets\ smaller\ than\ 64\ bytes\ to\ that\ size\ and\ removes\ some\ relatively\ superfluous\ information\ from\ received\ packets.)}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ registerAddressPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ write\ to\ register\ 0}}
\DoxyCodeLine{00137\ \ \ \ \ registerDataPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0x42);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ that\ it\ is\ initialised\ and\ can\ begin\ operating}}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \ \ active\ =\ \textcolor{keyword}{true};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ active\ to\ true}}
\DoxyCodeLine{00140\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{port_8cpp_source_l00082}{Max\+OS\+::hardwarecommunication\+::\+Port16\+Bit\+::read()}}, and \mbox{\hyperlink{port_8cpp_source_l00072}{Max\+OS\+::hardwarecommunication\+::\+Port16\+Bit\+::write()}}.

\Hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_af71695cfd40bf9bc49ac865521264fd9}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_af71695cfd40bf9bc49ac865521264fd9} 
\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}!deactivate@{deactivate}}
\index{deactivate@{deactivate}!MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}
\doxysubsubsection{\texorpdfstring{deactivate()}{deactivate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} AMD\+\_\+\+AM79\+C973\+::deactivate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



deactivate the driver 



Reimplemented from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1Driver_aa8d91fd440659b56c4ecf5c877925210}{Max\+OS\+::drivers\+::\+Driver}}.



Definition at line \mbox{\hyperlink{amd__am79c973_8cpp_source_l00296}{296}} of file \mbox{\hyperlink{amd__am79c973_8cpp_source}{amd\+\_\+am79c973.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00297\ }
\DoxyCodeLine{00298\ \}}

\end{DoxyCode}
\Hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a426beb375fff8d28dbc4aee45a0c71b5}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a426beb375fff8d28dbc4aee45a0c71b5} 
\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}!device\_name@{device\_name}}
\index{device\_name@{device\_name}!MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}
\doxysubsubsection{\texorpdfstring{device\_name()}{device\_name()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespaceMaxOS_afa22b691550d34d82dd6a5e3f77b31cb}{string}} AMD\+\_\+\+AM79\+C973\+::device\+\_\+name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



Get the device name of the driver. 

\begin{DoxyReturn}{Returns}
The device name of the driver 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1Driver_a2870bc0edff29cd802f10e6acc50cf89}{Max\+OS\+::drivers\+::\+Driver}}.



Definition at line \mbox{\hyperlink{amd__am79c973_8cpp_source_l00304}{304}} of file \mbox{\hyperlink{amd__am79c973_8cpp_source}{amd\+\_\+am79c973.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00305\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}PCnet-\/Fast\ III\ (Am79C973)"{}};}
\DoxyCodeLine{00306\ \}}

\end{DoxyCode}
\Hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a3ccea4e9d4dd97d5e60f795fcfdc06f6}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a3ccea4e9d4dd97d5e60f795fcfdc06f6} 
\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}!DoSend@{DoSend}}
\index{DoSend@{DoSend}!MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}
\doxysubsubsection{\texorpdfstring{DoSend()}{DoSend()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} AMD\+\_\+\+AM79\+C973\+::\+Do\+Send (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{buffer,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



This function sends a package. 


\begin{DoxyParams}{Parameters}
{\em buffer} & The buffer to send \\
\hline
{\em size} & The size of the buffer \\
\hline
\end{DoxyParams}


Reimplemented from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver_acae51a237ae1975705a2f831f851cca0}{Max\+OS\+::drivers\+::ethernet\+::\+Ethernet\+Driver}}.



Definition at line \mbox{\hyperlink{amd__am79c973_8cpp_source_l00207}{207}} of file \mbox{\hyperlink{amd__am79c973_8cpp_source}{amd\+\_\+am79c973.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keywordflow}{while}(!active);}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00211\ \ \ \ \ \textcolor{keywordtype}{int}\ sendDescriptor\ =\ currentSendBuffer;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ where\ data\ has\ been\ written\ to}}
\DoxyCodeLine{00212\ \ \ \ \ currentSendBuffer\ =\ (currentSendBuffer\ +\ 1)\ \%\ 8;\ \ \ \ \textcolor{comment}{//\ Move\ send\ buffer\ to\ next\ send\ buffer\ (div\ by\ 8\ so\ that\ it\ is\ cycled)\ (this\ allows\ for\ data\ to\ be\ sent\ from\ different\ m\_tasks\ in\ parallel)}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{ext2_8h_aaba88b24a21a6c70c895c0d55f4a69a0}{size}}\ >\ 1518)\{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ attempt\ to\ send\ more\ than\ 1518\ bytes\ at\ once\ it\ will\ be\ too\ large}}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ext2_8h_aaba88b24a21a6c70c895c0d55f4a69a0}{size}}\ =\ 1518;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Discard\ all\ data\ after\ that\ \ (Generally\ if\ data\ is\ bigger\ than\ that\ at\ driver\ level\ then\ a\ higher\ up\ network\ layer\ must\ have\ made\ a\ mistake)}}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \ \ \ \ \}}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{comment}{//\ What\ this\ loop\ does\ is\ copy\ the\ information\ passed\ as\ the\ parameter\ buffer\ (src)\ to\ the\ send\ buffer\ in\ the\ ram\ (dst)\ which\ the\ card\ will\ then\ use\ to\ send\ the\ data}}
\DoxyCodeLine{00220\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}}\ *\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{src}}\ =\ buffer\ +\ \mbox{\hyperlink{ext2_8h_aaba88b24a21a6c70c895c0d55f4a69a0}{size}}\ -\/1,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ src\ pointer\ to\ the\ end\ of\ the\ data\ that\ is\ being\ sent}}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ *\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dst}}\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}}*)(sendBufferDescr[sendDescriptor].address\ +\ \mbox{\hyperlink{ext2_8h_aaba88b24a21a6c70c895c0d55f4a69a0}{size}}\ -\/1);\ \ \ \ \ \ \ \textcolor{comment}{//\ Take\ the\ buffer\ that\ has\ been\ selected}}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{src}}\ >=\ buffer;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ While\ there\ is\ still\ information\ in\ the\ buffer\ that\ hasn't\ been\ written\ to\ src}}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{src}}-\/-\/,\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dst}}-\/-\/\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Move\ 2\ pointers\ to\ the\ end\ of\ the\ buffers}}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00225\ \ \ \ \ \{}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ *\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{dst}}\ =\ *\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{src}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Copy\ data\ from\ source\ buffer\ to\ destination\ buffer}}
\DoxyCodeLine{00227\ \ \ \ \ \}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \ \ \ \ sendBufferDescr[sendDescriptor].avail\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ that\ this\ buffer\ is\ in\ use}}
\DoxyCodeLine{00231\ \ \ \ \ sendBufferDescr[sendDescriptor].flags2\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Clear\ any\ previous\ error\ messages}}
\DoxyCodeLine{00232\ \ \ \ \ sendBufferDescr[sendDescriptor].flags\ =\ 0x8300F000\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Encode\ the\ size\ of\ what\ is\ being\ sent}}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ ((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})((-\/\mbox{\hyperlink{ext2_8h_aaba88b24a21a6c70c895c0d55f4a69a0}{size}})\ \&\ 0xFFF));}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \ \ registerAddressPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ write\ to\ register\ 0}}
\DoxyCodeLine{00236\ \ \ \ \ registerDataPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ 0x48);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ send\ the\ data\ currently\ in\ the\ buffer}}
\DoxyCodeLine{00238\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{ext2_8h_source_l00001}{size}}, and \mbox{\hyperlink{port_8cpp_source_l00072}{Max\+OS\+::hardwarecommunication\+::\+Port16\+Bit\+::write()}}.

\Hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_ae13b08554a3a18a35ea5f4ff50aafcf2}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_ae13b08554a3a18a35ea5f4ff50aafcf2} 
\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}!GetMediaAccessControlAddress@{GetMediaAccessControlAddress}}
\index{GetMediaAccessControlAddress@{GetMediaAccessControlAddress}!MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}
\doxysubsubsection{\texorpdfstring{GetMediaAccessControlAddress()}{GetMediaAccessControlAddress()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\+\_\+t}} AMD\+\_\+\+AM79\+C973\+::\+Get\+Media\+Access\+Control\+Address (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



This function gets the MAC address. 

\begin{DoxyReturn}{Returns}
The MAC address 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver_a3bf68668c69f6b300888ad189a67006a}{Max\+OS\+::drivers\+::ethernet\+::\+Ethernet\+Driver}}.



Definition at line \mbox{\hyperlink{amd__am79c973_8cpp_source_l00291}{291}} of file \mbox{\hyperlink{amd__am79c973_8cpp_source}{amd\+\_\+am79c973.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00292\ \ \ \ \ \textcolor{keywordflow}{while}(ownMAC\ ==\ 0);}
\DoxyCodeLine{00293\ \ \ \ \ \textcolor{keywordflow}{return}\ ownMAC;}
\DoxyCodeLine{00294\ \}}

\end{DoxyCode}
\Hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a8edad1ca75667f1e4d407178b5493f7a}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a8edad1ca75667f1e4d407178b5493f7a} 
\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}!handle\_interrupt@{handle\_interrupt}}
\index{handle\_interrupt@{handle\_interrupt}!MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}
\doxysubsubsection{\texorpdfstring{handle\_interrupt()}{handle\_interrupt()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} AMD\+\_\+\+AM79\+C973\+::handle\+\_\+interrupt (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



This function handles the interrupt for the device. 


\begin{DoxyParams}{Parameters}
{\em esp} & The stack pointer (where to return to) \\
\hline
\end{DoxyParams}


Reimplemented from \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler_abd792bc53ec7dd1b70c8386853cc3c33}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Handler}}.



Definition at line \mbox{\hyperlink{amd__am79c973_8cpp_source_l00162}{162}} of file \mbox{\hyperlink{amd__am79c973_8cpp_source}{amd\+\_\+am79c973.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{comment}{//\ Similar\ to\ PIC,\ data\ needs\ to\ be\ read\ when\ an\ interrupt\ is\ sent,\ or\ it\ hangs}}
\DoxyCodeLine{00168\ \ \ \ \ registerAddressPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ read\ from\ register\ 0}}
\DoxyCodeLine{00169\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}}\ =\ registerDataPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ current\ data}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{comment}{//\ Note:\ Cant\ be\ switch\ case\ as\ multiple\ errors\ can\ occur\ at\ the\ same\ time}}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \ \ \ \ \textcolor{comment}{//\ Errors}}
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{keywordflow}{if}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}}\ \&\ 0x8000)\ ==\ 0x8000)}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \mbox{\hyperlink{classLogger_a4cc5871bd96523f5c50a2ac8ccbf44f3}{Logger::WARNING}}()\ <<\ \textcolor{stringliteral}{"{}AMD\ am79c973\ ERROR:\ "{}};}
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{keywordflow}{if}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}}\ \&\ 0x2000)\ ==\ 0x2000)}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \mbox{\hyperlink{classLogger_a4cc5871bd96523f5c50a2ac8ccbf44f3}{Logger::WARNING}}()\ <<\ \textcolor{stringliteral}{"{}COLLISION\ ERROR\(\backslash\)n"{}};}
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{keywordflow}{if}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}}\ \&\ 0x1000)\ ==\ 0x1000)}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \mbox{\hyperlink{classLogger_a4cc5871bd96523f5c50a2ac8ccbf44f3}{Logger::WARNING}}()\ <<\ \textcolor{stringliteral}{"{}MISSED\ FRAME\(\backslash\)n"{}};}
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{keywordflow}{if}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}}\ \&\ 0x0800)\ ==\ 0x0800)}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \mbox{\hyperlink{classLogger_a4cc5871bd96523f5c50a2ac8ccbf44f3}{Logger::WARNING}}()\ <<\ \textcolor{stringliteral}{"{}MEMORY\ ERROR\(\backslash\)n"{}};}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{comment}{//\ Responses}}
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keywordflow}{if}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}}\ \&\ 0x0400)\ ==\ 0x0400)\ FetchDataReceived();}
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{keywordflow}{if}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}}\ \&\ 0x0200)\ ==\ 0x0200)\ FetchDataSent();}
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{keywordflow}{if}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}}\ \&\ 0x0100)\ ==\ 0x0100)\ initDone\ =\ \textcolor{keyword}{true};\textcolor{comment}{//}}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{comment}{//\ Reply\ that\ it\ was\ received}}
\DoxyCodeLine{00190\ \ \ \ \ registerAddressPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ to\ write\ to\ register\ 0}}
\DoxyCodeLine{00191\ \ \ \ \ registerDataPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{temp}});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tell\ device\ that\ the\ interrupt\ was\ received}}
\DoxyCodeLine{00192\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{port_8cpp_source_l00082}{Max\+OS\+::hardwarecommunication\+::\+Port16\+Bit\+::read()}}, \mbox{\hyperlink{logger_8cpp_source_l00180}{Logger\+::\+WARNING()}}, and \mbox{\hyperlink{port_8cpp_source_l00072}{Max\+OS\+::hardwarecommunication\+::\+Port16\+Bit\+::write()}}.

\Hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a1f92c35763581a0454dac5783d693c33}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a1f92c35763581a0454dac5783d693c33} 
\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}!reset@{reset}}
\index{reset@{reset}!MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} AMD\+\_\+\+AM79\+C973\+::reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



This function resets the device. 

\begin{DoxyReturn}{Returns}
The amount of ms to wait 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1Driver_a2371d6b69c1bf351e9c80bde265ac8be}{Max\+OS\+::drivers\+::\+Driver}}.



Definition at line \mbox{\hyperlink{amd__am79c973_8cpp_source_l00147}{147}} of file \mbox{\hyperlink{amd__am79c973_8cpp_source}{amd\+\_\+am79c973.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ resetPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}();}
\DoxyCodeLine{00150\ \ \ resetPort.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0);}
\DoxyCodeLine{00151\ \ \ \textcolor{keywordflow}{return}\ 10;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 10\ means\ wait\ for\ 10ms}}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00153\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{port_8cpp_source_l00082}{Max\+OS\+::hardwarecommunication\+::\+Port16\+Bit\+::read()}}, and \mbox{\hyperlink{port_8cpp_source_l00072}{Max\+OS\+::hardwarecommunication\+::\+Port16\+Bit\+::write()}}.

\Hypertarget{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a287dbe7304c0b56850b9b339c1299618}\label{classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_a287dbe7304c0b56850b9b339c1299618} 
\index{MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}!vendor\_name@{vendor\_name}}
\index{vendor\_name@{vendor\_name}!MaxOS::drivers::ethernet::AMD\_AM79C973@{MaxOS::drivers::ethernet::AMD\_AM79C973}}
\doxysubsubsection{\texorpdfstring{vendor\_name()}{vendor\_name()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespaceMaxOS_afa22b691550d34d82dd6a5e3f77b31cb}{string}} AMD\+\_\+\+AM79\+C973\+::vendor\+\_\+name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



Get who created the device. 

\begin{DoxyReturn}{Returns}
The vendor name of the driver 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1Driver_a1d0f9643af1af6964724b898cecd1bae}{Max\+OS\+::drivers\+::\+Driver}}.



Definition at line \mbox{\hyperlink{amd__am79c973_8cpp_source_l00300}{300}} of file \mbox{\hyperlink{amd__am79c973_8cpp_source}{amd\+\_\+am79c973.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00301\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}AMD"{}};}
\DoxyCodeLine{00302\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/include/drivers/ethernet/\mbox{\hyperlink{amd__am79c973_8h}{amd\+\_\+am79c973.\+h}}\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/src/drivers/ethernet/\mbox{\hyperlink{amd__am79c973_8cpp}{amd\+\_\+am79c973.\+cpp}}\end{DoxyCompactItemize}
