\doxysection{Max\+OS\+::drivers\+::clock\+::PIT Class Reference}
\hypertarget{classMaxOS_1_1drivers_1_1clock_1_1PIT}{}\label{classMaxOS_1_1drivers_1_1clock_1_1PIT}\index{MaxOS::drivers::clock::PIT@{MaxOS::drivers::clock::PIT}}


\doxylink{classMaxOS_1_1drivers_1_1Driver}{Driver} for the Programmable Interval Timer.  




{\ttfamily \#include $<$clock.\+h$>$}

Inheritance diagram for Max\+OS\+::drivers\+::clock\+::PIT\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classMaxOS_1_1drivers_1_1clock_1_1PIT}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_a3862549baa91f68a23e9f76534a917c3}{PIT}} (\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1AdvancedProgrammableInterruptController}{hardwarecommunication\+::\+Advanced\+Programmable\+Interrupt\+Controller}} \texorpdfstring{$\ast$}{*}apic)
\item 
\mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_a4d9c324e8e6f22583899e496b4bb3471}{\texorpdfstring{$\sim$}{\string~}\+PIT}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Handler}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{virtual}} system\+::cpu\+\_\+status\+\_\+t \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler_a3f4303652151fbba92aa7b4513ae0875}{handle\+\_\+interrupt}} (system\+::cpu\+\_\+status\+\_\+t \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}})
\begin{DoxyCompactList}\small\item\em Handles an interrupt and returns the status. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_a986401ff44e3c9ef81e50778cf56a5ac}{handle\+\_\+interrupt}} () \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em Tick on each interrupt. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_aedde96002f9c62875dd502f5265f0314}{ticks\+\_\+per\+\_\+ms}} ()
\begin{DoxyCompactList}\small\item\em Uses the \doxylink{classMaxOS_1_1drivers_1_1clock_1_1PIT}{PIT} to calculate how many APIC ticks are in 1 millisecond. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions inherited from \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Handler}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler_a79b1054c04bbcc2c72a6d6938212909c}{Interrupt\+Handler}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} interrupt\+\_\+number, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{int64\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{redirect}}=-\/1, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{redirect\+\_\+index}}=0)
\item 
\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler_a12b87c89015a61b702184070354e7876}{\texorpdfstring{$\sim$}{\string~}\+Interrupt\+Handler}} ()
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_aef7dc8f712b8a35905493187916478c3}{m\+\_\+data\+\_\+port}}
\item 
\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_abc47e347e4512f570d7ee4f72aaa5080}{m\+\_\+command\+\_\+port}}
\item 
\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC}{hardwarecommunication\+::\+Local\+APIC}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_a286c0c1d34a7e2c16a541cc18e2ec0ee}{m\+\_\+local\+\_\+apic}}
\item 
\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1IOAPIC}{hardwarecommunication\+::\+IOAPIC}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_a748b2a35eee6a2bb67eb73f4bfa20a33}{m\+\_\+io\+\_\+apic}}
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes inherited from \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Handler}}}
\begin{DoxyCompactItemize}
\item 
uint8\+\_\+t \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler_aac2ba4da525d342fc83fe344780c1850}{m\+\_\+interrupt\+\_\+number}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\doxylink{classMaxOS_1_1drivers_1_1Driver}{Driver} for the Programmable Interval Timer. 

Definition at line \mbox{\hyperlink{clock_8h_source_l00096}{96}} of file \mbox{\hyperlink{clock_8h_source}{clock.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classMaxOS_1_1drivers_1_1clock_1_1PIT_a3862549baa91f68a23e9f76534a917c3}\label{classMaxOS_1_1drivers_1_1clock_1_1PIT_a3862549baa91f68a23e9f76534a917c3} 
\index{MaxOS::drivers::clock::PIT@{MaxOS::drivers::clock::PIT}!PIT@{PIT}}
\index{PIT@{PIT}!MaxOS::drivers::clock::PIT@{MaxOS::drivers::clock::PIT}}
\doxysubsubsection{\texorpdfstring{PIT()}{PIT()}}
{\footnotesize\ttfamily PIT\+::\+PIT (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1AdvancedProgrammableInterruptController}{hardwarecommunication\+::\+Advanced\+Programmable\+Interrupt\+Controller}} \texorpdfstring{$\ast$}{*}}]{apic }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{clock_8cpp_source_l00236}{236}} of file \mbox{\hyperlink{clock_8cpp_source}{clock.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00237\ :\ \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler}{InterruptHandler}}(0x22),}
\DoxyCodeLine{00238\ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_aef7dc8f712b8a35905493187916478c3}{m\_data\_port}}(0x40),}
\DoxyCodeLine{00239\ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_abc47e347e4512f570d7ee4f72aaa5080}{m\_command\_port}}(0x43),}
\DoxyCodeLine{00240\ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_a286c0c1d34a7e2c16a541cc18e2ec0ee}{m\_local\_apic}}(apic-\/>\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1AdvancedProgrammableInterruptController_af632f7fe1f4a8d9716ec845628946eef}{local\_apic}}()),}
\DoxyCodeLine{00241\ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_a748b2a35eee6a2bb67eb73f4bfa20a33}{m\_io\_apic}}(apic-\/>\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1AdvancedProgrammableInterruptController_a466e10dea95ada62df527bf033a33deb}{io\_apic}}())}
\DoxyCodeLine{00242\ \{}
\DoxyCodeLine{00243\ }
\DoxyCodeLine{00244\ \}}

\end{DoxyCode}
\Hypertarget{classMaxOS_1_1drivers_1_1clock_1_1PIT_a4d9c324e8e6f22583899e496b4bb3471}\label{classMaxOS_1_1drivers_1_1clock_1_1PIT_a4d9c324e8e6f22583899e496b4bb3471} 
\index{MaxOS::drivers::clock::PIT@{MaxOS::drivers::clock::PIT}!````~PIT@{\texorpdfstring{$\sim$}{\string~}PIT}}
\index{````~PIT@{\texorpdfstring{$\sim$}{\string~}PIT}!MaxOS::drivers::clock::PIT@{MaxOS::drivers::clock::PIT}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}PIT()}{\string~PIT()}}
{\footnotesize\ttfamily PIT\+::\texorpdfstring{$\sim$}{\string~}\+PIT (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



\doxysubsection{Member Function Documentation}
\Hypertarget{classMaxOS_1_1drivers_1_1clock_1_1PIT_a986401ff44e3c9ef81e50778cf56a5ac}\label{classMaxOS_1_1drivers_1_1clock_1_1PIT_a986401ff44e3c9ef81e50778cf56a5ac} 
\index{MaxOS::drivers::clock::PIT@{MaxOS::drivers::clock::PIT}!handle\_interrupt@{handle\_interrupt}}
\index{handle\_interrupt@{handle\_interrupt}!MaxOS::drivers::clock::PIT@{MaxOS::drivers::clock::PIT}}
\doxysubsubsection{\texorpdfstring{handle\_interrupt()}{handle\_interrupt()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} PIT\+::handle\+\_\+interrupt (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Tick on each interrupt. 



Reimplemented from \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptHandler_abd792bc53ec7dd1b70c8386853cc3c33}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Handler}}.



Definition at line \mbox{\hyperlink{clock_8cpp_source_l00251}{251}} of file \mbox{\hyperlink{clock_8cpp_source}{clock.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00252\ \ \ \ \ m\_ticks++;}
\DoxyCodeLine{00253\ \}}

\end{DoxyCode}
\Hypertarget{classMaxOS_1_1drivers_1_1clock_1_1PIT_aedde96002f9c62875dd502f5265f0314}\label{classMaxOS_1_1drivers_1_1clock_1_1PIT_aedde96002f9c62875dd502f5265f0314} 
\index{MaxOS::drivers::clock::PIT@{MaxOS::drivers::clock::PIT}!ticks\_per\_ms@{ticks\_per\_ms}}
\index{ticks\_per\_ms@{ticks\_per\_ms}!MaxOS::drivers::clock::PIT@{MaxOS::drivers::clock::PIT}}
\doxysubsubsection{\texorpdfstring{ticks\_per\_ms()}{ticks\_per\_ms()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} PIT\+::ticks\+\_\+per\+\_\+ms (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Uses the \doxylink{classMaxOS_1_1drivers_1_1clock_1_1PIT}{PIT} to calculate how many APIC ticks are in 1 millisecond. 

\begin{DoxyReturn}{Returns}
The amount of APIC ticks per millisecond 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{clock_8cpp_source_l00260}{260}} of file \mbox{\hyperlink{clock_8cpp_source}{clock.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{comment}{//\ Set\ the\ redirect\ for\ the\ timer\ interrupt}}
\DoxyCodeLine{00263\ \ \ \ \ \mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1InterruptRedirect}{interrupt\_redirect\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{redirect}}\ =\ \{}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ .type\ =\ 0x2,}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ .index\ =\ 0x14,}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ .interrupt\ =\ 0x22,}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ .destination\ =\ 0x00,}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ .flags\ =\ 0x00,}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ .mask\ =\ \textcolor{keyword}{true},}
\DoxyCodeLine{00270\ \ \ \ \ \};}
\DoxyCodeLine{00271\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_a748b2a35eee6a2bb67eb73f4bfa20a33}{m\_io\_apic}}-\/>\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_a4b794a1a0c15a6262dbd6075961b37c2}{set\_redirect}}(\&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{redirect}});}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{comment}{//\ Configure\ the\ PIT\ clock}}
\DoxyCodeLine{00274\ \ \ \ \ \mbox{\hyperlink{structMaxOS_1_1drivers_1_1clock_1_1PITCommand}{pit\_command\_t}}\ \mbox{\hyperlink{arp_8h_a4635796d5c7e7a2639b11dfe83718acc}{command}}\ =\ \{}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ .bcd\_mode\ \ \ \ \ \ \ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}})\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1clock_a138a8792ceb3e2bd560c677d54724b4ca98ad0e8750ae10ad556ed7a62affb452}{BCDMode::BINARY}},}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ .operating\_mode\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}})\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1clock_a9e1786fd3419e0a129f79ffdf56154f7aca50c2eea44eff0b9ae4e9bbec438a65}{OperatingMode::RATE\_GENERATOR}},}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ .access\_mode\ \ \ \ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}})\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1clock_aec467a8b28cb0b1b17948364e6710844adbb4778615de7631ad9e4446450576c9}{AccessMode::LOW\_HIGH\_BYTE}},}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ .channel\ \ \ \ \ \ \ \ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}})\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1clock_abcf21589b606dd6e2b8a617cda1b0ac3a81b7fe15c43052525db74111aa314cc9}{Channel::INTERRUPT}}}
\DoxyCodeLine{00279\ \ \ \ \ \};}
\DoxyCodeLine{00280\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_abc47e347e4512f570d7ee4f72aaa5080}{m\_command\_port}}.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(*(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}}\ *)\ \&\mbox{\hyperlink{arp_8h_a4635796d5c7e7a2639b11dfe83718acc}{command}});}
\DoxyCodeLine{00281\ }
\DoxyCodeLine{00282\ \ \ \ \ \textcolor{comment}{//\ Set\ the\ clock\ rate\ to\ 1\ ms;}}
\DoxyCodeLine{00283\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{rate}}\ =\ 1193182\ /\ 1000;}
\DoxyCodeLine{00284\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_aef7dc8f712b8a35905493187916478c3}{m\_data\_port}}.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{rate}}\ \&\ 0xFF);}
\DoxyCodeLine{00285\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_aef7dc8f712b8a35905493187916478c3}{m\_data\_port}}.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{rate}}\ >>\ 8);}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \ \ \ \ \textcolor{comment}{//\ Stop\ the\ clock}}
\DoxyCodeLine{00288\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_a286c0c1d34a7e2c16a541cc18e2ec0ee}{m\_local\_apic}}-\/>\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a58100a1d7ff3dac52a6abfb1d5686561}{write}}(0x380,\ 0x00);}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00290\ \ \ \ \ \textcolor{comment}{//\ Set\ the\ divisor\ to\ 2}}
\DoxyCodeLine{00291\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_a286c0c1d34a7e2c16a541cc18e2ec0ee}{m\_local\_apic}}-\/>\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a58100a1d7ff3dac52a6abfb1d5686561}{write}}(0x3E0,\ 0x0);}
\DoxyCodeLine{00292\ }
\DoxyCodeLine{00293\ \ \ \ \ \textcolor{comment}{//\ Unmask\ the\ PIT\ interrupt}}
\DoxyCodeLine{00294\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_a748b2a35eee6a2bb67eb73f4bfa20a33}{m\_io\_apic}}-\/>\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_ad082ec1b5e7905789976e043b67902ac}{set\_redirect\_mask}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{redirect}}.index,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{comment}{//\ Calculate\ the\ number\ of\ ticks\ in\ 1\ ms}}
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{max}}\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}})\ -\/1;}
\DoxyCodeLine{00298\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_a286c0c1d34a7e2c16a541cc18e2ec0ee}{m\_local\_apic}}-\/>\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a58100a1d7ff3dac52a6abfb1d5686561}{write}}(0x380,\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{max}});}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \ \ \textcolor{keywordflow}{while}\ (m\_ticks\ <\ s\_calibrate\_ticks)}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}nop"{}});}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00303\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{elapsed}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{max}}\ -\/\ (\mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_a286c0c1d34a7e2c16a541cc18e2ec0ee}{m\_local\_apic}}-\/>\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_ad1a2879252218ed8d96e385b3cc34a7e}{read}}(0x390));}
\DoxyCodeLine{00304\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_aedde96002f9c62875dd502f5265f0314}{ticks\_per\_ms}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{elapsed}}\ /\ s\_calibrate\_ticks;}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00306\ \ \ \ \ \mbox{\hyperlink{classLogger_a1df434c9cd82457b6830c0500731a601}{Logger::DEBUG}}()\ <<\ \textcolor{stringliteral}{"{}Ticks\ per\ ms:\ "{}}\ <<\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{int}})\ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_aedde96002f9c62875dd502f5265f0314}{ticks\_per\_ms}}\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00308\ \ \ \ \ \textcolor{comment}{//\ Disable\ the\ PIT\ interrupt\ again}}
\DoxyCodeLine{00309\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_a286c0c1d34a7e2c16a541cc18e2ec0ee}{m\_local\_apic}}-\/>\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a58100a1d7ff3dac52a6abfb1d5686561}{write}}(0x380,\ 0x00);}
\DoxyCodeLine{00310\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_a748b2a35eee6a2bb67eb73f4bfa20a33}{m\_io\_apic}}-\/>\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_ad082ec1b5e7905789976e043b67902ac}{set\_redirect\_mask}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{redirect}}.index,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT_aedde96002f9c62875dd502f5265f0314}{ticks\_per\_ms}};}
\DoxyCodeLine{00313\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1clock_a138a8792ceb3e2bd560c677d54724b4ca98ad0e8750ae10ad556ed7a62affb452}{Max\+OS\+::drivers\+::clock\+::\+BINARY}}, \mbox{\hyperlink{arp_8h_source_l00006}{command}}, \mbox{\hyperlink{logger_8cpp_source_l00168}{Logger\+::\+DEBUG()}}, \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1clock_abcf21589b606dd6e2b8a617cda1b0ac3a81b7fe15c43052525db74111aa314cc9}{Max\+OS\+::drivers\+::clock\+::\+INTERRUPT}}, \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1clock_aec467a8b28cb0b1b17948364e6710844adbb4778615de7631ad9e4446450576c9}{Max\+OS\+::drivers\+::clock\+::\+LOW\+\_\+\+HIGH\+\_\+\+BYTE}}, \mbox{\hyperlink{clock_8h_source_l00108}{m\+\_\+command\+\_\+port}}, \mbox{\hyperlink{clock_8h_source_l00107}{m\+\_\+data\+\_\+port}}, \mbox{\hyperlink{clock_8h_source_l00112}{m\+\_\+io\+\_\+apic}}, \mbox{\hyperlink{clock_8h_source_l00111}{m\+\_\+local\+\_\+apic}}, \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1clock_a9e1786fd3419e0a129f79ffdf56154f7aca50c2eea44eff0b9ae4e9bbec438a65}{Max\+OS\+::drivers\+::clock\+::\+RATE\+\_\+\+GENERATOR}}, \mbox{\hyperlink{apic_8cpp_source_l00072}{Max\+OS\+::hardwarecommunication\+::\+Local\+APIC\+::read()}}, \mbox{\hyperlink{apic_8cpp_source_l00287}{Max\+OS\+::hardwarecommunication\+::\+IOAPIC\+::set\+\_\+redirect()}}, \mbox{\hyperlink{apic_8cpp_source_l00321}{Max\+OS\+::hardwarecommunication\+::\+IOAPIC\+::set\+\_\+redirect\+\_\+mask()}}, \mbox{\hyperlink{clock_8cpp_source_l00260}{ticks\+\_\+per\+\_\+ms()}}, \mbox{\hyperlink{apic_8cpp_source_l00087}{Max\+OS\+::hardwarecommunication\+::\+Local\+APIC\+::write()}}, and \mbox{\hyperlink{port_8cpp_source_l00027}{Max\+OS\+::hardwarecommunication\+::\+Port8\+Bit\+::write()}}.



Referenced by \mbox{\hyperlink{clock_8cpp_source_l00260}{ticks\+\_\+per\+\_\+ms()}}.



\doxysubsection{Member Data Documentation}
\Hypertarget{classMaxOS_1_1drivers_1_1clock_1_1PIT_abc47e347e4512f570d7ee4f72aaa5080}\label{classMaxOS_1_1drivers_1_1clock_1_1PIT_abc47e347e4512f570d7ee4f72aaa5080} 
\index{MaxOS::drivers::clock::PIT@{MaxOS::drivers::clock::PIT}!m\_command\_port@{m\_command\_port}}
\index{m\_command\_port@{m\_command\_port}!MaxOS::drivers::clock::PIT@{MaxOS::drivers::clock::PIT}}
\doxysubsubsection{\texorpdfstring{m\_command\_port}{m\_command\_port}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} Max\+OS\+::drivers\+::clock\+::\+PIT\+::m\+\_\+command\+\_\+port\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{clock_8h_source_l00108}{108}} of file \mbox{\hyperlink{clock_8h_source}{clock.\+h}}.



Referenced by \mbox{\hyperlink{clock_8cpp_source_l00260}{ticks\+\_\+per\+\_\+ms()}}.

\Hypertarget{classMaxOS_1_1drivers_1_1clock_1_1PIT_aef7dc8f712b8a35905493187916478c3}\label{classMaxOS_1_1drivers_1_1clock_1_1PIT_aef7dc8f712b8a35905493187916478c3} 
\index{MaxOS::drivers::clock::PIT@{MaxOS::drivers::clock::PIT}!m\_data\_port@{m\_data\_port}}
\index{m\_data\_port@{m\_data\_port}!MaxOS::drivers::clock::PIT@{MaxOS::drivers::clock::PIT}}
\doxysubsubsection{\texorpdfstring{m\_data\_port}{m\_data\_port}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} Max\+OS\+::drivers\+::clock\+::\+PIT\+::m\+\_\+data\+\_\+port\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{clock_8h_source_l00107}{107}} of file \mbox{\hyperlink{clock_8h_source}{clock.\+h}}.



Referenced by \mbox{\hyperlink{clock_8cpp_source_l00260}{ticks\+\_\+per\+\_\+ms()}}.

\Hypertarget{classMaxOS_1_1drivers_1_1clock_1_1PIT_a748b2a35eee6a2bb67eb73f4bfa20a33}\label{classMaxOS_1_1drivers_1_1clock_1_1PIT_a748b2a35eee6a2bb67eb73f4bfa20a33} 
\index{MaxOS::drivers::clock::PIT@{MaxOS::drivers::clock::PIT}!m\_io\_apic@{m\_io\_apic}}
\index{m\_io\_apic@{m\_io\_apic}!MaxOS::drivers::clock::PIT@{MaxOS::drivers::clock::PIT}}
\doxysubsubsection{\texorpdfstring{m\_io\_apic}{m\_io\_apic}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1IOAPIC}{hardwarecommunication\+::\+IOAPIC}}\texorpdfstring{$\ast$}{*} Max\+OS\+::drivers\+::clock\+::\+PIT\+::m\+\_\+io\+\_\+apic\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{clock_8h_source_l00112}{112}} of file \mbox{\hyperlink{clock_8h_source}{clock.\+h}}.



Referenced by \mbox{\hyperlink{clock_8cpp_source_l00260}{ticks\+\_\+per\+\_\+ms()}}.

\Hypertarget{classMaxOS_1_1drivers_1_1clock_1_1PIT_a286c0c1d34a7e2c16a541cc18e2ec0ee}\label{classMaxOS_1_1drivers_1_1clock_1_1PIT_a286c0c1d34a7e2c16a541cc18e2ec0ee} 
\index{MaxOS::drivers::clock::PIT@{MaxOS::drivers::clock::PIT}!m\_local\_apic@{m\_local\_apic}}
\index{m\_local\_apic@{m\_local\_apic}!MaxOS::drivers::clock::PIT@{MaxOS::drivers::clock::PIT}}
\doxysubsubsection{\texorpdfstring{m\_local\_apic}{m\_local\_apic}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC}{hardwarecommunication\+::\+Local\+APIC}}\texorpdfstring{$\ast$}{*} Max\+OS\+::drivers\+::clock\+::\+PIT\+::m\+\_\+local\+\_\+apic\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{clock_8h_source_l00111}{111}} of file \mbox{\hyperlink{clock_8h_source}{clock.\+h}}.



Referenced by \mbox{\hyperlink{clock_8cpp_source_l00260}{ticks\+\_\+per\+\_\+ms()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/include/drivers/clock/\mbox{\hyperlink{clock_8h}{clock.\+h}}\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/src/drivers/clock/\mbox{\hyperlink{clock_8cpp}{clock.\+cpp}}\end{DoxyCompactItemize}
