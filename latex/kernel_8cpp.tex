\doxysection{/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/src/kernel.cpp File Reference}
\hypertarget{kernel_8cpp}{}\label{kernel_8cpp}\index{/home/runner/work/MaxOS/MaxOS/kernel/src/kernel.cpp@{/home/runner/work/MaxOS/MaxOS/kernel/src/kernel.cpp}}
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$common/logger.\+h$>$}\newline
{\ttfamily \#include $<$hardwarecommunication/interrupts.\+h$>$}\newline
{\ttfamily \#include $<$drivers/console/serial.\+h$>$}\newline
{\ttfamily \#include $<$drivers/console/vesaboot.\+h$>$}\newline
{\ttfamily \#include $<$drivers/driver.\+h$>$}\newline
{\ttfamily \#include $<$drivers/video/vesa.\+h$>$}\newline
{\ttfamily \#include $<$gui/desktop.\+h$>$}\newline
{\ttfamily \#include $<$processes/scheduler.\+h$>$}\newline
{\ttfamily \#include $<$system/cpu.\+h$>$}\newline
{\ttfamily \#include $<$system/syscalls.\+h$>$}\newline
{\ttfamily \#include $<$memory/memorymanagement.\+h$>$}\newline
{\ttfamily \#include $<$memory/physical.\+h$>$}\newline
{\ttfamily \#include $<$memory/virtual.\+h$>$}\newline
{\ttfamily \#include $<$filesystem/vfs.\+h$>$}\newline
{\ttfamily \#include $<$filesystem/vfsresource.\+h$>$}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{kernel_8cpp_ac75524df0a1ac9de83987acf487c0150}{call\+\_\+constructors}} ()
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{kernel_8cpp_a5b3569dcd47463ac1cea04841fa25c53}{kernel\+\_\+main}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{unsigned}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{long}} addr, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{unsigned}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{long}} \mbox{\hyperlink{msdos_8h_a8c61e64b8675498cee79c59d3f8131e2}{magic}})
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{kernel_8cpp_ac75524df0a1ac9de83987acf487c0150}\label{kernel_8cpp_ac75524df0a1ac9de83987acf487c0150} 
\index{kernel.cpp@{kernel.cpp}!call\_constructors@{call\_constructors}}
\index{call\_constructors@{call\_constructors}!kernel.cpp@{kernel.cpp}}
\doxysubsubsection{\texorpdfstring{call\_constructors()}{call\_constructors()}}
{\footnotesize\ttfamily void call\+\_\+constructors (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{cplusplus_8cpp_source_l00022}{22}} of file \mbox{\hyperlink{cplusplus_8cpp_source}{cplusplus.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{comment}{//\ Loop\ through\ and\ initialise\ all\ the\ global\ constructors}}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{namespaceMaxOS_1_1runtime_a5cad572d445e7f8d04383fca6f1c3a99}{constructor}}*\ i\ =\ \&\mbox{\hyperlink{cplusplus_8cpp_a00bc71da06b4a8e02a8587bf37dd984b}{start\_ctors}};\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ !=\ \&\mbox{\hyperlink{cplusplus_8cpp_affa4f606954d8d9a7edcb66df47b7f1d}{end\_ctors}};\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}++)}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ (*i)();}
\DoxyCodeLine{00026\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{cplusplus_8cpp_source_l00021}{end\+\_\+ctors}}, and \mbox{\hyperlink{cplusplus_8cpp_source_l00020}{start\+\_\+ctors}}.



Referenced by \mbox{\hyperlink{kernel_8cpp_source_l00033}{kernel\+\_\+main()}}.

\Hypertarget{kernel_8cpp_a5b3569dcd47463ac1cea04841fa25c53}\label{kernel_8cpp_a5b3569dcd47463ac1cea04841fa25c53} 
\index{kernel.cpp@{kernel.cpp}!kernel\_main@{kernel\_main}}
\index{kernel\_main@{kernel\_main}!kernel.cpp@{kernel.cpp}}
\doxysubsubsection{\texorpdfstring{kernel\_main()}{kernel\_main()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} kernel\+\_\+main (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{unsigned}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{long}}}]{addr,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{unsigned}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{long}}}]{magic }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{kernel_8cpp_source_l00033}{33}} of file \mbox{\hyperlink{kernel_8cpp_source}{kernel.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \mbox{\hyperlink{kernel_8cpp_ac75524df0a1ac9de83987acf487c0150}{call\_constructors}}();}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{comment}{//\ Initialise\ the\ logger}}
\DoxyCodeLine{00038\ \ \ \ \ \mbox{\hyperlink{classLogger}{Logger}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{logger}};}
\DoxyCodeLine{00039\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1SerialConsole}{SerialConsole}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{serial\_console}}(\&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{logger}});}
\DoxyCodeLine{00040\ \ \ \ \ \mbox{\hyperlink{classLogger_a6fa276d92dbf0dd22dcab146f5c99da6}{Logger::INFO}}()\ <<\ \textcolor{stringliteral}{"{}MaxOS\ Booted\ Successfully\ \(\backslash\)n"{}};}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \mbox{\hyperlink{classLogger_ac852561ac37a51b7bf4f863a19a4fd40}{Logger::HEADER}}()\ <<\ \textcolor{stringliteral}{"{}Stage\ \{1\}:\ System\ Initialisation\(\backslash\)n"{}};}
\DoxyCodeLine{00043\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1Multiboot}{Multiboot}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{multiboot}}(addr,\ \mbox{\hyperlink{msdos_8h_a8c61e64b8675498cee79c59d3f8131e2}{magic}});}
\DoxyCodeLine{00044\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1GlobalDescriptorTable}{GlobalDescriptorTable}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{gdt}};}
\DoxyCodeLine{00045\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1InterruptManager}{InterruptManager}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{interrupts}};}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \ \ \mbox{\hyperlink{classLogger_ac852561ac37a51b7bf4f863a19a4fd40}{Logger::HEADER}}()\ <<\ \textcolor{stringliteral}{"{}Stage\ \{1.1\}:\ Memory\ Initialisation\(\backslash\)n"{}};}
\DoxyCodeLine{00048\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1memory_1_1PhysicalMemoryManager}{PhysicalMemoryManager}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{pmm}}(\&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{multiboot}});}
\DoxyCodeLine{00049\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1memory_1_1VirtualMemoryManager}{VirtualMemoryManager}}\ vmm;}
\DoxyCodeLine{00050\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager}{MemoryManager}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{memoryManager}}(\&vmm);}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ \mbox{\hyperlink{classLogger_ac852561ac37a51b7bf4f863a19a4fd40}{Logger::HEADER}}()\ <<\ \textcolor{stringliteral}{"{}Stage\ \{1.2\}:\ Console\ Initialisation\(\backslash\)n"{}};}
\DoxyCodeLine{00053\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1video_1_1VideoElectronicsStandardsAssociation}{VideoElectronicsStandardsAssociation}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{vesa}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{multiboot}}.framebuffer());}
\DoxyCodeLine{00054\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1console_1_1VESABootConsole}{VESABootConsole}}\ console(\&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{vesa}});}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \mbox{\hyperlink{classLogger_ac852561ac37a51b7bf4f863a19a4fd40}{Logger::HEADER}}()\ <<\ \textcolor{stringliteral}{"{}Stage\ \{2\}:\ Hardware\ Initialisation\(\backslash\)n"{}};}
\DoxyCodeLine{00057\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1VirtualFileSystem}{VirtualFileSystem}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{vfs}};}
\DoxyCodeLine{00058\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU}{CPU}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cpu}}(\&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{gdt}},\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{multiboot}});}
\DoxyCodeLine{00059\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1Clock}{Clock}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{kernel\_clock}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cpu}}.apic,\ 1);}
\DoxyCodeLine{00060\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1DriverManager}{DriverManager}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{driver\_manager}};}
\DoxyCodeLine{00061\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{driver\_manager}}.add\_driver(\&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{kernel\_clock}});}
\DoxyCodeLine{00062\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{driver\_manager}}.find\_drivers();}
\DoxyCodeLine{00063\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{reset\_wait\_time}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{driver\_manager}}.reset\_devices();}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \mbox{\hyperlink{classLogger_ac852561ac37a51b7bf4f863a19a4fd40}{Logger::HEADER}}()\ <<\ \textcolor{stringliteral}{"{}Stage\ \{3\}:\ Device\ Finalisation\(\backslash\)n"{}};}
\DoxyCodeLine{00066\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{interrupts}}.activate();}
\DoxyCodeLine{00067\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{kernel\_clock}}.calibrate();}
\DoxyCodeLine{00068\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{kernel\_clock}}.delay(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{reset\_wait\_time}});}
\DoxyCodeLine{00069\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{driver\_manager}}.initialise\_drivers();}
\DoxyCodeLine{00070\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{driver\_manager}}.activate\_drivers();}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \mbox{\hyperlink{classLogger_ac852561ac37a51b7bf4f863a19a4fd40}{Logger::HEADER}}()\ <<\ \textcolor{stringliteral}{"{}Stage\ \{4\}:\ System\ Finalisation\(\backslash\)n"{}};}
\DoxyCodeLine{00073\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1processes_1_1Scheduler}{Scheduler}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{scheduler}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{multiboot}});}
\DoxyCodeLine{00074\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1VFSResourceRegistry}{VFSResourceRegistry}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{vfs\_registry}}(\&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{vfs}});}
\DoxyCodeLine{00075\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1SyscallManager}{SyscallManager}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{syscalls}};}
\DoxyCodeLine{00076\ \ \ \ \ console.finish();}
\DoxyCodeLine{00077\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{scheduler}}.activate();}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{comment}{//\ Idle\ loop\ \ (read\ Idle.md)}}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordflow}{while}\ (\textcolor{keyword}{true})}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \textcolor{keyword}{asm}(\textcolor{stringliteral}{"{}nop"{}});}
\DoxyCodeLine{00082\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{cplusplus_8cpp_source_l00022}{call\+\_\+constructors()}}, \mbox{\hyperlink{vesaboot_8cpp_source_l00361}{Max\+OS\+::drivers\+::console\+::\+VESABoot\+Console\+::finish()}}, \mbox{\hyperlink{logger_8cpp_source_l00145}{Logger\+::\+HEADER()}}, \mbox{\hyperlink{logger_8cpp_source_l00157}{Logger\+::\+INFO()}}, and \mbox{\hyperlink{msdos_8h_source_l00007}{magic}}.

