\hypertarget{classMaxOS_1_1net_1_1EthernetFrameHandler}{}\doxysection{Max\+OS\+::net\+::Ethernet\+Frame\+Handler Class Reference}
\label{classMaxOS_1_1net_1_1EthernetFrameHandler}\index{MaxOS::net::EthernetFrameHandler@{MaxOS::net::EthernetFrameHandler}}


{\ttfamily \#include $<$ethernetframe.\+h$>$}

Inheritance diagram for Max\+OS\+::net\+::Ethernet\+Frame\+Handler\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classMaxOS_1_1net_1_1EthernetFrameHandler}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_aaea64cc519d8ffa29c69a58d1a29514b}{Ethernet\+Frame\+Handler}} (\mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver}{drivers\+::ethernet\+::\+Ethernet\+Driver}} $\ast$\mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a9c1e930b5c13c381ceec263b64967cfc}{ethernet\+Driver}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} $\ast$\mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a0ee5f09df8b4bbf5755eb9aa2e8aeb02}{error\+Messages}})
\item 
\mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_af23414f7f6f2f93bd84524cd0b93e8c2}{$\sim$\+Ethernet\+Frame\+Handler}} ()
\item 
\mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1ethernet_a65f54d2d9dfdb9eafd1affd62abe8d18}{drivers\+::ethernet\+::\+Media\+Access\+Control\+Address}} \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a0d1aa430d0a7139ebe0a47785b0b0b80}{get\+M\+AC}} ()
\item 
bool \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_aff9546783590a27aae5836155b018671}{Data\+Received}} (uint8\+\_\+t $\ast$\mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}}, uint32\+\_\+t \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}})
\begin{DoxyCompactList}\small\item\em Handle the received packet. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a79992d7ad67f8dbbae237246ad733ae3}{connect\+Handler}} (\mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFramePayloadHandler}{Ethernet\+Frame\+Payload\+Handler}} $\ast$handler)
\item 
void \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_ae773f48341030a7afe7587ae73cb057f}{send\+Ethernet\+Frame}} (uint64\+\_\+t \mbox{\hyperlink{ethernetframe_8h_ab7397a8498d13aec6dbc4fbf86cc051e}{destination\+M\+AC}}, uint16\+\_\+t frame\+Type, uint8\+\_\+t $\ast$\mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}}, uint32\+\_\+t \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}})
\begin{DoxyCompactList}\small\item\em Send an packet via the backend driver. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Map}{common\+::\+Map}}$<$ uint16\+\_\+t, \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFramePayloadHandler}{Ethernet\+Frame\+Payload\+Handler}} $\ast$ $>$ \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a3f0a31d8e1b1503424da3490b12c99e4}{frame\+Handlers}}
\item 
\mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver}{drivers\+::ethernet\+::\+Ethernet\+Driver}} $\ast$ \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a9c1e930b5c13c381ceec263b64967cfc}{ethernet\+Driver}}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} $\ast$ \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a0ee5f09df8b4bbf5755eb9aa2e8aeb02}{error\+Messages}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 50 of file ethernetframe.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classMaxOS_1_1net_1_1EthernetFrameHandler_aaea64cc519d8ffa29c69a58d1a29514b}\label{classMaxOS_1_1net_1_1EthernetFrameHandler_aaea64cc519d8ffa29c69a58d1a29514b}} 
\index{MaxOS::net::EthernetFrameHandler@{MaxOS::net::EthernetFrameHandler}!EthernetFrameHandler@{EthernetFrameHandler}}
\index{EthernetFrameHandler@{EthernetFrameHandler}!MaxOS::net::EthernetFrameHandler@{MaxOS::net::EthernetFrameHandler}}
\doxysubsubsection{\texorpdfstring{EthernetFrameHandler()}{EthernetFrameHandler()}}
{\footnotesize\ttfamily Ethernet\+Frame\+Handler\+::\+Ethernet\+Frame\+Handler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver}{drivers\+::ethernet\+::\+Ethernet\+Driver}} $\ast$}]{ethernet\+Driver,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} $\ast$}]{error\+Messages }\end{DoxyParamCaption})}



Definition at line 55 of file ethernetframe.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{56 : \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriverEventHandler_ab7b77705a4340dd3b28f1038cb4dee57}{EthernetDriverEventHandler}}()}
\DoxyCodeLine{57 \{}
\DoxyCodeLine{58 }
\DoxyCodeLine{59     \textcolor{keyword}{this} -\/> \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a9c1e930b5c13c381ceec263b64967cfc}{ethernetDriver}} = driver;}
\DoxyCodeLine{60     \textcolor{keyword}{this} -\/> \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a0ee5f09df8b4bbf5755eb9aa2e8aeb02}{errorMessages}} = \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a0ee5f09df8b4bbf5755eb9aa2e8aeb02}{errorMessages}};}
\DoxyCodeLine{61 }
\DoxyCodeLine{62     driver-\/>connect\_event\_handler(\textcolor{keyword}{this});}
\DoxyCodeLine{63 }
\DoxyCodeLine{64 \}}

\end{DoxyCode}


References Max\+O\+S\+::common\+::\+Event\+Manager$<$ Event\+Type $>$\+::connect\+\_\+event\+\_\+handler(), error\+Messages, and ethernet\+Driver.

\mbox{\Hypertarget{classMaxOS_1_1net_1_1EthernetFrameHandler_af23414f7f6f2f93bd84524cd0b93e8c2}\label{classMaxOS_1_1net_1_1EthernetFrameHandler_af23414f7f6f2f93bd84524cd0b93e8c2}} 
\index{MaxOS::net::EthernetFrameHandler@{MaxOS::net::EthernetFrameHandler}!````~EthernetFrameHandler@{$\sim$EthernetFrameHandler}}
\index{````~EthernetFrameHandler@{$\sim$EthernetFrameHandler}!MaxOS::net::EthernetFrameHandler@{MaxOS::net::EthernetFrameHandler}}
\doxysubsubsection{\texorpdfstring{$\sim$EthernetFrameHandler()}{~EthernetFrameHandler()}}
{\footnotesize\ttfamily Ethernet\+Frame\+Handler\+::$\sim$\+Ethernet\+Frame\+Handler (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 66 of file ethernetframe.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{66                                             \{}
\DoxyCodeLine{67 }
\DoxyCodeLine{68 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classMaxOS_1_1net_1_1EthernetFrameHandler_a79992d7ad67f8dbbae237246ad733ae3}\label{classMaxOS_1_1net_1_1EthernetFrameHandler_a79992d7ad67f8dbbae237246ad733ae3}} 
\index{MaxOS::net::EthernetFrameHandler@{MaxOS::net::EthernetFrameHandler}!connectHandler@{connectHandler}}
\index{connectHandler@{connectHandler}!MaxOS::net::EthernetFrameHandler@{MaxOS::net::EthernetFrameHandler}}
\doxysubsubsection{\texorpdfstring{connectHandler()}{connectHandler()}}
{\footnotesize\ttfamily void Ethernet\+Frame\+Handler\+::connect\+Handler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFramePayloadHandler}{Ethernet\+Frame\+Payload\+Handler}} $\ast$}]{handler }\end{DoxyParamCaption})}



Definition at line 138 of file ethernetframe.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{138                                                                               \{}
\DoxyCodeLine{139 }
\DoxyCodeLine{140     \textcolor{comment}{// Convert the protocol type to big endian}}
\DoxyCodeLine{141     uint16\_t frameType\_BE = ((handler-\/>\mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFramePayloadHandler_a902f9382cf1085858a123e304550ad80}{handledType}} >> 8) \& 0xFF) | ((handler-\/>\mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFramePayloadHandler_a902f9382cf1085858a123e304550ad80}{handledType}} << 8) \& 0xFF00);}
\DoxyCodeLine{142 }
\DoxyCodeLine{143     \textcolor{comment}{// Add the handler to the list}}
\DoxyCodeLine{144     \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a3f0a31d8e1b1503424da3490b12c99e4}{frameHandlers}}.insert(frameType\_BE, handler);}
\DoxyCodeLine{145 }
\DoxyCodeLine{146 \}}

\end{DoxyCode}


References frame\+Handlers, and Max\+O\+S\+::net\+::\+Ethernet\+Frame\+Payload\+Handler\+::handled\+Type.



Referenced by Max\+O\+S\+::net\+::\+Ethernet\+Frame\+Payload\+Handler\+::\+Ethernet\+Frame\+Payload\+Handler().

\mbox{\Hypertarget{classMaxOS_1_1net_1_1EthernetFrameHandler_aff9546783590a27aae5836155b018671}\label{classMaxOS_1_1net_1_1EthernetFrameHandler_aff9546783590a27aae5836155b018671}} 
\index{MaxOS::net::EthernetFrameHandler@{MaxOS::net::EthernetFrameHandler}!DataReceived@{DataReceived}}
\index{DataReceived@{DataReceived}!MaxOS::net::EthernetFrameHandler@{MaxOS::net::EthernetFrameHandler}}
\doxysubsubsection{\texorpdfstring{DataReceived()}{DataReceived()}}
{\footnotesize\ttfamily bool Ethernet\+Frame\+Handler\+::\+Data\+Received (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{buffer,  }\item[{uint32\+\_\+t}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Handle the received packet. 


\begin{DoxyParams}{Parameters}
{\em buffer} & the buffer with the received data \\
\hline
{\em size} & the size of the received data \\
\hline
\end{DoxyParams}


Reimplemented from \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriverEventHandler_a96de6572d115658e486fbefa352b2213}{Max\+O\+S\+::drivers\+::ethernet\+::\+Ethernet\+Driver\+Event\+Handler}}.



Definition at line 81 of file ethernetframe.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{81                                                                       \{}
\DoxyCodeLine{82 }
\DoxyCodeLine{83     \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a0ee5f09df8b4bbf5755eb9aa2e8aeb02}{errorMessages}} -\/> write(\textcolor{stringliteral}{"EFH: Data received\(\backslash\)n"});}
\DoxyCodeLine{84 }
\DoxyCodeLine{85 }
\DoxyCodeLine{86     \textcolor{comment}{//Check if the size is big enough to contain an ethernet frame}}
\DoxyCodeLine{87     \textcolor{keywordflow}{if}(\mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} < \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1EthernetFrameHeader}{EthernetFrameHeader}}))}
\DoxyCodeLine{88         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{89 }
\DoxyCodeLine{90     \textcolor{comment}{//Convert to struct for easier use}}
\DoxyCodeLine{91     \mbox{\hyperlink{structMaxOS_1_1net_1_1EthernetFrameHeader}{EthernetFrameHeader}}* frame = (\mbox{\hyperlink{structMaxOS_1_1net_1_1EthernetFrameHeader}{EthernetFrameHeader}}*)buffer;}
\DoxyCodeLine{92     \textcolor{keywordtype}{bool} sendBack = \textcolor{keyword}{false};}
\DoxyCodeLine{93 }
\DoxyCodeLine{94     \textcolor{comment}{//Only handle if it is for this device}}
\DoxyCodeLine{95     \textcolor{keywordflow}{if}(frame-\/>\mbox{\hyperlink{structMaxOS_1_1net_1_1EthernetFrameHeader_a0e3207034a642a9fafb214f8f769d998}{destinationMAC}} == 0xFFFFFFFFFFFF                                          \textcolor{comment}{//If it is a broadcast}}
\DoxyCodeLine{96     || frame-\/>\mbox{\hyperlink{structMaxOS_1_1net_1_1EthernetFrameHeader_a0e3207034a642a9fafb214f8f769d998}{destinationMAC}} == \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a9c1e930b5c13c381ceec263b64967cfc}{ethernetDriver}} -\/> GetMediaAccessControlAddress())      \textcolor{comment}{//If it is for this device}}
\DoxyCodeLine{97     \{}
\DoxyCodeLine{98 }
\DoxyCodeLine{99         \textcolor{comment}{// Find the handler for the protocol}}
\DoxyCodeLine{100         \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{Map<uint16\_t , EthernetFramePayloadHandler*>::iterator}} handlerIterator = \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a3f0a31d8e1b1503424da3490b12c99e4}{frameHandlers}}.find(frame-\/>\mbox{\hyperlink{structMaxOS_1_1net_1_1EthernetFrameHeader_a6860801edb28a0e4d6dcb348da9656aa}{type}});}
\DoxyCodeLine{101 }
\DoxyCodeLine{102         \textcolor{comment}{// If the handler is found}}
\DoxyCodeLine{103         \textcolor{keywordflow}{if}(handlerIterator != \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a3f0a31d8e1b1503424da3490b12c99e4}{frameHandlers}}.end()) \{}
\DoxyCodeLine{104 }
\DoxyCodeLine{105 }
\DoxyCodeLine{106             \textcolor{comment}{//TODO: The override is not being called (IDK WHY)}}
\DoxyCodeLine{107 }
\DoxyCodeLine{108             \textcolor{comment}{//Handle the data}}
\DoxyCodeLine{109             \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a0ee5f09df8b4bbf5755eb9aa2e8aeb02}{errorMessages}} -\/> write(\textcolor{stringliteral}{"EFH: Handling ethernet frame payload\(\backslash\)n"});}
\DoxyCodeLine{110             sendBack = handlerIterator-\/>second-\/>handleEthernetframePayload(buffer + \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1EthernetFrameHeader}{EthernetFrameHeader}}), \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} -\/ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1EthernetFrameHeader}{EthernetFrameHeader}}));}
\DoxyCodeLine{111             \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a0ee5f09df8b4bbf5755eb9aa2e8aeb02}{errorMessages}} -\/> write(\textcolor{stringliteral}{"..DONE\(\backslash\)n"});}
\DoxyCodeLine{112 }
\DoxyCodeLine{113         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{114 }
\DoxyCodeLine{115             \textcolor{comment}{//If the handler is not found, print an error message}}
\DoxyCodeLine{116             \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a0ee5f09df8b4bbf5755eb9aa2e8aeb02}{errorMessages}} -\/> write(\textcolor{stringliteral}{"EFH: Unhandled ethernet frame type 0x"});}
\DoxyCodeLine{117             \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a0ee5f09df8b4bbf5755eb9aa2e8aeb02}{errorMessages}}-\/>\mbox{\hyperlink{classMaxOS_1_1common_1_1OutputStream_a810813a72bc51936c4926e182d74b739}{write\_hex}}(frame-\/>\mbox{\hyperlink{structMaxOS_1_1net_1_1EthernetFrameHeader_a6860801edb28a0e4d6dcb348da9656aa}{type}});}
\DoxyCodeLine{118             \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a0ee5f09df8b4bbf5755eb9aa2e8aeb02}{errorMessages}} -\/> write(\textcolor{stringliteral}{"\(\backslash\)n"});}
\DoxyCodeLine{119 }
\DoxyCodeLine{120         \}}
\DoxyCodeLine{121     \}}
\DoxyCodeLine{122 }
\DoxyCodeLine{123     \textcolor{comment}{//If the data is to be sent back again}}
\DoxyCodeLine{124     \textcolor{keywordflow}{if}(sendBack)\{}
\DoxyCodeLine{125 }
\DoxyCodeLine{126         \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a0ee5f09df8b4bbf5755eb9aa2e8aeb02}{errorMessages}} -\/> write(\textcolor{stringliteral}{"EFH: Sending back\(\backslash\)n"});}
\DoxyCodeLine{127 }
\DoxyCodeLine{128         frame -\/> \mbox{\hyperlink{ethernetframe_8h_ab7397a8498d13aec6dbc4fbf86cc051e}{destinationMAC}} = frame -\/> \mbox{\hyperlink{ethernetframe_8h_adfc6a7d732611f222f5ffb5bb2bde281}{sourceMAC}};                             \textcolor{comment}{//Set the new destination to be the device the data was received from}}
\DoxyCodeLine{129         frame -\/> \mbox{\hyperlink{ethernetframe_8h_adfc6a7d732611f222f5ffb5bb2bde281}{sourceMAC}} = \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a9c1e930b5c13c381ceec263b64967cfc}{ethernetDriver}}-\/>\mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver_a3bf68668c69f6b300888ad189a67006a}{GetMediaAccessControlAddress}}();      \textcolor{comment}{//Set the new source to be this device's MAC address}}
\DoxyCodeLine{130 }
\DoxyCodeLine{131     \}}
\DoxyCodeLine{132 }
\DoxyCodeLine{133     \textcolor{comment}{//Return if the data is to be sent back}}
\DoxyCodeLine{134     \textcolor{keywordflow}{return} sendBack;}
\DoxyCodeLine{135 }
\DoxyCodeLine{136 \}}

\end{DoxyCode}


References destination\+M\+AC, Max\+O\+S\+::net\+::\+Ethernet\+Frame\+Header\+::destination\+M\+AC, error\+Messages, ethernet\+Driver, frame\+Handlers, Max\+O\+S\+::drivers\+::ethernet\+::\+Ethernet\+Driver\+::\+Get\+Media\+Access\+Control\+Address(), size, source\+M\+AC, Max\+O\+S\+::net\+::\+Ethernet\+Frame\+Header\+::type, and Max\+O\+S\+::common\+::\+Output\+Stream\+::write\+\_\+hex().

\mbox{\Hypertarget{classMaxOS_1_1net_1_1EthernetFrameHandler_a0d1aa430d0a7139ebe0a47785b0b0b80}\label{classMaxOS_1_1net_1_1EthernetFrameHandler_a0d1aa430d0a7139ebe0a47785b0b0b80}} 
\index{MaxOS::net::EthernetFrameHandler@{MaxOS::net::EthernetFrameHandler}!getMAC@{getMAC}}
\index{getMAC@{getMAC}!MaxOS::net::EthernetFrameHandler@{MaxOS::net::EthernetFrameHandler}}
\doxysubsubsection{\texorpdfstring{getMAC()}{getMAC()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1ethernet_a65f54d2d9dfdb9eafd1affd62abe8d18}{drivers\+::ethernet\+::\+Media\+Access\+Control\+Address}} Ethernet\+Frame\+Handler\+::get\+M\+AC (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 70 of file ethernetframe.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{70                                                                       \{}
\DoxyCodeLine{71     \textcolor{keywordflow}{return} \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a9c1e930b5c13c381ceec263b64967cfc}{ethernetDriver}} -\/> GetMediaAccessControlAddress();}
\DoxyCodeLine{72 \}}

\end{DoxyCode}


References ethernet\+Driver.

\mbox{\Hypertarget{classMaxOS_1_1net_1_1EthernetFrameHandler_ae773f48341030a7afe7587ae73cb057f}\label{classMaxOS_1_1net_1_1EthernetFrameHandler_ae773f48341030a7afe7587ae73cb057f}} 
\index{MaxOS::net::EthernetFrameHandler@{MaxOS::net::EthernetFrameHandler}!sendEthernetFrame@{sendEthernetFrame}}
\index{sendEthernetFrame@{sendEthernetFrame}!MaxOS::net::EthernetFrameHandler@{MaxOS::net::EthernetFrameHandler}}
\doxysubsubsection{\texorpdfstring{sendEthernetFrame()}{sendEthernetFrame()}}
{\footnotesize\ttfamily void Ethernet\+Frame\+Handler\+::send\+Ethernet\+Frame (\begin{DoxyParamCaption}\item[{uint64\+\_\+t}]{destination\+M\+AC,  }\item[{uint16\+\_\+t}]{frame\+Type,  }\item[{uint8\+\_\+t $\ast$}]{data,  }\item[{uint32\+\_\+t}]{size }\end{DoxyParamCaption})}



Send an packet via the backend driver. 


\begin{DoxyParams}{Parameters}
{\em dst\+M\+A\+C\+\_\+\+BE} & the destination M\+AC address \\
\hline
{\em ether\+Type\+\_\+\+BE} & the type of the protocol \\
\hline
{\em buffer} & the data to send \\
\hline
{\em size} & the size of the payload \\
\hline
\end{DoxyParams}


Definition at line 156 of file ethernetframe.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{156                                                                                                                       \{}
\DoxyCodeLine{157 }
\DoxyCodeLine{158     \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a0ee5f09df8b4bbf5755eb9aa2e8aeb02}{errorMessages}}-\/>\mbox{\hyperlink{classMaxOS_1_1common_1_1OutputStream_acd9ebbe1729dded0d4156f32ae77da95}{write}}(\textcolor{stringliteral}{"EFH: Sending frame..."});}
\DoxyCodeLine{159 }
\DoxyCodeLine{160     \textcolor{comment}{//Allocate memory for the buffer}}
\DoxyCodeLine{161     uint8\_t* buffer = (uint8\_t*)MemoryManager::s\_active\_memory\_manager-\/> malloc(\mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} + \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1EthernetFrameHeader}{EthernetFrameHeader}}));}
\DoxyCodeLine{162     \mbox{\hyperlink{structMaxOS_1_1net_1_1EthernetFrameHeader}{EthernetFrameHeader}}* frame = (\mbox{\hyperlink{structMaxOS_1_1net_1_1EthernetFrameHeader}{EthernetFrameHeader}}*)buffer;}
\DoxyCodeLine{163 }
\DoxyCodeLine{164     \textcolor{comment}{//Put data in the header}}
\DoxyCodeLine{165     frame -\/> \mbox{\hyperlink{ethernetframe_8h_ab7397a8498d13aec6dbc4fbf86cc051e}{destinationMAC}} = \mbox{\hyperlink{ethernetframe_8h_ab7397a8498d13aec6dbc4fbf86cc051e}{destinationMAC}};}
\DoxyCodeLine{166     frame -\/> \mbox{\hyperlink{ethernetframe_8h_adfc6a7d732611f222f5ffb5bb2bde281}{sourceMAC}} = \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a9c1e930b5c13c381ceec263b64967cfc}{ethernetDriver}} -\/> GetMediaAccessControlAddress();}
\DoxyCodeLine{167     frame -\/> \mbox{\hyperlink{apic_8h_a1d127017fb298b889f4ba24752d08b8e}{type}} = (frameType >> 8) | (frameType << 8);                        \textcolor{comment}{//Convert to big endian}}
\DoxyCodeLine{168 }
\DoxyCodeLine{169     \textcolor{comment}{//Copy the data}}
\DoxyCodeLine{170     \textcolor{keywordflow}{for}(uint8\_t *src = \mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}} + \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} -\/ 1, *dst = buffer+\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1EthernetFrameHeader}{EthernetFrameHeader}})+\mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}}-\/1; src >= \mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}}; -\/-\/src, -\/-\/dst)}
\DoxyCodeLine{171         *dst = *src;}
\DoxyCodeLine{172 }
\DoxyCodeLine{173     \textcolor{comment}{//Send the data}}
\DoxyCodeLine{174     \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a9c1e930b5c13c381ceec263b64967cfc}{ethernetDriver}} -\/> Send(buffer, \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} + \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1EthernetFrameHeader}{EthernetFrameHeader}}));}
\DoxyCodeLine{175 }
\DoxyCodeLine{176     \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFrameHandler_a0ee5f09df8b4bbf5755eb9aa2e8aeb02}{errorMessages}}-\/>\mbox{\hyperlink{classMaxOS_1_1common_1_1OutputStream_acd9ebbe1729dded0d4156f32ae77da95}{write}}(\textcolor{stringliteral}{"Done\(\backslash\)n"});}
\DoxyCodeLine{177 }
\DoxyCodeLine{178 }
\DoxyCodeLine{179     \textcolor{comment}{//Free the buffer}}
\DoxyCodeLine{180     MemoryManager::s\_active\_memory\_manager-\/> free(buffer);}
\DoxyCodeLine{181 \}}

\end{DoxyCode}


References data, destination\+M\+AC, error\+Messages, ethernet\+Driver, size, source\+M\+AC, type, and Max\+O\+S\+::common\+::\+Output\+Stream\+::write().



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classMaxOS_1_1net_1_1EthernetFrameHandler_a0ee5f09df8b4bbf5755eb9aa2e8aeb02}\label{classMaxOS_1_1net_1_1EthernetFrameHandler_a0ee5f09df8b4bbf5755eb9aa2e8aeb02}} 
\index{MaxOS::net::EthernetFrameHandler@{MaxOS::net::EthernetFrameHandler}!errorMessages@{errorMessages}}
\index{errorMessages@{errorMessages}!MaxOS::net::EthernetFrameHandler@{MaxOS::net::EthernetFrameHandler}}
\doxysubsubsection{\texorpdfstring{errorMessages}{errorMessages}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}}$\ast$ Max\+O\+S\+::net\+::\+Ethernet\+Frame\+Handler\+::error\+Messages\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 57 of file ethernetframe.\+h.



Referenced by Data\+Received(), Ethernet\+Frame\+Handler(), and send\+Ethernet\+Frame().

\mbox{\Hypertarget{classMaxOS_1_1net_1_1EthernetFrameHandler_a9c1e930b5c13c381ceec263b64967cfc}\label{classMaxOS_1_1net_1_1EthernetFrameHandler_a9c1e930b5c13c381ceec263b64967cfc}} 
\index{MaxOS::net::EthernetFrameHandler@{MaxOS::net::EthernetFrameHandler}!ethernetDriver@{ethernetDriver}}
\index{ethernetDriver@{ethernetDriver}!MaxOS::net::EthernetFrameHandler@{MaxOS::net::EthernetFrameHandler}}
\doxysubsubsection{\texorpdfstring{ethernetDriver}{ethernetDriver}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver}{drivers\+::ethernet\+::\+Ethernet\+Driver}}$\ast$ Max\+O\+S\+::net\+::\+Ethernet\+Frame\+Handler\+::ethernet\+Driver\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 56 of file ethernetframe.\+h.



Referenced by Data\+Received(), Ethernet\+Frame\+Handler(), get\+M\+A\+C(), and send\+Ethernet\+Frame().

\mbox{\Hypertarget{classMaxOS_1_1net_1_1EthernetFrameHandler_a3f0a31d8e1b1503424da3490b12c99e4}\label{classMaxOS_1_1net_1_1EthernetFrameHandler_a3f0a31d8e1b1503424da3490b12c99e4}} 
\index{MaxOS::net::EthernetFrameHandler@{MaxOS::net::EthernetFrameHandler}!frameHandlers@{frameHandlers}}
\index{frameHandlers@{frameHandlers}!MaxOS::net::EthernetFrameHandler@{MaxOS::net::EthernetFrameHandler}}
\doxysubsubsection{\texorpdfstring{frameHandlers}{frameHandlers}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Map}{common\+::\+Map}}$<$uint16\+\_\+t , \mbox{\hyperlink{classMaxOS_1_1net_1_1EthernetFramePayloadHandler}{Ethernet\+Frame\+Payload\+Handler}}$\ast$$>$ Max\+O\+S\+::net\+::\+Ethernet\+Frame\+Handler\+::frame\+Handlers\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 54 of file ethernetframe.\+h.



Referenced by connect\+Handler(), and Data\+Received().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Max\+O\+S/\+Max\+O\+S/kernel/include/net/\mbox{\hyperlink{ethernetframe_8h}{ethernetframe.\+h}}\item 
/home/runner/work/\+Max\+O\+S/\+Max\+O\+S/kernel/src/net/\mbox{\hyperlink{ethernetframe_8cpp}{ethernetframe.\+cpp}}\end{DoxyCompactItemize}
