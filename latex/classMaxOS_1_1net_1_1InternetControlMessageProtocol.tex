\hypertarget{classMaxOS_1_1net_1_1InternetControlMessageProtocol}{}\doxysection{Max\+OS\+::net\+::Internet\+Control\+Message\+Protocol Class Reference}
\label{classMaxOS_1_1net_1_1InternetControlMessageProtocol}\index{MaxOS::net::InternetControlMessageProtocol@{MaxOS::net::InternetControlMessageProtocol}}


{\ttfamily \#include $<$icmp.\+h$>$}

Inheritance diagram for Max\+OS\+::net\+::Internet\+Control\+Message\+Protocol\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classMaxOS_1_1net_1_1InternetControlMessageProtocol}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1net_1_1InternetControlMessageProtocol_a2e07bd3786f70d3c9d0cf11ada21210c}{Internet\+Control\+Message\+Protocol}} (\mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolHandler}{Internet\+Protocol\+Handler}} $\ast$\mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolPayloadHandler_af2365749bed6df7757755cf83f30eb42}{internet\+Protocol\+Handler}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} $\ast$error\+Messages)
\item 
\mbox{\hyperlink{classMaxOS_1_1net_1_1InternetControlMessageProtocol_a4621375163ebabb97e2723a06b6347c6}{$\sim$\+Internet\+Control\+Message\+Protocol}} ()
\item 
bool \mbox{\hyperlink{classMaxOS_1_1net_1_1InternetControlMessageProtocol_a327e8e7f66254666a10e5b2b01440292}{handle\+Internet\+Protocol\+Payload}} (\mbox{\hyperlink{namespaceMaxOS_1_1net_af037c025feb88b952b167f4dfa2709a0}{Internet\+Protocol\+Address}} \mbox{\hyperlink{ipv4_8h_aed74aa5789cabec794d6961455e80db3}{source\+IP}}, \mbox{\hyperlink{namespaceMaxOS_1_1net_af037c025feb88b952b167f4dfa2709a0}{Internet\+Protocol\+Address}} \mbox{\hyperlink{ipv4_8h_afcc7048c1d9643cebaf1806fa4de390e}{destination\+IP}}, uint8\+\_\+t $\ast$payload\+Data, uint32\+\_\+t \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}})
\begin{DoxyCompactList}\small\item\em Called by the Internet\+Protocol\+Provider when a new packet has arrived. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classMaxOS_1_1net_1_1InternetControlMessageProtocol_a2fc52aeb261446119170f4b3f843129e}{Request\+Echo\+Reply}} (\mbox{\hyperlink{namespaceMaxOS_1_1net_af037c025feb88b952b167f4dfa2709a0}{Internet\+Protocol\+Address}} \mbox{\hyperlink{gdt_8h_ab6b52376c1b9d81e6ea6f95a1225f832}{address}})
\begin{DoxyCompactList}\small\item\em Sends an I\+C\+MP echo request to the specified IP address. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 25 of file icmp.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classMaxOS_1_1net_1_1InternetControlMessageProtocol_a2e07bd3786f70d3c9d0cf11ada21210c}\label{classMaxOS_1_1net_1_1InternetControlMessageProtocol_a2e07bd3786f70d3c9d0cf11ada21210c}} 
\index{MaxOS::net::InternetControlMessageProtocol@{MaxOS::net::InternetControlMessageProtocol}!InternetControlMessageProtocol@{InternetControlMessageProtocol}}
\index{InternetControlMessageProtocol@{InternetControlMessageProtocol}!MaxOS::net::InternetControlMessageProtocol@{MaxOS::net::InternetControlMessageProtocol}}
\doxysubsubsection{\texorpdfstring{InternetControlMessageProtocol()}{InternetControlMessageProtocol()}}
{\footnotesize\ttfamily Internet\+Control\+Message\+Protocol\+::\+Internet\+Control\+Message\+Protocol (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolHandler}{Internet\+Protocol\+Handler}} $\ast$}]{internet\+Protocol\+Handler,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} $\ast$}]{error\+Messages }\end{DoxyParamCaption})}



Definition at line 12 of file icmp.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{13 : \mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolPayloadHandler_aa84ea5b14f12e69aaa6ad2b2d95871dc}{InternetProtocolPayloadHandler}}(\mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolPayloadHandler_af2365749bed6df7757755cf83f30eb42}{internetProtocolHandler}}, 0x01)}
\DoxyCodeLine{14 \{}
\DoxyCodeLine{15     \textcolor{keyword}{this} -\/> errorMessages = errorMessages;}
\DoxyCodeLine{16 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classMaxOS_1_1net_1_1InternetControlMessageProtocol_a4621375163ebabb97e2723a06b6347c6}\label{classMaxOS_1_1net_1_1InternetControlMessageProtocol_a4621375163ebabb97e2723a06b6347c6}} 
\index{MaxOS::net::InternetControlMessageProtocol@{MaxOS::net::InternetControlMessageProtocol}!````~InternetControlMessageProtocol@{$\sim$InternetControlMessageProtocol}}
\index{````~InternetControlMessageProtocol@{$\sim$InternetControlMessageProtocol}!MaxOS::net::InternetControlMessageProtocol@{MaxOS::net::InternetControlMessageProtocol}}
\doxysubsubsection{\texorpdfstring{$\sim$InternetControlMessageProtocol()}{~InternetControlMessageProtocol()}}
{\footnotesize\ttfamily Internet\+Control\+Message\+Protocol\+::$\sim$\+Internet\+Control\+Message\+Protocol (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 20 of file icmp.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{20                                                                 \{}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classMaxOS_1_1net_1_1InternetControlMessageProtocol_a327e8e7f66254666a10e5b2b01440292}\label{classMaxOS_1_1net_1_1InternetControlMessageProtocol_a327e8e7f66254666a10e5b2b01440292}} 
\index{MaxOS::net::InternetControlMessageProtocol@{MaxOS::net::InternetControlMessageProtocol}!handleInternetProtocolPayload@{handleInternetProtocolPayload}}
\index{handleInternetProtocolPayload@{handleInternetProtocolPayload}!MaxOS::net::InternetControlMessageProtocol@{MaxOS::net::InternetControlMessageProtocol}}
\doxysubsubsection{\texorpdfstring{handleInternetProtocolPayload()}{handleInternetProtocolPayload()}}
{\footnotesize\ttfamily bool Internet\+Control\+Message\+Protocol\+::handle\+Internet\+Protocol\+Payload (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespaceMaxOS_1_1net_af037c025feb88b952b167f4dfa2709a0}{Internet\+Protocol\+Address}}}]{source\+IP,  }\item[{\mbox{\hyperlink{namespaceMaxOS_1_1net_af037c025feb88b952b167f4dfa2709a0}{Internet\+Protocol\+Address}}}]{destination\+IP,  }\item[{uint8\+\_\+t $\ast$}]{payload\+Data,  }\item[{uint32\+\_\+t}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Called by the Internet\+Protocol\+Provider when a new packet has arrived. 


\begin{DoxyParams}{Parameters}
{\em src\+I\+P\+\_\+\+BE} & The source IP address of the packet \\
\hline
{\em dst\+I\+P\+\_\+\+BE} & The destination IP address of the packet \\
\hline
{\em internetprotocol\+Payload} & The payload of the packet \\
\hline
{\em size} & The size of the payload\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if the packet is to be sent back to the sender, false otherwise 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolPayloadHandler_aaef48d6a7ff6c478f9bf561097c82c01}{Max\+O\+S\+::net\+::\+Internet\+Protocol\+Payload\+Handler}}.



Definition at line 33 of file icmp.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{37 \{}
\DoxyCodeLine{38 }
\DoxyCodeLine{39     errorMessages -\/> \mbox{\hyperlink{physical_8h_af3329fc9f76244f46dedda8e02ba8066}{write}}(\textcolor{stringliteral}{"ICMP received a packet\(\backslash\)n"});}
\DoxyCodeLine{40 }
\DoxyCodeLine{41     \textcolor{comment}{// Check if the size is at least the size of the header}}
\DoxyCodeLine{42     \textcolor{keywordflow}{if}(\mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} < \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1InternetControlMessageProtocolHeader}{InternetControlMessageProtocolHeader}}))\{}
\DoxyCodeLine{43         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{44     \}}
\DoxyCodeLine{45 }
\DoxyCodeLine{46     \textcolor{comment}{// Cast the payload to the ICMP header}}
\DoxyCodeLine{47     \mbox{\hyperlink{structMaxOS_1_1net_1_1InternetControlMessageProtocolHeader}{InternetControlMessageProtocolHeader}}* icmp = (\mbox{\hyperlink{structMaxOS_1_1net_1_1InternetControlMessageProtocolHeader}{InternetControlMessageProtocolHeader}}*)payloadData;}
\DoxyCodeLine{48 }
\DoxyCodeLine{49     \textcolor{keywordflow}{switch} (icmp -\/> \mbox{\hyperlink{apic_8h_a1d127017fb298b889f4ba24752d08b8e}{type}}) \{}
\DoxyCodeLine{50 }
\DoxyCodeLine{51         \textcolor{keywordflow}{case} 0: \textcolor{comment}{// Echo reply}}
\DoxyCodeLine{52             \textcolor{comment}{// TODO: reply to the ping}}
\DoxyCodeLine{53             \textcolor{keywordflow}{break};}
\DoxyCodeLine{54 }
\DoxyCodeLine{55         \textcolor{keywordflow}{case} 8: \textcolor{comment}{// Echo request}}
\DoxyCodeLine{56 }
\DoxyCodeLine{57             \textcolor{comment}{// Create a response}}
\DoxyCodeLine{58             icmp -\/> \mbox{\hyperlink{apic_8h_a1d127017fb298b889f4ba24752d08b8e}{type}} = 0;                                                                                                                    \textcolor{comment}{// Echo reply}}
\DoxyCodeLine{59             icmp -\/> \mbox{\hyperlink{intel__i217_8h_a59eac9627282a484fbaf0aa7aa3b8a9a}{checksum}} = 0;                                                                                                                \textcolor{comment}{// Reset the checksum}}
\DoxyCodeLine{60             icmp -\/> \mbox{\hyperlink{intel__i217_8h_a59eac9627282a484fbaf0aa7aa3b8a9a}{checksum}} = \mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolHandler_af21ed9d77b68f0c51f1d80524d327ded}{InternetProtocolHandler::Checksum}}((uint16\_t *)\&icmp, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1InternetControlMessageProtocolHeader}{InternetControlMessageProtocolHeader}}));             \textcolor{comment}{// Calculate the checksum}}
\DoxyCodeLine{61 }
\DoxyCodeLine{62             \textcolor{keywordflow}{return} \textcolor{keyword}{true};    \textcolor{comment}{//Send data back}}
\DoxyCodeLine{63 }
\DoxyCodeLine{64     \}}
\DoxyCodeLine{65 }
\DoxyCodeLine{66     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{67 }
\DoxyCodeLine{68     \textcolor{comment}{//TODO: Implement the rest of the ICMP messages}}
\DoxyCodeLine{69 }
\DoxyCodeLine{70 \}}

\end{DoxyCode}


References checksum, Max\+O\+S\+::net\+::\+Internet\+Protocol\+Handler\+::\+Checksum(), size, type, and write.

\mbox{\Hypertarget{classMaxOS_1_1net_1_1InternetControlMessageProtocol_a2fc52aeb261446119170f4b3f843129e}\label{classMaxOS_1_1net_1_1InternetControlMessageProtocol_a2fc52aeb261446119170f4b3f843129e}} 
\index{MaxOS::net::InternetControlMessageProtocol@{MaxOS::net::InternetControlMessageProtocol}!RequestEchoReply@{RequestEchoReply}}
\index{RequestEchoReply@{RequestEchoReply}!MaxOS::net::InternetControlMessageProtocol@{MaxOS::net::InternetControlMessageProtocol}}
\doxysubsubsection{\texorpdfstring{RequestEchoReply()}{RequestEchoReply()}}
{\footnotesize\ttfamily void Internet\+Control\+Message\+Protocol\+::\+Request\+Echo\+Reply (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespaceMaxOS_1_1net_af037c025feb88b952b167f4dfa2709a0}{Internet\+Protocol\+Address}}}]{address }\end{DoxyParamCaption})}



Sends an I\+C\+MP echo request to the specified IP address. 


\begin{DoxyParams}{Parameters}
{\em ip\+\_\+be} & The IP address to send the request to \\
\hline
\end{DoxyParams}


Definition at line 77 of file icmp.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{77                                                                     \{}
\DoxyCodeLine{78 }
\DoxyCodeLine{79     errorMessages -\/> \mbox{\hyperlink{physical_8h_af3329fc9f76244f46dedda8e02ba8066}{write}}(\textcolor{stringliteral}{"ICMP: Sending echo request\(\backslash\)n"});}
\DoxyCodeLine{80 }
\DoxyCodeLine{81     \mbox{\hyperlink{structMaxOS_1_1net_1_1InternetControlMessageProtocolHeader}{InternetControlMessageProtocolHeader}} icmp;}
\DoxyCodeLine{82     icmp.\mbox{\hyperlink{structMaxOS_1_1net_1_1InternetControlMessageProtocolHeader_ad4913d82e0ec6f2d12055e61290b1ad3}{type}} = 8;                      \textcolor{comment}{// Echo request}}
\DoxyCodeLine{83     icmp.\mbox{\hyperlink{structMaxOS_1_1net_1_1InternetControlMessageProtocolHeader_a4462964bfb34f928edd1f7ee92e42fbe}{code}} = 0;                      \textcolor{comment}{// Code must be 0}}
\DoxyCodeLine{84     icmp.\mbox{\hyperlink{structMaxOS_1_1net_1_1InternetControlMessageProtocolHeader_aa3a5b2f1a78ac36417223b3098385a4f}{checksum}} = 0;                  \textcolor{comment}{// Checksum must be 0 to calculate it}}
\DoxyCodeLine{85     icmp.\mbox{\hyperlink{structMaxOS_1_1net_1_1InternetControlMessageProtocolHeader_a9fab13e845bbf24eac1021e006a39160}{data}} = 0x69420;        \textcolor{comment}{// Data}}
\DoxyCodeLine{86 }
\DoxyCodeLine{87     icmp.\mbox{\hyperlink{structMaxOS_1_1net_1_1InternetControlMessageProtocolHeader_aa3a5b2f1a78ac36417223b3098385a4f}{checksum}} = \mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolHandler_af21ed9d77b68f0c51f1d80524d327ded}{InternetProtocolHandler::Checksum}}((uint16\_t *)\&icmp, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1InternetControlMessageProtocolHeader}{InternetControlMessageProtocolHeader}}));}
\DoxyCodeLine{88 }
\DoxyCodeLine{89     \mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolPayloadHandler_a547124e71c39318710ca97724adc447b}{Send}}(ip\_be, (uint8\_t *)\&icmp, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1InternetControlMessageProtocolHeader}{InternetControlMessageProtocolHeader}}));}
\DoxyCodeLine{90 }
\DoxyCodeLine{91     errorMessages -\/> \mbox{\hyperlink{physical_8h_af3329fc9f76244f46dedda8e02ba8066}{write}}(\textcolor{stringliteral}{"ICMP: Echo request sent\(\backslash\)n"});}
\DoxyCodeLine{92 \}}

\end{DoxyCode}


References Max\+O\+S\+::net\+::\+Internet\+Control\+Message\+Protocol\+Header\+::checksum, Max\+O\+S\+::net\+::\+Internet\+Protocol\+Handler\+::\+Checksum(), Max\+O\+S\+::net\+::\+Internet\+Control\+Message\+Protocol\+Header\+::code, Max\+O\+S\+::net\+::\+Internet\+Control\+Message\+Protocol\+Header\+::data, Max\+O\+S\+::net\+::\+Internet\+Protocol\+Payload\+Handler\+::\+Send(), Max\+O\+S\+::net\+::\+Internet\+Control\+Message\+Protocol\+Header\+::type, and write.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Max\+O\+S/\+Max\+O\+S/kernel/include/net/\mbox{\hyperlink{icmp_8h}{icmp.\+h}}\item 
/home/runner/work/\+Max\+O\+S/\+Max\+O\+S/kernel/src/net/\mbox{\hyperlink{icmp_8cpp}{icmp.\+cpp}}\end{DoxyCompactItemize}
