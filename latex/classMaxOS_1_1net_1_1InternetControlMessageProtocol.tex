\doxysection{Max\+OS\+::net\+::Internet\+Control\+Message\+Protocol Class Reference}
\hypertarget{classMaxOS_1_1net_1_1InternetControlMessageProtocol}{}\label{classMaxOS_1_1net_1_1InternetControlMessageProtocol}\index{MaxOS::net::InternetControlMessageProtocol@{MaxOS::net::InternetControlMessageProtocol}}


Handles ICMP packets.  




{\ttfamily \#include $<$icmp.\+h$>$}

Inheritance diagram for Max\+OS\+::net\+::Internet\+Control\+Message\+Protocol\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classMaxOS_1_1net_1_1InternetControlMessageProtocol}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1net_1_1InternetControlMessageProtocol_a2e07bd3786f70d3c9d0cf11ada21210c}{Internet\+Control\+Message\+Protocol}} (\mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolHandler}{Internet\+Protocol\+Handler}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1net_1_1IPV4PayloadHandler_a2b80f1e0d750928b8d49fdaa71949bc8}{internet\+Protocol\+Handler}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} \texorpdfstring{$\ast$}{*}error\+Messages)
\begin{DoxyCompactList}\small\item\em Constructs an \doxylink{classMaxOS_1_1net_1_1InternetControlMessageProtocol}{Internet\+Control\+Message\+Protocol} handler. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bool}} \mbox{\hyperlink{classMaxOS_1_1net_1_1InternetControlMessageProtocol_ad4f8fca54c984698e1861d89e70e70fe}{handle\+Internet\+Protocol\+Payload}} (Internet\+Protocol\+Address \mbox{\hyperlink{ipv4_8h_aed74aa5789cabec794d6961455e80db3}{source\+IP}}, Internet\+Protocol\+Address \mbox{\hyperlink{ipv4_8h_afcc7048c1d9643cebaf1806fa4de390e}{destination\+IP}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{payload\+Data}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{ext2_8h_aaba88b24a21a6c70c895c0d55f4a69a0}{size}}) \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{final}}
\begin{DoxyCompactList}\small\item\em Called by the Internet\+Protocol\+Provider when a new packet has arrived. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1net_1_1InternetControlMessageProtocol_a3b97888ccd27c3377a7e7a4ed869a520}{Request\+Echo\+Reply}} (Internet\+Protocol\+Address \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ip\+\_\+be}})
\begin{DoxyCompactList}\small\item\em Sends an ICMP echo request to the specified IP address. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Handles ICMP packets. 

Definition at line \mbox{\hyperlink{icmp_8h_source_l00037}{37}} of file \mbox{\hyperlink{icmp_8h_source}{icmp.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classMaxOS_1_1net_1_1InternetControlMessageProtocol_a2e07bd3786f70d3c9d0cf11ada21210c}\label{classMaxOS_1_1net_1_1InternetControlMessageProtocol_a2e07bd3786f70d3c9d0cf11ada21210c} 
\index{MaxOS::net::InternetControlMessageProtocol@{MaxOS::net::InternetControlMessageProtocol}!InternetControlMessageProtocol@{InternetControlMessageProtocol}}
\index{InternetControlMessageProtocol@{InternetControlMessageProtocol}!MaxOS::net::InternetControlMessageProtocol@{MaxOS::net::InternetControlMessageProtocol}}
\doxysubsubsection{\texorpdfstring{InternetControlMessageProtocol()}{InternetControlMessageProtocol()}}
{\footnotesize\ttfamily Internet\+Control\+Message\+Protocol\+::\+Internet\+Control\+Message\+Protocol (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolHandler}{Internet\+Protocol\+Handler}} \texorpdfstring{$\ast$}{*}}]{internet\+Protocol\+Handler,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} \texorpdfstring{$\ast$}{*}}]{error\+Messages }\end{DoxyParamCaption})}



Constructs an \doxylink{classMaxOS_1_1net_1_1InternetControlMessageProtocol}{Internet\+Control\+Message\+Protocol} handler. 


\begin{DoxyParams}{Parameters}
{\em internet\+Protocol\+Handler} & The Internet protocol handler to use. \\
\hline
{\em error\+Messages} & The output stream to use for error messages. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{icmp_8cpp_source_l00021}{21}} of file \mbox{\hyperlink{icmp_8cpp_source}{icmp.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00022\ :\ \mbox{\hyperlink{classMaxOS_1_1net_1_1IPV4PayloadHandler}{IPV4PayloadHandler}}(\mbox{\hyperlink{classMaxOS_1_1net_1_1IPV4PayloadHandler_a2b80f1e0d750928b8d49fdaa71949bc8}{internetProtocolHandler}},\ 0x01)}
\DoxyCodeLine{00023\ \{}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keyword}{this}\ -\/>\ errorMessages\ =\ errorMessages;}
\DoxyCodeLine{00025\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classMaxOS_1_1net_1_1InternetControlMessageProtocol_ad4f8fca54c984698e1861d89e70e70fe}\label{classMaxOS_1_1net_1_1InternetControlMessageProtocol_ad4f8fca54c984698e1861d89e70e70fe} 
\index{MaxOS::net::InternetControlMessageProtocol@{MaxOS::net::InternetControlMessageProtocol}!handleInternetProtocolPayload@{handleInternetProtocolPayload}}
\index{handleInternetProtocolPayload@{handleInternetProtocolPayload}!MaxOS::net::InternetControlMessageProtocol@{MaxOS::net::InternetControlMessageProtocol}}
\doxysubsubsection{\texorpdfstring{handleInternetProtocolPayload()}{handleInternetProtocolPayload()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bool}} Internet\+Control\+Message\+Protocol\+::handle\+Internet\+Protocol\+Payload (\begin{DoxyParamCaption}\item[{Internet\+Protocol\+Address}]{src\+IP\+\_\+\+BE,  }\item[{Internet\+Protocol\+Address}]{dst\+IP\+\_\+\+BE,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{payload\+Data,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



Called by the Internet\+Protocol\+Provider when a new packet has arrived. 


\begin{DoxyParams}{Parameters}
{\em src\+IP\+\_\+\+BE} & The source IP address of the packet \\
\hline
{\em dst\+IP\+\_\+\+BE} & The destination IP address of the packet \\
\hline
{\em payload\+Data} & The payload of the packet \\
\hline
{\em size} & The size of the payload\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if the packet is to be sent back to the sender, false otherwise
\end{DoxyReturn}
\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000065}{Todo}}]Reply to ping requests 

Implement the rest of the ICMP messages \end{DoxyRefDesc}


Reimplemented from \mbox{\hyperlink{classMaxOS_1_1net_1_1IPV4PayloadHandler_a7463073902bdd6f754805a99bba9a000}{Max\+OS\+::net\+::\+IPV4\+Payload\+Handler}}.



Definition at line \mbox{\hyperlink{icmp_8cpp_source_l00043}{43}} of file \mbox{\hyperlink{icmp_8cpp_source}{icmp.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00047\ \{}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ errorMessages\ -\/>\ \mbox{\hyperlink{physical_8h_ab4d8d1259f524270d625ab8933700d27}{write}}(\textcolor{stringliteral}{"{}ICMP\ received\ a\ packet\(\backslash\)n"{}});}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{comment}{//\ Check\ if\ the\ size\ is\ at\ least\ the\ size\ of\ the\ header}}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{ext2_8h_aaba88b24a21a6c70c895c0d55f4a69a0}{size}}\ <\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1ICMPHeader}{ICMPHeader}}))\{}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00054\ \ \ \ \ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{comment}{//\ Cast\ the\ payload\ to\ the\ ICMP\ header}}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keyword}{auto}*\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{icmp}}\ =\ (\mbox{\hyperlink{structMaxOS_1_1net_1_1ICMPHeader}{ICMPHeader}}*)\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{payloadData}};}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordflow}{switch}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{icmp}}\ -\/>\ \mbox{\hyperlink{ext2_8h_a1d127017fb298b889f4ba24752d08b8e}{type}})\ \{}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:\ \textcolor{comment}{//\ Echo\ reply}}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 8:\ \textcolor{comment}{//\ Echo\ request}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Create\ a\ response}}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{icmp}}\ -\/>\ \mbox{\hyperlink{ext2_8h_a1d127017fb298b889f4ba24752d08b8e}{type}}\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Echo\ reply}}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{icmp}}\ -\/>\ \mbox{\hyperlink{intel__i217_8h_a59eac9627282a484fbaf0aa7aa3b8a9a}{checksum}}\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reset\ the\ checksum}}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{icmp}}\ -\/>\ \mbox{\hyperlink{intel__i217_8h_a59eac9627282a484fbaf0aa7aa3b8a9a}{checksum}}\ =\ \mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolHandler_a95cad129c9c0a16f40334bc373586412}{InternetProtocolHandler::Checksum}}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}}\ *)\&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{icmp}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1ICMPHeader}{ICMPHeader}}));\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ the\ checksum}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \ \ \ \textcolor{comment}{//Send\ data\ back}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \}}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{intel__i217_8h_source_l00002}{checksum}}, \mbox{\hyperlink{ipv4_8cpp_source_l00234}{Max\+OS\+::net\+::\+Internet\+Protocol\+Handler\+::\+Checksum()}}, \mbox{\hyperlink{ext2_8h_source_l00001}{size}}, \mbox{\hyperlink{ext2_8h_source_l00004}{type}}, and \mbox{\hyperlink{physical_8h_source_l00001}{write}}.

\Hypertarget{classMaxOS_1_1net_1_1InternetControlMessageProtocol_a3b97888ccd27c3377a7e7a4ed869a520}\label{classMaxOS_1_1net_1_1InternetControlMessageProtocol_a3b97888ccd27c3377a7e7a4ed869a520} 
\index{MaxOS::net::InternetControlMessageProtocol@{MaxOS::net::InternetControlMessageProtocol}!RequestEchoReply@{RequestEchoReply}}
\index{RequestEchoReply@{RequestEchoReply}!MaxOS::net::InternetControlMessageProtocol@{MaxOS::net::InternetControlMessageProtocol}}
\doxysubsubsection{\texorpdfstring{RequestEchoReply()}{RequestEchoReply()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} Internet\+Control\+Message\+Protocol\+::\+Request\+Echo\+Reply (\begin{DoxyParamCaption}\item[{Internet\+Protocol\+Address}]{ip\+\_\+be }\end{DoxyParamCaption})}



Sends an ICMP echo request to the specified IP address. 


\begin{DoxyParams}{Parameters}
{\em ip\+\_\+be} & The IP address to send the request to \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{icmp_8cpp_source_l00084}{84}} of file \mbox{\hyperlink{icmp_8cpp_source}{icmp.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \ \ errorMessages\ -\/>\ \mbox{\hyperlink{physical_8h_ab4d8d1259f524270d625ab8933700d27}{write}}(\textcolor{stringliteral}{"{}ICMP:\ Sending\ echo\ request\(\backslash\)n"{}});}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \mbox{\hyperlink{structMaxOS_1_1net_1_1ICMPHeader}{ICMPHeader}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{icmp}}\ =\ \{\};}
\DoxyCodeLine{00089\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{icmp}}.type\ =\ 8;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Echo\ request}}
\DoxyCodeLine{00090\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{icmp}}.code\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Code\ must\ be\ 0}}
\DoxyCodeLine{00091\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{icmp}}.checksum\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Checksum\ must\ be\ 0\ to\ calculate\ it}}
\DoxyCodeLine{00092\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{icmp}}.data\ =\ 0x69420;\ \ \ \ \ \ \ \ \textcolor{comment}{//\ Data}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{icmp}}.checksum\ =\ \mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolHandler_a95cad129c9c0a16f40334bc373586412}{InternetProtocolHandler::Checksum}}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}}\ *)\&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{icmp}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1ICMPHeader}{ICMPHeader}}));}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1IPV4PayloadHandler_ab9c9b54a757481840ffa8701ea8265af}{Send}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ip\_be}},\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}}\ *)\&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{icmp}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1ICMPHeader}{ICMPHeader}}));}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ \ \ errorMessages\ -\/>\ \mbox{\hyperlink{physical_8h_ab4d8d1259f524270d625ab8933700d27}{write}}(\textcolor{stringliteral}{"{}ICMP:\ Echo\ request\ sent\(\backslash\)n"{}});}
\DoxyCodeLine{00099\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{ipv4_8cpp_source_l00234}{Max\+OS\+::net\+::\+Internet\+Protocol\+Handler\+::\+Checksum()}}, \mbox{\hyperlink{ipv4_8cpp_source_l00090}{Max\+OS\+::net\+::\+IPV4\+Payload\+Handler\+::\+Send()}}, and \mbox{\hyperlink{physical_8h_source_l00001}{write}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/include/net/\mbox{\hyperlink{icmp_8h}{icmp.\+h}}\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/src/net/\mbox{\hyperlink{icmp_8cpp}{icmp.\+cpp}}\end{DoxyCompactItemize}
