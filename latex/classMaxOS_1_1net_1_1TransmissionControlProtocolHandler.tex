\doxysection{Max\+OS\+::net\+::Transmission\+Control\+Protocol\+Handler Class Reference}
\hypertarget{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler}{}\label{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler}\index{MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}}


{\ttfamily \#include $<$tcp.\+h$>$}

Inheritance diagram for Max\+OS\+::net\+::Transmission\+Control\+Protocol\+Handler\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_ab888d7bdcc105c2e47cde211edb8a2e6}{Transmission\+Control\+Protocol\+Handler}} (\mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolHandler}{Internet\+Protocol\+Handler}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolPayloadHandler_af2365749bed6df7757755cf83f30eb42}{internet\+Protocol\+Handler}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_acdc824e91be59066c93f17e4bc2d26d0}{error\+Messages}})
\item 
\mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_ae7db4243489b515c400b514f26a2e469}{\texorpdfstring{$\sim$}{\string~}\+Transmission\+Control\+Protocol\+Handler}} ()
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bool}} \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_aca6acecfcf72597d7f480345e8f19463}{handle\+Internet\+Protocol\+Payload}} (\mbox{\hyperlink{namespaceMaxOS_1_1net_af037c025feb88b952b167f4dfa2709a0}{Internet\+Protocol\+Address}} \mbox{\hyperlink{ipv4_8h_aed74aa5789cabec794d6961455e80db3}{source\+IP}}, \mbox{\hyperlink{namespaceMaxOS_1_1net_af037c025feb88b952b167f4dfa2709a0}{Internet\+Protocol\+Address}} \mbox{\hyperlink{ipv4_8h_afcc7048c1d9643cebaf1806fa4de390e}{destination\+IP}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{payload\+Data}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{ext2_8h_aaba88b24a21a6c70c895c0d55f4a69a0}{size}}) \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{override}}
\begin{DoxyCompactList}\small\item\em Handle the TCP message (provider end) \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{Transmission\+Control\+Protocol\+Socket}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a17ee7c16c6b71cd8087694a5bbbdbfc2}{Connect}} (\mbox{\hyperlink{namespaceMaxOS_1_1net_af037c025feb88b952b167f4dfa2709a0}{Internet\+Protocol\+Address}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ip}}, \mbox{\hyperlink{namespaceMaxOS_1_1net_a8e668c17241c6c0ed8e9f6df338b2307}{Transmission\+Control\+Protocol\+Port}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{port}})
\begin{DoxyCompactList}\small\item\em Connect to a remote host through the TCP protocol. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_ae456df7930b51668b3568f04bc622b54}{Disconnect}} (\mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{Transmission\+Control\+Protocol\+Socket}} \texorpdfstring{$\ast$}{*}socket)
\begin{DoxyCompactList}\small\item\em Begin the disconnect process. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{virtual}} \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{Transmission\+Control\+Protocol\+Socket}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_ab809163f57ee08faff648b73201aaee5}{Listen}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{port}})
\begin{DoxyCompactList}\small\item\em Begin listening on a port. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{virtual}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a41fc5f0834a02802e18e2c62a631772e}{Bind}} (\mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{Transmission\+Control\+Protocol\+Socket}} \texorpdfstring{$\ast$}{*}socket, \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolPayloadHandler}{Transmission\+Control\+Protocol\+Payload\+Handler}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{handler}})
\begin{DoxyCompactList}\small\item\em Bind a data handler to this socket. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{static}} \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{Transmission\+Control\+Protocol\+Socket}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a34099efa04de903d586b2ecba73a090b}{Connect}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}} \mbox{\hyperlink{namespaceMaxOS_afa22b691550d34d82dd6a5e3f77b31cb}{string}} \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{internet\+Protocol\+Address\+And\+Port}})
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a294c451371383fb488259156f01caf7e}{send\+Transmission\+Control\+Protocol\+Packet}} (\mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{Transmission\+Control\+Protocol\+Socket}} \texorpdfstring{$\ast$}{*}socket, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\+\_\+t}} \mbox{\hyperlink{ext2_8h_aaba88b24a21a6c70c895c0d55f4a69a0}{size}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\+\_\+t}} \mbox{\hyperlink{amd__am79c973_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags}}=0)
\begin{DoxyCompactList}\small\item\em Send a packet (Throught the provider) \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_acdc824e91be59066c93f17e4bc2d26d0}{error\+Messages}}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Vector}{common\+::\+Vector}}$<$ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{Transmission\+Control\+Protocol\+Socket}} \texorpdfstring{$\ast$}{*} $>$ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a244d074e23c2f646788b1e4e515a786e}{sockets}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Protected Attributes}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{namespaceMaxOS_1_1net_a8e668c17241c6c0ed8e9f6df338b2307}{Transmission\+Control\+Protocol\+Port}} \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_aff5fa7f511f8c6c29944e3b3c801ff24}{free\+Ports}} = 0x8000
\begin{DoxyCompactList}\small\item\em {\bfseries{Handler}}/// \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a6cb78908521ca4ec70a18ed72b6b96bf}{Transmission\+Control\+Protocol\+Socket}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{tcp_8h_source_l00158}{158}} of file \mbox{\hyperlink{tcp_8h_source}{tcp.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_ab888d7bdcc105c2e47cde211edb8a2e6}\label{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_ab888d7bdcc105c2e47cde211edb8a2e6} 
\index{MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}!TransmissionControlProtocolHandler@{TransmissionControlProtocolHandler}}
\index{TransmissionControlProtocolHandler@{TransmissionControlProtocolHandler}!MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}}
\doxysubsubsection{\texorpdfstring{TransmissionControlProtocolHandler()}{TransmissionControlProtocolHandler()}}
{\footnotesize\ttfamily Transmission\+Control\+Protocol\+Handler\+::\+Transmission\+Control\+Protocol\+Handler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolHandler}{Internet\+Protocol\+Handler}} \texorpdfstring{$\ast$}{*}}]{internet\+Protocol\+Handler,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} \texorpdfstring{$\ast$}{*}}]{error\+Messages }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{tcp_8cpp_source_l00123}{123}} of file \mbox{\hyperlink{tcp_8cpp_source}{tcp.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00125\ :\ \mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolPayloadHandler}{InternetProtocolPayloadHandler}}(\mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolPayloadHandler_af2365749bed6df7757755cf83f30eb42}{internetProtocolHandler}},\ 0x06)}
\DoxyCodeLine{00126\ \{}
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keyword}{this}\ -\/>\ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_acdc824e91be59066c93f17e4bc2d26d0}{errorMessages}}\ =\ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_acdc824e91be59066c93f17e4bc2d26d0}{errorMessages}};}
\DoxyCodeLine{00128\ \ \ \ \ }
\DoxyCodeLine{00129\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{tcp_8h_source_l00162}{error\+Messages}}.

\Hypertarget{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_ae7db4243489b515c400b514f26a2e469}\label{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_ae7db4243489b515c400b514f26a2e469} 
\index{MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}!````~TransmissionControlProtocolHandler@{\texorpdfstring{$\sim$}{\string~}TransmissionControlProtocolHandler}}
\index{````~TransmissionControlProtocolHandler@{\texorpdfstring{$\sim$}{\string~}TransmissionControlProtocolHandler}!MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}TransmissionControlProtocolHandler()}{\string~TransmissionControlProtocolHandler()}}
{\footnotesize\ttfamily Transmission\+Control\+Protocol\+Handler\+::\texorpdfstring{$\sim$}{\string~}\+Transmission\+Control\+Protocol\+Handler (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



\doxysubsection{Member Function Documentation}
\Hypertarget{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a41fc5f0834a02802e18e2c62a631772e}\label{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a41fc5f0834a02802e18e2c62a631772e} 
\index{MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}!Bind@{Bind}}
\index{Bind@{Bind}!MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}}
\doxysubsubsection{\texorpdfstring{Bind()}{Bind()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} Transmission\+Control\+Protocol\+Handler\+::\+Bind (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{Transmission\+Control\+Protocol\+Socket}} \texorpdfstring{$\ast$}{*}}]{socket,  }\item[{\mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolPayloadHandler}{Transmission\+Control\+Protocol\+Payload\+Handler}} \texorpdfstring{$\ast$}{*}}]{handler }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Bind a data handler to this socket. 


\begin{DoxyParams}{Parameters}
{\em socket} & The socket to bind the handler to \\
\hline
{\em transmission\+Control\+Protocol\+Handler} & The handler to bind \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{tcp_8cpp_source_l00542}{542}} of file \mbox{\hyperlink{tcp_8cpp_source}{tcp.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00543\ \{}
\DoxyCodeLine{00544\ \ \ socket-\/>\mbox{\hyperlink{classMaxOS_1_1common_1_1EventManager_ab8e353bbb4b256d394968a02cc1447ca}{connect\_event\_handler}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{handler}});}
\DoxyCodeLine{00545\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{eventHandler_8h_source_l00109}{Max\+OS\+::common\+::\+Event\+Manager$<$ Event\+Type $>$\+::connect\+\_\+event\+\_\+handler()}}.

\Hypertarget{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a34099efa04de903d586b2ecba73a090b}\label{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a34099efa04de903d586b2ecba73a090b} 
\index{MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}!Connect@{Connect}}
\index{Connect@{Connect}!MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}}
\doxysubsubsection{\texorpdfstring{Connect()}{Connect()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{Transmission\+Control\+Protocol\+Socket}} \texorpdfstring{$\ast$}{*} Transmission\+Control\+Protocol\+Handler\+::\+Connect (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}} \mbox{\hyperlink{namespaceMaxOS_afa22b691550d34d82dd6a5e3f77b31cb}{string}} \&}]{internet\+Protocol\+Address\+And\+Port }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line \mbox{\hyperlink{tcp_8cpp_source_l00485}{485}} of file \mbox{\hyperlink{tcp_8cpp_source}{tcp.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00486\ }
\DoxyCodeLine{00487\ \ \ \textcolor{comment}{//TODO\ NEW\ STRING\ PARSEING}}
\DoxyCodeLine{00488\ }
\DoxyCodeLine{00489\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00490\ \}}

\end{DoxyCode}
\Hypertarget{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a17ee7c16c6b71cd8087694a5bbbdbfc2}\label{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a17ee7c16c6b71cd8087694a5bbbdbfc2} 
\index{MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}!Connect@{Connect}}
\index{Connect@{Connect}!MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}}
\doxysubsubsection{\texorpdfstring{Connect()}{Connect()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{Transmission\+Control\+Protocol\+Socket}} \texorpdfstring{$\ast$}{*} Transmission\+Control\+Protocol\+Handler\+::\+Connect (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespaceMaxOS_1_1net_af037c025feb88b952b167f4dfa2709a0}{Internet\+Protocol\+Address}}}]{ip,  }\item[{\mbox{\hyperlink{namespaceMaxOS_1_1net_a8e668c17241c6c0ed8e9f6df338b2307}{Transmission\+Control\+Protocol\+Port}}}]{port }\end{DoxyParamCaption})}



Connect to a remote host through the TCP protocol. 


\begin{DoxyParams}{Parameters}
{\em ip} & The IP of the remote host \\
\hline
{\em port} & The port of the remote host \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The socket that is connected to the remote host, 0 if it failed 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{tcp_8cpp_source_l00449}{449}} of file \mbox{\hyperlink{tcp_8cpp_source}{tcp.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00450\ \{}
\DoxyCodeLine{00451\ \ \ \ \ \textcolor{comment}{//Create\ a\ new\ socket}}
\DoxyCodeLine{00452\ \ \ \ \ \textcolor{keyword}{auto}*\ socket\ =\ (\mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{TransmissionControlProtocolSocket}}*)\mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_a983c849ff604367f7c8a0e70172bb331}{MemoryManager::kmalloc}}(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{TransmissionControlProtocolSocket}}));}
\DoxyCodeLine{00453\ }
\DoxyCodeLine{00454\ \ \ \ \ \textcolor{comment}{//If\ there\ is\ space\ for\ the\ socket}}
\DoxyCodeLine{00455\ \ \ \ \ \textcolor{keywordflow}{if}(socket\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00456\ \ \ \ \ \{}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ socket}}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ (socket)\ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a6cb78908521ca4ec70a18ed72b6b96bf}{TransmissionControlProtocolSocket}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00459\ }
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ local\ and\ remote\ addresses}}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ socket\ -\/>\ remotePort\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{port}};}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ socket\ -\/>\ remoteIP\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ip}};}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ socket\ -\/>\ localPort\ =\ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_aff5fa7f511f8c6c29944e3b3c801ff24}{freePorts}}++;}
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ socket\ -\/>\ localIP\ =\ \mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolPayloadHandler_af2365749bed6df7757755cf83f30eb42}{internetProtocolHandler}}\ -\/>\ GetInternetProtocolAddress();}
\DoxyCodeLine{00465\ }
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \textcolor{comment}{//Convert\ into\ big\ endian}}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ socket\ -\/>\ remotePort\ =\ ((socket\ -\/>\ remotePort\ \&\ 0xFF00)>>8)\ |\ ((socket\ -\/>\ remotePort\ \&\ 0x00FF)\ <<\ 8);}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ socket\ -\/>\ localPort\ =\ ((socket\ -\/>\ localPort\ \&\ 0xFF00)>>8)\ |\ ((socket\ -\/>\ localPort\ \&\ 0x00FF)\ <<\ 8);}
\DoxyCodeLine{00469\ }
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ socket\ into\ the\ socket\ array\ and\ then\ set\ its\ state}}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a244d074e23c2f646788b1e4e515a786e}{sockets}}.push\_back(socket);}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ =\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a22ee0e543a2820dcbb2dcc90ed8fdb7c}{TCPSocketState::SYN\_SENT}};}
\DoxyCodeLine{00473\ }
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \textcolor{comment}{//Dummy\ sequence\ number}}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{tcp_8h_a2d38c5cab4c11a0212dbc06554a6e1e0}{sequenceNumber}}\ =\ 0xbeefcafe;}
\DoxyCodeLine{00476\ }
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \textcolor{comment}{//Send\ a\ sync\ packet}}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a294c451371383fb488259156f01caf7e}{sendTransmissionControlProtocolPacket}}(socket,\ \textcolor{keyword}{nullptr},0,\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5abab6eed0f7cd8bd721e728003b63b54d}{TCPFlag::SYN}});}
\DoxyCodeLine{00479\ \ \ \ \ \}}
\DoxyCodeLine{00480\ }
\DoxyCodeLine{00481\ \ \ \ \ \textcolor{keywordflow}{return}\ socket;}
\DoxyCodeLine{00482\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{tcp_8h_source_l00165}{free\+Ports}}, \mbox{\hyperlink{ipv4_8h_source_l00051}{Max\+OS\+::net\+::\+Internet\+Protocol\+Payload\+Handler\+::internet\+Protocol\+Handler}}, \mbox{\hyperlink{memorymanagement_8cpp_source_l00074}{Max\+OS\+::memory\+::\+Memory\+Manager\+::kmalloc()}}, \mbox{\hyperlink{tcp_8cpp_source_l00384}{send\+Transmission\+Control\+Protocol\+Packet()}}, \mbox{\hyperlink{tcp_8h_source_l00002}{sequence\+Number}}, \mbox{\hyperlink{tcp_8h_source_l00163}{sockets}}, \mbox{\hyperlink{ext2_8h_source_l00016}{state}}, \mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5abab6eed0f7cd8bd721e728003b63b54d}{Max\+OS\+::net\+::\+SYN}}, \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a22ee0e543a2820dcbb2dcc90ed8fdb7c}{Max\+OS\+::net\+::\+SYN\+\_\+\+SENT}}, and \mbox{\hyperlink{tcp_8h_source_l00160}{Transmission\+Control\+Protocol\+Socket}}.

\Hypertarget{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_ae456df7930b51668b3568f04bc622b54}\label{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_ae456df7930b51668b3568f04bc622b54} 
\index{MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}!Disconnect@{Disconnect}}
\index{Disconnect@{Disconnect}!MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}}
\doxysubsubsection{\texorpdfstring{Disconnect()}{Disconnect()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} Transmission\+Control\+Protocol\+Handler\+::\+Disconnect (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{Transmission\+Control\+Protocol\+Socket}} \texorpdfstring{$\ast$}{*}}]{socket }\end{DoxyParamCaption})}



Begin the disconnect process. 


\begin{DoxyParams}{Parameters}
{\em socket} & The socket to disconnect \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{tcp_8cpp_source_l00497}{497}} of file \mbox{\hyperlink{tcp_8cpp_source}{tcp.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00498\ \{}
\DoxyCodeLine{00499\ }
\DoxyCodeLine{00500\ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ =\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a15691d3bea993fbf8cc16e3373caa548}{TCPSocketState::FIN\_WAIT1}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Begin\ fin\ wait\ sequence}}
\DoxyCodeLine{00501\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a294c451371383fb488259156f01caf7e}{sendTransmissionControlProtocolPacket}}(socket,\ \textcolor{keyword}{nullptr},0,\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5af408850c47cccdcedad816d79e100906}{TCPFlag::FIN}}\ +\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5a0fc437bc317835cad5faafc12a83fad5}{TCPFlag::ACK}});\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Send\ FIN|ACK\ packet}}
\DoxyCodeLine{00502\ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{tcp_8h_a2d38c5cab4c11a0212dbc06554a6e1e0}{sequenceNumber}}++;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Increase\ the\ sequence\ number}}
\DoxyCodeLine{00503\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5a0fc437bc317835cad5faafc12a83fad5}{Max\+OS\+::net\+::\+ACK}}, \mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5af408850c47cccdcedad816d79e100906}{Max\+OS\+::net\+::\+FIN}}, \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a15691d3bea993fbf8cc16e3373caa548}{Max\+OS\+::net\+::\+FIN\+\_\+\+WAIT1}}, \mbox{\hyperlink{tcp_8cpp_source_l00384}{send\+Transmission\+Control\+Protocol\+Packet()}}, \mbox{\hyperlink{tcp_8h_source_l00002}{sequence\+Number}}, and \mbox{\hyperlink{ext2_8h_source_l00016}{state}}.

\Hypertarget{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_aca6acecfcf72597d7f480345e8f19463}\label{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_aca6acecfcf72597d7f480345e8f19463} 
\index{MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}!handleInternetProtocolPayload@{handleInternetProtocolPayload}}
\index{handleInternetProtocolPayload@{handleInternetProtocolPayload}!MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}}
\doxysubsubsection{\texorpdfstring{handleInternetProtocolPayload()}{handleInternetProtocolPayload()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bool}} Transmission\+Control\+Protocol\+Handler\+::handle\+Internet\+Protocol\+Payload (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespaceMaxOS_1_1net_af037c025feb88b952b167f4dfa2709a0}{Internet\+Protocol\+Address}}}]{source\+IP,  }\item[{\mbox{\hyperlink{namespaceMaxOS_1_1net_af037c025feb88b952b167f4dfa2709a0}{Internet\+Protocol\+Address}}}]{destination\+IP,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{payload\+Data,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Handle the TCP message (provider end) 


\begin{DoxyParams}{Parameters}
{\em src\+IP\+\_\+\+BE} & The source IP address \\
\hline
{\em dst\+IP\+\_\+\+BE} & The destination IP address \\
\hline
{\em internetprotocol\+Payload} & The payload \\
\hline
{\em size} & The size of the payload \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if data is to be sent back or false if not 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolPayloadHandler_aaef48d6a7ff6c478f9bf561097c82c01}{Max\+OS\+::net\+::\+Internet\+Protocol\+Payload\+Handler}}.



Definition at line \mbox{\hyperlink{tcp_8cpp_source_l00157}{157}} of file \mbox{\hyperlink{tcp_8cpp_source}{tcp.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00158\ \{}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_acdc824e91be59066c93f17e4bc2d26d0}{errorMessages}}\ -\/>\ \mbox{\hyperlink{physical_8h_ab4d8d1259f524270d625ab8933700d27}{write}}(\textcolor{stringliteral}{"{}TCP:\ Handling\ TCP\ message\(\backslash\)n"{}});}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \ \ \textcolor{comment}{//Check\ if\ the\ size\ is\ too\ small}}
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{ext2_8h_aaba88b24a21a6c70c895c0d55f4a69a0}{size}}\ <\ 13)}
\DoxyCodeLine{00164\ \ \ \ \ \{}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00166\ \ \ \ \ \}}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{comment}{//\ If\ it's\ smaller\ than\ the\ header,\ return}}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{ext2_8h_aaba88b24a21a6c70c895c0d55f4a69a0}{size}}\ <\ 4*\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{payloadData}}[12]/16)\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ lower\ 4\ bits\ of\ the\ 13th\ byte\ is\ the\ header\ length}}
\DoxyCodeLine{00170\ \ \ \ \ \{}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00172\ \ \ \ \ \}}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{comment}{//Get\ the\ header}}
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{keyword}{auto}*\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ =\ (\mbox{\hyperlink{structMaxOS_1_1net_1_1TransmissionControlProtocolHeader}{TransmissionControlProtocolHeader}}*)\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{payloadData}};}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{comment}{//Get\ the\ connection\ values\ (convert\ to\ host\ endian)}}
\DoxyCodeLine{00178\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}}\ localPort\ =\ \mbox{\hyperlink{tcp_8cpp_abfe30d4c4185706700ed78df8308a63e}{bigEndian16}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_ac01766720e5781a418710ebf1ba5379e}{dstPort}});}
\DoxyCodeLine{00179\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}}\ remotePort\ =\ \mbox{\hyperlink{tcp_8cpp_abfe30d4c4185706700ed78df8308a63e}{bigEndian16}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_a26ebbf4f65c3f6fd9959d9cecef5c9d8}{srcPort}});}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{comment}{//Create\ the\ socket}}
\DoxyCodeLine{00182\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{TransmissionControlProtocolSocket}}*\ socket\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\ \&\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{currentSocket}}\ :\ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a244d074e23c2f646788b1e4e515a786e}{sockets}})}
\DoxyCodeLine{00185\ \ \ \ \ \{}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{currentSocket}}\ -\/>\ localPort\ ==\ localPort\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Check\ if\ the\ local\ port\ is\ the\ same\ as\ the\ destination\ port}}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \&\&\ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{currentSocket}}\ -\/>\ localIP\ ==\ \mbox{\hyperlink{ipv4_8h_afcc7048c1d9643cebaf1806fa4de390e}{destinationIP}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Check\ if\ the\ local\ IP\ is\ the\ same\ as\ the\ destination\ IP}}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \&\&\ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{currentSocket}}\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ ==\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44ac1f9314a03f63f33410be3489b12b29b}{TCPSocketState::LISTEN}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Check\ if\ the\ socket\ is\ in\ the\ LISTEN\ state}}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \&\&\ (((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{amd__am79c973_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags}})\ \&\ ((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5abab6eed0f7cd8bd721e728003b63b54d}{TCPFlag::SYN}}\ |\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5a0fc437bc317835cad5faafc12a83fad5}{TCPFlag::ACK}}))\ ==\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5abab6eed0f7cd8bd721e728003b63b54d}{TCPFlag::SYN}}))\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Check\ if\ the\ SYN\ flag\ is\ set\ (allow\ for\ acknoweldgement)}}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ socket\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{currentSocket}};}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{currentSocket}}\ -\/>\ localPort\ ==\ localPort\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Check\ if\ the\ local\ port\ is\ the\ same\ as\ the\ destination\ port}}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{currentSocket}}\ -\/>\ localIP\ ==\ \mbox{\hyperlink{ipv4_8h_afcc7048c1d9643cebaf1806fa4de390e}{destinationIP}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Check\ if\ the\ local\ IP\ is\ the\ same\ as\ the\ destination\ IP}}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{currentSocket}}\ -\/>\ remotePort\ ==\ remotePort\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Check\ if\ the\ remote\ port\ is\ the\ same\ as\ the\ source\ port}}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{currentSocket}}\ -\/>\ remoteIP\ ==\ \mbox{\hyperlink{ipv4_8h_afcc7048c1d9643cebaf1806fa4de390e}{destinationIP}})\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Check\ if\ the\ remote\ IP\ is\ the\ same\ as\ the\ source\ IP}}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ socket\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{currentSocket}};}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00200\ \ \ \ \ \}}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{keywordtype}{bool}\ reset\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \ \ \ \ \textcolor{comment}{//Check\ if\ the\ socket\ is\ found\ and\ if\ the\ socket\ wants\ to\ reset}}
\DoxyCodeLine{00206\ \ \ \ \ \textcolor{keywordflow}{if}(socket\ !=\ \textcolor{keyword}{nullptr}\ \&\&\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{amd__am79c973_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags}}\ \&\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5afbe78d395b48369284faffb0ce9d5c0f}{TCPFlag::RST}})}
\DoxyCodeLine{00207\ \ \ \ \ \{}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ =\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a110ccf2f5d2ff4eda1fd1a494293467d}{TCPSocketState::CLOSED}};}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ socket\ -\/>\ Disconnected();}
\DoxyCodeLine{00210\ \ \ \ \ \}}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \ \ \ \ \textcolor{comment}{//Check\ if\ the\ socket\ is\ found\ and\ if\ the\ socket\ is\ not\ closed}}
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{keywordflow}{if}(socket\ !=\ \textcolor{keyword}{nullptr}\ \&\&\ socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ !=\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a110ccf2f5d2ff4eda1fd1a494293467d}{TCPSocketState::CLOSED}})}
\DoxyCodeLine{00214\ \ \ \ \ \{}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{amd__am79c973_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags}})\ \&\ ((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5abab6eed0f7cd8bd721e728003b63b54d}{TCPFlag::SYN}}\ |\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5a0fc437bc317835cad5faafc12a83fad5}{TCPFlag::ACK}}\ |\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5af408850c47cccdcedad816d79e100906}{TCPFlag::FIN}}))}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00218\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ Example\ for\ explanation:}}
\DoxyCodeLine{00219\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ socket\ -\/>\ state\ =\ SYN\_RECEIVED;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //The\ state\ of\ the\ socket,\ e.g.\ recieved,\ or\ established.\ This\ is\ used\ to\ know\ how\ to\ handle\ the\ socket}}
\DoxyCodeLine{00220\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ socket\ -\/>\ remotePort\ =\ msg\ -\/>\ srcPort;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //The\ remote\ port,\ e.g.\ the\ port\ of\ the\ server}}
\DoxyCodeLine{00221\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ socket\ -\/>\ remoteIP\ =\ srcIP\_BE;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //The\ remote\ IP,\ e.g.\ the\ IP\ of\ the\ server}}
\DoxyCodeLine{00222\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ socket\ -\/>\ acknowledgementNumber\ =\ bigEndian32(\ msg\ -\/>\ sequenceNumber\ )\ +\ 1;\ \ \ \ \ \ //The\ acknowledgement\ number,\ the\ number\ used\ to\ keep\ track\ of\ what\ has\ been\ received,\ this\ is\ just\ incremented\ by\ 1\ each\ time}}
\DoxyCodeLine{00223\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ socket\ -\/>\ sequenceNumber\ =\ 0xbeefcafe;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //The\ sequence\ number,\ the\ number\ of\ the\ next\ set\ that\ is\ to\ be\ sent\ but\ in\ this\ case\ sequence\ isn't\ enabled\ so\ just\ set\ it\ to\ anything}}
\DoxyCodeLine{00224\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ Send(socket,\ 0,0,\ SYN|ACK);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //The\ response\ command,\ genneraly\ has\ to\ have\ the\ acknoledgement\ flag\ set}}
\DoxyCodeLine{00225\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ socket\ -\/>\ sequenceNumber++;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //Increment\ the\ sequence\ number}}
\DoxyCodeLine{00226\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *}}
\DoxyCodeLine{00227\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5abab6eed0f7cd8bd721e728003b63b54d}{TCPFlag::SYN}}:}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ ==\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44ac1f9314a03f63f33410be3489b12b29b}{TCPSocketState::LISTEN}})}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ =\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a027356d5e2d689dd48894303e715f2f1}{TCPSocketState::SYN\_RECEIVED}};}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ remotePort\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_a26ebbf4f65c3f6fd9959d9cecef5c9d8}{srcPort}};}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ remoteIP\ =\ \mbox{\hyperlink{ipv4_8h_aed74aa5789cabec794d6961455e80db3}{sourceIP}};}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{tcp_8h_ac41c406579d1214f4a1f0338bca28b6a}{acknowledgementNumber}}\ =\ \mbox{\hyperlink{tcp_8cpp_abb0f64c6581be532c99e657e200718a1}{bigEndian32}}(\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_a2d38c5cab4c11a0212dbc06554a6e1e0}{sequenceNumber}}\ )\ +\ 1;}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{tcp_8h_a2d38c5cab4c11a0212dbc06554a6e1e0}{sequenceNumber}}\ =\ 0xbeefcafe;}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a294c451371383fb488259156f01caf7e}{sendTransmissionControlProtocolPacket}}(socket,\ \textcolor{keyword}{nullptr},0,\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5abab6eed0f7cd8bd721e728003b63b54d}{TCPFlag::SYN}}\ |\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5a0fc437bc317835cad5faafc12a83fad5}{TCPFlag::ACK}});}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{tcp_8h_a2d38c5cab4c11a0212dbc06554a6e1e0}{sequenceNumber}}++;}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reset\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00243\ }
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5abab6eed0f7cd8bd721e728003b63b54d}{TCPFlag::SYN}}\ |\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5a0fc437bc317835cad5faafc12a83fad5}{TCPFlag::ACK}}:}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{if}}(socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ ==\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44}{TCPSocketState}}::\mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a22ee0e543a2820dcbb2dcc90ed8fdb7c}{SYN\_SENT}})}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ =\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a7640f170af693e00a6c91df543aa2b76}{TCPSocketState::ESTABLISHED}};}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{tcp_8h_ac41c406579d1214f4a1f0338bca28b6a}{acknowledgementNumber}}\ =\ \mbox{\hyperlink{tcp_8cpp_abb0f64c6581be532c99e657e200718a1}{bigEndian32}}(\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_a2d38c5cab4c11a0212dbc06554a6e1e0}{sequenceNumber}}\ )\ +\ 1;}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{tcp_8h_a2d38c5cab4c11a0212dbc06554a6e1e0}{sequenceNumber}}++;}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a294c451371383fb488259156f01caf7e}{sendTransmissionControlProtocolPacket}}(socket,\ \textcolor{keyword}{nullptr},0,\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5a0fc437bc317835cad5faafc12a83fad5}{TCPFlag::ACK}});}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reset\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5abab6eed0f7cd8bd721e728003b63b54d}{TCPFlag::SYN}}\ |\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5af408850c47cccdcedad816d79e100906}{TCPFlag::FIN}}:}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{case}}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5}{TCPFlag}}::\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5abab6eed0f7cd8bd721e728003b63b54d}{SYN}}\ |\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5}{TCPFlag}}::\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5af408850c47cccdcedad816d79e100906}{FIN}}\ |\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5}{TCPFlag}}::\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5a0fc437bc317835cad5faafc12a83fad5}{ACK}}:}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reset\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{true}};}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00262\ }
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5af408850c47cccdcedad816d79e100906}{TCPFlag::FIN}}:}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5af408850c47cccdcedad816d79e100906}{TCPFlag::FIN}}\ |\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5a0fc437bc317835cad5faafc12a83fad5}{TCPFlag::ACK}}:}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{if}}(socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ ==\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44}{TCPSocketState}}::\mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a7640f170af693e00a6c91df543aa2b76}{ESTABLISHED}})}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ =\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a831862ab9b2e65d7f51841e0c739180f}{TCPSocketState::CLOSE\_WAIT}};}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{tcp_8h_ac41c406579d1214f4a1f0338bca28b6a}{acknowledgementNumber}}++;}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a294c451371383fb488259156f01caf7e}{sendTransmissionControlProtocolPacket}}(socket,\ \textcolor{keyword}{nullptr},0,\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5a0fc437bc317835cad5faafc12a83fad5}{TCPFlag::ACK}});}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a294c451371383fb488259156f01caf7e}{sendTransmissionControlProtocolPacket}}(socket,\ \textcolor{keyword}{nullptr},0,\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5af408850c47cccdcedad816d79e100906}{TCPFlag::FIN}}\ |\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5a0fc437bc317835cad5faafc12a83fad5}{TCPFlag::ACK}});}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ Disconnected();}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ ==\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a831862ab9b2e65d7f51841e0c739180f}{TCPSocketState::CLOSE\_WAIT}})}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ =\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a110ccf2f5d2ff4eda1fd1a494293467d}{TCPSocketState::CLOSED}};}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ ==\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a15691d3bea993fbf8cc16e3373caa548}{TCPSocketState::FIN\_WAIT1}}\ ||\ socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ ==\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a6371b3c24c873501dacae75d744aedec}{TCPSocketState::FIN\_WAIT2}})}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ =\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a110ccf2f5d2ff4eda1fd1a494293467d}{TCPSocketState::CLOSED}};}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{tcp_8h_ac41c406579d1214f4a1f0338bca28b6a}{acknowledgementNumber}}++;}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a294c451371383fb488259156f01caf7e}{sendTransmissionControlProtocolPacket}}(socket,\ \textcolor{keyword}{nullptr},0,\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5a0fc437bc317835cad5faafc12a83fad5}{TCPFlag::ACK}});}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ Disconnected();}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reset\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5a0fc437bc317835cad5faafc12a83fad5}{TCPFlag::ACK}}:}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ ==\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a027356d5e2d689dd48894303e715f2f1}{TCPSocketState::SYN\_RECEIVED}})}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ =\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a7640f170af693e00a6c91df543aa2b76}{TCPSocketState::ESTABLISHED}};}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ Connected();}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ ==\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a15691d3bea993fbf8cc16e3373caa548}{TCPSocketState::FIN\_WAIT1}})}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ =\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a6371b3c24c873501dacae75d744aedec}{TCPSocketState::FIN\_WAIT2}};}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ ==\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a831862ab9b2e65d7f51841e0c739180f}{TCPSocketState::CLOSE\_WAIT}})}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ =\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a110ccf2f5d2ff4eda1fd1a494293467d}{TCPSocketState::CLOSED}};}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{amd__am79c973_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags}}\ ==\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5a0fc437bc317835cad5faafc12a83fad5}{TCPFlag::ACK}})}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00310\ }
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ no\ break,\ because\ of\ piggybacking}}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{fallthrough}}]];}
\DoxyCodeLine{00313\ }
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00315\ }
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//By\ default\ handle\ the\ data}}
\DoxyCodeLine{00317\ }
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{tcp_8cpp_abb0f64c6581be532c99e657e200718a1}{bigEndian32}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_a2d38c5cab4c11a0212dbc06554a6e1e0}{sequenceNumber}})\ ==\ socket\ -\/>\ \mbox{\hyperlink{tcp_8h_ac41c406579d1214f4a1f0338bca28b6a}{acknowledgementNumber}})}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reset\ =\ !(socket\ -\/>\ handleTransmissionControlProtocolPayload(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{payloadData}}\ +\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_a3909a49a58301aec6d401cdd9ae76f5a}{headerSize32}}*4,\mbox{\hyperlink{ext2_8h_aaba88b24a21a6c70c895c0d55f4a69a0}{size}}\ -\/\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_a3909a49a58301aec6d401cdd9ae76f5a}{headerSize32}}*4));}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!reset)}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca9dd4e461268c8034f5c8564e155c67a6}{x}}\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//The\ number\ of\ bytes\ to\ send\ back}}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ i\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_a3909a49a58301aec6d401cdd9ae76f5a}{headerSize32}}*4;\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ \mbox{\hyperlink{ext2_8h_aaba88b24a21a6c70c895c0d55f4a69a0}{size}};\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}++)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Loop\ through\ the\ data}}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{payloadData}}[i]\ !=\ 0)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Check\ if\ the\ data\ is\ not\ 0}}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca9dd4e461268c8034f5c8564e155c67a6}{x}}\ =\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ number\ of\ bytes\ to\ send\ back\ to\ the\ current\ index}}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{tcp_8h_ac41c406579d1214f4a1f0338bca28b6a}{acknowledgementNumber}}\ +=\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca9dd4e461268c8034f5c8564e155c67a6}{x}}\ -\/\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_a3909a49a58301aec6d401cdd9ae76f5a}{headerSize32}}*4\ +\ 1;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Increment\ the\ acknowledgement\ number\ by\ the\ number\ of\ bytes\ to\ send\ back}}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a294c451371383fb488259156f01caf7e}{sendTransmissionControlProtocolPacket}}(socket,\ \textcolor{keyword}{nullptr},0,\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5a0fc437bc317835cad5faafc12a83fad5}{TCPFlag::ACK}});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Send\ the\ acknowledgement}}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ data\ in\ wrong\ order}}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reset\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00337\ }
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00339\ \ \ \ \ \}}
\DoxyCodeLine{00340\ }
\DoxyCodeLine{00341\ }
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00343\ \ \ \ \ \textcolor{keywordflow}{if}(reset)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//If\ the\ socket\ is\ to\ be\ reset}}
\DoxyCodeLine{00344\ \ \ \ \ \{}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(socket\ !=\ \textcolor{keyword}{nullptr})\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//If\ the\ socket\ exists\ then\ send\ a\ reset\ flag}}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a294c451371383fb488259156f01caf7e}{sendTransmissionControlProtocolPacket}}(socket,\ \textcolor{keyword}{nullptr},0,\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5afbe78d395b48369284faffb0ce9d5c0f}{TCPFlag::RST}});}
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//If\ it\ doesn't\ exist\ then\ create\ a\ new\ socket\ and\ send\ a\ reset\ flag}}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{TransmissionControlProtocolSocket}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{new\_socket}}(\textcolor{keyword}{this});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Create\ a\ new\ socket}}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{new\_socket}}.remotePort\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_a26ebbf4f65c3f6fd9959d9cecef5c9d8}{srcPort}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ remote\ port}}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{new\_socket}}.remoteIP\ =\ \mbox{\hyperlink{ipv4_8h_aed74aa5789cabec794d6961455e80db3}{sourceIP}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ remote\ IP}}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{new\_socket}}.localPort\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_ac01766720e5781a418710ebf1ba5379e}{dstPort}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ local\ port}}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{new\_socket}}.localIP\ =\ \mbox{\hyperlink{ipv4_8h_afcc7048c1d9643cebaf1806fa4de390e}{destinationIP}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ local\ IP}}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{new\_socket}}.sequenceNumber\ =\ \mbox{\hyperlink{tcp_8cpp_abb0f64c6581be532c99e657e200718a1}{bigEndian32}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_ac41c406579d1214f4a1f0338bca28b6a}{acknowledgementNumber}});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ sequence\ number}}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{new\_socket}}.acknowledgementNumber\ =\ \mbox{\hyperlink{tcp_8cpp_abb0f64c6581be532c99e657e200718a1}{bigEndian32}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_a2d38c5cab4c11a0212dbc06554a6e1e0}{sequenceNumber}})\ +\ 1;\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ acknowledgement\ number}}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a294c451371383fb488259156f01caf7e}{sendTransmissionControlProtocolPacket}}(\&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{new\_socket}},\ \textcolor{keyword}{nullptr},0,\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5afbe78d395b48369284faffb0ce9d5c0f}{TCPFlag::RST}});\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Send\ the\ reset\ flag}}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00360\ \ \ \ \ \}}
\DoxyCodeLine{00361\ }
\DoxyCodeLine{00362\ }
\DoxyCodeLine{00363\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_acdc824e91be59066c93f17e4bc2d26d0}{errorMessages}}\ -\/>\mbox{\hyperlink{classMaxOS_1_1common_1_1OutputStream_acd9ebbe1729dded0d4156f32ae77da95}{write}}(\textcolor{stringliteral}{"{}TCP:\ Handled\ packet\(\backslash\)n"{}});}
\DoxyCodeLine{00364\ }
\DoxyCodeLine{00365\ \ \ \ \ \textcolor{keywordflow}{if}(socket\ !=\ \textcolor{keyword}{nullptr}\ \&\&\ socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ ==\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a110ccf2f5d2ff4eda1fd1a494293467d}{TCPSocketState::CLOSED}})\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//If\ the\ socket\ is\ closed\ then\ remove\ it\ from\ the\ list}}
\DoxyCodeLine{00366\ \ \ \ \ \{}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a244d074e23c2f646788b1e4e515a786e}{sockets}}.erase(socket);}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00369\ \ \ \ \ \}}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ }
\DoxyCodeLine{00372\ }
\DoxyCodeLine{00373\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00374\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5a0fc437bc317835cad5faafc12a83fad5}{Max\+OS\+::net\+::\+ACK}}, \mbox{\hyperlink{tcp_8h_source_l00003}{acknowledgement\+Number}}, \mbox{\hyperlink{tcp_8cpp_source_l00142}{big\+Endian16()}}, \mbox{\hyperlink{tcp_8cpp_source_l00134}{big\+Endian32()}}, \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a831862ab9b2e65d7f51841e0c739180f}{Max\+OS\+::net\+::\+CLOSE\+\_\+\+WAIT}}, \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a110ccf2f5d2ff4eda1fd1a494293467d}{Max\+OS\+::net\+::\+CLOSED}}, \mbox{\hyperlink{ipv4_8h_source_l00013}{destination\+IP}}, \mbox{\hyperlink{tcp_8h_source_l00001}{dst\+Port}}, \mbox{\hyperlink{tcp_8h_source_l00162}{error\+Messages}}, \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a7640f170af693e00a6c91df543aa2b76}{Max\+OS\+::net\+::\+ESTABLISHED}}, \mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5af408850c47cccdcedad816d79e100906}{Max\+OS\+::net\+::\+FIN}}, \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a15691d3bea993fbf8cc16e3373caa548}{Max\+OS\+::net\+::\+FIN\+\_\+\+WAIT1}}, \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a6371b3c24c873501dacae75d744aedec}{Max\+OS\+::net\+::\+FIN\+\_\+\+WAIT2}}, \mbox{\hyperlink{amd__am79c973_8h_source_l00002}{flags}}, \mbox{\hyperlink{tcp_8h_source_l00006}{header\+Size32}}, \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44ac1f9314a03f63f33410be3489b12b29b}{Max\+OS\+::net\+::\+LISTEN}}, \mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5afbe78d395b48369284faffb0ce9d5c0f}{Max\+OS\+::net\+::\+RST}}, \mbox{\hyperlink{tcp_8cpp_source_l00384}{send\+Transmission\+Control\+Protocol\+Packet()}}, \mbox{\hyperlink{tcp_8h_source_l00002}{sequence\+Number}}, \mbox{\hyperlink{ext2_8h_source_l00001}{size}}, \mbox{\hyperlink{tcp_8h_source_l00163}{sockets}}, \mbox{\hyperlink{ipv4_8h_source_l00012}{source\+IP}}, \mbox{\hyperlink{tcp_8h_source_l00000}{src\+Port}}, \mbox{\hyperlink{ext2_8h_source_l00016}{state}}, \mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5abab6eed0f7cd8bd721e728003b63b54d}{Max\+OS\+::net\+::\+SYN}}, \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a027356d5e2d689dd48894303e715f2f1}{Max\+OS\+::net\+::\+SYN\+\_\+\+RECEIVED}}, \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44a22ee0e543a2820dcbb2dcc90ed8fdb7c}{Max\+OS\+::net\+::\+SYN\+\_\+\+SENT}}, \mbox{\hyperlink{outputStream_8cpp_source_l00049}{Max\+OS\+::common\+::\+Output\+Stream\+::write()}}, and \mbox{\hyperlink{physical_8h_source_l00001}{write}}.

\Hypertarget{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_ab809163f57ee08faff648b73201aaee5}\label{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_ab809163f57ee08faff648b73201aaee5} 
\index{MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}!Listen@{Listen}}
\index{Listen@{Listen}!MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}}
\doxysubsubsection{\texorpdfstring{Listen()}{Listen()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{Transmission\+Control\+Protocol\+Socket}} \texorpdfstring{$\ast$}{*} Transmission\+Control\+Protocol\+Handler\+::\+Listen (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\+\_\+t}}}]{port }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Begin listening on a port. 


\begin{DoxyParams}{Parameters}
{\em port} & The port to listen on \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The socket that will handle the connection 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{tcp_8cpp_source_l00511}{511}} of file \mbox{\hyperlink{tcp_8cpp_source}{tcp.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00512\ \{}
\DoxyCodeLine{00513\ \ \ \ \ \textcolor{comment}{//Create\ a\ new\ socket}}
\DoxyCodeLine{00514\ \ \ \ \ \textcolor{keyword}{auto}*\ socket\ =\ (\mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{TransmissionControlProtocolSocket}}*)\mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_a983c849ff604367f7c8a0e70172bb331}{MemoryManager::kmalloc}}(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{TransmissionControlProtocolSocket}}));}
\DoxyCodeLine{00515\ }
\DoxyCodeLine{00516\ \ \ \ \ \textcolor{comment}{//If\ there\ is\ space\ for\ the\ socket}}
\DoxyCodeLine{00517\ \ \ \ \ \textcolor{keywordflow}{if}(socket\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00518\ \ \ \ \ \{}
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ \textcolor{comment}{//Set\ the\ socket}}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ (socket)\ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a6cb78908521ca4ec70a18ed72b6b96bf}{TransmissionControlProtocolSocket}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00521\ }
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \textcolor{comment}{//Configure\ the\ socket}}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{ext2_8h_af4ea525e6f15623e4e9c6c6aa75f2077}{state}}\ =\ \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44ac1f9314a03f63f33410be3489b12b29b}{TCPSocketState::LISTEN}};}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ socket\ -\/>\ localIP\ =\ \mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolPayloadHandler_af2365749bed6df7757755cf83f30eb42}{internetProtocolHandler}}\ -\/>\ GetInternetProtocolAddress();}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \ \ socket\ -\/>\ localPort\ =\ ((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{port}}\ \&\ 0xFF00)>>8)\ |\ ((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{port}}\ \&\ 0x00FF)\ <<\ 8);}
\DoxyCodeLine{00526\ }
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \textcolor{comment}{//Add\ the\ socket\ to\ the\ socket\ array}}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a244d074e23c2f646788b1e4e515a786e}{sockets}}.push\_back(socket);}
\DoxyCodeLine{00529\ \ \ \ \ \}}
\DoxyCodeLine{00530\ }
\DoxyCodeLine{00531\ \ \ \ \ \textcolor{comment}{//Return\ the\ socket}}
\DoxyCodeLine{00532\ \ \ \ \ \textcolor{keywordflow}{return}\ socket;}
\DoxyCodeLine{00533\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{ipv4_8h_source_l00051}{Max\+OS\+::net\+::\+Internet\+Protocol\+Payload\+Handler\+::internet\+Protocol\+Handler}}, \mbox{\hyperlink{memorymanagement_8cpp_source_l00074}{Max\+OS\+::memory\+::\+Memory\+Manager\+::kmalloc()}}, \mbox{\hyperlink{namespaceMaxOS_1_1net_aef1bb382dd5d6cdaecb7ffe20b234a44ac1f9314a03f63f33410be3489b12b29b}{Max\+OS\+::net\+::\+LISTEN}}, \mbox{\hyperlink{tcp_8h_source_l00163}{sockets}}, \mbox{\hyperlink{ext2_8h_source_l00016}{state}}, and \mbox{\hyperlink{tcp_8h_source_l00160}{Transmission\+Control\+Protocol\+Socket}}.

\Hypertarget{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a294c451371383fb488259156f01caf7e}\label{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a294c451371383fb488259156f01caf7e} 
\index{MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}!sendTransmissionControlProtocolPacket@{sendTransmissionControlProtocolPacket}}
\index{sendTransmissionControlProtocolPacket@{sendTransmissionControlProtocolPacket}!MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}}
\doxysubsubsection{\texorpdfstring{sendTransmissionControlProtocolPacket()}{sendTransmissionControlProtocolPacket()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} Transmission\+Control\+Protocol\+Handler\+::send\+Transmission\+Control\+Protocol\+Packet (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{Transmission\+Control\+Protocol\+Socket}} \texorpdfstring{$\ast$}{*}}]{socket,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{data,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\+\_\+t}}}]{size,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\+\_\+t}}}]{flags = {\ttfamily 0} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Send a packet (Throught the provider) 


\begin{DoxyParams}{Parameters}
{\em socket} & The socket to send the packet from \\
\hline
{\em data} & The data to send \\
\hline
{\em size} & The size of the data \\
\hline
{\em flags} & The flags to send \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{tcp_8cpp_source_l00384}{384}} of file \mbox{\hyperlink{tcp_8cpp_source}{tcp.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00385\ \{}
\DoxyCodeLine{00386\ \ \ \ \ \textcolor{comment}{//Get\ the\ total\ size\ of\ the\ packet\ and\ the\ packet\ with\ the\ pseudo\ header}}
\DoxyCodeLine{00387\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}}\ \mbox{\hyperlink{ipv4_8h_a46d6b08cf598408355fa1fc5c1de902a}{totalLength}}\ =\ \mbox{\hyperlink{ext2_8h_aaba88b24a21a6c70c895c0d55f4a69a0}{size}}\ +\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1TransmissionControlProtocolHeader}{TransmissionControlProtocolHeader}});}
\DoxyCodeLine{00388\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{lengthInclPHdr}}\ =\ \mbox{\hyperlink{ipv4_8h_a46d6b08cf598408355fa1fc5c1de902a}{totalLength}}\ +\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1TransmissionControlProtocolPseudoHeader}{TransmissionControlProtocolPseudoHeader}});}
\DoxyCodeLine{00389\ }
\DoxyCodeLine{00390\ \ \ \ \ \textcolor{comment}{//Create\ a\ buffer\ for\ the\ packet}}
\DoxyCodeLine{00391\ \ \ \ \ \textcolor{keyword}{auto}*\ buffer\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}}*)\mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_a983c849ff604367f7c8a0e70172bb331}{MemoryManager::kmalloc}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{lengthInclPHdr}});}
\DoxyCodeLine{00392\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}}*\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{buffer2}}\ =\ buffer\ +\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1TransmissionControlProtocolHeader}{TransmissionControlProtocolHeader}})\ +\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1TransmissionControlProtocolPseudoHeader}{TransmissionControlProtocolPseudoHeader}});}
\DoxyCodeLine{00393\ }
\DoxyCodeLine{00394\ \ \ \ \ \textcolor{comment}{//Create\ the\ headers}}
\DoxyCodeLine{00395\ \ \ \ \ \textcolor{keyword}{auto}*\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{phdr}}\ =\ (\mbox{\hyperlink{structMaxOS_1_1net_1_1TransmissionControlProtocolPseudoHeader}{TransmissionControlProtocolPseudoHeader}}*)buffer;}
\DoxyCodeLine{00396\ \ \ \ \ \textcolor{keyword}{auto}*\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ =\ (\mbox{\hyperlink{structMaxOS_1_1net_1_1TransmissionControlProtocolHeader}{TransmissionControlProtocolHeader}}*)(buffer\ +\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1TransmissionControlProtocolPseudoHeader}{TransmissionControlProtocolPseudoHeader}}));}
\DoxyCodeLine{00397\ }
\DoxyCodeLine{00398\ \ \ \ \ \textcolor{comment}{//Size\ is\ translated\ into\ 32bit}}
\DoxyCodeLine{00399\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_a3909a49a58301aec6d401cdd9ae76f5a}{headerSize32}}\ =\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1net_1_1TransmissionControlProtocolHeader}{TransmissionControlProtocolHeader}})/4;}
\DoxyCodeLine{00400\ }
\DoxyCodeLine{00401\ \ \ \ \ \textcolor{comment}{//Set\ the\ ports}}
\DoxyCodeLine{00402\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_a26ebbf4f65c3f6fd9959d9cecef5c9d8}{srcPort}}\ =\ \mbox{\hyperlink{tcp_8cpp_abfe30d4c4185706700ed78df8308a63e}{bigEndian16}}(socket\ -\/>\ localPort);}
\DoxyCodeLine{00403\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_ac01766720e5781a418710ebf1ba5379e}{dstPort}}\ =\ \mbox{\hyperlink{tcp_8cpp_abfe30d4c4185706700ed78df8308a63e}{bigEndian16}}(socket\ -\/>\ remotePort);}
\DoxyCodeLine{00404\ }
\DoxyCodeLine{00405\ \ \ \ \ \textcolor{comment}{//Set\ TCP\ related\ data}}
\DoxyCodeLine{00406\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_ac41c406579d1214f4a1f0338bca28b6a}{acknowledgementNumber}}\ =\ \mbox{\hyperlink{tcp_8cpp_abb0f64c6581be532c99e657e200718a1}{bigEndian32}}(\ socket\ -\/>\ \mbox{\hyperlink{tcp_8h_ac41c406579d1214f4a1f0338bca28b6a}{acknowledgementNumber}}\ );}
\DoxyCodeLine{00407\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_a2d38c5cab4c11a0212dbc06554a6e1e0}{sequenceNumber}}\ =\ \mbox{\hyperlink{tcp_8cpp_abb0f64c6581be532c99e657e200718a1}{bigEndian32}}(\ socket\ -\/>\ \mbox{\hyperlink{tcp_8h_a2d38c5cab4c11a0212dbc06554a6e1e0}{sequenceNumber}}\ );}
\DoxyCodeLine{00408\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{fat32_8h_ac35c1fbebe2017fc1ca10f5803668dfd}{reserved}}\ =\ 0;}
\DoxyCodeLine{00409\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{amd__am79c973_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags}}\ =\ \mbox{\hyperlink{amd__am79c973_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags}};}
\DoxyCodeLine{00410\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_a6b2a31b20954529dabfe0f32eda1cf11}{windowSize}}\ =\ 0xFFFF;}
\DoxyCodeLine{00411\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_aca974d34b50135a7d9b524a8fc2f5d00}{urgentPtr}}\ =\ 0;}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00413\ \ \ \ \ \textcolor{comment}{//Through\ the\ options\ allow\ for\ the\ MSS\ to\ be\ set}}
\DoxyCodeLine{00414\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{tcp_8h_a2ba60f781746d31baf29e8c5a35d07e7}{options}}\ =\ ((\mbox{\hyperlink{amd__am79c973_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags}}\ \&\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5abab6eed0f7cd8bd721e728003b63b54d}{TCPFlag::SYN}})\ !=\ 0)\ ?\ 0xB4050402\ :\ 0;}
\DoxyCodeLine{00415\ }
\DoxyCodeLine{00416\ \ \ \ \ \textcolor{comment}{//Increase\ the\ sequence\ number}}
\DoxyCodeLine{00417\ \ \ \ \ socket\ -\/>\ \mbox{\hyperlink{tcp_8h_a2d38c5cab4c11a0212dbc06554a6e1e0}{sequenceNumber}}\ +=\ \mbox{\hyperlink{ext2_8h_aaba88b24a21a6c70c895c0d55f4a69a0}{size}};}
\DoxyCodeLine{00418\ }
\DoxyCodeLine{00419\ \ \ \ \ \textcolor{comment}{//\ Check\ if\ the\ data\ is\ not\ null}}
\DoxyCodeLine{00420\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}}\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00421\ \ \ \ \ \{}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Copy\ the\ data\ into\ the\ buffer}}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ \mbox{\hyperlink{ext2_8h_aaba88b24a21a6c70c895c0d55f4a69a0}{size}};\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}++)}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{buffer2}}[i]\ =\ \mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}}[i];}
\DoxyCodeLine{00425\ \ \ \ \ \}}
\DoxyCodeLine{00426\ }
\DoxyCodeLine{00427\ \ \ \ \ \textcolor{comment}{//Set\ the\ pseudo\ header}}
\DoxyCodeLine{00428\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{phdr}}\ -\/>\ \mbox{\hyperlink{arp_8h_a2c21b87d7d19b79e094d74112253a776}{srcIP}}\ =\ socket\ -\/>\ localIP;}
\DoxyCodeLine{00429\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{phdr}}\ -\/>\ \mbox{\hyperlink{arp_8h_a2287eab8c0183320980c7a0addb74a5a}{dstIP}}\ =\ socket\ -\/>\ remoteIP;}
\DoxyCodeLine{00430\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{phdr}}\ -\/>\ \mbox{\hyperlink{arp_8h_ab551400c74271f35d0c79f81d29cffbb}{protocol}}\ =\ 0x0600;}
\DoxyCodeLine{00431\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{phdr}}\ -\/>\ \mbox{\hyperlink{ipv4_8h_a46d6b08cf598408355fa1fc5c1de902a}{totalLength}}\ =\ ((\mbox{\hyperlink{ipv4_8h_a46d6b08cf598408355fa1fc5c1de902a}{totalLength}}\ \&\ 0x00FF)\ <<\ 8)\ |\ ((\mbox{\hyperlink{ipv4_8h_a46d6b08cf598408355fa1fc5c1de902a}{totalLength}}\ \&\ 0xFF00)\ >>\ 8);}
\DoxyCodeLine{00432\ }
\DoxyCodeLine{00433\ \ \ \ \ \textcolor{comment}{//Calculate\ the\ checksum}}
\DoxyCodeLine{00434\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{intel__i217_8h_a59eac9627282a484fbaf0aa7aa3b8a9a}{checksum}}\ =\ 0;}
\DoxyCodeLine{00435\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}\ -\/>\ \mbox{\hyperlink{intel__i217_8h_a59eac9627282a484fbaf0aa7aa3b8a9a}{checksum}}\ =\ \mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolHandler_a95cad129c9c0a16f40334bc373586412}{InternetProtocolHandler::Checksum}}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}}*)buffer,\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{lengthInclPHdr}});}
\DoxyCodeLine{00436\ }
\DoxyCodeLine{00437\ }
\DoxyCodeLine{00438\ \ \ \ \ \textcolor{comment}{//Send\ and\ then\ free\ the\ data}}
\DoxyCodeLine{00439\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1net_1_1InternetProtocolPayloadHandler_a547124e71c39318710ca97724adc447b}{Send}}(socket\ -\/>\ remoteIP,\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}}*)\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}},\ \mbox{\hyperlink{ipv4_8h_a46d6b08cf598408355fa1fc5c1de902a}{totalLength}});}
\DoxyCodeLine{00440\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_abaa5e54c1428654efa1c81b69e12eb20}{MemoryManager::kfree}}(buffer);}
\DoxyCodeLine{00441\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{tcp_8h_source_l00003}{acknowledgement\+Number}}, \mbox{\hyperlink{tcp_8cpp_source_l00142}{big\+Endian16()}}, \mbox{\hyperlink{tcp_8cpp_source_l00134}{big\+Endian32()}}, \mbox{\hyperlink{intel__i217_8h_source_l00002}{checksum}}, \mbox{\hyperlink{ipv4_8cpp_source_l00215}{Max\+OS\+::net\+::\+Internet\+Protocol\+Handler\+::\+Checksum()}}, \mbox{\hyperlink{icmp_8h_source_l00004}{data}}, \mbox{\hyperlink{arp_8h_source_l00011}{dst\+IP}}, \mbox{\hyperlink{tcp_8h_source_l00001}{dst\+Port}}, \mbox{\hyperlink{amd__am79c973_8h_source_l00002}{flags}}, \mbox{\hyperlink{tcp_8h_source_l00006}{header\+Size32}}, \mbox{\hyperlink{memorymanagement_8cpp_source_l00161}{Max\+OS\+::memory\+::\+Memory\+Manager\+::kfree()}}, \mbox{\hyperlink{memorymanagement_8cpp_source_l00074}{Max\+OS\+::memory\+::\+Memory\+Manager\+::kmalloc()}}, \mbox{\hyperlink{tcp_8h_source_l00013}{options}}, \mbox{\hyperlink{arp_8h_source_l00002}{protocol}}, \mbox{\hyperlink{fat32_8h_source_l00004}{reserved}}, \mbox{\hyperlink{ipv4_8cpp_source_l00076}{Max\+OS\+::net\+::\+Internet\+Protocol\+Payload\+Handler\+::\+Send()}}, \mbox{\hyperlink{tcp_8h_source_l00002}{sequence\+Number}}, \mbox{\hyperlink{ext2_8h_source_l00001}{size}}, \mbox{\hyperlink{arp_8h_source_l00009}{src\+IP}}, \mbox{\hyperlink{tcp_8h_source_l00000}{src\+Port}}, \mbox{\hyperlink{namespaceMaxOS_1_1net_ab016e1ccae4de3d81a67e8eeef0ba1f5abab6eed0f7cd8bd721e728003b63b54d}{Max\+OS\+::net\+::\+SYN}}, \mbox{\hyperlink{ipv4_8h_source_l00003}{total\+Length}}, \mbox{\hyperlink{tcp_8h_source_l00011}{urgent\+Ptr}}, and \mbox{\hyperlink{tcp_8h_source_l00009}{window\+Size}}.



Referenced by \mbox{\hyperlink{tcp_8cpp_source_l00449}{Connect()}}, \mbox{\hyperlink{tcp_8cpp_source_l00497}{Disconnect()}}, and \mbox{\hyperlink{tcp_8cpp_source_l00157}{handle\+Internet\+Protocol\+Payload()}}.



\doxysubsection{Friends And Related Symbol Documentation}
\Hypertarget{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a6cb78908521ca4ec70a18ed72b6b96bf}\label{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a6cb78908521ca4ec70a18ed72b6b96bf} 
\index{MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}!TransmissionControlProtocolSocket@{TransmissionControlProtocolSocket}}
\index{TransmissionControlProtocolSocket@{TransmissionControlProtocolSocket}!MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}}
\doxysubsubsection{\texorpdfstring{TransmissionControlProtocolSocket}{TransmissionControlProtocolSocket}}
{\footnotesize\ttfamily friend class \mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{Transmission\+Control\+Protocol\+Socket}}\hspace{0.3cm}{\ttfamily [friend]}}



Definition at line \mbox{\hyperlink{tcp_8h_source_l00160}{160}} of file \mbox{\hyperlink{tcp_8h_source}{tcp.\+h}}.



Referenced by \mbox{\hyperlink{tcp_8cpp_source_l00449}{Connect()}}, and \mbox{\hyperlink{tcp_8cpp_source_l00511}{Listen()}}.



\doxysubsection{Member Data Documentation}
\Hypertarget{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_acdc824e91be59066c93f17e4bc2d26d0}\label{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_acdc824e91be59066c93f17e4bc2d26d0} 
\index{MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}!errorMessages@{errorMessages}}
\index{errorMessages@{errorMessages}!MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}}
\doxysubsubsection{\texorpdfstring{errorMessages}{errorMessages}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}}\texorpdfstring{$\ast$}{*} Max\+OS\+::net\+::\+Transmission\+Control\+Protocol\+Handler\+::error\+Messages\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{tcp_8h_source_l00162}{162}} of file \mbox{\hyperlink{tcp_8h_source}{tcp.\+h}}.



Referenced by \mbox{\hyperlink{tcp_8cpp_source_l00157}{handle\+Internet\+Protocol\+Payload()}}, and \mbox{\hyperlink{tcp_8cpp_source_l00123}{Transmission\+Control\+Protocol\+Handler()}}.

\Hypertarget{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_aff5fa7f511f8c6c29944e3b3c801ff24}\label{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_aff5fa7f511f8c6c29944e3b3c801ff24} 
\index{MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}!freePorts@{freePorts}}
\index{freePorts@{freePorts}!MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}}
\doxysubsubsection{\texorpdfstring{freePorts}{freePorts}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespaceMaxOS_1_1net_a8e668c17241c6c0ed8e9f6df338b2307}{Transmission\+Control\+Protocol\+Port}} Transmission\+Control\+Protocol\+Handler\+::free\+Ports = 0x8000\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}



{\bfseries{Handler}}/// 



Definition at line \mbox{\hyperlink{tcp_8h_source_l00165}{165}} of file \mbox{\hyperlink{tcp_8h_source}{tcp.\+h}}.



Referenced by \mbox{\hyperlink{tcp_8cpp_source_l00449}{Connect()}}.

\Hypertarget{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a244d074e23c2f646788b1e4e515a786e}\label{classMaxOS_1_1net_1_1TransmissionControlProtocolHandler_a244d074e23c2f646788b1e4e515a786e} 
\index{MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}!sockets@{sockets}}
\index{sockets@{sockets}!MaxOS::net::TransmissionControlProtocolHandler@{MaxOS::net::TransmissionControlProtocolHandler}}
\doxysubsubsection{\texorpdfstring{sockets}{sockets}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Vector}{common\+::\+Vector}}$<$\mbox{\hyperlink{classMaxOS_1_1net_1_1TransmissionControlProtocolSocket}{Transmission\+Control\+Protocol\+Socket}}\texorpdfstring{$\ast$}{*}$>$ Max\+OS\+::net\+::\+Transmission\+Control\+Protocol\+Handler\+::sockets\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{tcp_8h_source_l00163}{163}} of file \mbox{\hyperlink{tcp_8h_source}{tcp.\+h}}.



Referenced by \mbox{\hyperlink{tcp_8cpp_source_l00449}{Connect()}}, \mbox{\hyperlink{tcp_8cpp_source_l00157}{handle\+Internet\+Protocol\+Payload()}}, and \mbox{\hyperlink{tcp_8cpp_source_l00511}{Listen()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/include/net/\mbox{\hyperlink{tcp_8h}{tcp.\+h}}\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/src/net/\mbox{\hyperlink{tcp_8cpp}{tcp.\+cpp}}\end{DoxyCompactItemize}
