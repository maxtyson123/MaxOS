\hypertarget{classMaxOS_1_1system_1_1CPU}{}\doxysection{Max\+OS\+::system\+::C\+PU Class Reference}
\label{classMaxOS_1_1system_1_1CPU}\index{MaxOS::system::CPU@{MaxOS::system::CPU}}


{\ttfamily \#include $<$cpu.\+h$>$}

\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a83a4b0d749e2d5e81ebb78bffdbcabb1}{P\+A\+N\+IC}} (const char $\ast$message)
\item 
static void \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a189729f4ca240ff52004a34b9057d448}{halt}} ()
\item 
static void \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a2e9fe68995cb7e1e9943d7a3b3565c19}{get\+\_\+status}} (cpu\+\_\+status\+\_\+t $\ast$\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}})
\item 
static void \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_ab2744288c9f3b196502d4ae0f6b49b8b}{set\+\_\+status}} (cpu\+\_\+status\+\_\+t $\ast$\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}})
\item 
static void \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a07c84fcc01f83f35d50295b7828a54c3}{print\+\_\+registers}} (cpu\+\_\+status\+\_\+t $\ast$\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}})
\item 
static uint64\+\_\+t \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_ac2eb28384db21eb3075768c17302fff4}{read\+\_\+msr}} (uint32\+\_\+t msr)
\item 
static void \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_ae37f29176f1bd55eb7401d1d34e7c69b}{write\+\_\+msr}} (uint32\+\_\+t msr, uint64\+\_\+t value)
\item 
static void \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a9ff943a994f211939c9f1a907e73b0e1}{cpuid}} (uint32\+\_\+t leaf, uint32\+\_\+t $\ast$\mbox{\hyperlink{multitasking_8h_a93d929ad1fc57af9d4f1793c361fb4f2}{eax}}, uint32\+\_\+t $\ast$\mbox{\hyperlink{multitasking_8h_ae7c1e3339e4dead200cab41010e9127c}{ebx}}, uint32\+\_\+t $\ast$\mbox{\hyperlink{multitasking_8h_af2b16bef95c844028dd145264d1d3875}{ecx}}, uint32\+\_\+t $\ast$\mbox{\hyperlink{multitasking_8h_ae6db045cebe7b4cf979120dccdee0d01}{edx}})
\item 
static void \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_ae67e18fdfbb6fcd51d0f2509c9c43ff2}{stack\+\_\+trace}} (size\+\_\+t)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 48 of file cpu.\+h.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classMaxOS_1_1system_1_1CPU_a9ff943a994f211939c9f1a907e73b0e1}\label{classMaxOS_1_1system_1_1CPU_a9ff943a994f211939c9f1a907e73b0e1}} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!cpuid@{cpuid}}
\index{cpuid@{cpuid}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{cpuid()}{cpuid()}}
{\footnotesize\ttfamily void C\+P\+U\+::cpuid (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{leaf,  }\item[{uint32\+\_\+t $\ast$}]{eax,  }\item[{uint32\+\_\+t $\ast$}]{ebx,  }\item[{uint32\+\_\+t $\ast$}]{ecx,  }\item[{uint32\+\_\+t $\ast$}]{edx }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 107 of file cpu.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{107                                                                                          \{}
\DoxyCodeLine{108 }
\DoxyCodeLine{109   \textcolor{comment}{// Call the cpuid instruction}}
\DoxyCodeLine{110   \_\_get\_cpuid(leaf, \mbox{\hyperlink{multitasking_8h_a93d929ad1fc57af9d4f1793c361fb4f2}{eax}}, \mbox{\hyperlink{multitasking_8h_ae7c1e3339e4dead200cab41010e9127c}{ebx}}, \mbox{\hyperlink{multitasking_8h_af2b16bef95c844028dd145264d1d3875}{ecx}}, \mbox{\hyperlink{multitasking_8h_ae6db045cebe7b4cf979120dccdee0d01}{edx}});}
\DoxyCodeLine{111 \}}

\end{DoxyCode}


References eax, ebx, ecx, and edx.

\mbox{\Hypertarget{classMaxOS_1_1system_1_1CPU_a2e9fe68995cb7e1e9943d7a3b3565c19}\label{classMaxOS_1_1system_1_1CPU_a2e9fe68995cb7e1e9943d7a3b3565c19}} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!get\_status@{get\_status}}
\index{get\_status@{get\_status}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{get\_status()}{get\_status()}}
{\footnotesize\ttfamily void C\+P\+U\+::get\+\_\+status (\begin{DoxyParamCaption}\item[{cpu\+\_\+status\+\_\+t $\ast$}]{status }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 18 of file cpu.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{18                                          \{}
\DoxyCodeLine{19 }
\DoxyCodeLine{20     \textcolor{comment}{// Get the registers}}
\DoxyCodeLine{21     \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%\%r15, \%0"} : \textcolor{stringliteral}{"=r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r15));}
\DoxyCodeLine{22     \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%\%r14, \%0"} : \textcolor{stringliteral}{"=r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r14));}
\DoxyCodeLine{23     \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%\%r13, \%0"} : \textcolor{stringliteral}{"=r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r13));}
\DoxyCodeLine{24     \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%\%r12, \%0"} : \textcolor{stringliteral}{"=r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r12));}
\DoxyCodeLine{25     \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%\%r11, \%0"} : \textcolor{stringliteral}{"=r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r11));}
\DoxyCodeLine{26     \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%\%r10, \%0"} : \textcolor{stringliteral}{"=r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r10));}
\DoxyCodeLine{27     \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%\%r9, \%0"} : \textcolor{stringliteral}{"=r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r9));}
\DoxyCodeLine{28     \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%\%r8, \%0"} : \textcolor{stringliteral}{"=r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r8));}
\DoxyCodeLine{29     \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%\%rdi, \%0"} : \textcolor{stringliteral}{"=r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rdi));}
\DoxyCodeLine{30     \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%\%rsi, \%0"} : \textcolor{stringliteral}{"=r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rsi));}
\DoxyCodeLine{31     \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%\%rbp, \%0"} : \textcolor{stringliteral}{"=r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rbp));}
\DoxyCodeLine{32     \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%\%rdx, \%0"} : \textcolor{stringliteral}{"=r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rdx));}
\DoxyCodeLine{33     \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%\%rcx, \%0"} : \textcolor{stringliteral}{"=r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rcx));}
\DoxyCodeLine{34     \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%\%rbx, \%0"} : \textcolor{stringliteral}{"=r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rbx));}
\DoxyCodeLine{35     \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%\%rax, \%0"} : \textcolor{stringliteral}{"=r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rax));}
\DoxyCodeLine{36 }
\DoxyCodeLine{37 \}}

\end{DoxyCode}


References status.

\mbox{\Hypertarget{classMaxOS_1_1system_1_1CPU_a189729f4ca240ff52004a34b9057d448}\label{classMaxOS_1_1system_1_1CPU_a189729f4ca240ff52004a34b9057d448}} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!halt@{halt}}
\index{halt@{halt}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{halt()}{halt()}}
{\footnotesize\ttfamily void C\+P\+U\+::halt (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 14 of file cpu.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{14                \{}
\DoxyCodeLine{15   \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"hlt"});}
\DoxyCodeLine{16 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classMaxOS_1_1system_1_1CPU_a83a4b0d749e2d5e81ebb78bffdbcabb1}\label{classMaxOS_1_1system_1_1CPU_a83a4b0d749e2d5e81ebb78bffdbcabb1}} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!PANIC@{PANIC}}
\index{PANIC@{PANIC}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{PANIC()}{PANIC()}}
{\footnotesize\ttfamily void C\+P\+U\+::\+P\+A\+N\+IC (\begin{DoxyParamCaption}\item[{const char $\ast$}]{message }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 133 of file cpu.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{133                                    \{}
\DoxyCodeLine{134 }
\DoxyCodeLine{135   \textcolor{comment}{// Print using the backend}}
\DoxyCodeLine{136   \mbox{\hyperlink{kprint_8h_ad17f4069242d16af16fc559e667f26e1}{\_kpanicf}}(\textcolor{stringliteral}{"-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/\(\backslash\)n"});}
\DoxyCodeLine{137   \mbox{\hyperlink{kprint_8h_ad17f4069242d16af16fc559e667f26e1}{\_kpanicf}}(\textcolor{stringliteral}{"Kernel Panic: \%s\(\backslash\)n"}, message);}
\DoxyCodeLine{138 }
\DoxyCodeLine{139   \textcolor{comment}{// Stack trace}}
\DoxyCodeLine{140   \mbox{\hyperlink{kprint_8h_ad17f4069242d16af16fc559e667f26e1}{\_kpanicf}}(\textcolor{stringliteral}{"-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n"});}
\DoxyCodeLine{141   \mbox{\hyperlink{kprint_8h_ad17f4069242d16af16fc559e667f26e1}{\_kpanicf}}(\textcolor{stringliteral}{"Stack Trace:\(\backslash\)n"});}
\DoxyCodeLine{142   \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_ae67e18fdfbb6fcd51d0f2509c9c43ff2}{stack\_trace}}(10);}
\DoxyCodeLine{143 }
\DoxyCodeLine{144   \textcolor{comment}{// Register dump}}
\DoxyCodeLine{145   \mbox{\hyperlink{kprint_8h_ad17f4069242d16af16fc559e667f26e1}{\_kpanicf}}(\textcolor{stringliteral}{"-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n"});}
\DoxyCodeLine{146   \mbox{\hyperlink{kprint_8h_ad17f4069242d16af16fc559e667f26e1}{\_kpanicf}}(\textcolor{stringliteral}{"Register Dump:\(\backslash\)n"});}
\DoxyCodeLine{147   cpu\_status\_t \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}};}
\DoxyCodeLine{148   \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a2e9fe68995cb7e1e9943d7a3b3565c19}{get\_status}}(\&\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}});}
\DoxyCodeLine{149   \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a07c84fcc01f83f35d50295b7828a54c3}{print\_registers}}(\&\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}});}
\DoxyCodeLine{150 }
\DoxyCodeLine{151   \textcolor{comment}{// Halt}}
\DoxyCodeLine{152   \mbox{\hyperlink{kprint_8h_ad17f4069242d16af16fc559e667f26e1}{\_kpanicf}}(\textcolor{stringliteral}{"-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/\(\backslash\)n"});}
\DoxyCodeLine{153   \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a189729f4ca240ff52004a34b9057d448}{halt}}();}
\DoxyCodeLine{154 }
\DoxyCodeLine{155 \}}

\end{DoxyCode}


References \+\_\+kpanicf, and status.

\mbox{\Hypertarget{classMaxOS_1_1system_1_1CPU_a07c84fcc01f83f35d50295b7828a54c3}\label{classMaxOS_1_1system_1_1CPU_a07c84fcc01f83f35d50295b7828a54c3}} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!print\_registers@{print\_registers}}
\index{print\_registers@{print\_registers}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{print\_registers()}{print\_registers()}}
{\footnotesize\ttfamily void C\+P\+U\+::print\+\_\+registers (\begin{DoxyParamCaption}\item[{cpu\+\_\+status\+\_\+t $\ast$}]{status }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 59 of file cpu.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{59                                               \{}
\DoxyCodeLine{60 }
\DoxyCodeLine{61     \textcolor{comment}{// Print the registers}}
\DoxyCodeLine{62     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"R15: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r15);}
\DoxyCodeLine{63     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"R14: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r14);}
\DoxyCodeLine{64     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"R13: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r13);}
\DoxyCodeLine{65     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"R12: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r12);}
\DoxyCodeLine{66     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"R11: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r11);}
\DoxyCodeLine{67     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"R10: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r10);}
\DoxyCodeLine{68     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"R9: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r9);}
\DoxyCodeLine{69     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"R8: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r8);}
\DoxyCodeLine{70     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"RDI: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rdi);}
\DoxyCodeLine{71     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"RSI: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rsi);}
\DoxyCodeLine{72     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"RBP: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rbp);}
\DoxyCodeLine{73     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"RDX: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rdx);}
\DoxyCodeLine{74     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"RCX: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rcx);}
\DoxyCodeLine{75     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"RBX: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rbx);}
\DoxyCodeLine{76     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"RAX: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rax);}
\DoxyCodeLine{77     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"INTERRUPT NUMBER: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>interrupt\_number);}
\DoxyCodeLine{78     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"ERROR CODE: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>error\_code);}
\DoxyCodeLine{79     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"RIP: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rip);}
\DoxyCodeLine{80     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"CS: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>cs);}
\DoxyCodeLine{81     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"RFLAGS: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rflags);}
\DoxyCodeLine{82     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"RSP: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rsp);}
\DoxyCodeLine{83     \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"SS: 0x\%x\(\backslash\)n"}, \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>ss);}
\DoxyCodeLine{84 }
\DoxyCodeLine{85 \}}

\end{DoxyCode}


References \+\_\+kprintf, and status.

\mbox{\Hypertarget{classMaxOS_1_1system_1_1CPU_ac2eb28384db21eb3075768c17302fff4}\label{classMaxOS_1_1system_1_1CPU_ac2eb28384db21eb3075768c17302fff4}} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!read\_msr@{read\_msr}}
\index{read\_msr@{read\_msr}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{read\_msr()}{read\_msr()}}
{\footnotesize\ttfamily uint64\+\_\+t C\+P\+U\+::read\+\_\+msr (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{msr }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 88 of file cpu.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{88                                    \{}
\DoxyCodeLine{89 }
\DoxyCodeLine{90   \textcolor{comment}{// Low and high parts of the MSR}}
\DoxyCodeLine{91   uint32\_t low, high;}
\DoxyCodeLine{92 }
\DoxyCodeLine{93   \textcolor{comment}{// Read the MSR}}
\DoxyCodeLine{94   \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"rdmsr"} : \textcolor{stringliteral}{"=a"} (low), \textcolor{stringliteral}{"=d"} (high) : \textcolor{stringliteral}{"c"} (msr));}
\DoxyCodeLine{95 }
\DoxyCodeLine{96   \textcolor{comment}{// Return the value}}
\DoxyCodeLine{97   \textcolor{keywordflow}{return} (uint64\_t) low | ((uint64\_t) high << 32);}
\DoxyCodeLine{98 }
\DoxyCodeLine{99 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classMaxOS_1_1system_1_1CPU_ab2744288c9f3b196502d4ae0f6b49b8b}\label{classMaxOS_1_1system_1_1CPU_ab2744288c9f3b196502d4ae0f6b49b8b}} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!set\_status@{set\_status}}
\index{set\_status@{set\_status}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{set\_status()}{set\_status()}}
{\footnotesize\ttfamily void C\+P\+U\+::set\+\_\+status (\begin{DoxyParamCaption}\item[{cpu\+\_\+status\+\_\+t $\ast$}]{status }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 38 of file cpu.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{38                                          \{}
\DoxyCodeLine{39 }
\DoxyCodeLine{40   \textcolor{comment}{// Set the registers}}
\DoxyCodeLine{41   \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%0, \%\%r15"} : : \textcolor{stringliteral}{"r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r15));}
\DoxyCodeLine{42   \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%0, \%\%r14"} : : \textcolor{stringliteral}{"r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r14));}
\DoxyCodeLine{43   \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%0, \%\%r13"} : : \textcolor{stringliteral}{"r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r13));}
\DoxyCodeLine{44   \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%0, \%\%r12"} : : \textcolor{stringliteral}{"r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r12));}
\DoxyCodeLine{45   \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%0, \%\%r11"} : : \textcolor{stringliteral}{"r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r11));}
\DoxyCodeLine{46   \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%0, \%\%r10"} : : \textcolor{stringliteral}{"r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r10));}
\DoxyCodeLine{47   \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%0, \%\%r9"} : : \textcolor{stringliteral}{"r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r9));}
\DoxyCodeLine{48   \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%0, \%\%r8"} : : \textcolor{stringliteral}{"r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>r8));}
\DoxyCodeLine{49   \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%0, \%\%rdi"} : : \textcolor{stringliteral}{"r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rdi));}
\DoxyCodeLine{50   \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%0, \%\%rsi"} : : \textcolor{stringliteral}{"r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rsi));}
\DoxyCodeLine{51   \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%0, \%\%rbp"} : : \textcolor{stringliteral}{"r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rbp));}
\DoxyCodeLine{52   \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%0, \%\%rdx"} : : \textcolor{stringliteral}{"r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rdx));}
\DoxyCodeLine{53   \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%0, \%\%rcx"} : : \textcolor{stringliteral}{"r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rcx));}
\DoxyCodeLine{54   \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%0, \%\%rbx"} : : \textcolor{stringliteral}{"r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rbx));}
\DoxyCodeLine{55   \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"mov \%0, \%\%rax"} : : \textcolor{stringliteral}{"r"} (\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}}-\/>rax));}
\DoxyCodeLine{56 }
\DoxyCodeLine{57 \}}

\end{DoxyCode}


References status.

\mbox{\Hypertarget{classMaxOS_1_1system_1_1CPU_ae67e18fdfbb6fcd51d0f2509c9c43ff2}\label{classMaxOS_1_1system_1_1CPU_ae67e18fdfbb6fcd51d0f2509c9c43ff2}} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!stack\_trace@{stack\_trace}}
\index{stack\_trace@{stack\_trace}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{stack\_trace()}{stack\_trace()}}
{\footnotesize\ttfamily void C\+P\+U\+::stack\+\_\+trace (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{level }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 113 of file cpu.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{113                                   \{}
\DoxyCodeLine{114 }
\DoxyCodeLine{115     \textcolor{comment}{// Get the first stack frame}}
\DoxyCodeLine{116     stack\_frame\_t* frame = (stack\_frame\_t*)\_\_builtin\_frame\_address(0);}
\DoxyCodeLine{117     \textcolor{keywordtype}{size\_t} current\_level = 0;}
\DoxyCodeLine{118 }
\DoxyCodeLine{119     \textcolor{comment}{// Loop through the frames logging}}
\DoxyCodeLine{120     \textcolor{keywordflow}{while} (current\_level < level \&\& frame != \textcolor{keyword}{nullptr})\{}
\DoxyCodeLine{121 }
\DoxyCodeLine{122         \textcolor{comment}{// Print the frame}}
\DoxyCodeLine{123         \mbox{\hyperlink{kprint_8h_ad0dbdc0814f8a967875ad592df02a663}{\_kprintf}}(\textcolor{stringliteral}{"(\%d);\(\backslash\)t at 0x\%x\(\backslash\)n"}, current\_level, frame-\/>rip);}
\DoxyCodeLine{124 }
\DoxyCodeLine{125         \textcolor{comment}{// Next frame}}
\DoxyCodeLine{126         frame = frame -\/> \mbox{\hyperlink{virtual_8h_a20e8ff4d4c943d29eee7cfd80a5ff0f3}{next}};}
\DoxyCodeLine{127         current\_level++;}
\DoxyCodeLine{128 }
\DoxyCodeLine{129     \}}
\DoxyCodeLine{130 \}}

\end{DoxyCode}


References \+\_\+kprintf, and next.

\mbox{\Hypertarget{classMaxOS_1_1system_1_1CPU_ae37f29176f1bd55eb7401d1d34e7c69b}\label{classMaxOS_1_1system_1_1CPU_ae37f29176f1bd55eb7401d1d34e7c69b}} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!write\_msr@{write\_msr}}
\index{write\_msr@{write\_msr}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{write\_msr()}{write\_msr()}}
{\footnotesize\ttfamily void C\+P\+U\+::write\+\_\+msr (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{msr,  }\item[{uint64\+\_\+t}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 101 of file cpu.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{101                                                 \{}
\DoxyCodeLine{102 }
\DoxyCodeLine{103   \textcolor{comment}{// Write the MSR}}
\DoxyCodeLine{104   \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"wrmsr"} : : \textcolor{stringliteral}{"a"} ((uint32\_t) value), \textcolor{stringliteral}{"d"} ((uint32\_t) (value >> 32)), \textcolor{stringliteral}{"c"} (msr));}
\DoxyCodeLine{105 }
\DoxyCodeLine{106 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Max\+O\+S/\+Max\+O\+S/kernel/include/system/\mbox{\hyperlink{cpu_8h}{cpu.\+h}}\item 
/home/runner/work/\+Max\+O\+S/\+Max\+O\+S/kernel/src/system/\mbox{\hyperlink{cpu_8cpp}{cpu.\+cpp}}\end{DoxyCompactItemize}
