\doxysection{Max\+OS\+::system\+::CPU Class Reference}
\hypertarget{classMaxOS_1_1system_1_1CPU}{}\label{classMaxOS_1_1system_1_1CPU}\index{MaxOS::system::CPU@{MaxOS::system::CPU}}


Manages the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} and its cores.  




{\ttfamily \#include $<$cpu.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a204bdeba5377411c3d04a02fb19c6719}{CPU}} (\mbox{\hyperlink{classMaxOS_1_1system_1_1GlobalDescriptorTable}{Global\+Descriptor\+Table}} \texorpdfstring{$\ast$}{*}gdt, \mbox{\hyperlink{classMaxOS_1_1system_1_1Multiboot}{Multiboot}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{multiboot}})
\begin{DoxyCompactList}\small\item\em Constructor for the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} class. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a794ab2a2883fab58ce204299a3ec556f}{find\+\_\+cores}} ()
\begin{DoxyCompactList}\small\item\em Search the madt for cores and store them. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a599edada5a85faa0bcd689b8cff3f2ba}{init\+\_\+cores}} ()
\begin{DoxyCompactList}\small\item\em Wake up all the cores. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{static}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cpu\+\_\+status\+\_\+t}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_aa008d61f4821a2e69fa636965fd5911b}{prepare\+\_\+for\+\_\+panic}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cpu\+\_\+status\+\_\+t}} \texorpdfstring{$\ast$}{*}status=\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{nullptr}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}} \mbox{\hyperlink{string_8h_a4a6e5834af96b66d8015f5a24c09e1b3}{string}} \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}}="{}"{})
\begin{DoxyCompactList}\small\item\em Ensure the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} must panic and prepare for it if so. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{static}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a0d33c5755fcbfd08c75ae68f3d62577a}{PANIC}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{char}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{message}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cpu\+\_\+status\+\_\+t}} \texorpdfstring{$\ast$}{*}status=\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{nullptr}})
\begin{DoxyCompactList}\small\item\em Puts the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} into a panic state and halts it. Dumps the stack trace and registers. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{static}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a189729f4ca240ff52004a34b9057d448}{halt}} ()
\begin{DoxyCompactList}\small\item\em Halts the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} indefinitely. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{static}} \mbox{\hyperlink{classMaxOS_1_1system_1_1Core}{Core}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_adf91af6b880b57ae580a0a91ed4b71f7}{executing\+\_\+core}} ()
\begin{DoxyCompactList}\small\item\em Gets the core that is currently executing. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{static}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bool}} \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_afbbc3348fa73228ef924e54a5dffcd5e}{check\+\_\+nx}} ()
\begin{DoxyCompactList}\small\item\em Checks if the No Execute page flag is supported. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{static}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a2e9fe68995cb7e1e9943d7a3b3565c19}{get\+\_\+status}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cpu\+\_\+status\+\_\+t}} \texorpdfstring{$\ast$}{*}status)
\begin{DoxyCompactList}\small\item\em Gets the current \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} status into the provided structure. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{static}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_ab2744288c9f3b196502d4ae0f6b49b8b}{set\+\_\+status}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cpu\+\_\+status\+\_\+t}} \texorpdfstring{$\ast$}{*}status)
\begin{DoxyCompactList}\small\item\em Sets the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} registers from the provided structure. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{static}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a07c84fcc01f83f35d50295b7828a54c3}{print\+\_\+registers}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cpu\+\_\+status\+\_\+t}} \texorpdfstring{$\ast$}{*}status)
\begin{DoxyCompactList}\small\item\em Prints the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} registers from the provided structure. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{static}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_ac2eb28384db21eb3075768c17302fff4}{read\+\_\+msr}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msr}})
\begin{DoxyCompactList}\small\item\em Reads the value of the specified MSR. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{static}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_ae37f29176f1bd55eb7401d1d34e7c69b}{write\+\_\+msr}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msr}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{value}})
\begin{DoxyCompactList}\small\item\em Writes the specified value to the specified MSR. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{static}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a9ff943a994f211939c9f1a907e73b0e1}{cpuid}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{leaf}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{eax}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ebx}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ecx}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{edx}})
\begin{DoxyCompactList}\small\item\em Executes the CPUID instruction with the specified leaf and returns the results in the provided pointers. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{static}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bool}} \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a77b778d7ddb80332c33d4f2a14432230}{check\+\_\+cpu\+\_\+feature}} (\mbox{\hyperlink{cpu_8h_a955509bd4aa295b6038a6812bf689200}{CPU\+\_\+\+FEATURE\+\_\+\+ECX}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{feature}})
\begin{DoxyCompactList}\small\item\em Checks if a \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} feature is supported (ECX Register) \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{static}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bool}} \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_ae67ea55c8cb2583f4033f832f72a98fa}{check\+\_\+cpu\+\_\+feature}} (\mbox{\hyperlink{cpu_8h_aabd92958148e45d498450aaf57c8d6ab}{CPU\+\_\+\+FEATURE\+\_\+\+EDX}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{feature}})
\begin{DoxyCompactList}\small\item\em Checks if a \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} feature is supported (EDX Register) \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{static}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_ae67e18fdfbb6fcd51d0f2509c9c43ff2}{stack\+\_\+trace}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{size\+\_\+t}})
\begin{DoxyCompactList}\small\item\em Prints a stack trace up to the specified level. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1AdvancedConfigurationAndPowerInterface}{hardwarecommunication\+::\+Advanced\+Configuration\+And\+Power\+Interface}} \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a13d3b45c5ca62bf96e425e40ca113663}{acpi}}
\begin{DoxyCompactList}\small\item\em The ACPI interface for the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1AdvancedProgrammableInterruptController}{hardwarecommunication\+::\+Advanced\+Programmable\+Interrupt\+Controller}} \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a7fef57a79ba623497c26b04e34cfedf6}{apic}}
\begin{DoxyCompactList}\small\item\em The APIC interface for the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{classMaxOS_1_1system_1_1Core}{Core}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_ae48969a59a3ae850353360f366166ca8}{panic\+\_\+core}} = nullptr
\begin{DoxyCompactList}\small\item\em The core that triggered the panic. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{classMaxOS_1_1common_1_1Spinlock}{common\+::\+Spinlock}} \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_af7c9f38c5738cdaa2b57251577eea6d5}{panic\+\_\+lock}}
\begin{DoxyCompactList}\small\item\em Lock to prevent multiple panics at once. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{classMaxOS_1_1common_1_1Vector}{common\+::\+Vector}}$<$ \mbox{\hyperlink{classMaxOS_1_1system_1_1Core}{Core}} \texorpdfstring{$\ast$}{*} $>$ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_acbed3e383ef08559099051d9c7e9d57b}{cores}}
\begin{DoxyCompactList}\small\item\em The list of \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} cores in the system (populated during initialization, includes the BSP and cores that failed to start) \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Manages the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} and its cores. 

Definition at line \mbox{\hyperlink{cpu_8h_source_l00228}{228}} of file \mbox{\hyperlink{cpu_8h_source}{cpu.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classMaxOS_1_1system_1_1CPU_a204bdeba5377411c3d04a02fb19c6719}\label{classMaxOS_1_1system_1_1CPU_a204bdeba5377411c3d04a02fb19c6719} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!CPU@{CPU}}
\index{CPU@{CPU}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{CPU()}{CPU()}}
{\footnotesize\ttfamily CPU\+::\+CPU (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1system_1_1GlobalDescriptorTable}{Global\+Descriptor\+Table}} \texorpdfstring{$\ast$}{*}}]{gdt,  }\item[{\mbox{\hyperlink{classMaxOS_1_1system_1_1Multiboot}{Multiboot}} \texorpdfstring{$\ast$}{*}}]{multiboot }\end{DoxyParamCaption})}



Constructor for the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} class. 



Definition at line \mbox{\hyperlink{cpu_8cpp_source_l00249}{249}} of file \mbox{\hyperlink{cpu_8cpp_source}{cpu.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00250\ :\ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a13d3b45c5ca62bf96e425e40ca113663}{acpi}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{multiboot}}),}
\DoxyCodeLine{00251\ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a7fef57a79ba623497c26b04e34cfedf6}{apic}}(\&\mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a13d3b45c5ca62bf96e425e40ca113663}{acpi}})}
\DoxyCodeLine{00252\ \{}
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00254\ \ \ \ \ \mbox{\hyperlink{classLogger_a6fa276d92dbf0dd22dcab146f5c99da6}{Logger::INFO}}()\ <<\ \textcolor{stringliteral}{"{}Setting\ up\ CPU\ \(\backslash\)n"{}};}
\DoxyCodeLine{00255\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a794ab2a2883fab58ce204299a3ec556f}{find\_cores}}();}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00257\ \ \ \ \ \textcolor{comment}{//\ Manually\ set\ up\ the\ BSP}}
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bsp}}\ =\ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_acbed3e383ef08559099051d9c7e9d57b}{cores}}[0];}
\DoxyCodeLine{00259\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bsp}}\ -\/>\ m\_bsp\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00260\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bsp}}\ -\/>\ active\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00261\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bsp}}\ -\/>\ gdt\ =\ gdt;}
\DoxyCodeLine{00262\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bsp}}\ -\/>\ local\_apic\ =\ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a7fef57a79ba623497c26b04e34cfedf6}{apic}}.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1AdvancedProgrammableInterruptController_af632f7fe1f4a8d9716ec845628946eef}{local\_apic}}();}
\DoxyCodeLine{00263\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bsp}}\ -\/>\ init\_tss();}
\DoxyCodeLine{00264\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bsp}}\ -\/>\ init\_sse();}
\DoxyCodeLine{00265\ }
\DoxyCodeLine{00266\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{cpu_8h_source_l00236}{apic}}, \mbox{\hyperlink{cpu_8h_source_l00245}{cores}}, \mbox{\hyperlink{cpu_8cpp_source_l00524}{find\+\_\+cores()}}, \mbox{\hyperlink{logger_8cpp_source_l00167}{Logger\+::\+INFO()}}, and \mbox{\hyperlink{apic_8cpp_source_l00474}{Max\+OS\+::hardwarecommunication\+::\+Advanced\+Programmable\+Interrupt\+Controller\+::local\+\_\+apic()}}.



\doxysubsection{Member Function Documentation}
\Hypertarget{classMaxOS_1_1system_1_1CPU_a77b778d7ddb80332c33d4f2a14432230}\label{classMaxOS_1_1system_1_1CPU_a77b778d7ddb80332c33d4f2a14432230} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!check\_cpu\_feature@{check\_cpu\_feature}}
\index{check\_cpu\_feature@{check\_cpu\_feature}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{check\_cpu\_feature()}{check\_cpu\_feature()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bool}} CPU\+::check\+\_\+cpu\+\_\+feature (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{cpu_8h_a955509bd4aa295b6038a6812bf689200}{CPU\+\_\+\+FEATURE\+\_\+\+ECX}}}]{feature }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Checks if a \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} feature is supported (ECX Register) 


\begin{DoxyParams}{Parameters}
{\em feature} & The feature to check \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
If the feature is supported 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{cpu_8cpp_source_l00572}{572}} of file \mbox{\hyperlink{cpu_8cpp_source}{cpu.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00573\ }
\DoxyCodeLine{00574\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ CPUID}}
\DoxyCodeLine{00575\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{eax}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ebx}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ecx}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{edx}};}
\DoxyCodeLine{00576\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a9ff943a994f211939c9f1a907e73b0e1}{cpuid}}(0x1,\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{eax}},\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ebx}},\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ecx}},\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{edx}});}
\DoxyCodeLine{00577\ }
\DoxyCodeLine{00578\ \ \ \ \ \textcolor{comment}{//\ Check\ the\ feature}}
\DoxyCodeLine{00579\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ecx}}\ \&\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}})\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{feature}};}
\DoxyCodeLine{00580\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{cpu_8cpp_source_l00400}{cpuid()}}.



Referenced by \mbox{\hyperlink{cpu_8cpp_source_l00167}{Max\+OS\+::system\+::\+Core\+::init\+\_\+sse()}}.

\Hypertarget{classMaxOS_1_1system_1_1CPU_ae67ea55c8cb2583f4033f832f72a98fa}\label{classMaxOS_1_1system_1_1CPU_ae67ea55c8cb2583f4033f832f72a98fa} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!check\_cpu\_feature@{check\_cpu\_feature}}
\index{check\_cpu\_feature@{check\_cpu\_feature}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{check\_cpu\_feature()}{check\_cpu\_feature()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bool}} CPU\+::check\+\_\+cpu\+\_\+feature (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{cpu_8h_aabd92958148e45d498450aaf57c8d6ab}{CPU\+\_\+\+FEATURE\+\_\+\+EDX}}}]{feature }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Checks if a \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} feature is supported (EDX Register) 


\begin{DoxyParams}{Parameters}
{\em feature} & The feature to check \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if the feature is supported 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{cpu_8cpp_source_l00588}{588}} of file \mbox{\hyperlink{cpu_8cpp_source}{cpu.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00589\ }
\DoxyCodeLine{00590\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ CPUID}}
\DoxyCodeLine{00591\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{eax}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ebx}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ecx}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{edx}};}
\DoxyCodeLine{00592\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a9ff943a994f211939c9f1a907e73b0e1}{cpuid}}(0x1,\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{eax}},\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ebx}},\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ecx}},\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{edx}});}
\DoxyCodeLine{00593\ }
\DoxyCodeLine{00594\ \ \ \ \ \textcolor{comment}{//\ Check\ the\ feature}}
\DoxyCodeLine{00595\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{edx}}\ \&\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}})\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{feature}};}
\DoxyCodeLine{00596\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{cpu_8cpp_source_l00400}{cpuid()}}.

\Hypertarget{classMaxOS_1_1system_1_1CPU_afbbc3348fa73228ef924e54a5dffcd5e}\label{classMaxOS_1_1system_1_1CPU_afbbc3348fa73228ef924e54a5dffcd5e} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!check\_nx@{check\_nx}}
\index{check\_nx@{check\_nx}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{check\_nx()}{check\_nx()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bool}} CPU\+::check\+\_\+nx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Checks if the No Execute page flag is supported. 

\begin{DoxyReturn}{Returns}
True if the NX flag is supported 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{cpu_8cpp_source_l00602}{602}} of file \mbox{\hyperlink{cpu_8cpp_source}{cpu.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00602\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00603\ }
\DoxyCodeLine{00604\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ EFER\ MSR}}
\DoxyCodeLine{00605\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{efer}}\ =\ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_ac2eb28384db21eb3075768c17302fff4}{read\_msr}}(0xC0000080);}
\DoxyCodeLine{00606\ }
\DoxyCodeLine{00607\ \ \ \ \ \textcolor{comment}{//\ Check\ if\ the\ NX\ flag\ is\ supported\ (bit\ 11)}}
\DoxyCodeLine{00608\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{supported}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{efer}}\ \&\ (1\ <<\ 11);}
\DoxyCodeLine{00609\ \ \ \ \ \mbox{\hyperlink{classLogger_a1df434c9cd82457b6830c0500731a601}{Logger::DEBUG}}()\ <<\ \textcolor{stringliteral}{"{}NX:\ "{}}\ <<\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{supported}}\ ?\ \textcolor{stringliteral}{"{}Supported"{}}\ :\ \textcolor{stringliteral}{"{}Not\ Supported"{}})\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00610\ }
\DoxyCodeLine{00611\ \ \ \ \ \textcolor{comment}{//\ Return\ if\ the\ NX\ flag\ is\ supported}}
\DoxyCodeLine{00612\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{supported}};}
\DoxyCodeLine{00613\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{logger_8cpp_source_l00178}{Logger\+::\+DEBUG()}}, and \mbox{\hyperlink{cpu_8cpp_source_l00369}{read\+\_\+msr()}}.



Referenced by \mbox{\hyperlink{physical_8cpp_source_l00031}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::\+Physical\+Memory\+Manager()}}.

\Hypertarget{classMaxOS_1_1system_1_1CPU_a9ff943a994f211939c9f1a907e73b0e1}\label{classMaxOS_1_1system_1_1CPU_a9ff943a994f211939c9f1a907e73b0e1} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!cpuid@{cpuid}}
\index{cpuid@{cpuid}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{cpuid()}{cpuid()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} CPU\+::cpuid (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{leaf,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{eax,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{ebx,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{ecx,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{edx }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Executes the CPUID instruction with the specified leaf and returns the results in the provided pointers. 


\begin{DoxyParams}{Parameters}
{\em leaf} & The CPUID leaf to query \\
\hline
{\em eax} & The pointer to store the EAX result \\
\hline
{\em ebx} & The pointer to store the EBX result \\
\hline
{\em ecx} & The pointer to store the ECX result \\
\hline
{\em edx} & The pointer to store the EDX result \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{cpu_8cpp_source_l00400}{400}} of file \mbox{\hyperlink{cpu_8cpp_source}{cpu.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00401\ }
\DoxyCodeLine{00402\ \ \ \ \ \textcolor{comment}{//\ Call\ the\ cpuid\ instruction}}
\DoxyCodeLine{00403\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{\_\_get\_cpuid}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{leaf}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{eax}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ebx}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ecx}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{edx}});}
\DoxyCodeLine{00404\ \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{cpu_8cpp_source_l00572}{check\+\_\+cpu\+\_\+feature()}}, \mbox{\hyperlink{cpu_8cpp_source_l00588}{check\+\_\+cpu\+\_\+feature()}}, and \mbox{\hyperlink{cpu_8cpp_source_l00620}{executing\+\_\+core()}}.

\Hypertarget{classMaxOS_1_1system_1_1CPU_adf91af6b880b57ae580a0a91ed4b71f7}\label{classMaxOS_1_1system_1_1CPU_adf91af6b880b57ae580a0a91ed4b71f7} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!executing\_core@{executing\_core}}
\index{executing\_core@{executing\_core}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{executing\_core()}{executing\_core()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1system_1_1Core}{Core}} \texorpdfstring{$\ast$}{*} CPU\+::executing\+\_\+core (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Gets the core that is currently executing. 

\begin{DoxyReturn}{Returns}
The currently executing core 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{cpu_8cpp_source_l00620}{620}} of file \mbox{\hyperlink{cpu_8cpp_source}{cpu.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00620\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00621\ }
\DoxyCodeLine{00622\ \ \ \ \ \textcolor{comment}{//\ No\ cores?}}
\DoxyCodeLine{00623\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_acbed3e383ef08559099051d9c7e9d57b}{cores}}.empty())}
\DoxyCodeLine{00624\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00625\ }
\DoxyCodeLine{00626\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ id\ of\ this\ core}}
\DoxyCodeLine{00627\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{eax}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ebx}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ecx}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{edx}};}
\DoxyCodeLine{00628\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a9ff943a994f211939c9f1a907e73b0e1}{CPU::cpuid}}(1,\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{eax}},\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ebx}},\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ecx}},\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{edx}});}
\DoxyCodeLine{00629\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{core\_id}}\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{ebx}}\ >>\ 24)\ \&\ 0xFF;}
\DoxyCodeLine{00630\ }
\DoxyCodeLine{00631\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_acbed3e383ef08559099051d9c7e9d57b}{cores}}[\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{core\_id}}];}
\DoxyCodeLine{00632\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{cpu_8h_source_l00245}{cores}}, and \mbox{\hyperlink{cpu_8cpp_source_l00400}{cpuid()}}.



Referenced by \mbox{\hyperlink{kernel_8cpp_source_l00046}{core\+\_\+main()}}, \mbox{\hyperlink{scheduler_8cpp_source_l00346}{Max\+OS\+::processes\+::\+Global\+Scheduler\+::core\+\_\+scheduler()}}, \mbox{\hyperlink{interrupts_8cpp_source_l00277}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Manager\+::handle\+\_\+interrupt\+\_\+request()}}, \mbox{\hyperlink{cpu_8cpp_source_l00492}{prepare\+\_\+for\+\_\+panic()}}, \mbox{\hyperlink{scheduler_8cpp_source_l00165}{Max\+OS\+::processes\+::\+Global\+Scheduler\+::print\+\_\+running\+\_\+header()}}, \mbox{\hyperlink{process_8cpp_source_l00100}{Max\+OS\+::processes\+::\+Thread\+::restore\+\_\+sse\+\_\+state()}}, \mbox{\hyperlink{process_8cpp_source_l00087}{Max\+OS\+::processes\+::\+Thread\+::save\+\_\+sse\+\_\+state()}}, and \mbox{\hyperlink{process_8cpp_source_l00021}{Max\+OS\+::processes\+::\+Thread\+::\+Thread()}}.

\Hypertarget{classMaxOS_1_1system_1_1CPU_a794ab2a2883fab58ce204299a3ec556f}\label{classMaxOS_1_1system_1_1CPU_a794ab2a2883fab58ce204299a3ec556f} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!find\_cores@{find\_cores}}
\index{find\_cores@{find\_cores}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{find\_cores()}{find\_cores()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} CPU\+::find\+\_\+cores (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Search the madt for cores and store them. 

\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000077}{Todo}}]Support for x2apic \end{DoxyRefDesc}


Definition at line \mbox{\hyperlink{cpu_8cpp_source_l00524}{524}} of file \mbox{\hyperlink{cpu_8cpp_source}{cpu.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00525\ }
\DoxyCodeLine{00526\ \ \ \ \ \textcolor{comment}{//\ Now\ that\ memory\ is\ set\ up\ the\ vector\ can\ be\ used}}
\DoxyCodeLine{00527\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_acbed3e383ef08559099051d9c7e9d57b}{cores}}.reserve(1);}
\DoxyCodeLine{00528\ }
\DoxyCodeLine{00529\ \ \ \ \ \textcolor{comment}{//\ Search\ and\ setup\ each\ core}}
\DoxyCodeLine{00530\ \ \ \ \ \textcolor{keywordtype}{int}\ index\ =\ 0;}
\DoxyCodeLine{00531\ \ \ \ \ \textcolor{keywordflow}{while}\ (\textcolor{keyword}{true})\{}
\DoxyCodeLine{00532\ }
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Try\ to\ find\ a\ processor}}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1MADTEntry}{MADTEntry}}*\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{processor\_madt}}\ =\ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a7fef57a79ba623497c26b04e34cfedf6}{apic}}.\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1AdvancedProgrammableInterruptController_a466e10dea95ada62df527bf033a33deb}{io\_apic}}()-\/>\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_a755e766f9ea8a3d90b9d9ffa8c4bec3e}{get\_madt\_item}}(MADT\_TYPE::PROCESSOR\_APIC,\ index);}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{processor\_madt}})}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00537\ }
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Create\ a\ cpu}}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}*\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{processor\_apic}}\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{madt\_processor\_apic\_t}}*)\ ((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}})\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{processor\_madt}}\ +\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1MADTEntry}{MADTEntry}}));}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_acbed3e383ef08559099051d9c7e9d57b}{cores}}.push\_back(\textcolor{keyword}{new}\ \mbox{\hyperlink{classMaxOS_1_1system_1_1Core}{Core}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{processor\_apic}}));}
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ index++;}
\DoxyCodeLine{00542\ \ \ \ \ \}}
\DoxyCodeLine{00543\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{cpu_8h_source_l00236}{apic}}, \mbox{\hyperlink{cpu_8h_source_l00245}{cores}}, \mbox{\hyperlink{apic_8cpp_source_l00258}{Max\+OS\+::hardwarecommunication\+::\+IOAPIC\+::get\+\_\+madt\+\_\+item()}}, and \mbox{\hyperlink{apic_8cpp_source_l00484}{Max\+OS\+::hardwarecommunication\+::\+Advanced\+Programmable\+Interrupt\+Controller\+::io\+\_\+apic()}}.



Referenced by \mbox{\hyperlink{cpu_8cpp_source_l00249}{CPU()}}.

\Hypertarget{classMaxOS_1_1system_1_1CPU_a2e9fe68995cb7e1e9943d7a3b3565c19}\label{classMaxOS_1_1system_1_1CPU_a2e9fe68995cb7e1e9943d7a3b3565c19} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!get\_status@{get\_status}}
\index{get\_status@{get\_status}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{get\_status()}{get\_status()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} CPU\+::get\+\_\+status (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cpu\+\_\+status\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{status }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Gets the current \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} status into the provided structure. 


\begin{DoxyParams}{Parameters}
{\em status} & The structure to fill with the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} status \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{cpu_8cpp_source_l00284}{284}} of file \mbox{\hyperlink{cpu_8cpp_source}{cpu.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00286\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ registers}}
\DoxyCodeLine{00287\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%\%r15,\ \%0"{}}\ :\ \textcolor{stringliteral}{"{}=r"{}}\ (status-\/>r15));}
\DoxyCodeLine{00288\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%\%r14,\ \%0"{}}\ :\ \textcolor{stringliteral}{"{}=r"{}}\ (status-\/>r14));}
\DoxyCodeLine{00289\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%\%r13,\ \%0"{}}\ :\ \textcolor{stringliteral}{"{}=r"{}}\ (status-\/>r13));}
\DoxyCodeLine{00290\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%\%r12,\ \%0"{}}\ :\ \textcolor{stringliteral}{"{}=r"{}}\ (status-\/>r12));}
\DoxyCodeLine{00291\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%\%r11,\ \%0"{}}\ :\ \textcolor{stringliteral}{"{}=r"{}}\ (status-\/>r11));}
\DoxyCodeLine{00292\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%\%r10,\ \%0"{}}\ :\ \textcolor{stringliteral}{"{}=r"{}}\ (status-\/>r10));}
\DoxyCodeLine{00293\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%\%r9,\ \%0"{}}\ \ :\ \textcolor{stringliteral}{"{}=r"{}}\ (status-\/>r9));}
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%\%r8,\ \%0"{}}\ \ :\ \textcolor{stringliteral}{"{}=r"{}}\ (status-\/>r8));}
\DoxyCodeLine{00295\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%\%rdi,\ \%0"{}}\ :\ \textcolor{stringliteral}{"{}=r"{}}\ (status-\/>rdi));}
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%\%rsi,\ \%0"{}}\ :\ \textcolor{stringliteral}{"{}=r"{}}\ (status-\/>rsi));}
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%\%rbp,\ \%0"{}}\ :\ \textcolor{stringliteral}{"{}=r"{}}\ (status-\/>rbp));}
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%\%rdx,\ \%0"{}}\ :\ \textcolor{stringliteral}{"{}=r"{}}\ (status-\/>rdx));}
\DoxyCodeLine{00299\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%\%rcx,\ \%0"{}}\ :\ \textcolor{stringliteral}{"{}=r"{}}\ (status-\/>rcx));}
\DoxyCodeLine{00300\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%\%rbx,\ \%0"{}}\ :\ \textcolor{stringliteral}{"{}=r"{}}\ (status-\/>rbx));}
\DoxyCodeLine{00301\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%\%rax,\ \%0"{}}\ :\ \textcolor{stringliteral}{"{}=r"{}}\ (status-\/>rax));}
\DoxyCodeLine{00302\ \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{cpu_8cpp_source_l00436}{PANIC()}}.

\Hypertarget{classMaxOS_1_1system_1_1CPU_a189729f4ca240ff52004a34b9057d448}\label{classMaxOS_1_1system_1_1CPU_a189729f4ca240ff52004a34b9057d448} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!halt@{halt}}
\index{halt@{halt}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{halt()}{halt()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} CPU\+::halt (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Halts the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} indefinitely. 



Definition at line \mbox{\hyperlink{cpu_8cpp_source_l00273}{273}} of file \mbox{\hyperlink{cpu_8cpp_source}{cpu.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00274\ }
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keywordflow}{while}\ (\textcolor{keyword}{true})}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}hlt"{}});}
\DoxyCodeLine{00277\ \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{cpu_8cpp_source_l00436}{PANIC()}}.

\Hypertarget{classMaxOS_1_1system_1_1CPU_a599edada5a85faa0bcd689b8cff3f2ba}\label{classMaxOS_1_1system_1_1CPU_a599edada5a85faa0bcd689b8cff3f2ba} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!init\_cores@{init\_cores}}
\index{init\_cores@{init\_cores}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{init\_cores()}{init\_cores()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} CPU\+::init\+\_\+cores (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Wake up all the cores. 



Definition at line \mbox{\hyperlink{cpu_8cpp_source_l00548}{548}} of file \mbox{\hyperlink{cpu_8cpp_source}{cpu.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00549\ }
\DoxyCodeLine{00550\ \ \ \ \ \mbox{\hyperlink{classLogger_a6fa276d92dbf0dd22dcab146f5c99da6}{Logger::INFO}}()\ <<\ \textcolor{stringliteral}{"{}Waking\ up\ cores:\ \(\backslash\)n"{}};}
\DoxyCodeLine{00551\ }
\DoxyCodeLine{00552\ \ \ \ \ \textcolor{comment}{//\ Make\ sure\ core\_start\ is\ accessible}}
\DoxyCodeLine{00553\ \ \ \ \ \mbox{\hyperlink{logger_8h_adf7b5d69e4c25995b3211b91b27f33b6}{ASSERT}}((\textcolor{keywordtype}{void}*)\&core\_start\ ==\ (\textcolor{keywordtype}{void}*)0x8000,\ \textcolor{stringliteral}{"{}Core\ start\ not\ at\ expected\ address"{}});}
\DoxyCodeLine{00554\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1memory_1_1PhysicalMemoryManager_aac616421554f724ac8810d5bff76c3f1}{PhysicalMemoryManager::s\_current\_manager}}-\/>identity\_map((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{physical\_address\_t}}*)0x8000,\ PRESENT\ |\ WRITE);}
\DoxyCodeLine{00555\ }
\DoxyCodeLine{00556\ \ \ \ \ \textcolor{comment}{//\ Set\ up\ the\ boot\ info}}
\DoxyCodeLine{00557\ \ \ \ \ \textcolor{keyword}{auto}\ info\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{core\_boot\_info\_t}}*)(\mbox{\hyperlink{kernel_8cpp_a32bfa49e87f9c5c8e4b07eb74f8fcca9}{core\_boot\_info}});}
\DoxyCodeLine{00558\ \ \ \ \ info-\/>p4\_table\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}})\mbox{\hyperlink{classMaxOS_1_1memory_1_1PhysicalMemoryManager_a92723ea076c394a848f7f95bca9a86b6}{PhysicalMemoryManager::to\_lower\_region}}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uintptr\_t}})\mbox{\hyperlink{cpu_8h_a9fc1d0f743f4314f0b9083fa0b755e07}{p4\_table}});}
\DoxyCodeLine{00559\ }
\DoxyCodeLine{00560\ \ \ \ \ \textcolor{comment}{//\ Start\ each\ core}}
\DoxyCodeLine{00561\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{core}}\ :\ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_acbed3e383ef08559099051d9c7e9d57b}{cores}})}
\DoxyCodeLine{00562\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{core}}-\/>wake\_up(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{this}});}
\DoxyCodeLine{00563\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{logger_8h_source_l00095}{ASSERT}}, \mbox{\hyperlink{kernel_8cpp_source_l00041}{core\+\_\+boot\+\_\+info}}, \mbox{\hyperlink{cpu_8h_source_l00245}{cores}}, \mbox{\hyperlink{logger_8cpp_source_l00167}{Logger\+::\+INFO()}}, \mbox{\hyperlink{cpu_8h_source_l00001}{p4\+\_\+table}}, \mbox{\hyperlink{physical_8h_source_l00042}{Max\+OS\+::memory\+::\+PRESENT}}, \mbox{\hyperlink{physical_8h_source_l00175}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::s\+\_\+current\+\_\+manager}}, \mbox{\hyperlink{physical_8cpp_source_l00877}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::to\+\_\+lower\+\_\+region()}}, and \mbox{\hyperlink{physical_8h_source_l00043}{Max\+OS\+::memory\+::\+WRITE}}.

\Hypertarget{classMaxOS_1_1system_1_1CPU_a0d33c5755fcbfd08c75ae68f3d62577a}\label{classMaxOS_1_1system_1_1CPU_a0d33c5755fcbfd08c75ae68f3d62577a} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!PANIC@{PANIC}}
\index{PANIC@{PANIC}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{PANIC()}{PANIC()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} CPU\+::\+PANIC (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{char}} \texorpdfstring{$\ast$}{*}}]{message,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cpu\+\_\+status\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{status = {\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{nullptr}}} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Puts the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} into a panic state and halts it. Dumps the stack trace and registers. 


\begin{DoxyParams}{Parameters}
{\em message} & The panic message \\
\hline
{\em status} & The \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} status at the time of the panic (if available, otherwise will be fetched) \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{cpu_8cpp_source_l00436}{436}} of file \mbox{\hyperlink{cpu_8cpp_source}{cpu.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00437\ }
\DoxyCodeLine{00438\ \ \ \ \ \textcolor{comment}{//\ Ensure\ ready\ to\ panic\ \ -\/\ At\ this\ point\ it\ is\ not\ an\ issue\ if\ it\ is\ possible\ can\ avoid\ the\ panic\ as\ it\ is\ most}}
\DoxyCodeLine{00439\ \ \ \ \ \textcolor{comment}{//\ likely\ called\ by\ a\ place\ that\ cant\ switch\ to\ the\ avoidable\ state}}
\DoxyCodeLine{00440\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_aa008d61f4821a2e69fa636965fd5911b}{prepare\_for\_panic}}();}
\DoxyCodeLine{00441\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_af7c9f38c5738cdaa2b57251577eea6d5}{panic\_lock}}.lock();}
\DoxyCodeLine{00442\ }
\DoxyCodeLine{00443\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ current\ process}}
\DoxyCodeLine{00444\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1processes_1_1Process}{Process}}*\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{process}}\ =\ \mbox{\hyperlink{classMaxOS_1_1processes_1_1GlobalScheduler_aa070d442d88c4e6adee1c57772c5be34}{GlobalScheduler::current\_process}}();}
\DoxyCodeLine{00445\ }
\DoxyCodeLine{00446\ \ \ \ \ \textcolor{comment}{//\ Print\ using\ the\ backend}}
\DoxyCodeLine{00447\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/\(\backslash\)n"{}};}
\DoxyCodeLine{00448\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}Kernel\ Panic:\ "{}}\ <<\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{message}}\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00449\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}On\ Core:\ "{}}\ <<\ (\mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_ae48969a59a3ae850353360f366166ca8}{panic\_core}}\ ?\ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_ae48969a59a3ae850353360f366166ca8}{panic\_core}}-\/>id\ :\ 0)\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00450\ }
\DoxyCodeLine{00451\ \ \ \ \ \textcolor{comment}{//\ Info\ about\ the\ running\ process}}
\DoxyCodeLine{00452\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}Process:\ "{}}\ <<\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{process}}\ ?\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{process}}-\/>name.c\_str()\ :\ \textcolor{stringliteral}{"{}Kernel"{}})\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00453\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{process}})}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}After\ running\ for\ "{}}\ <<\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{process}}-\/>total\_ticks()\ <<\ \textcolor{stringliteral}{"{}\ ticks\ (system\ uptime:\ "{}}\ <<\ \mbox{\hyperlink{classMaxOS_1_1processes_1_1GlobalScheduler_a0eb017023c57324c9f92bce011aaf3c9}{GlobalScheduler::core\_scheduler}}()-\/>ticks()\ <<\ \textcolor{stringliteral}{"{}\ ticks)\(\backslash\)n"{}};}
\DoxyCodeLine{00455\ }
\DoxyCodeLine{00456\ \ \ \ \ \textcolor{comment}{//\ Stack\ trace}}
\DoxyCodeLine{00457\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n"{}};}
\DoxyCodeLine{00458\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}Stack\ Trace:\(\backslash\)n"{}};}
\DoxyCodeLine{00459\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_ae67e18fdfbb6fcd51d0f2509c9c43ff2}{stack\_trace}}(10);}
\DoxyCodeLine{00460\ }
\DoxyCodeLine{00461\ \ \ \ \ \textcolor{comment}{//\ Register\ dump}}
\DoxyCodeLine{00462\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n"{}};}
\DoxyCodeLine{00463\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}Register\ Dump:\(\backslash\)n"{}};}
\DoxyCodeLine{00464\ }
\DoxyCodeLine{00465\ \ \ \ \ \textcolor{comment}{//\ Log\ the\ regs}}
\DoxyCodeLine{00466\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cpu\_status\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{new\_status}}\{\};}
\DoxyCodeLine{00467\ \ \ \ \ \textcolor{keywordflow}{if}\ (!status)\ \{}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a2e9fe68995cb7e1e9943d7a3b3565c19}{get\_status}}(\&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{new\_status}});}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ status\ =\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{new\_status}};}
\DoxyCodeLine{00470\ \ \ \ \ \}}
\DoxyCodeLine{00471\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a07c84fcc01f83f35d50295b7828a54c3}{print\_registers}}(status);}
\DoxyCodeLine{00472\ }
\DoxyCodeLine{00473\ \ \ \ \ \textcolor{comment}{//\ Print\ some\ text\ to\ the\ user}}
\DoxyCodeLine{00474\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n"{}};}
\DoxyCodeLine{00475\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}There\ has\ been\ a\ fatal\ error\ in\ MaxOS\ and\ the\ system\ has\ been\ halted.\(\backslash\)n"{}};}
\DoxyCodeLine{00476\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}Please\ restart\ the\ system.\(\backslash\)n"{}};}
\DoxyCodeLine{00477\ }
\DoxyCodeLine{00478\ \ \ \ \ \textcolor{comment}{//\ Print\ the\ logo}}
\DoxyCodeLine{00479\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n"{}};}
\DoxyCodeLine{00480\ }
\DoxyCodeLine{00481\ \ \ \ \ \textcolor{comment}{//\ Halt}}
\DoxyCodeLine{00482\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a189729f4ca240ff52004a34b9057d448}{halt}}();}
\DoxyCodeLine{00483\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{scheduler_8cpp_source_l00346}{Max\+OS\+::processes\+::\+Global\+Scheduler\+::core\+\_\+scheduler()}}, \mbox{\hyperlink{scheduler_8cpp_source_l00277}{Max\+OS\+::processes\+::\+Global\+Scheduler\+::current\+\_\+process()}}, \mbox{\hyperlink{logger_8cpp_source_l00201}{Logger\+::\+ERROR()}}, \mbox{\hyperlink{cpu_8cpp_source_l00284}{get\+\_\+status()}}, \mbox{\hyperlink{cpu_8cpp_source_l00273}{halt()}}, \mbox{\hyperlink{cpu_8h_source_l00238}{panic\+\_\+core}}, \mbox{\hyperlink{cpu_8h_source_l00239}{panic\+\_\+lock}}, \mbox{\hyperlink{cpu_8cpp_source_l00492}{prepare\+\_\+for\+\_\+panic()}}, \mbox{\hyperlink{cpu_8cpp_source_l00335}{print\+\_\+registers()}}, and \mbox{\hyperlink{cpu_8cpp_source_l00411}{stack\+\_\+trace()}}.



Referenced by \mbox{\hyperlink{logger_8cpp_source_l00238}{Logger\+::\+ASSERT()}}, and \mbox{\hyperlink{interrupts_8cpp_source_l00226}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Manager\+::\+Handle\+Interrupt()}}.

\Hypertarget{classMaxOS_1_1system_1_1CPU_aa008d61f4821a2e69fa636965fd5911b}\label{classMaxOS_1_1system_1_1CPU_aa008d61f4821a2e69fa636965fd5911b} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!prepare\_for\_panic@{prepare\_for\_panic}}
\index{prepare\_for\_panic@{prepare\_for\_panic}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{prepare\_for\_panic()}{prepare\_for\_panic()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cpu\+\_\+status\+\_\+t}} \texorpdfstring{$\ast$}{*} CPU\+::prepare\+\_\+for\+\_\+panic (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cpu\+\_\+status\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{status = {\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{nullptr}}},  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}} \mbox{\hyperlink{string_8h_a4a6e5834af96b66d8015f5a24c09e1b3}{string}} \&}]{msg = {\ttfamily "{}"{}} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Ensure the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} must panic and prepare for it if so. 


\begin{DoxyParams}{Parameters}
{\em status} & The status of the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} (if available) \\
\hline
{\em msg} & The message to print to diagnose the cause of the panic (prints when close program) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} status to avoid having to panic or a nullptr if the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} must panic 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{cpu_8cpp_source_l00492}{492}} of file \mbox{\hyperlink{cpu_8cpp_source}{cpu.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00493\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_af7c9f38c5738cdaa2b57251577eea6d5}{panic\_lock}}.lock();}
\DoxyCodeLine{00494\ }
\DoxyCodeLine{00495\ \ \ \ \ \textcolor{comment}{//\ If\ it\ may\ have\ occurred\ in\ a\ process,\ switch\ to\ the\ avoidable\ state}}
\DoxyCodeLine{00496\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1processes_1_1GlobalScheduler_a92932d6664340c61e8174c93168d7932}{GlobalScheduler::system\_scheduler}}()\ !=\ \textcolor{keyword}{nullptr}\ \&\&\ \mbox{\hyperlink{classMaxOS_1_1processes_1_1GlobalScheduler_aa070d442d88c4e6adee1c57772c5be34}{GlobalScheduler::current\_process}}()\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00497\ }
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ the\ current\ process}}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1processes_1_1Process}{Process}}*\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{process}}\ =\ \mbox{\hyperlink{classMaxOS_1_1processes_1_1GlobalScheduler_aa070d442d88c4e6adee1c57772c5be34}{GlobalScheduler::current\_process}}();}
\DoxyCodeLine{00500\ }
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ the\ faulting\ address\ is\ in\ lower\ half\ just\ kill\ the\ process\ and\ move\ on}}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (status\ \&\&\ !\mbox{\hyperlink{classMaxOS_1_1memory_1_1PhysicalMemoryManager_ad7a8f72845dfb8fce31dab5639835d2e}{memory::PhysicalMemoryManager::in\_higher\_region}}(status-\/>rip))\ \{}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}CPU\ Panicked\ (i\ "{}}\ <<\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{int}})status-\/>interrupt\_number\ <<\ \textcolor{stringliteral}{"{})\ in\ process\ "{}}\ <<\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{process}}-\/>name.c\_str()\ <<\ \textcolor{stringliteral}{"{}\ at\ 0x"{}}\ <<\ status-\/>rip\ <<\ \textcolor{stringliteral}{"{}\ -\/\ killing\ process\(\backslash\)n"{}};}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msg}};}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_af7c9f38c5738cdaa2b57251577eea6d5}{panic\_lock}}.unlock();}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMaxOS_1_1processes_1_1GlobalScheduler_a92932d6664340c61e8174c93168d7932}{GlobalScheduler::system\_scheduler}}()-\/>force\_remove\_process(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{process}});}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00508\ }
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Otherwise\ occurred\ whilst\ the\ kernel\ was\ doing\ something\ for\ the\ process}}
\DoxyCodeLine{00510\ \ \ \ \ \}}
\DoxyCodeLine{00511\ }
\DoxyCodeLine{00512\ \ \ \ \ \textcolor{comment}{//\ We\ are\ panicking}}
\DoxyCodeLine{00513\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_ae48969a59a3ae850353360f366166ca8}{panic\_core}}\ =\ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_adf91af6b880b57ae580a0a91ed4b71f7}{executing\_core}}();}
\DoxyCodeLine{00514\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1console_1_1VESABootConsole_ac6633b03d30c0914c4a53262019ab6b0}{console::VESABootConsole::print\_logo}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00515\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_af7c9f38c5738cdaa2b57251577eea6d5}{panic\_lock}}.unlock();}
\DoxyCodeLine{00516\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00517\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{scheduler_8cpp_source_l00277}{Max\+OS\+::processes\+::\+Global\+Scheduler\+::current\+\_\+process()}}, \mbox{\hyperlink{logger_8cpp_source_l00201}{Logger\+::\+ERROR()}}, \mbox{\hyperlink{cpu_8cpp_source_l00620}{executing\+\_\+core()}}, \mbox{\hyperlink{physical_8cpp_source_l00939}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::in\+\_\+higher\+\_\+region()}}, \mbox{\hyperlink{cpu_8h_source_l00238}{panic\+\_\+core}}, \mbox{\hyperlink{cpu_8h_source_l00239}{panic\+\_\+lock}}, \mbox{\hyperlink{vesaboot_8cpp_source_l00249}{Max\+OS\+::drivers\+::console\+::\+VESABoot\+Console\+::print\+\_\+logo()}}, and \mbox{\hyperlink{scheduler_8cpp_source_l00050}{Max\+OS\+::processes\+::\+Global\+Scheduler\+::system\+\_\+scheduler()}}.



Referenced by \mbox{\hyperlink{cpu_8cpp_source_l00436}{PANIC()}}.

\Hypertarget{classMaxOS_1_1system_1_1CPU_a07c84fcc01f83f35d50295b7828a54c3}\label{classMaxOS_1_1system_1_1CPU_a07c84fcc01f83f35d50295b7828a54c3} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!print\_registers@{print\_registers}}
\index{print\_registers@{print\_registers}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{print\_registers()}{print\_registers()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} CPU\+::print\+\_\+registers (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cpu\+\_\+status\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{status }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Prints the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} registers from the provided structure. 


\begin{DoxyParams}{Parameters}
{\em status} & The structure containing the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} status \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{cpu_8cpp_source_l00335}{335}} of file \mbox{\hyperlink{cpu_8cpp_source}{cpu.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00336\ }
\DoxyCodeLine{00337\ \ \ \ \ \textcolor{comment}{//\ Print\ the\ registers}}
\DoxyCodeLine{00338\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}R15:\ \(\backslash\)t0x"{}}\ <<\ status-\/>r15\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00339\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}R14:\ \(\backslash\)t0x"{}}\ <<\ status-\/>r14\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00340\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}R13:\ \(\backslash\)t0x"{}}\ <<\ status-\/>r13\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00341\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}R12:\ \(\backslash\)t0x"{}}\ <<\ status-\/>r12\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00342\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}R11:\ \(\backslash\)t0x"{}}\ <<\ status-\/>r11\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00343\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}R10:\ \(\backslash\)t0x"{}}\ <<\ status-\/>r10\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00344\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}R9:\ \(\backslash\)t0x"{}}\ <<\ status-\/>r9\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00345\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}R8:\ \(\backslash\)t0x"{}}\ <<\ status-\/>r8\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00346\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}RDI:\ \(\backslash\)t0x"{}}\ <<\ status-\/>rdi\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00347\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}RSI:\ \(\backslash\)t0x"{}}\ <<\ status-\/>rsi\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00348\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}RBP:\ \(\backslash\)t0x"{}}\ <<\ status-\/>rbp\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00349\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}RDX:\ \(\backslash\)t0x"{}}\ <<\ status-\/>rdx\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00350\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}RCX:\ \(\backslash\)t0x"{}}\ <<\ status-\/>rcx\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00351\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}RBX:\ \(\backslash\)t0x"{}}\ <<\ status-\/>rbx\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00352\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}RAX:\ \(\backslash\)t0x"{}}\ <<\ status-\/>rax\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00353\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}INT:\ \(\backslash\)t0x"{}}\ <<\ status-\/>interrupt\_number\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00354\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}ERRCD:\ \(\backslash\)t0x"{}}\ <<\ status-\/>error\_code\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00355\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}RIP:\ \(\backslash\)t0x"{}}\ <<\ status-\/>rip\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00356\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}CS:\ \(\backslash\)t0x"{}}\ <<\ status-\/>cs\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00357\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}RFlGS:\ \(\backslash\)t0x"{}}\ <<\ status-\/>rflags\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00358\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}RSP:\ \(\backslash\)t0x"{}}\ <<\ status-\/>rsp\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00359\ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}SS:\ \(\backslash\)t0x"{}}\ <<\ status-\/>ss\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00360\ }
\DoxyCodeLine{00361\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{logger_8cpp_source_l00201}{Logger\+::\+ERROR()}}.



Referenced by \mbox{\hyperlink{cpu_8cpp_source_l00436}{PANIC()}}.

\Hypertarget{classMaxOS_1_1system_1_1CPU_ac2eb28384db21eb3075768c17302fff4}\label{classMaxOS_1_1system_1_1CPU_ac2eb28384db21eb3075768c17302fff4} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!read\_msr@{read\_msr}}
\index{read\_msr@{read\_msr}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{read\_msr()}{read\_msr()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\+\_\+t}} CPU\+::read\+\_\+msr (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{msr }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Reads the value of the specified MSR. 


\begin{DoxyParams}{Parameters}
{\em msr} & The MSR to read \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The value of the MSR 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{cpu_8cpp_source_l00369}{369}} of file \mbox{\hyperlink{cpu_8cpp_source}{cpu.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \ \ \ \ \textcolor{comment}{//\ Read\ the\ MSR}}
\DoxyCodeLine{00372\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{low}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{high}};}
\DoxyCodeLine{00373\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}rdmsr"{}}\ :\ \textcolor{stringliteral}{"{}=a"{}}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{low}}),\ \textcolor{stringliteral}{"{}=d"{}}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{high}})\ :\ \textcolor{stringliteral}{"{}c"{}}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msr}}));}
\DoxyCodeLine{00374\ }
\DoxyCodeLine{00375\ \ \ \ \ \textcolor{comment}{//\ Return\ the\ value}}
\DoxyCodeLine{00376\ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}})\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{low}}\ |\ ((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\_t}})\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{high}}\ <<\ 32);}
\DoxyCodeLine{00377\ \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{cpu_8cpp_source_l00602}{check\+\_\+nx()}}, and \mbox{\hyperlink{apic_8cpp_source_l00073}{Max\+OS\+::hardwarecommunication\+::\+Local\+APIC\+::read()}}.

\Hypertarget{classMaxOS_1_1system_1_1CPU_ab2744288c9f3b196502d4ae0f6b49b8b}\label{classMaxOS_1_1system_1_1CPU_ab2744288c9f3b196502d4ae0f6b49b8b} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!set\_status@{set\_status}}
\index{set\_status@{set\_status}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{set\_status()}{set\_status()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} CPU\+::set\+\_\+status (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cpu\+\_\+status\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{status }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Sets the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} registers from the provided structure. 


\begin{DoxyParams}{Parameters}
{\em status} & The structure containing the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} status \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{cpu_8cpp_source_l00309}{309}} of file \mbox{\hyperlink{cpu_8cpp_source}{cpu.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00310\ }
\DoxyCodeLine{00311\ \ \ \ \ \textcolor{comment}{//\ Set\ the\ registers}}
\DoxyCodeLine{00312\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%0,\ \%\%r15"{}}\ :\ :\ \textcolor{stringliteral}{"{}r"{}}\ (status-\/>r15));}
\DoxyCodeLine{00313\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%0,\ \%\%r14"{}}\ :\ :\ \textcolor{stringliteral}{"{}r"{}}\ (status-\/>r14));}
\DoxyCodeLine{00314\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%0,\ \%\%r13"{}}\ :\ :\ \textcolor{stringliteral}{"{}r"{}}\ (status-\/>r13));}
\DoxyCodeLine{00315\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%0,\ \%\%r12"{}}\ :\ :\ \textcolor{stringliteral}{"{}r"{}}\ (status-\/>r12));}
\DoxyCodeLine{00316\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%0,\ \%\%r11"{}}\ :\ :\ \textcolor{stringliteral}{"{}r"{}}\ (status-\/>r11));}
\DoxyCodeLine{00317\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%0,\ \%\%r10"{}}\ :\ :\ \textcolor{stringliteral}{"{}r"{}}\ (status-\/>r10));}
\DoxyCodeLine{00318\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%0,\ \%\%r9"{}}\ \ :\ :\ \textcolor{stringliteral}{"{}r"{}}\ (status-\/>r9));}
\DoxyCodeLine{00319\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%0,\ \%\%r8"{}}\ \ :\ :\ \textcolor{stringliteral}{"{}r"{}}\ (status-\/>r8));}
\DoxyCodeLine{00320\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%0,\ \%\%rdi"{}}\ :\ :\ \textcolor{stringliteral}{"{}r"{}}\ (status-\/>rdi));}
\DoxyCodeLine{00321\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%0,\ \%\%rsi"{}}\ :\ :\ \textcolor{stringliteral}{"{}r"{}}\ (status-\/>rsi));}
\DoxyCodeLine{00322\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%0,\ \%\%rbp"{}}\ :\ :\ \textcolor{stringliteral}{"{}r"{}}\ (status-\/>rbp));}
\DoxyCodeLine{00323\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%0,\ \%\%rdx"{}}\ :\ :\ \textcolor{stringliteral}{"{}r"{}}\ (status-\/>rdx));}
\DoxyCodeLine{00324\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%0,\ \%\%rcx"{}}\ :\ :\ \textcolor{stringliteral}{"{}r"{}}\ (status-\/>rcx));}
\DoxyCodeLine{00325\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%0,\ \%\%rbx"{}}\ :\ :\ \textcolor{stringliteral}{"{}r"{}}\ (status-\/>rbx));}
\DoxyCodeLine{00326\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mov\ \%0,\ \%\%rax"{}}\ :\ :\ \textcolor{stringliteral}{"{}r"{}}\ (status-\/>rax));}
\DoxyCodeLine{00327\ }
\DoxyCodeLine{00328\ \}}

\end{DoxyCode}
\Hypertarget{classMaxOS_1_1system_1_1CPU_ae67e18fdfbb6fcd51d0f2509c9c43ff2}\label{classMaxOS_1_1system_1_1CPU_ae67e18fdfbb6fcd51d0f2509c9c43ff2} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!stack\_trace@{stack\_trace}}
\index{stack\_trace@{stack\_trace}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{stack\_trace()}{stack\_trace()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} CPU\+::stack\+\_\+trace (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{size\+\_\+t}}}]{level }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Prints a stack trace up to the specified level. 


\begin{DoxyParams}{Parameters}
{\em level} & The number of stack frames to print \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{cpu_8cpp_source_l00411}{411}} of file \mbox{\hyperlink{cpu_8cpp_source}{cpu.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00413\ \ \ \ \ \textcolor{keyword}{auto}*\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{frame}}\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{stack\_frame\_t}}*)\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{\_\_builtin\_frame\_address}}(0);}
\DoxyCodeLine{00414\ }
\DoxyCodeLine{00415\ \ \ \ \ \textcolor{comment}{//\ Loop\ through\ the\ frames\ logging}}
\DoxyCodeLine{00416\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{current\_level}}\ =\ 0;\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{current\_level}}\ <\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{level}};\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{current\_level}}++)\ \{}
\DoxyCodeLine{00417\ }
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Print\ the\ frame}}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ function\ =\ \mbox{\hyperlink{symbols_8cpp_a4bfba91a61cfa3c1878b5c9861bbf05c}{resolve\_symbol}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{frame}}-\/>rip);}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}("{}}\ <<\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{current\_level}}\ <<\ \textcolor{stringliteral}{"{}):\ "{}}\ <<\ (function\ ?\ function\ :\ \textcolor{stringliteral}{"{}Unknown()"{}})\ \ <<\ \textcolor{stringliteral}{"{}\ at\ 0x"{}}\ <<\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{frame}}-\/>rip\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00421\ }
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Next\ frame}}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{frame}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{frame}}-\/>next;}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{frame}}\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00426\ }
\DoxyCodeLine{00427\ \ \ \ \ \}}
\DoxyCodeLine{00428\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{logger_8cpp_source_l00201}{Logger\+::\+ERROR()}}, and \mbox{\hyperlink{symbols_8cpp_source_l00024}{Max\+OS\+::common\+::resolve\+\_\+symbol()}}.



Referenced by \mbox{\hyperlink{cpu_8cpp_source_l00436}{PANIC()}}.

\Hypertarget{classMaxOS_1_1system_1_1CPU_ae37f29176f1bd55eb7401d1d34e7c69b}\label{classMaxOS_1_1system_1_1CPU_ae37f29176f1bd55eb7401d1d34e7c69b} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!write\_msr@{write\_msr}}
\index{write\_msr@{write\_msr}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{write\_msr()}{write\_msr()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} CPU\+::write\+\_\+msr (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{msr,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint64\+\_\+t}}}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Writes the specified value to the specified MSR. 


\begin{DoxyParams}{Parameters}
{\em msr} & The MSR to write to \\
\hline
{\em value} & The value to write \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{cpu_8cpp_source_l00385}{385}} of file \mbox{\hyperlink{cpu_8cpp_source}{cpu.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00386\ }
\DoxyCodeLine{00387\ \ \ \ \ \textcolor{comment}{//\ Write\ the\ MSR}}
\DoxyCodeLine{00388\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}wrmsr"{}}\ :\ :\ \textcolor{stringliteral}{"{}a"{}}\ ((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}})\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{value}}),\ \textcolor{stringliteral}{"{}d"{}}\ ((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}})\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{value}}\ >>\ 32)),\ \textcolor{stringliteral}{"{}c"{}}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{msr}}));}
\DoxyCodeLine{00389\ \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{apic_8cpp_source_l00128}{Max\+OS\+::hardwarecommunication\+::\+Local\+APIC\+::send\+\_\+init()}}, \mbox{\hyperlink{apic_8cpp_source_l00167}{Max\+OS\+::hardwarecommunication\+::\+Local\+APIC\+::send\+\_\+startup()}}, and \mbox{\hyperlink{apic_8cpp_source_l00088}{Max\+OS\+::hardwarecommunication\+::\+Local\+APIC\+::write()}}.



\doxysubsection{Member Data Documentation}
\Hypertarget{classMaxOS_1_1system_1_1CPU_a13d3b45c5ca62bf96e425e40ca113663}\label{classMaxOS_1_1system_1_1CPU_a13d3b45c5ca62bf96e425e40ca113663} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!acpi@{acpi}}
\index{acpi@{acpi}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{acpi}{acpi}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1AdvancedConfigurationAndPowerInterface}{hardwarecommunication\+::\+Advanced\+Configuration\+And\+Power\+Interface}} Max\+OS\+::system\+::\+CPU\+::acpi}



The ACPI interface for the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU}. 



Definition at line \mbox{\hyperlink{cpu_8h_source_l00235}{235}} of file \mbox{\hyperlink{cpu_8h_source}{cpu.\+h}}.

\Hypertarget{classMaxOS_1_1system_1_1CPU_a7fef57a79ba623497c26b04e34cfedf6}\label{classMaxOS_1_1system_1_1CPU_a7fef57a79ba623497c26b04e34cfedf6} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!apic@{apic}}
\index{apic@{apic}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{apic}{apic}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1AdvancedProgrammableInterruptController}{hardwarecommunication\+::\+Advanced\+Programmable\+Interrupt\+Controller}} Max\+OS\+::system\+::\+CPU\+::apic}



The APIC interface for the \doxylink{classMaxOS_1_1system_1_1CPU}{CPU}. 



Definition at line \mbox{\hyperlink{cpu_8h_source_l00236}{236}} of file \mbox{\hyperlink{cpu_8h_source}{cpu.\+h}}.



Referenced by \mbox{\hyperlink{cpu_8cpp_source_l00249}{CPU()}}, and \mbox{\hyperlink{cpu_8cpp_source_l00524}{find\+\_\+cores()}}.

\Hypertarget{classMaxOS_1_1system_1_1CPU_acbed3e383ef08559099051d9c7e9d57b}\label{classMaxOS_1_1system_1_1CPU_acbed3e383ef08559099051d9c7e9d57b} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!cores@{cores}}
\index{cores@{cores}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{cores}{cores}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Vector}{common\+::\+Vector}}$<$\mbox{\hyperlink{classMaxOS_1_1system_1_1Core}{Core}}\texorpdfstring{$\ast$}{*}$>$ Max\+OS\+::system\+::\+CPU\+::cores\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



The list of \doxylink{classMaxOS_1_1system_1_1CPU}{CPU} cores in the system (populated during initialization, includes the BSP and cores that failed to start) 



Definition at line \mbox{\hyperlink{cpu_8h_source_l00245}{245}} of file \mbox{\hyperlink{cpu_8h_source}{cpu.\+h}}.



Referenced by \mbox{\hyperlink{scheduler_8cpp_source_l00098}{Max\+OS\+::processes\+::\+Global\+Scheduler\+::activate()}}, \mbox{\hyperlink{scheduler_8cpp_source_l00183}{Max\+OS\+::processes\+::\+Global\+Scheduler\+::add\+\_\+process()}}, \mbox{\hyperlink{scheduler_8cpp_source_l00214}{Max\+OS\+::processes\+::\+Global\+Scheduler\+::add\+\_\+thread()}}, \mbox{\hyperlink{cpu_8cpp_source_l00249}{CPU()}}, \mbox{\hyperlink{scheduler_8cpp_source_l00109}{Max\+OS\+::processes\+::\+Global\+Scheduler\+::deactivate()}}, \mbox{\hyperlink{cpu_8cpp_source_l00620}{executing\+\_\+core()}}, \mbox{\hyperlink{cpu_8cpp_source_l00524}{find\+\_\+cores()}}, \mbox{\hyperlink{scheduler_8cpp_source_l00261}{Max\+OS\+::processes\+::\+Global\+Scheduler\+::force\+\_\+remove\+\_\+process()}}, \mbox{\hyperlink{scheduler_8cpp_source_l00290}{Max\+OS\+::processes\+::\+Global\+Scheduler\+::get\+\_\+process()}}, \mbox{\hyperlink{scheduler_8cpp_source_l00323}{Max\+OS\+::processes\+::\+Global\+Scheduler\+::get\+\_\+thread()}}, \mbox{\hyperlink{scheduler_8cpp_source_l00024}{Max\+OS\+::processes\+::\+Global\+Scheduler\+::\+Global\+Scheduler()}}, \mbox{\hyperlink{cpu_8cpp_source_l00548}{init\+\_\+cores()}}, and \mbox{\hyperlink{scheduler_8cpp_source_l00245}{Max\+OS\+::processes\+::\+Global\+Scheduler\+::remove\+\_\+process()}}.

\Hypertarget{classMaxOS_1_1system_1_1CPU_ae48969a59a3ae850353360f366166ca8}\label{classMaxOS_1_1system_1_1CPU_ae48969a59a3ae850353360f366166ca8} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!panic\_core@{panic\_core}}
\index{panic\_core@{panic\_core}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{panic\_core}{panic\_core}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1system_1_1Core}{Core}}\texorpdfstring{$\ast$}{*} Max\+OS\+::system\+::\+CPU\+::panic\+\_\+core = nullptr\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



The core that triggered the panic. 



Definition at line \mbox{\hyperlink{cpu_8h_source_l00238}{238}} of file \mbox{\hyperlink{cpu_8h_source}{cpu.\+h}}.



Referenced by \mbox{\hyperlink{cpu_8cpp_source_l00436}{PANIC()}}, and \mbox{\hyperlink{cpu_8cpp_source_l00492}{prepare\+\_\+for\+\_\+panic()}}.

\Hypertarget{classMaxOS_1_1system_1_1CPU_af7c9f38c5738cdaa2b57251577eea6d5}\label{classMaxOS_1_1system_1_1CPU_af7c9f38c5738cdaa2b57251577eea6d5} 
\index{MaxOS::system::CPU@{MaxOS::system::CPU}!panic\_lock@{panic\_lock}}
\index{panic\_lock@{panic\_lock}!MaxOS::system::CPU@{MaxOS::system::CPU}}
\doxysubsubsection{\texorpdfstring{panic\_lock}{panic\_lock}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Spinlock}{common\+::\+Spinlock}} Max\+OS\+::system\+::\+CPU\+::panic\+\_\+lock\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Lock to prevent multiple panics at once. 



Definition at line \mbox{\hyperlink{cpu_8h_source_l00239}{239}} of file \mbox{\hyperlink{cpu_8h_source}{cpu.\+h}}.



Referenced by \mbox{\hyperlink{vesaboot_8cpp_source_l00230}{Max\+OS\+::drivers\+::console\+::\+VESABoot\+Console\+::get\+\_\+background\+\_\+color()}}, \mbox{\hyperlink{vesaboot_8cpp_source_l00207}{Max\+OS\+::drivers\+::console\+::\+VESABoot\+Console\+::get\+\_\+foreground\+\_\+color()}}, \mbox{\hyperlink{cpu_8cpp_source_l00436}{PANIC()}}, and \mbox{\hyperlink{cpu_8cpp_source_l00492}{prepare\+\_\+for\+\_\+panic()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/include/system/\mbox{\hyperlink{cpu_8h}{cpu.\+h}}\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/src/system/\mbox{\hyperlink{cpu_8cpp}{cpu.\+cpp}}\end{DoxyCompactItemize}
