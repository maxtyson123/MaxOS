\doxysection{/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/include/drivers/clock/clock.h File Reference}
\hypertarget{clock_8h}{}\label{clock_8h}\index{/home/runner/work/MaxOS/MaxOS/kernel/include/drivers/clock/clock.h@{/home/runner/work/MaxOS/MaxOS/kernel/include/drivers/clock/clock.h}}


Defines drivers for the Programmable Interval Timer (PIT) and APIC Clock.  


{\ttfamily \#include $<$cstdint$>$}\newline
{\ttfamily \#include $<$common/time.\+h$>$}\newline
{\ttfamily \#include $<$drivers/driver.\+h$>$}\newline
{\ttfamily \#include $<$hardwarecommunication/interrupts.\+h$>$}\newline
{\ttfamily \#include $<$hardwarecommunication/apic.\+h$>$}\newline
{\ttfamily \#include $<$common/vector.\+h$>$}\newline
{\ttfamily \#include $<$common/event\+Handler.\+h$>$}\newline
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structMaxOS_1_1drivers_1_1clock_1_1PITCommand}{Max\+OS\+::drivers\+::clock\+::\+PITCommand}}
\begin{DoxyCompactList}\small\item\em The command byte to send to the \doxylink{classMaxOS_1_1drivers_1_1clock_1_1PIT}{PIT}, specifies the channel, access mode, operating mode and BCD mode. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1PIT}{Max\+OS\+::drivers\+::clock\+::\+PIT}}
\begin{DoxyCompactList}\small\item\em \doxylink{classMaxOS_1_1drivers_1_1Driver}{Driver} for the Programmable Interval Timer. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1Clock}{Max\+OS\+::drivers\+::clock\+::\+Clock}}
\begin{DoxyCompactList}\small\item\em \doxylink{classMaxOS_1_1drivers_1_1Driver}{Driver} for the APIC clock. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{clock_8h_aae05a963b516d75531106e7ac70d7b44}\label{clock_8h_aae05a963b516d75531106e7ac70d7b44} 
typedef struct \mbox{\hyperlink{structMaxOS_1_1drivers_1_1clock_1_1PITCommand}{Max\+OS\+::drivers\+::clock\+::\+PITCommand}} {\bfseries Max\+OS\+::drivers\+::clock\+::pit\+\_\+command\+\_\+t}
\begin{DoxyCompactList}\small\item\em Alias for \doxylink{structMaxOS_1_1drivers_1_1clock_1_1PITCommand}{PITCommand} struct. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum class \mbox{\hyperlink{clock_8h_abcf21589b606dd6e2b8a617cda1b0ac3}{Max\+OS\+::drivers\+::clock\+::\+Channel}} \{ {\bfseries INTERRUPT}
, {\bfseries DRAM\+\_\+\+REFRESH}
, {\bfseries SPEAKER}
 \}
\begin{DoxyCompactList}\small\item\em Where should the PIT raise an event to. \end{DoxyCompactList}\item 
enum class \mbox{\hyperlink{clock_8h_aec467a8b28cb0b1b17948364e6710844}{Max\+OS\+::drivers\+::clock\+::\+Access\+Mode}} \{ {\bfseries LATCH\+\_\+\+COUNT}
, {\bfseries LOW\+\_\+\+BYTE}
, {\bfseries HIGH\+\_\+\+BYTE}
, {\bfseries LOW\+\_\+\+HIGH\+\_\+\+BYTE}
 \}
\begin{DoxyCompactList}\small\item\em What mode should the PIT use for the selected channel. \end{DoxyCompactList}\item 
enum class \mbox{\hyperlink{clock_8h_a9e1786fd3419e0a129f79ffdf56154f7}{Max\+OS\+::drivers\+::clock\+::\+Operating\+Mode}} \{ \newline
{\bfseries INTERRUPT\+\_\+\+ON\+\_\+\+TERMINAL\+\_\+\+COUNT}
, {\bfseries ONE\+\_\+\+SHOT}
, {\bfseries RATE\+\_\+\+GENERATOR}
, {\bfseries SQUARE\+\_\+\+WAVE}
, \newline
{\bfseries SOFTWARE\+\_\+\+STROBE}
, {\bfseries HARDWARE\+\_\+\+STROBE}
 \}
\begin{DoxyCompactList}\small\item\em What should the PIT do. \end{DoxyCompactList}\item 
enum class \mbox{\hyperlink{clock_8h_a138a8792ceb3e2bd560c677d54724b4c}{Max\+OS\+::drivers\+::clock\+::\+BCDMode}} \{ {\bfseries BINARY}
, {\bfseries BCD}
 \}
\begin{DoxyCompactList}\small\item\em Specifies the data encoding mode used by the PIT. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
constexpr uint16\+\_\+t \mbox{\hyperlink{clock_8h_a25cda667ba25c7e95b6d8f2a96efb9a6}{Max\+OS\+::drivers\+::clock\+::\+TICK\+\_\+\+CALIBRATE\+\_\+\+LENGTH}} = 10
\begin{DoxyCompactList}\small\item\em How many loops to spin for calibration. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Defines drivers for the Programmable Interval Timer (PIT) and APIC Clock. 

\begin{DoxyDate}{Date}
10th April 2023 
\end{DoxyDate}
\begin{DoxyAuthor}{Author}
Max Tyson 
\end{DoxyAuthor}


Definition in file \mbox{\hyperlink{clock_8h_source}{clock.\+h}}.



\doxysubsection{Enumeration Type Documentation}
\Hypertarget{clock_8h_aec467a8b28cb0b1b17948364e6710844}\label{clock_8h_aec467a8b28cb0b1b17948364e6710844} 
\index{clock.h@{clock.h}!AccessMode@{AccessMode}}
\index{AccessMode@{AccessMode}!clock.h@{clock.h}}
\doxysubsubsection{\texorpdfstring{AccessMode}{AccessMode}}
{\footnotesize\ttfamily enum class \mbox{\hyperlink{clock_8h_aec467a8b28cb0b1b17948364e6710844}{Max\+OS\+::drivers\+::clock\+::\+Access\+Mode}}\hspace{0.3cm}{\ttfamily [strong]}}



What mode should the PIT use for the selected channel. 



Definition at line \mbox{\hyperlink{clock_8h_source_l00039}{39}} of file \mbox{\hyperlink{clock_8h_source}{clock.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ LATCH\_COUNT,}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ LOW\_BYTE,}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ HIGH\_BYTE,}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ LOW\_HIGH\_BYTE,}
\DoxyCodeLine{00044\ \ \ \ \ \};}

\end{DoxyCode}
\Hypertarget{clock_8h_a138a8792ceb3e2bd560c677d54724b4c}\label{clock_8h_a138a8792ceb3e2bd560c677d54724b4c} 
\index{clock.h@{clock.h}!BCDMode@{BCDMode}}
\index{BCDMode@{BCDMode}!clock.h@{clock.h}}
\doxysubsubsection{\texorpdfstring{BCDMode}{BCDMode}}
{\footnotesize\ttfamily enum class \mbox{\hyperlink{clock_8h_a138a8792ceb3e2bd560c677d54724b4c}{Max\+OS\+::drivers\+::clock\+::\+BCDMode}}\hspace{0.3cm}{\ttfamily [strong]}}



Specifies the data encoding mode used by the PIT. 



Definition at line \mbox{\hyperlink{clock_8h_source_l00063}{63}} of file \mbox{\hyperlink{clock_8h_source}{clock.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ BINARY,}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ BCD,}
\DoxyCodeLine{00066\ \ \ \ \ \};}

\end{DoxyCode}
\Hypertarget{clock_8h_abcf21589b606dd6e2b8a617cda1b0ac3}\label{clock_8h_abcf21589b606dd6e2b8a617cda1b0ac3} 
\index{clock.h@{clock.h}!Channel@{Channel}}
\index{Channel@{Channel}!clock.h@{clock.h}}
\doxysubsubsection{\texorpdfstring{Channel}{Channel}}
{\footnotesize\ttfamily enum class \mbox{\hyperlink{clock_8h_abcf21589b606dd6e2b8a617cda1b0ac3}{Max\+OS\+::drivers\+::clock\+::\+Channel}}\hspace{0.3cm}{\ttfamily [strong]}}



Where should the PIT raise an event to. 

\begin{DoxyWarning}{Warning}
DRAM\+\_\+\+REFRESH may not exist on all systems 
\end{DoxyWarning}


Definition at line \mbox{\hyperlink{clock_8h_source_l00029}{29}} of file \mbox{\hyperlink{clock_8h_source}{clock.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ INTERRUPT,}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ DRAM\_REFRESH,}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ SPEAKER,}
\DoxyCodeLine{00033\ \ \ \ \ \};}

\end{DoxyCode}
\Hypertarget{clock_8h_a9e1786fd3419e0a129f79ffdf56154f7}\label{clock_8h_a9e1786fd3419e0a129f79ffdf56154f7} 
\index{clock.h@{clock.h}!OperatingMode@{OperatingMode}}
\index{OperatingMode@{OperatingMode}!clock.h@{clock.h}}
\doxysubsubsection{\texorpdfstring{OperatingMode}{OperatingMode}}
{\footnotesize\ttfamily enum class \mbox{\hyperlink{clock_8h_a9e1786fd3419e0a129f79ffdf56154f7}{Max\+OS\+::drivers\+::clock\+::\+Operating\+Mode}}\hspace{0.3cm}{\ttfamily [strong]}}



What should the PIT do. 



Definition at line \mbox{\hyperlink{clock_8h_source_l00050}{50}} of file \mbox{\hyperlink{clock_8h_source}{clock.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ INTERRUPT\_ON\_TERMINAL\_COUNT,}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ ONE\_SHOT,}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ RATE\_GENERATOR,}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ SQUARE\_WAVE,}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ SOFTWARE\_STROBE,}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ HARDWARE\_STROBE,}
\DoxyCodeLine{00057\ \ \ \ \ \};}

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\Hypertarget{clock_8h_a25cda667ba25c7e95b6d8f2a96efb9a6}\label{clock_8h_a25cda667ba25c7e95b6d8f2a96efb9a6} 
\index{clock.h@{clock.h}!TICK\_CALIBRATE\_LENGTH@{TICK\_CALIBRATE\_LENGTH}}
\index{TICK\_CALIBRATE\_LENGTH@{TICK\_CALIBRATE\_LENGTH}!clock.h@{clock.h}}
\doxysubsubsection{\texorpdfstring{TICK\_CALIBRATE\_LENGTH}{TICK\_CALIBRATE\_LENGTH}}
{\footnotesize\ttfamily constexpr uint16\+\_\+t Max\+OS\+::drivers\+::clock\+::\+TICK\+\_\+\+CALIBRATE\+\_\+\+LENGTH = 10\hspace{0.3cm}{\ttfamily [constexpr]}}



How many loops to spin for calibration. 



Definition at line \mbox{\hyperlink{clock_8h_source_l00089}{89}} of file \mbox{\hyperlink{clock_8h_source}{clock.\+h}}.

