\doxysection{Max\+OS\+::runtime\+::UBSan\+Handler Class Reference}
\hypertarget{classMaxOS_1_1runtime_1_1UBSanHandler}{}\label{classMaxOS_1_1runtime_1_1UBSanHandler}\index{MaxOS::runtime::UBSanHandler@{MaxOS::runtime::UBSanHandler}}


Handles undefined behaviour sanitizer runtime errors.  




{\ttfamily \#include $<$ubsan.\+h$>$}

\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{classMaxOS_1_1runtime_1_1UBSanHandler_a353169cd40f5313dbb391c7bf1a76b51}{handle}} (\mbox{\hyperlink{ubsan_8h_a1b4e9dffd1d17d13b0908f75ab29ed96}{source\+\_\+location\+\_\+t}} location, const char \texorpdfstring{$\ast$}{*}msg)
\begin{DoxyCompactList}\small\item\em Handles the UBSan error (currently only printing the location and panicking) \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{classMaxOS_1_1runtime_1_1UBSanHandler_a8d9b7d29d736ff531855efce9b3dedd8}{print\+\_\+type\+\_\+mismatch}} (\mbox{\hyperlink{ubsan_8h_ad5a16fe97973104ac8eaaa7da2ce38fc}{type\+\_\+mismatch\+\_\+info\+\_\+t}} \texorpdfstring{$\ast$}{*}info, uintptr\+\_\+t ptr)
\begin{DoxyCompactList}\small\item\em Prints the type mismatch error for UBSan. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{classMaxOS_1_1runtime_1_1UBSanHandler_a9d449b3f2c7ec4bab81c905fe1bc60bc}{print\+\_\+type\+\_\+mismatch\+\_\+v1}} (\mbox{\hyperlink{ubsan_8h_aabcdc30f2b10037707cf8f8da176d196}{type\+\_\+mismatch\+\_\+info\+\_\+v1\+\_\+t}} \texorpdfstring{$\ast$}{*}info, uintptr\+\_\+t ptr)
\begin{DoxyCompactList}\small\item\em Prints the type mismatch error for UBSan v1. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Handles undefined behaviour sanitizer runtime errors. 

Definition at line \mbox{\hyperlink{ubsan_8h_source_l00184}{184}} of file \mbox{\hyperlink{ubsan_8h_source}{ubsan.\+h}}.



\doxysubsection{Member Function Documentation}
\Hypertarget{classMaxOS_1_1runtime_1_1UBSanHandler_a353169cd40f5313dbb391c7bf1a76b51}\label{classMaxOS_1_1runtime_1_1UBSanHandler_a353169cd40f5313dbb391c7bf1a76b51} 
\index{MaxOS::runtime::UBSanHandler@{MaxOS::runtime::UBSanHandler}!handle@{handle}}
\index{handle@{handle}!MaxOS::runtime::UBSanHandler@{MaxOS::runtime::UBSanHandler}}
\doxysubsubsection{\texorpdfstring{handle()}{handle()}}
{\footnotesize\ttfamily void UBSan\+Handler\+::handle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ubsan_8h_a1b4e9dffd1d17d13b0908f75ab29ed96}{source\+\_\+location\+\_\+t}}}]{location,  }\item[{const char \texorpdfstring{$\ast$}{*}}]{msg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Handles the UBSan error (currently only printing the location and panicking) 


\begin{DoxyParams}{Parameters}
{\em location} & The location of the error \\
\hline
{\em msg} & The message that informs about the error \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{ubsan_8cpp_source_l00025}{25}} of file \mbox{\hyperlink{ubsan_8cpp_source}{ubsan.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{comment}{//\ Print\ the\ location}}
\DoxyCodeLine{00028\ \ \ \ \ \mbox{\hyperlink{logger_8h_adf7b5d69e4c25995b3211b91b27f33b6}{ASSERT}}(\textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}UBSAN\ ERROR\ AT\ \%s:\%d:\%d\ -\/\ \%s"{}},\ location.\mbox{\hyperlink{structMaxOS_1_1runtime_1_1SourceLocation_ab9cb5bedd93051627ea932a048b10776}{file}},\ location.\mbox{\hyperlink{structMaxOS_1_1runtime_1_1SourceLocation_a6becabd62cfd66c61a9a4f1fb2293e04}{line}},\ location.\mbox{\hyperlink{structMaxOS_1_1runtime_1_1SourceLocation_a95cd28b37fb0cb02a8dad2ef942005b4}{column}},\ msg);}
\DoxyCodeLine{00029\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{logger_8h_source_l00100}{ASSERT}}, \mbox{\hyperlink{ubsan_8h_source_l00030}{Max\+OS\+::runtime\+::\+Source\+Location\+::column}}, \mbox{\hyperlink{ubsan_8h_source_l00028}{Max\+OS\+::runtime\+::\+Source\+Location\+::file}}, and \mbox{\hyperlink{ubsan_8h_source_l00029}{Max\+OS\+::runtime\+::\+Source\+Location\+::line}}.



Referenced by \mbox{\hyperlink{ubsan_8cpp_source_l00139}{\+\_\+\+\_\+ubsan\+\_\+handle\+\_\+add\+\_\+overflow()}}, \mbox{\hyperlink{ubsan_8cpp_source_l00172}{\+\_\+\+\_\+ubsan\+\_\+handle\+\_\+builtin\+\_\+unreachable()}}, \mbox{\hyperlink{ubsan_8cpp_source_l00150}{\+\_\+\+\_\+ubsan\+\_\+handle\+\_\+divrem\+\_\+overflow()}}, \mbox{\hyperlink{ubsan_8cpp_source_l00194}{\+\_\+\+\_\+ubsan\+\_\+handle\+\_\+load\+\_\+invalid\+\_\+value()}}, \mbox{\hyperlink{ubsan_8cpp_source_l00205}{\+\_\+\+\_\+ubsan\+\_\+handle\+\_\+missing\+\_\+return()}}, \mbox{\hyperlink{ubsan_8cpp_source_l00183}{\+\_\+\+\_\+ubsan\+\_\+handle\+\_\+mul\+\_\+overflow()}}, \mbox{\hyperlink{ubsan_8cpp_source_l00161}{\+\_\+\+\_\+ubsan\+\_\+handle\+\_\+negate\+\_\+overflow()}}, \mbox{\hyperlink{ubsan_8cpp_source_l00128}{\+\_\+\+\_\+ubsan\+\_\+handle\+\_\+out\+\_\+of\+\_\+bounds()}}, \mbox{\hyperlink{ubsan_8cpp_source_l00096}{\+\_\+\+\_\+ubsan\+\_\+handle\+\_\+pointer\+\_\+overflow()}}, \mbox{\hyperlink{ubsan_8cpp_source_l00118}{\+\_\+\+\_\+ubsan\+\_\+handle\+\_\+shift\+\_\+out\+\_\+of\+\_\+bounds()}}, \mbox{\hyperlink{ubsan_8cpp_source_l00107}{\+\_\+\+\_\+ubsan\+\_\+handle\+\_\+sub\+\_\+overflow()}}, \mbox{\hyperlink{ubsan_8cpp_source_l00215}{\+\_\+\+\_\+ubsan\+\_\+handle\+\_\+vla\+\_\+bound\+\_\+not\+\_\+positive()}}, \mbox{\hyperlink{ubsan_8cpp_source_l00037}{print\+\_\+type\+\_\+mismatch()}}, and \mbox{\hyperlink{ubsan_8cpp_source_l00056}{print\+\_\+type\+\_\+mismatch\+\_\+v1()}}.

\Hypertarget{classMaxOS_1_1runtime_1_1UBSanHandler_a8d9b7d29d736ff531855efce9b3dedd8}\label{classMaxOS_1_1runtime_1_1UBSanHandler_a8d9b7d29d736ff531855efce9b3dedd8} 
\index{MaxOS::runtime::UBSanHandler@{MaxOS::runtime::UBSanHandler}!print\_type\_mismatch@{print\_type\_mismatch}}
\index{print\_type\_mismatch@{print\_type\_mismatch}!MaxOS::runtime::UBSanHandler@{MaxOS::runtime::UBSanHandler}}
\doxysubsubsection{\texorpdfstring{print\_type\_mismatch()}{print\_type\_mismatch()}}
{\footnotesize\ttfamily void UBSan\+Handler\+::print\+\_\+type\+\_\+mismatch (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ubsan_8h_ad5a16fe97973104ac8eaaa7da2ce38fc}{type\+\_\+mismatch\+\_\+info\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{info,  }\item[{uintptr\+\_\+t}]{ptr }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Prints the type mismatch error for UBSan. 


\begin{DoxyParams}{Parameters}
{\em info} & The type mismatch info \\
\hline
{\em ptr} & The pointer to the object \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{ubsan_8cpp_source_l00037}{37}} of file \mbox{\hyperlink{ubsan_8cpp_source}{ubsan.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{comment}{//\ Print\ the\ error}}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keywordtype}{string}\ msg;}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keywordflow}{if}\ (info-\/>\mbox{\hyperlink{structMaxOS_1_1runtime_1_1TypeMismatchInfo_a7e250329a8d3539eb3b44b2ca59dfd9d}{alignment}}\ !=\ 0\ \&\&\ \mbox{\hyperlink{ubsan_8h_a4dd3c18b7406fa01fd4d60cd4485183a}{ubsan\_aligned}}(ptr,\ info-\/>\mbox{\hyperlink{structMaxOS_1_1runtime_1_1TypeMismatchInfo_a7e250329a8d3539eb3b44b2ca59dfd9d}{alignment}}))}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}misaligned\ memory\ access"{}};}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ msg\ =\ (\mbox{\hyperlink{classMaxOS_1_1StringBuilder}{StringBuilder}})TYPE\_CHECK\_KINDS[info-\/>\mbox{\hyperlink{structMaxOS_1_1runtime_1_1TypeMismatchInfo_a51f8707359b9d9733f0a68d97da8d87c}{type\_check\_kind}}]\ <<\ \textcolor{stringliteral}{"{}\ address\ 0x"{}}\ <<\ ptr\ <<\ \textcolor{stringliteral}{"{}\ with\ insufficient\ space\ for\ an\ object\ of\ type\ "{}}\ <<\ info-\/>\mbox{\hyperlink{structMaxOS_1_1runtime_1_1TypeMismatchInfo_a92ebdbb12be0f0c41836c2d5e8676caf}{type}}-\/>\mbox{\hyperlink{structMaxOS_1_1runtime_1_1TypeDescriptor_a06d9b8fae7b2d08775ec4e72a539764d}{name}};}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{comment}{//\ Print\ the\ location}}
\DoxyCodeLine{00047\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1runtime_1_1UBSanHandler_a353169cd40f5313dbb391c7bf1a76b51}{handle}}(info-\/>\mbox{\hyperlink{structMaxOS_1_1runtime_1_1TypeMismatchInfo_a4c1db88523384c8671f60ec82563b41d}{location}},\ msg.c\_str());}
\DoxyCodeLine{00048\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{ubsan_8h_source_l00060}{Max\+OS\+::runtime\+::\+Type\+Mismatch\+Info\+::alignment}}, \mbox{\hyperlink{ubsan_8cpp_source_l00025}{handle()}}, \mbox{\hyperlink{ubsan_8h_source_l00058}{Max\+OS\+::runtime\+::\+Type\+Mismatch\+Info\+::location}}, \mbox{\hyperlink{ubsan_8h_source_l00045}{Max\+OS\+::runtime\+::\+Type\+Descriptor\+::name}}, \mbox{\hyperlink{ubsan_8h_source_l00059}{Max\+OS\+::runtime\+::\+Type\+Mismatch\+Info\+::type}}, \mbox{\hyperlink{ubsan_8h_source_l00061}{Max\+OS\+::runtime\+::\+Type\+Mismatch\+Info\+::type\+\_\+check\+\_\+kind}}, \mbox{\hyperlink{ubsan_8h_source_l00167}{Max\+OS\+::runtime\+::\+TYPE\+\_\+\+CHECK\+\_\+\+KINDS}}, and \mbox{\hyperlink{ubsan_8h_source_l00015}{ubsan\+\_\+aligned}}.



Referenced by \mbox{\hyperlink{ubsan_8cpp_source_l00075}{\+\_\+\+\_\+ubsan\+\_\+handle\+\_\+type\+\_\+mismatch()}}.

\Hypertarget{classMaxOS_1_1runtime_1_1UBSanHandler_a9d449b3f2c7ec4bab81c905fe1bc60bc}\label{classMaxOS_1_1runtime_1_1UBSanHandler_a9d449b3f2c7ec4bab81c905fe1bc60bc} 
\index{MaxOS::runtime::UBSanHandler@{MaxOS::runtime::UBSanHandler}!print\_type\_mismatch\_v1@{print\_type\_mismatch\_v1}}
\index{print\_type\_mismatch\_v1@{print\_type\_mismatch\_v1}!MaxOS::runtime::UBSanHandler@{MaxOS::runtime::UBSanHandler}}
\doxysubsubsection{\texorpdfstring{print\_type\_mismatch\_v1()}{print\_type\_mismatch\_v1()}}
{\footnotesize\ttfamily void UBSan\+Handler\+::print\+\_\+type\+\_\+mismatch\+\_\+v1 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ubsan_8h_aabcdc30f2b10037707cf8f8da176d196}{type\+\_\+mismatch\+\_\+info\+\_\+v1\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{info,  }\item[{uintptr\+\_\+t}]{ptr }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Prints the type mismatch error for UBSan v1. 


\begin{DoxyParams}{Parameters}
{\em info} & The type mismatch info \\
\hline
{\em ptr} & The pointer to the object \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{ubsan_8cpp_source_l00056}{56}} of file \mbox{\hyperlink{ubsan_8cpp_source}{ubsan.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{comment}{//\ Print\ the\ error}}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordtype}{string}\ msg;}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordflow}{if}\ (info-\/>\mbox{\hyperlink{structMaxOS_1_1runtime_1_1TypeMismatchInfoV1_abb17b47b0598b0d44f8c8cfc8ee9788a}{log\_alignment}}\ !=\ 0\ \&\&\ \mbox{\hyperlink{ubsan_8h_a4dd3c18b7406fa01fd4d60cd4485183a}{ubsan\_aligned}}(ptr,\ (1\ <<\ (info-\/>\mbox{\hyperlink{structMaxOS_1_1runtime_1_1TypeMismatchInfoV1_abb17b47b0598b0d44f8c8cfc8ee9788a}{log\_alignment}}))))}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}misaligned\ memory\ access"{}};}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ msg=\ \mbox{\hyperlink{classMaxOS_1_1StringBuilder}{StringBuilder}}()\ <<\ \mbox{\hyperlink{ubsan_8h_aaa0a3253a821d4b90273d3163432fee5}{TYPE\_CHECK\_KINDS}}[info-\/>\mbox{\hyperlink{structMaxOS_1_1runtime_1_1TypeMismatchInfoV1_acfb7acf585884592c62517ee0185715c}{type\_check\_kind}}]\ <<\ \textcolor{stringliteral}{"{}\ address\ 0x"{}}\ <<\ ptr\ <<\ \textcolor{stringliteral}{"{}\ with\ insufficient\ space\ for\ an\ object\ of\ type\ "{}}\ <<\ info-\/>\mbox{\hyperlink{structMaxOS_1_1runtime_1_1TypeMismatchInfoV1_aeadb4a2256a34a8c373df43ccec5f1ac}{type}}-\/>\mbox{\hyperlink{structMaxOS_1_1runtime_1_1TypeDescriptor_a06d9b8fae7b2d08775ec4e72a539764d}{name}};}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{comment}{//\ Print\ the\ location}}
\DoxyCodeLine{00066\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1runtime_1_1UBSanHandler_a353169cd40f5313dbb391c7bf1a76b51}{handle}}(info-\/>\mbox{\hyperlink{structMaxOS_1_1runtime_1_1TypeMismatchInfoV1_aa2aaba6a2c413bb3df69201d1987ab8c}{location}},\ msg.c\_str());}
\DoxyCodeLine{00067\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{ubsan_8cpp_source_l00025}{handle()}}, \mbox{\hyperlink{ubsan_8h_source_l00074}{Max\+OS\+::runtime\+::\+Type\+Mismatch\+Info\+V1\+::location}}, \mbox{\hyperlink{ubsan_8h_source_l00076}{Max\+OS\+::runtime\+::\+Type\+Mismatch\+Info\+V1\+::log\+\_\+alignment}}, \mbox{\hyperlink{ubsan_8h_source_l00045}{Max\+OS\+::runtime\+::\+Type\+Descriptor\+::name}}, \mbox{\hyperlink{ubsan_8h_source_l00075}{Max\+OS\+::runtime\+::\+Type\+Mismatch\+Info\+V1\+::type}}, \mbox{\hyperlink{ubsan_8h_source_l00077}{Max\+OS\+::runtime\+::\+Type\+Mismatch\+Info\+V1\+::type\+\_\+check\+\_\+kind}}, \mbox{\hyperlink{ubsan_8h_source_l00167}{Max\+OS\+::runtime\+::\+TYPE\+\_\+\+CHECK\+\_\+\+KINDS}}, and \mbox{\hyperlink{ubsan_8h_source_l00015}{ubsan\+\_\+aligned}}.



Referenced by \mbox{\hyperlink{ubsan_8cpp_source_l00086}{\+\_\+\+\_\+ubsan\+\_\+handle\+\_\+type\+\_\+mismatch\+\_\+v1()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/include/runtime/\mbox{\hyperlink{ubsan_8h}{ubsan.\+h}}\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/src/runtime/\mbox{\hyperlink{ubsan_8cpp}{ubsan.\+cpp}}\end{DoxyCompactItemize}
