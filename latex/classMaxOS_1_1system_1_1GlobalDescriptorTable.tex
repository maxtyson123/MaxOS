\hypertarget{classMaxOS_1_1system_1_1GlobalDescriptorTable}{}\doxysection{Max\+OS\+::system\+::Global\+Descriptor\+Table Class Reference}
\label{classMaxOS_1_1system_1_1GlobalDescriptorTable}\index{MaxOS::system::GlobalDescriptorTable@{MaxOS::system::GlobalDescriptorTable}}


Sets up the G\+DT in the \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU}{C\+PU}}.  




{\ttfamily \#include $<$gdt.\+h$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1system_1_1GlobalDescriptorTable_af965f61a6b95b05608d27385fee17f4e}{Global\+Descriptor\+Table}} ()
\item 
\mbox{\hyperlink{classMaxOS_1_1system_1_1GlobalDescriptorTable_acf17048eaac95750ebc0043a1f07576a}{$\sim$\+Global\+Descriptor\+Table}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Sets up the G\+DT in the \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU}{C\+PU}}. 

Definition at line 28 of file gdt.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classMaxOS_1_1system_1_1GlobalDescriptorTable_af965f61a6b95b05608d27385fee17f4e}\label{classMaxOS_1_1system_1_1GlobalDescriptorTable_af965f61a6b95b05608d27385fee17f4e}} 
\index{MaxOS::system::GlobalDescriptorTable@{MaxOS::system::GlobalDescriptorTable}!GlobalDescriptorTable@{GlobalDescriptorTable}}
\index{GlobalDescriptorTable@{GlobalDescriptorTable}!MaxOS::system::GlobalDescriptorTable@{MaxOS::system::GlobalDescriptorTable}}
\doxysubsubsection{\texorpdfstring{GlobalDescriptorTable()}{GlobalDescriptorTable()}}
{\footnotesize\ttfamily Global\+Descriptor\+Table\+::\+Global\+Descriptor\+Table (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 11 of file gdt.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{12 \{}
\DoxyCodeLine{13 }
\DoxyCodeLine{14    \textcolor{comment}{// Null descriptor}}
\DoxyCodeLine{15     m\_gdt[0] = 0;}
\DoxyCodeLine{16 }
\DoxyCodeLine{17     \textcolor{comment}{// Kernel code segment descriptor}}
\DoxyCodeLine{18     uint64\_t kernel\_code\_segment\_descriptor = 0;}
\DoxyCodeLine{19     kernel\_code\_segment\_descriptor |= 0b1011 << 8; \textcolor{comment}{// Type of selector}}
\DoxyCodeLine{20     kernel\_code\_segment\_descriptor |= 1 << 12;     \textcolor{comment}{// Not a system descriptor}}
\DoxyCodeLine{21     kernel\_code\_segment\_descriptor |= 0 << 13;     \textcolor{comment}{// Privilege level 0}}
\DoxyCodeLine{22     kernel\_code\_segment\_descriptor |= 1 << 15;     \textcolor{comment}{// Present}}
\DoxyCodeLine{23     kernel\_code\_segment\_descriptor |= 1 << 21;     \textcolor{comment}{// Long mode}}
\DoxyCodeLine{24     m\_gdt[1] = kernel\_code\_segment\_descriptor << 32;}
\DoxyCodeLine{25 }
\DoxyCodeLine{26     \textcolor{comment}{// Kernel data segment descriptor}}
\DoxyCodeLine{27     uint64\_t kernel\_data\_segment\_descriptor = 0;}
\DoxyCodeLine{28     kernel\_data\_segment\_descriptor |= 0b0011 << 8; \textcolor{comment}{// Type of selector}}
\DoxyCodeLine{29     kernel\_data\_segment\_descriptor |= 1 << 12;     \textcolor{comment}{// Not a system descriptor}}
\DoxyCodeLine{30     kernel\_data\_segment\_descriptor |= 0 << 13;     \textcolor{comment}{// Privilege level 0}}
\DoxyCodeLine{31     kernel\_data\_segment\_descriptor |= 1 << 15;     \textcolor{comment}{// Present}}
\DoxyCodeLine{32     kernel\_data\_segment\_descriptor |= 1 << 21;     \textcolor{comment}{// Long mode}}
\DoxyCodeLine{33     m\_gdt[2] = kernel\_data\_segment\_descriptor << 32;}
\DoxyCodeLine{34 }
\DoxyCodeLine{35     \textcolor{comment}{// User code segment descriptor (Change the privilege level to 3)}}
\DoxyCodeLine{36     uint64\_t user\_code\_segment\_descriptor = kernel\_code\_segment\_descriptor | (3 << 13);}
\DoxyCodeLine{37     m\_gdt[3] = user\_code\_segment\_descriptor;}
\DoxyCodeLine{38 }
\DoxyCodeLine{39     \textcolor{comment}{// User data segment descriptor (Change the privilege level to 3)}}
\DoxyCodeLine{40     uint64\_t user\_data\_segment\_descriptor = kernel\_data\_segment\_descriptor | (3 << 13);}
\DoxyCodeLine{41     m\_gdt[4] = user\_data\_segment\_descriptor;}
\DoxyCodeLine{42 }
\DoxyCodeLine{43     \mbox{\hyperlink{kprint_8h_a21d6766fe400d57e508480323c71a148}{\_kprintf}}(\textcolor{stringliteral}{"Created GDT entries\(\backslash\)n"});}
\DoxyCodeLine{44 }
\DoxyCodeLine{45     \textcolor{comment}{// Store the GDT in the GDTR}}
\DoxyCodeLine{46     \mbox{\hyperlink{structMaxOS_1_1system_1_1GDTR}{GDTR}} gdtr = \{}
\DoxyCodeLine{47         .\mbox{\hyperlink{structMaxOS_1_1system_1_1GDTR_aed61f70dfbc6c6ba396df03e1d1e5a24}{limit}} = 5 * \textcolor{keyword}{sizeof}(uint64\_t) -\/ 1,}
\DoxyCodeLine{48         .\mbox{\hyperlink{amd__am79c973_8h_ac0d31ca829f934cccd89f8054e02773e}{address}} = (uint64\_t)m\_gdt}
\DoxyCodeLine{49     \};}
\DoxyCodeLine{50 }
\DoxyCodeLine{51     \textcolor{comment}{// Load the GDTR}}
\DoxyCodeLine{52     \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"lgdt \%0"} : : \textcolor{stringliteral}{"m"} (gdtr));}
\DoxyCodeLine{53 }
\DoxyCodeLine{54     \mbox{\hyperlink{kprint_8h_a21d6766fe400d57e508480323c71a148}{\_kprintf}}(\textcolor{stringliteral}{"Loaded GDT\(\backslash\)n"});}
\DoxyCodeLine{55 }
\DoxyCodeLine{56     \textcolor{comment}{// Reload the segment registers}}
\DoxyCodeLine{57     \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"\(\backslash\)}}
\DoxyCodeLine{58 \textcolor{stringliteral}{        mov \$0x10, \%ax \(\backslash\)n\(\backslash\)}}
\DoxyCodeLine{59 \textcolor{stringliteral}{        mov \%ax, \%ds \(\backslash\)n\(\backslash\)}}
\DoxyCodeLine{60 \textcolor{stringliteral}{        mov \%ax, \%es \(\backslash\)n\(\backslash\)}}
\DoxyCodeLine{61 \textcolor{stringliteral}{        mov \%ax, \%fs \(\backslash\)n\(\backslash\)}}
\DoxyCodeLine{62 \textcolor{stringliteral}{        mov \%ax, \%gs \(\backslash\)n\(\backslash\)}}
\DoxyCodeLine{63 \textcolor{stringliteral}{        mov \%ax, \%ss \(\backslash\)n\(\backslash\)}}
\DoxyCodeLine{64 \textcolor{stringliteral}{        \(\backslash\)n\(\backslash\)}}
\DoxyCodeLine{65 \textcolor{stringliteral}{        pop \%rdi \(\backslash\)n\(\backslash\)}}
\DoxyCodeLine{66 \textcolor{stringliteral}{        push \$0x8 \(\backslash\)n\(\backslash\)}}
\DoxyCodeLine{67 \textcolor{stringliteral}{        push \%rdi \(\backslash\)n\(\backslash\)}}
\DoxyCodeLine{68 \textcolor{stringliteral}{    "});}
\DoxyCodeLine{69 }
\DoxyCodeLine{70     \mbox{\hyperlink{kprint_8h_a21d6766fe400d57e508480323c71a148}{\_kprintf}}(\textcolor{stringliteral}{"Reloaded segment registers\(\backslash\)n"});}
\DoxyCodeLine{71 }
\DoxyCodeLine{72 \}}

\end{DoxyCode}


References \+\_\+kprintf(), address, and Max\+O\+S\+::system\+::\+G\+D\+T\+R\+::limit.

\mbox{\Hypertarget{classMaxOS_1_1system_1_1GlobalDescriptorTable_acf17048eaac95750ebc0043a1f07576a}\label{classMaxOS_1_1system_1_1GlobalDescriptorTable_acf17048eaac95750ebc0043a1f07576a}} 
\index{MaxOS::system::GlobalDescriptorTable@{MaxOS::system::GlobalDescriptorTable}!````~GlobalDescriptorTable@{$\sim$GlobalDescriptorTable}}
\index{````~GlobalDescriptorTable@{$\sim$GlobalDescriptorTable}!MaxOS::system::GlobalDescriptorTable@{MaxOS::system::GlobalDescriptorTable}}
\doxysubsubsection{\texorpdfstring{$\sim$GlobalDescriptorTable()}{~GlobalDescriptorTable()}}
{\footnotesize\ttfamily Global\+Descriptor\+Table\+::$\sim$\+Global\+Descriptor\+Table (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 74 of file gdt.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{75 \{}
\DoxyCodeLine{76 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Max\+O\+S/\+Max\+O\+S/kernel/include/system/\mbox{\hyperlink{gdt_8h}{gdt.\+h}}\item 
/home/runner/work/\+Max\+O\+S/\+Max\+O\+S/kernel/src/system/\mbox{\hyperlink{gdt_8cpp}{gdt.\+cpp}}\end{DoxyCompactItemize}
