\doxysection{desktop.\+cpp}
\hypertarget{desktop_8cpp_source}{}\label{desktop_8cpp_source}\index{/home/runner/work/MaxOS/MaxOS/kernel/src/gui/desktop.cpp@{/home/runner/work/MaxOS/MaxOS/kernel/src/gui/desktop.cpp}}
\mbox{\hyperlink{desktop_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00013}00013\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{desktop_8h}{gui/desktop.h}}>}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00015}00015\ \textcolor{keyword}{using\ namespace\ }MaxOS;}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00016}00016\ \textcolor{keyword}{using\ namespace\ }MaxOS::common;}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00017}00017\ \textcolor{keyword}{using\ namespace\ }MaxOS::gui;}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00018}00018\ \textcolor{keyword}{using\ namespace\ }MaxOS::drivers::peripherals;}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00019}00019\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00025}\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a8e3a0a8f3b8def067ee3044f01e37037}{00025}}\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a8e3a0a8f3b8def067ee3044f01e37037}{Desktop::Desktop}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1GraphicsContext}{GraphicsContext}}*\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{gc}})}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00026}00026\ :\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1CompositeWidget}{CompositeWidget}}(0,\ 0,\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{gc}}-\/>width(),\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{gc}}-\/>height()),}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00027}00027\ \ \ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1peripherals_1_1MouseEventHandler}{MouseEventHandler}}(),}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00028}00028\ \ \ m\_graphics\_context(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{gc}}),}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00029}00029\ \ \ colour(\mbox{\hyperlink{classMaxOS_1_1common_1_1Colour}{Colour}}(0xA8,\ 0xA8,\ 0xA8))}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00030}00030\ \{}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00032}00032\ \ \ \ \ \textcolor{comment}{//\ Set\ the\ mouse\ m\_position\ to\ the\ center\ of\ the\ screen}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00033}00033\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_abc5c381f4c7f5d06ff4d75dffcd4c6fa}{m\_mouse\_x}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{gc}}-\/>\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle_adcfd80cceb499bfb2b52a103c2b76950}{width}}()\ /\ 2;}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00034}00034\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a6db4632321b626d42c16b8f6762bca72}{m\_mouse\_y}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{gc}}-\/>\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle_a02aa1de4cd8eef57646079bbedaf9c64}{height}}()\ /\ 2;}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00036}00036\ \ \ \ \ \textcolor{comment}{//\ Draw\ the\ initial\ mouse\ cursor}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00037}00037\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a9c8711df4cd42767f6d28740182f3b2c}{invert\_mouse\_cursor}}();}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00038}00038\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00039}00039\ \ \ \ \ \textcolor{comment}{//\ Draw\ the\ desktop}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00040}00040\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Widget_a4cec72790bab262c00f480e0be87b518}{Widget::invalidate}}();}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00041}00041\ \}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00043}00043\ Desktop::\string~Desktop()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00044}00044\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00050}\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_ae25bc8ec2afbb8c4b601d3451520d82b}{00050}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_ae25bc8ec2afbb8c4b601d3451520d82b}{Desktop::set\_focus}}(\mbox{\hyperlink{classMaxOS_1_1gui_1_1Widget}{Widget}}*\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{widget}})\ \{}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00052}00052\ \ \ \ \ \textcolor{comment}{//\ If\ there\ is\ a\ widget\ in\ focus\ then\ send\ a\ focus\ lost\ event\ to\ it}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00053}00053\ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_adc296de0e382f8bc7f8e160ca19738dd}{m\_focussed\_widget}}\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00054}00054\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_adc296de0e382f8bc7f8e160ca19738dd}{m\_focussed\_widget}}-\/>\mbox{\hyperlink{classMaxOS_1_1gui_1_1Widget_a20bf87d6af80c410d7eada34a20d4819}{on\_focus\_lost}}();}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00055}00055\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00056}00056\ \ \ \ \ \textcolor{comment}{//\ Focus\ the\ new\ widget\ and\ send\ a\ focus\ event\ to\ it}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00057}00057\ \ \ \ \ this-\/>\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_adc296de0e382f8bc7f8e160ca19738dd}{m\_focussed\_widget}}\ =\ widget;}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00058}00058\ \ \ \ \ this-\/>\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_adc296de0e382f8bc7f8e160ca19738dd}{m\_focussed\_widget}}-\/>\mbox{\hyperlink{classMaxOS_1_1gui_1_1Widget_a1d598128a9004e37eae4b572ca064946}{on\_focus}}();}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00059}00059\ \}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00060}00060\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00066}\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a9b1b09773bd146a6e87b4d96043628d2}{00066}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Widget_aa5487a1a19d6010ea3b7ba764c325b6b}{Desktop::bring\_to\_front}}(\mbox{\hyperlink{classMaxOS_1_1gui_1_1Widget}{Widget}}*\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{front\_widget}})\ \{}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00067}00067\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00068}00068\ \ \ \ \ \textcolor{comment}{//\ Remove\ the\ widget\ from\ where\ ever\ it\ already\ is}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00069}00069\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1CompositeWidget_a641c4af3d0358fe00bace7bc2d4287db}{m\_children}}.erase(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{front\_widget}});}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00070}00070\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00071}00071\ \ \ \ \ \textcolor{comment}{//\ Add\ it\ back\ in\ the\ front}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00072}00072\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1CompositeWidget_a641c4af3d0358fe00bace7bc2d4287db}{m\_children}}.push\_front(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{front\_widget}});}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00073}00073\ \}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00074}00074\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00078}\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a9c8711df4cd42767f6d28740182f3b2c}{00078}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a9c8711df4cd42767f6d28740182f3b2c}{Desktop::invert\_mouse\_cursor}}()\ \{}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00079}00079\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00080}00080\ \ \ \ \ \textcolor{comment}{//\ Draw\ the\ horizontal\ line}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00081}00081\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{int32\_t}}\ x\ =\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_abc5c381f4c7f5d06ff4d75dffcd4c6fa}{m\_mouse\_x}}\ -\/\ 3;\ x\ <=\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_abc5c381f4c7f5d06ff4d75dffcd4c6fa}{m\_mouse\_x}}\ +\ 3;\ ++x)\ \{}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00082}00082\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_afea5b2944b2c9a3484c6c6e4f7ee823b}{m\_graphics\_context}}-\/>\mbox{\hyperlink{classMaxOS_1_1common_1_1GraphicsContext_a3b933f53b674ec2433e0f07d76f30a3f}{invert\_pixel}}(x,\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a6db4632321b626d42c16b8f6762bca72}{m\_mouse\_y}});}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00083}00083\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00084}00084\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00085}00085\ \ \ \ \ \textcolor{comment}{//\ Draw\ the\ vertical\ line}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00086}00086\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{int32\_t}}\ y\ =\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a6db4632321b626d42c16b8f6762bca72}{m\_mouse\_y}}\ -\/\ 3;\ y\ <=\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a6db4632321b626d42c16b8f6762bca72}{m\_mouse\_y}}\ +\ 3;\ ++y)\ \{}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00087}00087\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_afea5b2944b2c9a3484c6c6e4f7ee823b}{m\_graphics\_context}}-\/>\mbox{\hyperlink{classMaxOS_1_1common_1_1GraphicsContext_a3b933f53b674ec2433e0f07d76f30a3f}{invert\_pixel}}(\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_abc5c381f4c7f5d06ff4d75dffcd4c6fa}{m\_mouse\_x}},\ y);}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00088}00088\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00089}00089\ \}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00090}00090\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00098}\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a2e12df4145d37cef1f77c45a0b025ba0}{00098}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a2e12df4145d37cef1f77c45a0b025ba0}{Desktop::internal\_invalidate}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{common::Rectangle<int32\_t>}}\&\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{area}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Vector}{Vector}}<\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{Rectangle<int32\_t>}}>::iterator\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}},}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00099}00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Vector}{Vector}}<\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{Rectangle<int32\_t>}}>::iterator\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{stop}})\ \{}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00100}00100\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00101}00101\ \ \ \ \ \textcolor{comment}{//\ Loop\ through\ the\ invalid\ rectangles}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00102}00102\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Vector}{Vector}}<\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{Rectangle<int32\_t>}}>::iterator\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{invaild\_rect}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}};\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{invaild\_rect}}\ !=\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{stop}};\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{invaild\_rect}}++)\ \{}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00103}00103\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00104}00104\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ if\ the\ area\ intersects\ with\ the\ invalid\ rectangle}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00105}00105\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{area}}.\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle_a8a45a5294982d93eccbca1fbb29aacba}{intersects}}(*\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{invaild\_rect}}))}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00106}00106\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00107}00107\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00108}00108\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ the\ parts\ of\ the\ area\ that\ are\ covered\ by\ the\ invalid\ rectangle}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00109}00109\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{Vector<Rectangle<int32\_t>}}>\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{coveredAreas}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{area}}.\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle_ab9975d1a2e6a085bbd11038a54ca3247}{subtract}}(*\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{invaild\_rect}});}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00110}00110\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00111}00111\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Invalidate\ the\ covered\ areas}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00112}00112\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{coveredArea}}:\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{coveredAreas}})}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00113}00113\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a2e12df4145d37cef1f77c45a0b025ba0}{internal\_invalidate}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{coveredArea}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{invaild\_rect}}\ +\ 1,\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{stop}});}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00114}00114\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00115}00115\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ entire\ area\ will\ be\ invalidated\ by\ now}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00116}00116\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00117}00117\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00118}00118\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00119}00119\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00120}00120\ \ \ \ \ \textcolor{comment}{//\ Add\ the\ area\ to\ the\ invalid\ areas,\ store\ where\ it\ was\ added}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00121}00121\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{Vector<Rectangle<int32\_t>}}>::iterator\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{vectorPosition}}\ =\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_afff532fb8b06a71f747417c9bcc298e9}{m\_invalid\_areas}}.push\_back(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{area}});}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00122}00122\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00123}00123\ \ \ \ \ \textcolor{comment}{//\ If\ the\ m\_position\ is\ the\ last\ item\ then\ the\ invalidation\ buffer\ is\ full}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00124}00124\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{vectorPosition}}\ ==\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_afff532fb8b06a71f747417c9bcc298e9}{m\_invalid\_areas}}.end())\ \{}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00125}00125\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00126}00126\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Invalidate\ the\ entire\ desktop}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00127}00127\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_afff532fb8b06a71f747417c9bcc298e9}{m\_invalid\_areas}}.clear();}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00128}00128\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Widget_a4cec72790bab262c00f480e0be87b518}{Widget::invalidate}}();}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00129}00129\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00130}00130\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00131}00131\ \}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00132}00132\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00139}\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a58de1f22caee4765cc451c1667534f1c}{00139}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a58de1f22caee4765cc451c1667534f1c}{Desktop::draw\_self}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1GraphicsContext}{common::GraphicsContext}}*\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{gc}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{common::Rectangle<int32\_t>}}\&\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{area}})\ \{}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00140}00140\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00141}00141\ \ \ \ \ \textcolor{comment}{//\ Calculate\ the\ rectangle}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00142}00142\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{int32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{topCornerX}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{area}}.\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle_ab67ba6ac0175a62fbda64d780acf3e82}{left}};}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00143}00143\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{int32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{topCornerY}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{area}}.\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle_a2c109f69f412add34e8e538bfe7fe597}{top}};}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00144}00144\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{int32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bottomCornerX}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{area}}.\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle_ab67ba6ac0175a62fbda64d780acf3e82}{left}}\ +\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{area}}.\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle_adcfd80cceb499bfb2b52a103c2b76950}{width}};}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00145}00145\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{int32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bottomCornerY}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{area}}.\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle_a2c109f69f412add34e8e538bfe7fe597}{top}}\ +\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{area}}.\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle_a02aa1de4cd8eef57646079bbedaf9c64}{height}};}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00146}00146\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00147}00147\ \ \ \ \ \textcolor{comment}{//\ Draw\ the\ background,\ a\ rectangle\ the\ size\ of\ the\ desktop\ of\ the\ given\ colour}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00148}00148\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{gc}}-\/>fill\_rectangle(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{topCornerX}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{topCornerY}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bottomCornerX}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bottomCornerY}},\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a896a64c54b7ef106d885b2ffaa75a125}{colour}});}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00149}00149\ \}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00150}00150\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00156}\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a2a92176a23c6c14aae6eb5b8309f0f2a}{00156}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a2a92176a23c6c14aae6eb5b8309f0f2a}{Desktop::add\_child}}(\mbox{\hyperlink{classMaxOS_1_1gui_1_1Widget}{Widget}}*\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{child\_widget}})\ \{}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00157}00157\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00158}00158\ \ \ \ \ \textcolor{comment}{//\ Check\ if\ the\ new\ widget\ is\ under\ the\ mouse}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00159}00159\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{underMouse}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{child\_widget}}-\/>contains\_coordinate(\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_abc5c381f4c7f5d06ff4d75dffcd4c6fa}{m\_mouse\_x}},\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a6db4632321b626d42c16b8f6762bca72}{m\_mouse\_y}});}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00160}00160\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00161}00161\ \ \ \ \ \textcolor{comment}{//\ If\ the\ mouse\ is\ over\ the\ widget\ then\ send\ a\ mouse\ leave\ event\ to\ the\ child\ widget\ as\ it\ is\ no\ longer\ under\ the\ mouse}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00162}00162\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{underMouse}})}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00163}00163\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1CompositeWidget_a163249a73f213654e580d119f8bd5faf}{CompositeWidget::on\_mouse\_leave\_widget}}(\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_abc5c381f4c7f5d06ff4d75dffcd4c6fa}{m\_mouse\_x}},\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a6db4632321b626d42c16b8f6762bca72}{m\_mouse\_y}});}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00164}00164\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00165}00165\ \ \ \ \ \textcolor{comment}{//\ Add\ the\ widget\ to\ the\ desktop}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00166}00166\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1CompositeWidget_a971347347276a0f3c031adbbfec27214}{CompositeWidget::add\_child}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{child\_widget}});}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00167}00167\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00168}00168\ \ \ \ \ \textcolor{comment}{//\ If\ the\ mouse\ is\ over\ the\ new\ widget\ then\ send\ a\ mouse\ enter\ event\ to\ the\ child\ widget}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00169}00169\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{underMouse}})}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00170}00170\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1CompositeWidget_aba24ecaf2e22b365cde4aba714944bd9}{CompositeWidget::on\_mouse\_enter\_widget}}(\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_abc5c381f4c7f5d06ff4d75dffcd4c6fa}{m\_mouse\_x}},\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a6db4632321b626d42c16b8f6762bca72}{m\_mouse\_y}});}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00171}00171\ \}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00172}00172\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00178}\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a5a3b42cad02c4ca4857522a5dd74e18e}{00178}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a5a3b42cad02c4ca4857522a5dd74e18e}{Desktop::on\_time}}(\mbox{\hyperlink{structMaxOS_1_1common_1_1Time}{common::Time}}\ \textcolor{keyword}{const}\&)\ \{}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00179}00179\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00180}00180\ \ \ \ \ \textcolor{comment}{//\ Check\ if\ anything\ is\ invalid\ and\ needs\ to\ be\ redrawn}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00181}00181\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_afff532fb8b06a71f747417c9bcc298e9}{m\_invalid\_areas}}.empty())}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00182}00182\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00183}00183\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00184}00184\ \ \ \ \ \textcolor{comment}{//\ Erase\ the\ mouse\ cursor}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00185}00185\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a9c8711df4cd42767f6d28740182f3b2c}{invert\_mouse\_cursor}}();}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00186}00186\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00187}00187\ \ \ \ \ \textcolor{comment}{//\ Loop\ through\ the\ invalid\ areas}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00188}00188\ \ \ \ \ \textcolor{keywordflow}{while}\ (!\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_afff532fb8b06a71f747417c9bcc298e9}{m\_invalid\_areas}}.empty())\ \{}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00189}00189\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00190}00190\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Redraw\ the\ m\_first\_memory\_chunk\ area}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00191}00191\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{Rectangle<int32\_t>}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{invalidArea}}\ =\ *(\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_afff532fb8b06a71f747417c9bcc298e9}{m\_invalid\_areas}}.begin());}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00192}00192\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_afff532fb8b06a71f747417c9bcc298e9}{m\_invalid\_areas}}.pop\_front();}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00193}00193\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1CompositeWidget_aa28704c620373a250a3f238c7a741779}{draw}}(\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_afea5b2944b2c9a3484c6c6e4f7ee823b}{m\_graphics\_context}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{invalidArea}});}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00194}00194\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00195}00195\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00196}00196\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00197}00197\ \ \ \ \ \textcolor{comment}{//\ Can\ now\ draw\ the\ mouse\ cursor}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00198}00198\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a9c8711df4cd42767f6d28740182f3b2c}{invert\_mouse\_cursor}}();}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00199}00199\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00200}00200\ \}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00201}00201\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00207}\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a7fbb339ab8bbdb8612f72d1547e2bd77}{00207}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Widget_a4cec72790bab262c00f480e0be87b518}{Desktop::invalidate}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{Rectangle<int32\_t>}}\&\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{area}})\ \{}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00208}00208\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00209}00209\ \ \ \ \ \textcolor{comment}{//\ Invalidate\ the\ area}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00210}00210\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a2e12df4145d37cef1f77c45a0b025ba0}{internal\_invalidate}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{area}},\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_afff532fb8b06a71f747417c9bcc298e9}{m\_invalid\_areas}}.begin(),\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_afff532fb8b06a71f747417c9bcc298e9}{m\_invalid\_areas}}.end());}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00211}00211\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00212}00212\ \}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00213}00213\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00214}00214\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00221}\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a63585ad6d0bc21eaf0492995c9622bef}{00221}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a63585ad6d0bc21eaf0492995c9622bef}{Desktop::on\_mouse\_move\_event}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{int8\_t}}\ x,\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{int8\_t}}\ y)\ \{}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00222}00222\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00223}00223\ \ \ \ \ \textcolor{comment}{//\ Calculate\ the\ m\_position\ of\ the\ mouse\ on\ the\ desktop}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00224}00224\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{Rectangle<int32\_t>}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{desktopPosition}}\ =\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Widget_a7ca01364da49cccb4b22327d049c96bc}{position}}();}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00225}00225\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{int32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{newMouseX}}\ =\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_abc5c381f4c7f5d06ff4d75dffcd4c6fa}{m\_mouse\_x}}\ +\ x;}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00226}00226\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{int32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{newMouseY}}\ =\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a6db4632321b626d42c16b8f6762bca72}{m\_mouse\_y}}\ +\ y;}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00227}00227\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00228}00228\ \ \ \ \ \textcolor{comment}{//\ Restrain\ the\ mouse\ to\ the\ desktop}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00229}00229\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{newMouseX}}\ <\ 0)\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{newMouseX}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00230}00230\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{newMouseY}}\ <\ 0)\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{newMouseY}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00231}00231\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{newMouseX}}\ >\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{desktopPosition}}.\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle_adcfd80cceb499bfb2b52a103c2b76950}{width}})\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{newMouseX}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{desktopPosition}}.\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle_adcfd80cceb499bfb2b52a103c2b76950}{width}}\ -\/\ 1;}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00232}00232\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{newMouseY}}\ >\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{desktopPosition}}.\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle_a02aa1de4cd8eef57646079bbedaf9c64}{height}})\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{newMouseY}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{desktopPosition}}.\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle_a02aa1de4cd8eef57646079bbedaf9c64}{height}}\ -\/\ 1;}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00233}00233\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00234}00234\ \ \ \ \ \textcolor{comment}{//\ Remove\ the\ old\ cursor\ from\ the\ screen\ as\ it\ will\ be\ redrawn\ in\ the\ new\ m\_position}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00235}00235\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a9c8711df4cd42767f6d28740182f3b2c}{invert\_mouse\_cursor}}();}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00236}00236\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00237}00237\ \ \ \ \ \textcolor{comment}{//\ If\ a\ widget\ is\ being\ dragged\ then\ pass\ the\ event\ to\ it}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00238}00238\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a9db701084fcabe155be0d064cf5994b0}{m\_dragged\_widget}}\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00239}00239\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a9db701084fcabe155be0d064cf5994b0}{m\_dragged\_widget}}-\/>\mbox{\hyperlink{classMaxOS_1_1drivers_1_1peripherals_1_1MouseEventHandler_aa16b98ffdd24c2dcfe5ba75de9f0ed25}{on\_mouse\_move\_event}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{newMouseX}}\ -\/\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_abc5c381f4c7f5d06ff4d75dffcd4c6fa}{m\_mouse\_x}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{newMouseY}}\ -\/\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a6db4632321b626d42c16b8f6762bca72}{m\_mouse\_y}});}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00240}00240\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00241}00241\ \ \ \ \ \textcolor{comment}{//\ Handle\ the\ mouse\ moving\ event\ (pass\ it\ to\ the\ widget\ that\ the\ mouse\ is\ over)}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00242}00242\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1CompositeWidget_a5e03ffeed59ad6fe0570bae54f3712e4}{CompositeWidget::on\_mouse\_move\_widget}}(\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_abc5c381f4c7f5d06ff4d75dffcd4c6fa}{m\_mouse\_x}},\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a6db4632321b626d42c16b8f6762bca72}{m\_mouse\_y}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{newMouseX}},}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00243}00243\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{newMouseY}});}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00244}00244\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00245}00245\ \ \ \ \ \textcolor{comment}{//\ Update\ the\ mouse\ m\_position}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00246}00246\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_abc5c381f4c7f5d06ff4d75dffcd4c6fa}{m\_mouse\_x}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{newMouseX}};}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00247}00247\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a6db4632321b626d42c16b8f6762bca72}{m\_mouse\_y}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{newMouseY}};}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00248}00248\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00249}00249\ \ \ \ \ \textcolor{comment}{//\ Draw\ the\ new\ cursor}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00250}00250\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a9c8711df4cd42767f6d28740182f3b2c}{invert\_mouse\_cursor}}();}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00251}00251\ \}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00252}00252\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00258}\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_af8910ac3b5333e49d958adebfd15ab8c}{00258}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_af8910ac3b5333e49d958adebfd15ab8c}{Desktop::on\_mouse\_down\_event}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}}\ button)\ \{}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00259}00259\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00260}00260\ \ \ \ \ \textcolor{comment}{//\ The\ widget\ that\ handled\ the\ event\ becomes\ the\ widget\ being\ dragged}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00261}00261\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a9db701084fcabe155be0d064cf5994b0}{m\_dragged\_widget}}\ =\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1CompositeWidget_a9d490001b65a0b9a3b174d62a78658e7}{CompositeWidget::on\_mouse\_button\_pressed}}(\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_abc5c381f4c7f5d06ff4d75dffcd4c6fa}{m\_mouse\_x}},\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a6db4632321b626d42c16b8f6762bca72}{m\_mouse\_y}},\ button);}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00262}00262\ \}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00263}00263\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00269}\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a374ab0a16647a3fbcd390d205e4c722c}{00269}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a374ab0a16647a3fbcd390d205e4c722c}{Desktop::on\_mouse\_up\_event}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}}\ button)\ \{}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00270}00270\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00271}00271\ \ \ \ \ \textcolor{comment}{//\ Pass\ the\ event\ to\ the\ widget}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00272}00272\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1CompositeWidget_a254f1339c904b4f9268908bc9321d9df}{CompositeWidget::on\_mouse\_button\_released}}(\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_abc5c381f4c7f5d06ff4d75dffcd4c6fa}{m\_mouse\_x}},\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a6db4632321b626d42c16b8f6762bca72}{m\_mouse\_y}},\ button);}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00273}00273\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00274}00274\ \ \ \ \ \textcolor{comment}{//\ Dragging\ has\ stopped}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00275}00275\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a9db701084fcabe155be0d064cf5994b0}{m\_dragged\_widget}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00276}00276\ \}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00277}00277\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00283}\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_afdf09c58c2663d317961a4f027cfa3ea}{00283}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_afdf09c58c2663d317961a4f027cfa3ea}{Desktop::on\_key\_down}}(\mbox{\hyperlink{keyboard_8h_a891861cdf457ecedb7e3a5fa56515ebc}{KeyCode}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{keyDownCode}},\ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1peripherals_1_1KeyboardState}{KeyboardState}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{keyDownState}})\ \{}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00284}00284\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00285}00285\ \ \ \ \ \textcolor{comment}{//\ Pass\ the\ event\ to\ the\ widget\ that\ is\ \ in\ focus}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00286}00286\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_adc296de0e382f8bc7f8e160ca19738dd}{m\_focussed\_widget}}\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00287}00287\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_adc296de0e382f8bc7f8e160ca19738dd}{m\_focussed\_widget}}-\/>\mbox{\hyperlink{classMaxOS_1_1drivers_1_1peripherals_1_1KeyboardEventHandler_a77c8e7e0173fc39d738f37ccc03dcc1d}{on\_key\_down}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{keyDownCode}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{keyDownState}});}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00288}00288\ \}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00289}00289\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00295}\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a0ef21909cc5084a72f7b8fd478b3b292}{00295}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_a0ef21909cc5084a72f7b8fd478b3b292}{Desktop::on\_key\_up}}(\mbox{\hyperlink{keyboard_8h_a891861cdf457ecedb7e3a5fa56515ebc}{KeyCode}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{keyUpCode}},\ \mbox{\hyperlink{classMaxOS_1_1drivers_1_1peripherals_1_1KeyboardState}{KeyboardState}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{keyUpState}})\ \{}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00296}00296\ }
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00297}00297\ \ \ \ \ \textcolor{comment}{//\ Pass\ the\ event\ to\ the\ widget\ that\ is\ \ in\ focus}}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00298}00298\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_adc296de0e382f8bc7f8e160ca19738dd}{m\_focussed\_widget}}\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00299}00299\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1gui_1_1Desktop_adc296de0e382f8bc7f8e160ca19738dd}{m\_focussed\_widget}}-\/>\mbox{\hyperlink{classMaxOS_1_1drivers_1_1peripherals_1_1KeyboardEventHandler_a38aca82b74f83101f4dbc5b2b0b8d714}{on\_key\_up}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{keyUpCode}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{keyUpState}});}
\DoxyCodeLine{\Hypertarget{desktop_8cpp_source_l00300}00300\ \}}

\end{DoxyCode}
