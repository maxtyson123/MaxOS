\doxysection{Max\+OS\+::hardwarecommunication\+::IOAPIC Class Reference}
\hypertarget{classMaxOS_1_1hardwarecommunication_1_1IOAPIC}{}\label{classMaxOS_1_1hardwarecommunication_1_1IOAPIC}\index{MaxOS::hardwarecommunication::IOAPIC@{MaxOS::hardwarecommunication::IOAPIC}}


{\ttfamily \#include $<$apic.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_af96fb9be587b8753b64904faf955da41}{IOAPIC}} (\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1AdvancedConfigurationAndPowerInterface}{Advanced\+Configuration\+And\+Power\+Interface}} \texorpdfstring{$\ast$}{*}acpi)
\item 
\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_a85f4b21b3ad51fe70b4641dc3fc26a2b}{\texorpdfstring{$\sim$}{\string~}\+IOAPIC}} ()
\item 
uint32\+\_\+t \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_aec2c3262b7e6ebf56328706c7a8c8cd2}{read}} (uint32\+\_\+t reg) const
\begin{DoxyCompactList}\small\item\em Read a value from a IO Apic register. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_a0f5338f88ec6ebd490e657d6a01ce7d3}{write}} (uint32\+\_\+t reg, uint32\+\_\+t value) const
\begin{DoxyCompactList}\small\item\em Write a value to an IO Apic register. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_a4b794a1a0c15a6262dbd6075961b37c2}{set\+\_\+redirect}} (\mbox{\hyperlink{namespaceMaxOS_1_1hardwarecommunication_a8ed1467ecf3306e3f6d39deae897fbe9}{interrupt\+\_\+redirect\+\_\+t}} \texorpdfstring{$\ast$}{*}redirect)
\begin{DoxyCompactList}\small\item\em Redirect a system interrupt to a different IRQ. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_ad082ec1b5e7905789976e043b67902ac}{set\+\_\+redirect\+\_\+mask}} (uint8\+\_\+t index, bool \mbox{\hyperlink{apic_8h_a6f26bbb3e63b096143b8024debecedf9}{mask}})
\begin{DoxyCompactList}\small\item\em Enables/\+Disables an interrupt redirect by masking it. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_ac4e21cea354ff3edd2e715685340b084}{init}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{apic_8h_source_l00090}{90}} of file \mbox{\hyperlink{apic_8h_source}{apic.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_af96fb9be587b8753b64904faf955da41}\label{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_af96fb9be587b8753b64904faf955da41} 
\index{MaxOS::hardwarecommunication::IOAPIC@{MaxOS::hardwarecommunication::IOAPIC}!IOAPIC@{IOAPIC}}
\index{IOAPIC@{IOAPIC}!MaxOS::hardwarecommunication::IOAPIC@{MaxOS::hardwarecommunication::IOAPIC}}
\doxysubsubsection{\texorpdfstring{IOAPIC()}{IOAPIC()}}
{\footnotesize\ttfamily IOAPIC\+::\+IOAPIC (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1AdvancedConfigurationAndPowerInterface}{Advanced\+Configuration\+And\+Power\+Interface}} \texorpdfstring{$\ast$}{*}}]{acpi }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apic_8cpp_source_l00119}{119}} of file \mbox{\hyperlink{apic_8cpp_source}{apic.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00120\ :\ m\_acpi(acpi)}
\DoxyCodeLine{00121\ \{}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ information\ about\ the\ IO\ APIC}}
\DoxyCodeLine{00124\ \ \ \ \ m\_madt\ =\ (\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1MADT}{MADT}}*)\ m\_acpi-\/>\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1AdvancedConfigurationAndPowerInterface_a8e9d8bd9fbb18e25419101be8d56aee2}{find}}(\textcolor{stringliteral}{"{}APIC"{}});}
\DoxyCodeLine{00125\ \ \ \ \ \mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1MADT__Item}{MADT\_Item}}*\ io\_apic\_item\ =\ get\_madt\_item(1,\ 0);}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ IO\ APIC}}
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keyword}{auto}*\ io\_apic\ =\ (\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1MADT__IOAPIC}{MADT\_IOAPIC}}*)\ \mbox{\hyperlink{classMaxOS_1_1memory_1_1PhysicalMemoryManager_a1ad616354df4569df849c6f1331cd4b4}{PhysicalMemoryManager::to\_io\_region}}((uint64\_t)\ io\_apic\_item\ +\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1MADT__Item}{MADT\_Item}}));}
\DoxyCodeLine{00129\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1memory_1_1PhysicalMemoryManager_aac616421554f724ac8810d5bff76c3f1}{PhysicalMemoryManager::s\_current\_manager}}-\/>\mbox{\hyperlink{classMaxOS_1_1memory_1_1PhysicalMemoryManager_a732ea9bd93397bbddd596bee127ac8f3}{map}}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{physical\_address\_t}}*)\ io\_apic\_item,\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{virtual\_address\_t}}*)\ (io\_apic\ -\/\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1MADT__Item}{MADT\_Item}})),\ \mbox{\hyperlink{namespaceMaxOS_1_1memory_ae0e83b5743a37b4d0d2a93bb3bbe84eba980a5bc5e6393398f4e52e1c27bdd382}{Present}}\ |\ \mbox{\hyperlink{namespaceMaxOS_1_1memory_ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151}{Write}});}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{comment}{//\ Map\ the\ IO\ APIC\ address\ to\ the\ higher\ half}}
\DoxyCodeLine{00132\ \ \ \ \ m\_address\ =\ io\_apic-\/>io\_apic\_address;}
\DoxyCodeLine{00133\ \ \ \ \ m\_address\_high\ =\ (uint64\_t)\ \mbox{\hyperlink{classMaxOS_1_1memory_1_1PhysicalMemoryManager_a1ad616354df4569df849c6f1331cd4b4}{PhysicalMemoryManager::to\_io\_region}}(m\_address);}
\DoxyCodeLine{00134\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1memory_1_1PhysicalMemoryManager_aac616421554f724ac8810d5bff76c3f1}{PhysicalMemoryManager::s\_current\_manager}}-\/>\mbox{\hyperlink{classMaxOS_1_1memory_1_1PhysicalMemoryManager_a732ea9bd93397bbddd596bee127ac8f3}{map}}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{physical\_address\_t}}*)\ m\_address,\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{virtual\_address\_t}}*)\ m\_address\_high,\ \mbox{\hyperlink{namespaceMaxOS_1_1memory_ae0e83b5743a37b4d0d2a93bb3bbe84eba980a5bc5e6393398f4e52e1c27bdd382}{Present}}\ |\ \mbox{\hyperlink{namespaceMaxOS_1_1memory_ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151}{Write}});}
\DoxyCodeLine{00135\ \ \ \ \ \mbox{\hyperlink{classLogger_a1df434c9cd82457b6830c0500731a601}{Logger::DEBUG}}()\ <<\ \textcolor{stringliteral}{"{}IO\ APIC\ Address:\ phy=0x"{}}\ <<\ m\_address\ <<\ \textcolor{stringliteral}{"{},\ virt=0x"{}}\ <<\ m\_address\_high\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ IO\ APIC\ version\ and\ max\ redirection\ entry}}
\DoxyCodeLine{00138\ \ \ \ \ m\_version\ =\ \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_aec2c3262b7e6ebf56328706c7a8c8cd2}{read}}(0x1);}
\DoxyCodeLine{00139\ \ \ \ \ m\_max\_redirect\_entry\ =\ (uint8\_t)\ (m\_version\ >>\ 16);}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{comment}{//\ Log\ the\ IO\ APIC\ information}}
\DoxyCodeLine{00142\ \ \ \ \ \mbox{\hyperlink{classLogger_a1df434c9cd82457b6830c0500731a601}{Logger::DEBUG}}()\ <<\ \textcolor{stringliteral}{"{}IO\ APIC\ Version:\ 0x"{}}\ <<\ (uint64\_t)\ (m\_version\ \&\ 0xFF)\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00143\ \ \ \ \ \mbox{\hyperlink{classLogger_a1df434c9cd82457b6830c0500731a601}{Logger::DEBUG}}()\ <<\ \textcolor{stringliteral}{"{}IO\ APIC\ Max\ Redirection\ Entry:\ 0x"{}}\ <<\ (uint64\_t)\ m\_max\_redirect\_entry\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ source\ override\ item}}
\DoxyCodeLine{00146\ \ \ \ \ \mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1MADT__Item}{MADT\_Item}}*\ source\_override\_item\ =\ get\_madt\_item(2,\ m\_override\_array\_size);}
\DoxyCodeLine{00147\ \ \ \ \ uint32\_t\ total\_length\ =\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1MADT}{MADT}});}
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{keywordflow}{while}\ (total\_length\ <\ m\_madt-\/>\mbox{\hyperlink{apic_8h_ac1917477d23b262f1ffcc1694ee8f44c}{header}}.\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1ACPISDTHeader_a9b8a6a7e086a520cf52a4ea1cdc87670}{length}}\ \&\&\ m\_override\_array\_size\ <\ 0x10)\ \{\ \textcolor{comment}{//\ 0x10\ is\ the\ max\ items}}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ total\_length\ +=\ source\_override\_item-\/>\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1MADT__Item_a8ae742e1634bb48ad45c89c138860ab0}{length}};}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ there\ is\ an\ override,\ populate\ the\ array}}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (source\_override\_item\ !=\ \textcolor{keyword}{nullptr}\ \&\&\ source\_override\_item-\/>\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1MADT__Item_a5cf5df5cd6dfc74c87ef49bd9f7cf73e}{type}}\ ==\ 2)\ \{}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ the\ override\ and\ populate\ the\ array}}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}*\ \textcolor{keyword}{override}\ =\ (\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1Override}{Override}}*)\ (source\_override\_item\ +\ 1);}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ m\_override\_array[m\_override\_array\_size].\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1Override_a7a966c37b284b11470c63189098a9b7f}{bus}}\ =\ \textcolor{keyword}{override}-\/>bus;}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ m\_override\_array[m\_override\_array\_size].\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1Override_a392523c46f36a7a67186bfbd29529fd5}{source}}\ =\ \textcolor{keyword}{override}-\/>source;}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ m\_override\_array[m\_override\_array\_size].\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1Override_a52096e997dedf8c3f6d928cb6b69f0c0}{global\_system\_interrupt}}\ =\ \textcolor{keyword}{override}-\/>global\_system\_interrupt;}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ m\_override\_array[m\_override\_array\_size].\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1Override_a7b2854e157c0cf2293592d280dcffd67}{flags}}\ =\ \textcolor{keyword}{override}-\/>flags;}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ m\_override\_array\_size++;}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ the\ next\ item}}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ source\_override\_item\ =\ get\_madt\_item(2,\ m\_override\_array\_size);}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (source\_override\_item\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00168\ \ \ \ \ \}}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ \ \ \mbox{\hyperlink{classLogger_a1df434c9cd82457b6830c0500731a601}{Logger::DEBUG}}()\ <<\ \textcolor{stringliteral}{"{}IO\ APIC\ Source\ Overrides:\ 0x"{}}\ <<\ m\_override\_array\_size\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00171\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{apic_8h_source_l00084}{Max\+OS\+::hardwarecommunication\+::\+Override\+::bus}}, \mbox{\hyperlink{logger_8cpp_source_l00168}{Logger\+::\+DEBUG()}}, \mbox{\hyperlink{acpi_8cpp_source_l00106}{Max\+OS\+::hardwarecommunication\+::\+Advanced\+Configuration\+And\+Power\+Interface\+::find()}}, \mbox{\hyperlink{apic_8h_source_l00087}{Max\+OS\+::hardwarecommunication\+::\+Override\+::flags}}, \mbox{\hyperlink{apic_8h_source_l00086}{Max\+OS\+::hardwarecommunication\+::\+Override\+::global\+\_\+system\+\_\+interrupt}}, \mbox{\hyperlink{apic_8h_source_l00000}{header}}, \mbox{\hyperlink{acpi_8h_source_l00036}{Max\+OS\+::hardwarecommunication\+::\+ACPISDTHeader\+::length}}, \mbox{\hyperlink{apic_8h_source_l00046}{Max\+OS\+::hardwarecommunication\+::\+MADT\+\_\+\+Item\+::length}}, \mbox{\hyperlink{physical_8cpp_source_l00520}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::map()}}, \mbox{\hyperlink{physical_8h_source_l00033}{Max\+OS\+::memory\+::\+Present}}, \mbox{\hyperlink{apic_8cpp_source_l00218}{read()}}, \mbox{\hyperlink{physical_8h_source_l00160}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::s\+\_\+current\+\_\+manager}}, \mbox{\hyperlink{apic_8h_source_l00085}{Max\+OS\+::hardwarecommunication\+::\+Override\+::source}}, \mbox{\hyperlink{physical_8cpp_source_l00927}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::to\+\_\+io\+\_\+region()}}, \mbox{\hyperlink{apic_8h_source_l00045}{Max\+OS\+::hardwarecommunication\+::\+MADT\+\_\+\+Item\+::type}}, and \mbox{\hyperlink{physical_8h_source_l00034}{Max\+OS\+::memory\+::\+Write}}.

\Hypertarget{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_a85f4b21b3ad51fe70b4641dc3fc26a2b}\label{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_a85f4b21b3ad51fe70b4641dc3fc26a2b} 
\index{MaxOS::hardwarecommunication::IOAPIC@{MaxOS::hardwarecommunication::IOAPIC}!````~IOAPIC@{\texorpdfstring{$\sim$}{\string~}IOAPIC}}
\index{````~IOAPIC@{\texorpdfstring{$\sim$}{\string~}IOAPIC}!MaxOS::hardwarecommunication::IOAPIC@{MaxOS::hardwarecommunication::IOAPIC}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}IOAPIC()}{\string~IOAPIC()}}
{\footnotesize\ttfamily IOAPIC\+::\texorpdfstring{$\sim$}{\string~}\+IOAPIC (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



\doxysubsection{Member Function Documentation}
\Hypertarget{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_ac4e21cea354ff3edd2e715685340b084}\label{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_ac4e21cea354ff3edd2e715685340b084} 
\index{MaxOS::hardwarecommunication::IOAPIC@{MaxOS::hardwarecommunication::IOAPIC}!init@{init}}
\index{init@{init}!MaxOS::hardwarecommunication::IOAPIC@{MaxOS::hardwarecommunication::IOAPIC}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily void Max\+OS\+::hardwarecommunication\+::\+IOAPIC\+::init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\Hypertarget{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_aec2c3262b7e6ebf56328706c7a8c8cd2}\label{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_aec2c3262b7e6ebf56328706c7a8c8cd2} 
\index{MaxOS::hardwarecommunication::IOAPIC@{MaxOS::hardwarecommunication::IOAPIC}!read@{read}}
\index{read@{read}!MaxOS::hardwarecommunication::IOAPIC@{MaxOS::hardwarecommunication::IOAPIC}}
\doxysubsubsection{\texorpdfstring{read()}{read()}}
{\footnotesize\ttfamily uint32\+\_\+t IOAPIC\+::read (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{reg }\end{DoxyParamCaption}) const}



Read a value from a IO Apic register. 


\begin{DoxyParams}{Parameters}
{\em reg} & The register to read from \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The value at the register 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{apic_8cpp_source_l00218}{218}} of file \mbox{\hyperlink{apic_8cpp_source}{apic.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \ \ \ \ \textcolor{comment}{//\ Tell\ the\ APIC\ what\ register\ to\ read\ from}}
\DoxyCodeLine{00221\ \ \ \ \ *(\textcolor{keyword}{volatile}\ uint32\_t*)\ (m\_address\_high\ +\ 0x00)\ =\ reg;}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00223\ \ \ \ \ \textcolor{comment}{//\ Read\ the\ value}}
\DoxyCodeLine{00224\ \ \ \ \ \textcolor{keywordflow}{return}\ *(\textcolor{keyword}{volatile}\ uint32\_t*)\ (m\_address\_high\ +\ 0x10);}
\DoxyCodeLine{00225\ \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{apic_8cpp_source_l00119}{IOAPIC()}}.

\Hypertarget{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_a4b794a1a0c15a6262dbd6075961b37c2}\label{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_a4b794a1a0c15a6262dbd6075961b37c2} 
\index{MaxOS::hardwarecommunication::IOAPIC@{MaxOS::hardwarecommunication::IOAPIC}!set\_redirect@{set\_redirect}}
\index{set\_redirect@{set\_redirect}!MaxOS::hardwarecommunication::IOAPIC@{MaxOS::hardwarecommunication::IOAPIC}}
\doxysubsubsection{\texorpdfstring{set\_redirect()}{set\_redirect()}}
{\footnotesize\ttfamily void IOAPIC\+::set\+\_\+redirect (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespaceMaxOS_1_1hardwarecommunication_a8ed1467ecf3306e3f6d39deae897fbe9}{interrupt\+\_\+redirect\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{redirect }\end{DoxyParamCaption})}



Redirect a system interrupt to a different IRQ. 


\begin{DoxyParams}{Parameters}
{\em redirect} & The redirection entry \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{apic_8cpp_source_l00287}{287}} of file \mbox{\hyperlink{apic_8cpp_source}{apic.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00289\ \ \ \ \ \textcolor{comment}{//\ Create\ the\ redirection\ entry}}
\DoxyCodeLine{00290\ \ \ \ \ \mbox{\hyperlink{unionMaxOS_1_1hardwarecommunication_1_1RedirectionEntry}{RedirectionEntry}}\ entry\ =\ \{\};}
\DoxyCodeLine{00291\ \ \ \ \ entry.\mbox{\hyperlink{unionMaxOS_1_1hardwarecommunication_1_1RedirectionEntry_aa32d100a3e49b6c0f5b07d1566415dc2}{raw}}\ =\ redirect-\/>\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1InterruptRedirect_a66e385615027b38ab772dfa150053ade}{flags}}\ |\ (redirect-\/>\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1InterruptRedirect_a28f96793915501b0a202a4e34e9f1426}{interrupt}}\ \&\ 0xFF);}
\DoxyCodeLine{00292\ \ \ \ \ entry.\mbox{\hyperlink{unionMaxOS_1_1hardwarecommunication_1_1RedirectionEntry_a811baa508c6ca51ad98537c17439529f}{destination}}\ =\ redirect-\/>\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1InterruptRedirect_abae45c69e03fe32708e2e795526e34b8}{destination}};}
\DoxyCodeLine{00293\ \ \ \ \ entry.\mbox{\hyperlink{unionMaxOS_1_1hardwarecommunication_1_1RedirectionEntry_aadf5b364be23f4bb80d87d12107fbee5}{mask}}\ =\ redirect-\/>\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1InterruptRedirect_a74924917fd3f253b298c092e1b5fc719}{mask}};}
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00295\ \ \ \ \ \textcolor{comment}{//\ Check\ if\ a\ global\ system\ interrupt\ is\ used}}
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{keywordflow}{for}\ (uint8\_t\ i\ =\ 0;\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ m\_override\_array\_size;\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}++)\ \{}
\DoxyCodeLine{00297\ }
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_override\_array[i].\mbox{\hyperlink{apic_8h_a36a99c772ae64e186f5264a662834eef}{source}}\ !=\ redirect-\/>\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1InterruptRedirect_a76765f5aa84e5fb559be5ec37eb8d5d8}{type}})}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ the\ lower\ 4\ bits\ of\ the\ pin}}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ entry.\mbox{\hyperlink{unionMaxOS_1_1hardwarecommunication_1_1RedirectionEntry_ab8c3cc93c370cff4594e269d1120770c}{pin\_polarity}}\ =\ ((m\_override\_array[\mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}].\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1Override_a7b2854e157c0cf2293592d280dcffd67}{flags}}\ \&\ 0b11)\ ==\ 2)\ ?\ 0b1\ :\ 0b0;}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ entry.\mbox{\hyperlink{unionMaxOS_1_1hardwarecommunication_1_1RedirectionEntry_ab8c3cc93c370cff4594e269d1120770c}{pin\_polarity}}\ =\ (((m\_override\_array[\mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}].\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1Override_a7b2854e157c0cf2293592d280dcffd67}{flags}}\ >>\ 2)\ \&\ 0b11)\ ==\ 2)\ ?\ 0b1\ :\ 0b0;}
\DoxyCodeLine{00304\ }
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ the\ trigger\ mode}}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ entry.\mbox{\hyperlink{unionMaxOS_1_1hardwarecommunication_1_1RedirectionEntry_ac34cba0b60090294c8f936423b43f762}{trigger\_mode}}\ =\ (((m\_override\_array[\mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}].\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1Override_a7b2854e157c0cf2293592d280dcffd67}{flags}}\ >>\ 2)\ \&\ 0b11)\ ==\ 2);}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00308\ }
\DoxyCodeLine{00309\ \ \ \ \ \}}
\DoxyCodeLine{00310\ }
\DoxyCodeLine{00311\ \ \ \ \ \textcolor{comment}{//\ Write\ the\ redirect}}
\DoxyCodeLine{00312\ \ \ \ \ write\_redirect(redirect-\/>\mbox{\hyperlink{structMaxOS_1_1hardwarecommunication_1_1InterruptRedirect_a2053b8d74b7cd332244eab0ea86aa656}{index}},\ \&entry);}
\DoxyCodeLine{00313\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{apic_8h_source_l00067}{Max\+OS\+::hardwarecommunication\+::\+Redirection\+Entry\+::destination}}, \mbox{\hyperlink{apic_8h_source_l00077}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Redirect\+::destination}}, \mbox{\hyperlink{apic_8h_source_l00078}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Redirect\+::flags}}, \mbox{\hyperlink{apic_8h_source_l00087}{Max\+OS\+::hardwarecommunication\+::\+Override\+::flags}}, \mbox{\hyperlink{apic_8h_source_l00075}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Redirect\+::index}}, \mbox{\hyperlink{apic_8h_source_l00076}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Redirect\+::interrupt}}, \mbox{\hyperlink{apic_8h_source_l00065}{Max\+OS\+::hardwarecommunication\+::\+Redirection\+Entry\+::mask}}, \mbox{\hyperlink{apic_8h_source_l00079}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Redirect\+::mask}}, \mbox{\hyperlink{apic_8h_source_l00062}{Max\+OS\+::hardwarecommunication\+::\+Redirection\+Entry\+::pin\+\_\+polarity}}, \mbox{\hyperlink{apic_8h_source_l00070}{Max\+OS\+::hardwarecommunication\+::\+Redirection\+Entry\+::raw}}, \mbox{\hyperlink{apic_8h_source_l00001}{source}}, \mbox{\hyperlink{apic_8h_source_l00064}{Max\+OS\+::hardwarecommunication\+::\+Redirection\+Entry\+::trigger\+\_\+mode}}, and \mbox{\hyperlink{apic_8h_source_l00074}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Redirect\+::type}}.



Referenced by \mbox{\hyperlink{interrupts_8cpp_source_l00013}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Handler\+::\+Interrupt\+Handler()}}, and \mbox{\hyperlink{clock_8cpp_source_l00260}{Max\+OS\+::drivers\+::clock\+::\+PIT\+::ticks\+\_\+per\+\_\+ms()}}.

\Hypertarget{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_ad082ec1b5e7905789976e043b67902ac}\label{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_ad082ec1b5e7905789976e043b67902ac} 
\index{MaxOS::hardwarecommunication::IOAPIC@{MaxOS::hardwarecommunication::IOAPIC}!set\_redirect\_mask@{set\_redirect\_mask}}
\index{set\_redirect\_mask@{set\_redirect\_mask}!MaxOS::hardwarecommunication::IOAPIC@{MaxOS::hardwarecommunication::IOAPIC}}
\doxysubsubsection{\texorpdfstring{set\_redirect\_mask()}{set\_redirect\_mask()}}
{\footnotesize\ttfamily void IOAPIC\+::set\+\_\+redirect\+\_\+mask (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{index,  }\item[{bool}]{mask }\end{DoxyParamCaption})}



Enables/\+Disables an interrupt redirect by masking it. 


\begin{DoxyParams}{Parameters}
{\em index} & The index of the redirect mask \\
\hline
{\em mask} & True = masked = disabled, False = unmasked = enabled \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{apic_8cpp_source_l00321}{321}} of file \mbox{\hyperlink{apic_8cpp_source}{apic.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00322\ }
\DoxyCodeLine{00323\ \ \ \ \ \textcolor{comment}{//\ Read\ the\ current\ entry}}
\DoxyCodeLine{00324\ \ \ \ \ \mbox{\hyperlink{unionMaxOS_1_1hardwarecommunication_1_1RedirectionEntry}{RedirectionEntry}}\ entry\ =\ \{\};}
\DoxyCodeLine{00325\ \ \ \ \ read\_redirect(index,\ \&entry);}
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00327\ \ \ \ \ \textcolor{comment}{//\ Set\ the\ mask}}
\DoxyCodeLine{00328\ \ \ \ \ entry.\mbox{\hyperlink{unionMaxOS_1_1hardwarecommunication_1_1RedirectionEntry_aadf5b364be23f4bb80d87d12107fbee5}{mask}}\ =\ \mbox{\hyperlink{apic_8h_a6f26bbb3e63b096143b8024debecedf9}{mask}};}
\DoxyCodeLine{00329\ \ \ \ \ write\_redirect(index,\ \&entry);}
\DoxyCodeLine{00330\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{apic_8h_source_l00007}{mask}}, and \mbox{\hyperlink{apic_8h_source_l00065}{Max\+OS\+::hardwarecommunication\+::\+Redirection\+Entry\+::mask}}.



Referenced by \mbox{\hyperlink{clock_8cpp_source_l00260}{Max\+OS\+::drivers\+::clock\+::\+PIT\+::ticks\+\_\+per\+\_\+ms()}}.

\Hypertarget{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_a0f5338f88ec6ebd490e657d6a01ce7d3}\label{classMaxOS_1_1hardwarecommunication_1_1IOAPIC_a0f5338f88ec6ebd490e657d6a01ce7d3} 
\index{MaxOS::hardwarecommunication::IOAPIC@{MaxOS::hardwarecommunication::IOAPIC}!write@{write}}
\index{write@{write}!MaxOS::hardwarecommunication::IOAPIC@{MaxOS::hardwarecommunication::IOAPIC}}
\doxysubsubsection{\texorpdfstring{write()}{write()}}
{\footnotesize\ttfamily void IOAPIC\+::write (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{reg,  }\item[{uint32\+\_\+t}]{value }\end{DoxyParamCaption}) const}



Write a value to an IO Apic register. 


\begin{DoxyParams}{Parameters}
{\em reg} & The register to write to \\
\hline
{\em value} & The value to set the register to \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The value at the register 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{apic_8cpp_source_l00234}{234}} of file \mbox{\hyperlink{apic_8cpp_source}{apic.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \ \ \ \ \textcolor{comment}{//\ Write\ the\ register}}
\DoxyCodeLine{00237\ \ \ \ \ *(\textcolor{keyword}{volatile}\ uint32\_t*)\ (m\_address\_high\ +\ 0x00)\ =\ reg;}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \ \ \ \ \textcolor{comment}{//\ Write\ the\ value}}
\DoxyCodeLine{00240\ \ \ \ \ *(\textcolor{keyword}{volatile}\ uint32\_t*)\ (m\_address\_high\ +\ 0x10)\ =\ value;}
\DoxyCodeLine{00241\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/include/hardwarecommunication/\mbox{\hyperlink{apic_8h}{apic.\+h}}\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/src/hardwarecommunication/\mbox{\hyperlink{apic_8cpp}{apic.\+cpp}}\end{DoxyCompactItemize}
