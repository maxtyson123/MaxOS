\doxysection{Max\+OS\+::filesystem\+::format\+::ext2\+::Ext2\+Volume Class Reference}
\hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume}{}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume}\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}


{\ttfamily \#include $<$ext2.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a4d627232293c978be4f587224170dc9b}{Ext2\+Volume}} (\mbox{\hyperlink{classMaxOS_1_1drivers_1_1disk_1_1Disk}{drivers\+::disk\+::\+Disk}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_af92c050fd33ce1edb06897b9c5fe0862}{disk}}, \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a7436ecf891301b9a4c9edb52212151db}{partition\+\_\+offset}})
\item 
\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a85af61d689225472c2c26f8a330f2f6c}{\texorpdfstring{$\sim$}{\string~}\+Ext2\+Volume}} ()
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_aab2449336fe290292f64260781a4871b}{write\+\_\+block}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\+\_\+num}}, \mbox{\hyperlink{namespaceMaxOS_1_1common_ae34c2f95637029a49836360ddf075b3d}{common\+::buffer\+\_\+t}} \texorpdfstring{$\ast$}{*}buffer)
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a2c24524148772b3666f9b8e1858a16f2}{write\+\_\+inode}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\+\_\+num}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{ext2_8h_a84dc3916ea975b79482a6d01f78c3d9f}{inode}})
\begin{DoxyCompactList}\small\item\em Write an inode to the filesystem. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a657c2f9cd60960648f1e1cec6d95a144}{create\+\_\+inode}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bool}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{is\+\_\+directory}})
\begin{DoxyCompactList}\small\item\em Allocates a new inode and sets the base metadata. Also allocates block 0 of the inode. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a4acd208a882871ef4ce89ab5e297e31c}{free\+\_\+inode}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{ext2_8h_a84dc3916ea975b79482a6d01f78c3d9f}{inode}})
\begin{DoxyCompactList}\small\item\em Mark an inode as free. Note\+: does NOT unallocated the inodes blocks, use free\+\_\+group\+\_\+blocks(). \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ae4dc8f1dc35d79da9a4a577cf66792f3}{read\+\_\+block}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\+\_\+num}}, \mbox{\hyperlink{namespaceMaxOS_1_1common_ae34c2f95637029a49836360ddf075b3d}{common\+::buffer\+\_\+t}} \texorpdfstring{$\ast$}{*}buffer) \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a3ea16aa4dc886e18b353c1f4a3076100}{read\+\_\+inode}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\+\_\+num}}) \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}}
\begin{DoxyCompactList}\small\item\em Read an inode from the filesystem. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ae2440f7c00021606ee91f68983abf206}{allocate\+\_\+block}} ()
\begin{DoxyCompactList}\small\item\em Allocates a single block to be used by an inode. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Vector}{common\+::\+Vector}}$<$ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} $>$ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_acf68810ccb0f9cdb2b9491c077710205}{allocate\+\_\+blocks}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{amount}})
\begin{DoxyCompactList}\small\item\em Allocates a set of blocks to be used by an inode. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_af9769f68d14aa0c2c44b9313c151eafc}{bytes\+\_\+to\+\_\+blocks}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{size\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bytes}}) \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}}
\begin{DoxyCompactList}\small\item\em How many blocks are needed to contain a set amount of bytes. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_afee2108a1f09f919a3cafff60f3bc5dd}{free\+\_\+blocks}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Vector}{common\+::\+Vector}}$<$ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} $>$ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{blocks}})
\begin{DoxyCompactList}\small\item\em Frees a group of blocks. Preferably with adjacent blocks apearing next to each other but not enforced. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1drivers_1_1disk_1_1Disk}{drivers\+::disk\+::\+Disk}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_af92c050fd33ce1edb06897b9c5fe0862}{disk}}
\item 
\mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a7436ecf891301b9a4c9edb52212151db}{partition\+\_\+offset}}
\item 
superblock\+\_\+t \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}
\item 
block\+\_\+group\+\_\+descriptor\+\_\+t \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a28e53f409de30340066785e5a0d94993}{block\+\_\+groups}}
\item 
size\+\_\+t \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500}{block\+\_\+size}}
\item 
uint32\+\_\+t \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a568c077e33ab4a474c65cfcaf934b215}{block\+\_\+group\+\_\+descriptor\+\_\+table\+\_\+block}}
\item 
uint32\+\_\+t \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a7e8c97da6e5a645d3c69ec277b9f9a2e}{block\+\_\+group\+\_\+descriptor\+\_\+table\+\_\+size}}
\item 
uint32\+\_\+t \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ac5a90acfd7dd067a9fa54e4a1ea0e707}{total\+\_\+block\+\_\+groups}}
\item 
size\+\_\+t \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a6a06e6d63e1762b1921e67931e6bd3c7}{pointers\+\_\+per\+\_\+block}}
\item 
uint32\+\_\+t \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_abc67bb9fb290354dca9c09c4ca5ff43d}{inodes\+\_\+per\+\_\+block}}
\item 
uint32\+\_\+t \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_aa2fb31420bd869e0f42e672e6ede97b2}{sectors\+\_\+per\+\_\+block}}
\item 
uint32\+\_\+t \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a7ddfbe5a0d61831f3ee40ebb6c5f2cde}{blocks\+\_\+per\+\_\+inode\+\_\+table}}
\item 
uint32\+\_\+t \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a27730d8b9c0f817d5b08531121e393eb}{sectors\+\_\+per\+\_\+inode\+\_\+table}}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Spinlock}{common\+::\+Spinlock}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a07e488e15a650d14870a5d9654b23193}{ext2\+\_\+lock}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{ext2_8h_source_l00227}{227}} of file \mbox{\hyperlink{ext2_8h_source}{ext2.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a4d627232293c978be4f587224170dc9b}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a4d627232293c978be4f587224170dc9b} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!Ext2Volume@{Ext2Volume}}
\index{Ext2Volume@{Ext2Volume}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{Ext2Volume()}{Ext2Volume()}}
{\footnotesize\ttfamily Ext2\+Volume\+::\+Ext2\+Volume (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1drivers_1_1disk_1_1Disk}{drivers\+::disk\+::\+Disk}} \texorpdfstring{$\ast$}{*}}]{disk,  }\item[{\mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\+\_\+t}}}]{partition\+\_\+offset }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{ext2_8cpp_source_l00015}{15}} of file \mbox{\hyperlink{ext2_8cpp_source}{ext2.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00016\ :\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_af92c050fd33ce1edb06897b9c5fe0862}{disk}}(\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_af92c050fd33ce1edb06897b9c5fe0862}{disk}}),}
\DoxyCodeLine{00017\ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a7436ecf891301b9a4c9edb52212151db}{partition\_offset}}(\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a7436ecf891301b9a4c9edb52212151db}{partition\_offset}})}
\DoxyCodeLine{00018\ \{}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{comment}{//\ Read\ superblock}}
\DoxyCodeLine{00021\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer}{buffer\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{superblock\_buffer}}(\&\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}},\ 1024);}
\DoxyCodeLine{00022\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_af92c050fd33ce1edb06897b9c5fe0862}{disk}}-\/>\mbox{\hyperlink{classMaxOS_1_1drivers_1_1disk_1_1Disk_a9fa1c1952cece4f322ba0f2552f16c24}{read}}(\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a7436ecf891301b9a4c9edb52212151db}{partition\_offset}}\ +\ 2,\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{superblock\_buffer}},\ 512);}
\DoxyCodeLine{00023\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_af92c050fd33ce1edb06897b9c5fe0862}{disk}}-\/>\mbox{\hyperlink{classMaxOS_1_1drivers_1_1disk_1_1Disk_a9fa1c1952cece4f322ba0f2552f16c24}{read}}(\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a7436ecf891301b9a4c9edb52212151db}{partition\_offset}}\ +\ 3,\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{superblock\_buffer}},\ 512);}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{comment}{//\ Validate\ signature}}
\DoxyCodeLine{00026\ \ \ \ \ \mbox{\hyperlink{logger_8h_adf7b5d69e4c25995b3211b91b27f33b6}{ASSERT}}(\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.signature\ ==\ 0xEF53,\ \textcolor{stringliteral}{"{}Ext2\ Filesystem\ doesnt\ have\ a\ valid\ signature\(\backslash\)n"{}});}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{comment}{//\ Version\ 0\ has\ constant\ inode\ info}}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.version\_major\ <\ 1)\ \{}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.first\_inode\ =\ 11;}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.inode\_size\ =\ 128;}
\DoxyCodeLine{00032\ \ \ \ \ \}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{comment}{//\ Parse\ the\ superblock}}
\DoxyCodeLine{00035\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500}{block\_size}}\ =\ 1024\ <<\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.block\_size;}
\DoxyCodeLine{00036\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ac5a90acfd7dd067a9fa54e4a1ea0e707}{total\_block\_groups}}\ =\ (\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.total\_blocks\ +\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.blocks\_per\_group\ -\/\ 1)\ /\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.blocks\_per\_group;}
\DoxyCodeLine{00037\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a568c077e33ab4a474c65cfcaf934b215}{block\_group\_descriptor\_table\_block}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.starting\_block\ +\ 1;}
\DoxyCodeLine{00038\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a7e8c97da6e5a645d3c69ec277b9f9a2e}{block\_group\_descriptor\_table\_size}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ac5a90acfd7dd067a9fa54e4a1ea0e707}{total\_block\_groups}}\ *\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group\_descriptor\_t}});}
\DoxyCodeLine{00039\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a6a06e6d63e1762b1921e67931e6bd3c7}{pointers\_per\_block}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500}{block\_size}}\ /\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}});}
\DoxyCodeLine{00040\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_abc67bb9fb290354dca9c09c4ca5ff43d}{inodes\_per\_block}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500}{block\_size}}\ /\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.inode\_size;}
\DoxyCodeLine{00041\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_aa2fb31420bd869e0f42e672e6ede97b2}{sectors\_per\_block}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500}{block\_size}}\ /\ 512;}
\DoxyCodeLine{00042\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a7ddfbe5a0d61831f3ee40ebb6c5f2cde}{blocks\_per\_inode\_table}}\ =\ (\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.inode\_size\ *\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.inodes\_per\_group\ +\ (\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500}{block\_size}}\ -\/\ 1))\ /\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500}{block\_size}};}
\DoxyCodeLine{00043\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a27730d8b9c0f817d5b08531121e393eb}{sectors\_per\_inode\_table}}\ =\ (\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.inode\_size\ *\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.inodes\_per\_group\ +\ (512\ -\/\ 1))\ /\ 512;}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{comment}{//\ Read\ the\ block\ groups}}
\DoxyCodeLine{00046\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a28e53f409de30340066785e5a0d94993}{block\_groups}}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group\_descriptor\_t}}\ *[\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ac5a90acfd7dd067a9fa54e4a1ea0e707}{total\_block\_groups}}]\{\textcolor{keyword}{nullptr}\};}
\DoxyCodeLine{00047\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bgdt\_lba}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a7436ecf891301b9a4c9edb52212151db}{partition\_offset}}\ +\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a568c077e33ab4a474c65cfcaf934b215}{block\_group\_descriptor\_table\_block}}\ *\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_aa2fb31420bd869e0f42e672e6ede97b2}{sectors\_per\_block}};}
\DoxyCodeLine{00048\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{sectors\_to\_read}}\ =\ (\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a7e8c97da6e5a645d3c69ec277b9f9a2e}{block\_group\_descriptor\_table\_size}}\ +\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500}{block\_size}}\ -\/\ 1)\ /\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500}{block\_size}}\ *\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_aa2fb31420bd869e0f42e672e6ede97b2}{sectors\_per\_block}};}
\DoxyCodeLine{00049\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer}{buffer\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_buffer}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{sectors\_to\_read}}\ *\ 512);}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ i\ =\ 0;\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{sectors\_to\_read}};\ ++\mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}})}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_af92c050fd33ce1edb06897b9c5fe0862}{disk}}-\/>\mbox{\hyperlink{classMaxOS_1_1drivers_1_1disk_1_1Disk_a9fa1c1952cece4f322ba0f2552f16c24}{read}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bgdt\_lba}}\ +\ i,\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_buffer}},\ 512);}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{comment}{//\ Store\ the\ block\ groups}}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ i\ =\ 0;\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ac5a90acfd7dd067a9fa54e4a1ea0e707}{total\_block\_groups}};\ ++\mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}})\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a28e53f409de30340066785e5a0d94993}{block\_groups}}[\mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}]\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group\_descriptor\_t}};}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{memoryIO_8h_a5d860365491e432b125606a6f8e464bc}{memcpy}}(\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a28e53f409de30340066785e5a0d94993}{block\_groups}}[i],\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_buffer}}.raw()\ +\ i\ *\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group\_descriptor\_t}}),\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group\_descriptor\_t}}));}
\DoxyCodeLine{00057\ \ \ \ \ \}}
\DoxyCodeLine{00058\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{logger_8h_source_l00089}{ASSERT}}, \mbox{\hyperlink{ext2_8h_source_l00248}{block\+\_\+group\+\_\+descriptor\+\_\+table\+\_\+block}}, \mbox{\hyperlink{ext2_8h_source_l00249}{block\+\_\+group\+\_\+descriptor\+\_\+table\+\_\+size}}, \mbox{\hyperlink{ext2_8h_source_l00245}{block\+\_\+groups}}, \mbox{\hyperlink{ext2_8h_source_l00247}{block\+\_\+size}}, \mbox{\hyperlink{ext2_8h_source_l00255}{blocks\+\_\+per\+\_\+inode\+\_\+table}}, \mbox{\hyperlink{ext2_8h_source_l00241}{disk}}, \mbox{\hyperlink{ext2_8h_source_l00252}{inodes\+\_\+per\+\_\+block}}, \mbox{\hyperlink{memoryIO_8cpp_source_l00136}{memcpy()}}, \mbox{\hyperlink{ext2_8h_source_l00242}{partition\+\_\+offset}}, \mbox{\hyperlink{ext2_8h_source_l00251}{pointers\+\_\+per\+\_\+block}}, \mbox{\hyperlink{disk_8cpp_source_l00022}{Max\+OS\+::drivers\+::disk\+::\+Disk\+::read()}}, \mbox{\hyperlink{ext2_8h_source_l00253}{sectors\+\_\+per\+\_\+block}}, \mbox{\hyperlink{ext2_8h_source_l00256}{sectors\+\_\+per\+\_\+inode\+\_\+table}}, \mbox{\hyperlink{ext2_8h_source_l00244}{superblock}}, and \mbox{\hyperlink{ext2_8h_source_l00250}{total\+\_\+block\+\_\+groups}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a85af61d689225472c2c26f8a330f2f6c}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a85af61d689225472c2c26f8a330f2f6c} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!````~Ext2Volume@{\texorpdfstring{$\sim$}{\string~}Ext2Volume}}
\index{````~Ext2Volume@{\texorpdfstring{$\sim$}{\string~}Ext2Volume}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}Ext2Volume()}{\string~Ext2Volume()}}
{\footnotesize\ttfamily Ext2\+Volume\+::\texorpdfstring{$\sim$}{\string~}\+Ext2\+Volume (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



\doxysubsection{Member Function Documentation}
\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ae2440f7c00021606ee91f68983abf206}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ae2440f7c00021606ee91f68983abf206} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!allocate\_block@{allocate\_block}}
\index{allocate\_block@{allocate\_block}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{allocate\_block()}{allocate\_block()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} Ext2\+Volume\+::allocate\+\_\+block (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Allocates a single block to be used by an inode. 

\begin{DoxyReturn}{Returns}
The new block number or 0 if the allocation failed 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{ext2_8cpp_source_l00164}{164}} of file \mbox{\hyperlink{ext2_8cpp_source}{ext2.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_acf68810ccb0f9cdb2b9491c077710205}{allocate\_blocks}}(1)[0];}
\DoxyCodeLine{00167\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{ext2_8cpp_source_l00175}{allocate\+\_\+blocks()}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00357}{create\+\_\+inode()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_acf68810ccb0f9cdb2b9491c077710205}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_acf68810ccb0f9cdb2b9491c077710205} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!allocate\_blocks@{allocate\_blocks}}
\index{allocate\_blocks@{allocate\_blocks}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{allocate\_blocks()}{allocate\_blocks()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Vector}{Vector}}$<$ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} $>$ Ext2\+Volume\+::allocate\+\_\+blocks (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{amount }\end{DoxyParamCaption})}



Allocates a set of blocks to be used by an inode. 


\begin{DoxyParams}{Parameters}
{\em amount} & The amount of blocks to allocate \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A list of the allocated blocks or \mbox{[}0\mbox{]} if the allocation failed 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{ext2_8cpp_source_l00175}{175}} of file \mbox{\hyperlink{ext2_8cpp_source}{ext2.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{comment}{//\ No\ blocks\ to\ allocate}}
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{amount}})}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{1,\ 0\};}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{comment}{//\ Find\ the\ block\ group\ with\ enough\ free\ blocks}}
\DoxyCodeLine{00182\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group\_descriptor\_t}}\ *\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a28e53f409de30340066785e5a0d94993}{block\_groups}}[0];}
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_index}}\ =\ 0;\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_index}}\ <\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ac5a90acfd7dd067a9fa54e4a1ea0e707}{total\_block\_groups}};\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a28e53f409de30340066785e5a0d94993}{block\_groups}}[++\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_index}}])}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group}}-\/>free\_blocks\ >=\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{amount}})}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ allocate\_group\_blocks(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_index}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{amount}});}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{comment}{//\ No\ block\ group\ can\ contain\ the\ block\ so\ split\ across\ multiple}}
\DoxyCodeLine{00188\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{Vector<uint32\_t>}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{result}}\{\};}
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{amount}}\ >\ 0)\ \{}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Find\ the\ block\ group\ with\ most\ free\ blocks}}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a28e53f409de30340066785e5a0d94993}{block\_groups}}[0];}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_index}}\ =\ 0;}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_index}}\ <\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ac5a90acfd7dd067a9fa54e4a1ea0e707}{total\_block\_groups}};\ ++\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_index}})}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a28e53f409de30340066785e5a0d94993}{block\_groups}}[\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_index}}]-\/>\mbox{\hyperlink{ext2_8h_a46b8adeeefed1d348a063313271a3699}{free\_blocks}}\ >\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group}}-\/>free\_blocks)}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a28e53f409de30340066785e5a0d94993}{block\_groups}}[\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_index}}];}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ No\ space}}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group}}-\/>free\_blocks\ ==\ 0)}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{1,\ 0\};}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Allocate\ the\ remaining\ blocks}}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ allocated\ =\ allocate\_group\_blocks(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_index}},\ 1);}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{amount}}\ -\/=\ allocated.size();}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block}}:\ allocated)}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{result}}.push\_back(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block}});}
\DoxyCodeLine{00207\ \ \ \ \ \}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{result}};}
\DoxyCodeLine{00210\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{ext2_8h_source_l00245}{block\+\_\+groups}}, \mbox{\hyperlink{ext2_8h_source_l00003}{free\+\_\+blocks}}, and \mbox{\hyperlink{ext2_8h_source_l00250}{total\+\_\+block\+\_\+groups}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00164}{allocate\+\_\+block()}}, and \mbox{\hyperlink{ext2_8cpp_source_l00655}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Inode\+Handler\+::grow()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_af9769f68d14aa0c2c44b9313c151eafc}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_af9769f68d14aa0c2c44b9313c151eafc} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!bytes\_to\_blocks@{bytes\_to\_blocks}}
\index{bytes\_to\_blocks@{bytes\_to\_blocks}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{bytes\_to\_blocks()}{bytes\_to\_blocks()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} Ext2\+Volume\+::bytes\+\_\+to\+\_\+blocks (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{size\+\_\+t}}}]{bytes }\end{DoxyParamCaption}) const}



How many blocks are needed to contain a set amount of bytes. 


\begin{DoxyParams}{Parameters}
{\em bytes} & Bytes needed \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The blocks required 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{ext2_8cpp_source_l00347}{347}} of file \mbox{\hyperlink{ext2_8cpp_source}{ext2.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00348\ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bytes}}\ +\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500}{block\_size}}\ -\/\ 1)\ /\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500}{block\_size}};}
\DoxyCodeLine{00349\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{ext2_8h_source_l00247}{block\+\_\+size}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00655}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Inode\+Handler\+::grow()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a657c2f9cd60960648f1e1cec6d95a144}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a657c2f9cd60960648f1e1cec6d95a144} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!create\_inode@{create\_inode}}
\index{create\_inode@{create\_inode}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{create\_inode()}{create\_inode()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} Ext2\+Volume\+::create\+\_\+inode (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bool}}}]{is\+\_\+directory }\end{DoxyParamCaption})}



Allocates a new inode and sets the base metadata. Also allocates block 0 of the inode. 


\begin{DoxyParams}{Parameters}
{\em is\+\_\+directory} & is the inode to be used for a directory \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The new inode 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{ext2_8cpp_source_l00357}{357}} of file \mbox{\hyperlink{ext2_8cpp_source}{ext2.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00358\ }
\DoxyCodeLine{00359\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a07e488e15a650d14870a5d9654b23193}{ext2\_lock}}.\mbox{\hyperlink{classMaxOS_1_1common_1_1Spinlock_a27a03c3d6b4cdd677e7d16e59689e38e}{lock}}();}
\DoxyCodeLine{00360\ }
\DoxyCodeLine{00361\ \ \ \ \ \textcolor{comment}{//\ Find\ the\ block\ group\ with\ enough\ free\ inodes}}
\DoxyCodeLine{00362\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group\_descriptor\_t}}\ *\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a28e53f409de30340066785e5a0d94993}{block\_groups}}[0];}
\DoxyCodeLine{00363\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_index}}\ =\ 0;}
\DoxyCodeLine{00364\ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_index}}\ <\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ac5a90acfd7dd067a9fa54e4a1ea0e707}{total\_block\_groups}};\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a28e53f409de30340066785e5a0d94993}{block\_groups}}[++\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_index}}])}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group}}-\/>free\_inodes\ >=\ 1)}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00367\ }
\DoxyCodeLine{00368\ \ \ \ \ \textcolor{comment}{//\ Read\ bitmap}}
\DoxyCodeLine{00369\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer}{buffer\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bitmap}}(\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500}{block\_size}});}
\DoxyCodeLine{00370\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ae4dc8f1dc35d79da9a4a577cf66792f3}{read\_block}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group}}-\/>block\_inode\_bitmap,\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bitmap}});}
\DoxyCodeLine{00371\ }
\DoxyCodeLine{00372\ \ \ \ \ \textcolor{comment}{//\ First\ group\ contains\ reserved\ inodes}}
\DoxyCodeLine{00373\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_index}}\ =\ 0;}
\DoxyCodeLine{00374\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_index}}\ ==\ 0\ \&\&\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.first\_inode\ >\ 1)}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_index}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.first\_inode\ -\/\ 1;}
\DoxyCodeLine{00376\ }
\DoxyCodeLine{00377\ \ \ \ \ \textcolor{comment}{//\ Find\ a\ free\ inode}}
\DoxyCodeLine{00378\ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_index}}\ <\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.inodes\_per\_group;\ ++\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_index}})\ \{}
\DoxyCodeLine{00379\ }
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Block\ is\ already\ used}}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bitmap}}.raw()[\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_index}}\ /\ 8]\ \&\ (1u\ <<\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_index}}\ \%\ 8)))\ !=\ 0)}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00383\ }
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Mark\ as\ used}}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group}}-\/>free\_inodes-\/-\/;}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.unallocated\_inodes-\/-\/;}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bitmap}}.raw()[\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_index}}\ /\ 8]\ |=\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}})\ (1u\ <<\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_index}}\ \%\ 8));}
\DoxyCodeLine{00388\ }
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00390\ \ \ \ \ \}}
\DoxyCodeLine{00391\ }
\DoxyCodeLine{00392\ \ \ \ \ \textcolor{comment}{//\ Convert\ into\ the\ 1-\/based\ inode\ index\ in\ the\ group}}
\DoxyCodeLine{00393\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_index}}\ +=\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_index}}\ *\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.inodes\_per\_group\ +\ 1;}
\DoxyCodeLine{00394\ }
\DoxyCodeLine{00395\ \ \ \ \ \textcolor{comment}{//\ Save\ the\ changed\ metadata}}
\DoxyCodeLine{00396\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_aab2449336fe290292f64260781a4871b}{write\_block}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group}}-\/>block\_inode\_bitmap,\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bitmap}});}
\DoxyCodeLine{00397\ \ \ \ \ write\_back\_block\_groups();}
\DoxyCodeLine{00398\ \ \ \ \ write\_back\_superblock();}
\DoxyCodeLine{00399\ }
\DoxyCodeLine{00400\ \ \ \ \ \textcolor{comment}{//\ Create\ the\ inode}}
\DoxyCodeLine{00401\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_t}}\ \mbox{\hyperlink{ext2_8h_a84dc3916ea975b79482a6d01f78c3d9f}{inode}}\{\};}
\DoxyCodeLine{00402\ \ \ \ \ \mbox{\hyperlink{ext2_8h_a84dc3916ea975b79482a6d01f78c3d9f}{inode}}.creation\_time\ =\ time\_to\_epoch(\mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1Clock_af6e633c389f02276b3c76ee4ff2c65bb}{Clock::active\_clock}}()-\/>get\_time());}
\DoxyCodeLine{00403\ \ \ \ \ \mbox{\hyperlink{ext2_8h_a84dc3916ea975b79482a6d01f78c3d9f}{inode}}.last\_modification\_time\ =\ time\_to\_epoch(\mbox{\hyperlink{classMaxOS_1_1drivers_1_1clock_1_1Clock_af6e633c389f02276b3c76ee4ff2c65bb}{Clock::active\_clock}}()-\/>get\_time());}
\DoxyCodeLine{00404\ \ \ \ \ \mbox{\hyperlink{ext2_8h_a84dc3916ea975b79482a6d01f78c3d9f}{inode}}.block\_pointers[0]\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ae2440f7c00021606ee91f68983abf206}{allocate\_block}}();}
\DoxyCodeLine{00405\ \ \ \ \ \mbox{\hyperlink{ext2_8h_a84dc3916ea975b79482a6d01f78c3d9f}{inode}}.hard\_links\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{is\_directory}}\ ?\ 2\ :\ 1;}
\DoxyCodeLine{00406\ \ \ \ \ \mbox{\hyperlink{ext2_8h_a84dc3916ea975b79482a6d01f78c3d9f}{inode}}.type\ =\ ((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{is\_directory}}\ ?\ \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_1_1format_1_1ext2_a1cb56516e5efe8eb3332d6a1d64e007ba28766b4be065d0c806c2e9c9d914af48}{InodeType::DIRECTORY}}\ :\ \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_1_1format_1_1ext2_a1cb56516e5efe8eb3332d6a1d64e007b}{InodeType}}::\mbox{\hyperlink{namespaceMaxOS_1_1filesystem_1_1format_1_1ext2_a1cb56516e5efe8eb3332d6a1d64e007ba9fc5887c030f7a3e19821ebec457e719}{FILE}})\ >>\ 12)\ \&\ 0xF;}
\DoxyCodeLine{00407\ \ \ \ \ \mbox{\hyperlink{ext2_8h_a84dc3916ea975b79482a6d01f78c3d9f}{inode}}.permissions\ =}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint16\_t}})\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{is\_directory}}\ ?\ \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_1_1format_1_1ext2_a3e6abe2885e285bee96b1708ba14bac1a28766b4be065d0c806c2e9c9d914af48}{InodePermissionsDefaults::DIRECTORY}}\ :\ \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_1_1format_1_1ext2_a3e6abe2885e285bee96b1708ba14bac1}{InodePermissionsDefaults}}::\mbox{\hyperlink{namespaceMaxOS_1_1filesystem_1_1format_1_1ext2_a1cb56516e5efe8eb3332d6a1d64e007ba9fc5887c030f7a3e19821ebec457e719}{FILE}})\ \&\ 0x0FFF;}
\DoxyCodeLine{00409\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a2c24524148772b3666f9b8e1858a16f2}{write\_inode}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_index}},\ \&\mbox{\hyperlink{ext2_8h_a84dc3916ea975b79482a6d01f78c3d9f}{inode}});}
\DoxyCodeLine{00410\ }
\DoxyCodeLine{00411\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a07e488e15a650d14870a5d9654b23193}{ext2\_lock}}.\mbox{\hyperlink{classMaxOS_1_1common_1_1Spinlock_a7c26334ccfa43ef932ef3c73e2c11492}{unlock}}();}
\DoxyCodeLine{00412\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_index}};}
\DoxyCodeLine{00413\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{clock_8cpp_source_l00223}{Max\+OS\+::drivers\+::clock\+::\+Clock\+::active\+\_\+clock()}}, \mbox{\hyperlink{ext2_8cpp_source_l00164}{allocate\+\_\+block()}}, \mbox{\hyperlink{ext2_8h_source_l00245}{block\+\_\+groups}}, \mbox{\hyperlink{ext2_8h_source_l00247}{block\+\_\+size}}, \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_1_1format_1_1ext2_a1cb56516e5efe8eb3332d6a1d64e007ba28766b4be065d0c806c2e9c9d914af48}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+DIRECTORY}}, \mbox{\hyperlink{ext2_8h_source_l00258}{ext2\+\_\+lock}}, \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_1_1format_1_1ext2_a1cb56516e5efe8eb3332d6a1d64e007ba9fc5887c030f7a3e19821ebec457e719}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+FILE}}, \mbox{\hyperlink{ext2_8h_source_l00000}{inode}}, \mbox{\hyperlink{spinlock_8cpp_source_l00022}{Max\+OS\+::common\+::\+Spinlock\+::lock()}}, \mbox{\hyperlink{ext2_8cpp_source_l00117}{read\+\_\+block()}}, \mbox{\hyperlink{ext2_8h_source_l00244}{superblock}}, \mbox{\hyperlink{ext2_8h_source_l00250}{total\+\_\+block\+\_\+groups}}, \mbox{\hyperlink{spinlock_8cpp_source_l00031}{Max\+OS\+::common\+::\+Spinlock\+::unlock()}}, \mbox{\hyperlink{ext2_8cpp_source_l00068}{write\+\_\+block()}}, and \mbox{\hyperlink{ext2_8cpp_source_l00090}{write\+\_\+inode()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_afee2108a1f09f919a3cafff60f3bc5dd}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_afee2108a1f09f919a3cafff60f3bc5dd} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!free\_blocks@{free\_blocks}}
\index{free\_blocks@{free\_blocks}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{free\_blocks()}{free\_blocks()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} Ext2\+Volume\+::free\+\_\+blocks (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Vector}{common\+::\+Vector}}$<$ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} $>$ \&}]{blocks }\end{DoxyParamCaption})}



Frees a group of blocks. Preferably with adjacent blocks apearing next to each other but not enforced. 


\begin{DoxyParams}{Parameters}
{\em blocks} & The blocks to free \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{ext2_8cpp_source_l00451}{451}} of file \mbox{\hyperlink{ext2_8cpp_source}{ext2.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00452\ }
\DoxyCodeLine{00453\ \ \ \ \ \textcolor{comment}{//\ No\ blocks\ to\ free}}
\DoxyCodeLine{00454\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{blocks}}.empty())}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00456\ }
\DoxyCodeLine{00457\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{blocks}}[0];}
\DoxyCodeLine{00458\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{previous}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}};}
\DoxyCodeLine{00459\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{amount}}\ =\ 1;}
\DoxyCodeLine{00460\ }
\DoxyCodeLine{00461\ \ \ \ \ \textcolor{comment}{//\ Free\ each\ adjacent\ set\ of\ blocks}}
\DoxyCodeLine{00462\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block}}:\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{blocks}})\ \{}
\DoxyCodeLine{00463\ }
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ First\ is\ already\ accounted\ for}}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block}}\ ==\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}})}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00467\ }
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Is\ this\ block\ adjacent}}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{previous}}\ +\ 1)\ ==\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block}})\ \{}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{previous}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block}};}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{amount}}\ +=\ 1;}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00474\ }
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Adjacent\ set\ has\ ended}}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{group}}\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}}\ -\/\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.starting\_block)\ /\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.blocks\_per\_group;}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ free\_group\_blocks(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{group}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{amount}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}});}
\DoxyCodeLine{00478\ }
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reset}}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block}};}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{previous}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}};}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{amount}}\ =\ 1;}
\DoxyCodeLine{00483\ \ \ \ \ \}}
\DoxyCodeLine{00484\ }
\DoxyCodeLine{00485\ \ \ \ \ \textcolor{comment}{//\ Account\ for\ the\ last\ set\ of\ blocks\ in\ the\ loop}}
\DoxyCodeLine{00486\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{group}}\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}}\ -\/\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.starting\_block)\ /\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.blocks\_per\_group;}
\DoxyCodeLine{00487\ \ \ \ \ free\_group\_blocks(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{group}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{amount}},\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}});}
\DoxyCodeLine{00488\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{ext2_8h_source_l00244}{superblock}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00685}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Inode\+Handler\+::free()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a4acd208a882871ef4ce89ab5e297e31c}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a4acd208a882871ef4ce89ab5e297e31c} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!free\_inode@{free\_inode}}
\index{free\_inode@{free\_inode}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{free\_inode()}{free\_inode()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} Ext2\+Volume\+::free\+\_\+inode (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{inode }\end{DoxyParamCaption})}



Mark an inode as free. Note\+: does NOT unallocated the inodes blocks, use free\+\_\+group\+\_\+blocks(). 

\begin{DoxySeeAlso}{See also}
free\+\_\+group\+\_\+blocks
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em inode} & The inode number to mark as free \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{ext2_8cpp_source_l00421}{421}} of file \mbox{\hyperlink{ext2_8cpp_source}{ext2.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00422\ }
\DoxyCodeLine{00423\ \ \ \ \ \textcolor{comment}{//\ Find\ the\ block\ group\ containing\ the\ inode}}
\DoxyCodeLine{00424\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_index}}\ =\ (\mbox{\hyperlink{ext2_8h_a84dc3916ea975b79482a6d01f78c3d9f}{inode}}\ -\/\ 1)\ /\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.inodes\_per\_group;}
\DoxyCodeLine{00425\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group\_descriptor\_t}}\ *\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a28e53f409de30340066785e5a0d94993}{block\_groups}}[\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_index}}];}
\DoxyCodeLine{00426\ }
\DoxyCodeLine{00427\ \ \ \ \ \textcolor{comment}{//\ Read\ bitmap}}
\DoxyCodeLine{00428\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer}{buffer\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bitmap}}(\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500}{block\_size}});}
\DoxyCodeLine{00429\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ae4dc8f1dc35d79da9a4a577cf66792f3}{read\_block}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group}}-\/>block\_inode\_bitmap,\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bitmap}});}
\DoxyCodeLine{00430\ }
\DoxyCodeLine{00431\ \ \ \ \ \textcolor{comment}{//\ First\ group\ contains\ reserved\ inodes}}
\DoxyCodeLine{00432\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_index}}\ =\ (\mbox{\hyperlink{ext2_8h_a84dc3916ea975b79482a6d01f78c3d9f}{inode}}\ -\/\ 1)\ \%\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.inodes\_per\_group;}
\DoxyCodeLine{00433\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bg\_index}}\ ==\ 0\ \&\&\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_index}}\ <\ (\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.first\_inode\ -\/\ 1)))}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00435\ }
\DoxyCodeLine{00436\ \ \ \ \ \textcolor{comment}{//\ Mark\ as\ used}}
\DoxyCodeLine{00437\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group}}-\/>free\_inodes++;}
\DoxyCodeLine{00438\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.unallocated\_inodes++;}
\DoxyCodeLine{00439\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bitmap}}.raw()[\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_index}}\ /\ 8]\ \&=\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint8\_t}})\ \string~(1u\ <<\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_index}}\ \%\ 8));}
\DoxyCodeLine{00440\ }
\DoxyCodeLine{00441\ \ \ \ \ \textcolor{comment}{//\ Save\ the\ changed\ metadata}}
\DoxyCodeLine{00442\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_aab2449336fe290292f64260781a4871b}{write\_block}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_group}}-\/>block\_inode\_bitmap,\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bitmap}});}
\DoxyCodeLine{00443\ \ \ \ \ write\_back\_block\_groups();}
\DoxyCodeLine{00444\ \ \ \ \ write\_back\_superblock();}
\DoxyCodeLine{00445\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{ext2_8h_source_l00245}{block\+\_\+groups}}, \mbox{\hyperlink{ext2_8h_source_l00247}{block\+\_\+size}}, \mbox{\hyperlink{ext2_8h_source_l00000}{inode}}, \mbox{\hyperlink{ext2_8cpp_source_l00117}{read\+\_\+block()}}, \mbox{\hyperlink{ext2_8h_source_l00244}{superblock}}, and \mbox{\hyperlink{ext2_8cpp_source_l00068}{write\+\_\+block()}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00685}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Inode\+Handler\+::free()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ae4dc8f1dc35d79da9a4a577cf66792f3}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ae4dc8f1dc35d79da9a4a577cf66792f3} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!read\_block@{read\_block}}
\index{read\_block@{read\_block}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{read\_block()}{read\_block()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} Ext2\+Volume\+::read\+\_\+block (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{block\+\_\+num,  }\item[{\mbox{\hyperlink{namespaceMaxOS_1_1common_ae34c2f95637029a49836360ddf075b3d}{common\+::buffer\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{buffer }\end{DoxyParamCaption}) const}

@breif Reads a single block from the disk into a buffer


\begin{DoxyParams}{Parameters}
{\em block\+\_\+num} & The block to read \\
\hline
{\em buffer} & The buffer to read into \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{ext2_8cpp_source_l00117}{117}} of file \mbox{\hyperlink{ext2_8cpp_source}{ext2.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{comment}{//\ Ensure\ the\ buffer\ is\ in\ the\ right\ format}}
\DoxyCodeLine{00120\ \ \ \ \ buffer-\/>\mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer_a70eb6792fdd3cf6a5bf5812ec2caa07a}{set\_offset}}(0);}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{comment}{//\ Read\ each\ sector\ of\ the\ block}}
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_aa2fb31420bd869e0f42e672e6ede97b2}{sectors\_per\_block}};\ ++\mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}})}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_af92c050fd33ce1edb06897b9c5fe0862}{disk}}-\/>\mbox{\hyperlink{classMaxOS_1_1drivers_1_1disk_1_1Disk_a9fa1c1952cece4f322ba0f2552f16c24}{read}}(\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a7436ecf891301b9a4c9edb52212151db}{partition\_offset}}\ +\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_num}}\ *\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_aa2fb31420bd869e0f42e672e6ede97b2}{sectors\_per\_block}}\ +\ i,\ buffer,\ 512);}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{comment}{//\ Reset\ buffer}}
\DoxyCodeLine{00127\ \ \ \ \ buffer-\/>\mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer_a70eb6792fdd3cf6a5bf5812ec2caa07a}{set\_offset}}(0);}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{ext2_8h_source_l00241}{disk}}, \mbox{\hyperlink{ext2_8h_source_l00242}{partition\+\_\+offset}}, \mbox{\hyperlink{disk_8cpp_source_l00022}{Max\+OS\+::drivers\+::disk\+::\+Disk\+::read()}}, \mbox{\hyperlink{ext2_8h_source_l00253}{sectors\+\_\+per\+\_\+block}}, and \mbox{\hyperlink{buffer_8cpp_source_l00121}{Max\+OS\+::common\+::\+Buffer\+::set\+\_\+offset()}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00357}{create\+\_\+inode()}}, \mbox{\hyperlink{ext2_8cpp_source_l00421}{free\+\_\+inode()}}, \mbox{\hyperlink{ext2_8cpp_source_l00769}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+File\+::read()}}, \mbox{\hyperlink{ext2_8cpp_source_l00927}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Directory\+::read\+\_\+from\+\_\+disk()}}, \mbox{\hyperlink{ext2_8cpp_source_l00136}{read\+\_\+inode()}}, \mbox{\hyperlink{ext2_8cpp_source_l00715}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+File\+::write()}}, and \mbox{\hyperlink{ext2_8cpp_source_l00090}{write\+\_\+inode()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a3ea16aa4dc886e18b353c1f4a3076100}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a3ea16aa4dc886e18b353c1f4a3076100} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!read\_inode@{read\_inode}}
\index{read\_inode@{read\_inode}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{read\_inode()}{read\_inode()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\+\_\+t}} Ext2\+Volume\+::read\+\_\+inode (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{inode\+\_\+num }\end{DoxyParamCaption}) const}



Read an inode from the filesystem. 


\begin{DoxyParams}{Parameters}
{\em inode\+\_\+num} & The inode index \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{ext2_8cpp_source_l00136}{136}} of file \mbox{\hyperlink{ext2_8cpp_source}{ext2.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_t}}\ \mbox{\hyperlink{ext2_8h_a84dc3916ea975b79482a6d01f78c3d9f}{inode}};}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{comment}{//\ Locate\ the\ inode}}
\DoxyCodeLine{00141\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{group}}\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_num}}\ -\/\ 1)\ /\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.inodes\_per\_group;}
\DoxyCodeLine{00142\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ index\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_num}}\ -\/\ 1)\ \%\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.inodes\_per\_group;}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{comment}{//\ Locate\ the\ block}}
\DoxyCodeLine{00145\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_table}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a28e53f409de30340066785e5a0d94993}{block\_groups}}[\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{group}}]-\/>inode\_table\_address;}
\DoxyCodeLine{00146\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ offset\ =\ index\ *\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.inode\_size;}
\DoxyCodeLine{00147\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block}}\ =\ offset\ /\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500}{block\_size}};}
\DoxyCodeLine{00148\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{in\_block\_offset}}\ =\ offset\ \%\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500}{block\_size}};}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{comment}{//\ Read\ the\ block}}
\DoxyCodeLine{00151\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer}{buffer\_t}}\ buffer(\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500}{block\_size}});}
\DoxyCodeLine{00152\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ae4dc8f1dc35d79da9a4a577cf66792f3}{read\_block}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_table}}\ +\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block}},\ \&buffer);}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ \ \ \textcolor{comment}{//\ Read\ the\ inode\ from\ the\ block}}
\DoxyCodeLine{00155\ \ \ \ \ buffer.copy\_to(\&\mbox{\hyperlink{ext2_8h_a84dc3916ea975b79482a6d01f78c3d9f}{inode}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_t}}),\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{in\_block\_offset}});}
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{ext2_8h_a84dc3916ea975b79482a6d01f78c3d9f}{inode}};}
\DoxyCodeLine{00157\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{ext2_8h_source_l00245}{block\+\_\+groups}}, \mbox{\hyperlink{ext2_8h_source_l00247}{block\+\_\+size}}, \mbox{\hyperlink{buffer_8cpp_source_l00273}{Max\+OS\+::common\+::\+Buffer\+::copy\+\_\+to()}}, \mbox{\hyperlink{ext2_8h_source_l00000}{inode}}, \mbox{\hyperlink{ext2_8cpp_source_l00117}{read\+\_\+block()}}, and \mbox{\hyperlink{ext2_8h_source_l00244}{superblock}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_aab2449336fe290292f64260781a4871b}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_aab2449336fe290292f64260781a4871b} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!write\_block@{write\_block}}
\index{write\_block@{write\_block}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{write\_block()}{write\_block()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} Ext2\+Volume\+::write\+\_\+block (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{block\+\_\+num,  }\item[{\mbox{\hyperlink{namespaceMaxOS_1_1common_ae34c2f95637029a49836360ddf075b3d}{common\+::buffer\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{buffer }\end{DoxyParamCaption})}

@breif Write a single block from a buffer into onto the disk


\begin{DoxyParams}{Parameters}
{\em block\+\_\+num} & The block to update \\
\hline
{\em buffer} & The buffer to read from \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{ext2_8cpp_source_l00068}{68}} of file \mbox{\hyperlink{ext2_8cpp_source}{ext2.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{comment}{//\ Ensure\ the\ buffer\ is\ in\ the\ right\ format}}
\DoxyCodeLine{00071\ \ \ \ \ buffer-\/>\mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer_a70eb6792fdd3cf6a5bf5812ec2caa07a}{set\_offset}}(0);}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{old}}\ =\ buffer-\/>\mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer_a9faaca69a359d618544231d95ad5ae5a}{update\_offset}};}
\DoxyCodeLine{00073\ \ \ \ \ buffer-\/>\mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer_a9faaca69a359d618544231d95ad5ae5a}{update\_offset}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{comment}{//\ Read\ each\ sector\ of\ the\ block}}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_aa2fb31420bd869e0f42e672e6ede97b2}{sectors\_per\_block}};\ ++\mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}})}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_af92c050fd33ce1edb06897b9c5fe0862}{disk}}-\/>\mbox{\hyperlink{classMaxOS_1_1drivers_1_1disk_1_1Disk_a307fc8dc97cc4c8f3668a18a1e0257de}{write}}(\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a7436ecf891301b9a4c9edb52212151db}{partition\_offset}}\ +\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block\_num}}\ *\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_aa2fb31420bd869e0f42e672e6ede97b2}{sectors\_per\_block}}\ +\ i,\ buffer,\ 512);}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{comment}{//\ Reset\ buffer}}
\DoxyCodeLine{00080\ \ \ \ \ buffer-\/>\mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer_a70eb6792fdd3cf6a5bf5812ec2caa07a}{set\_offset}}(0);}
\DoxyCodeLine{00081\ \ \ \ \ buffer-\/>\mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer_a9faaca69a359d618544231d95ad5ae5a}{update\_offset}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{old}};}
\DoxyCodeLine{00082\ \};}

\end{DoxyCode}


References \mbox{\hyperlink{ext2_8h_source_l00241}{disk}}, \mbox{\hyperlink{ext2_8h_source_l00242}{partition\+\_\+offset}}, \mbox{\hyperlink{ext2_8h_source_l00253}{sectors\+\_\+per\+\_\+block}}, \mbox{\hyperlink{buffer_8cpp_source_l00121}{Max\+OS\+::common\+::\+Buffer\+::set\+\_\+offset()}}, \mbox{\hyperlink{buffer_8h_source_l00041}{Max\+OS\+::common\+::\+Buffer\+::update\+\_\+offset}}, and \mbox{\hyperlink{disk_8cpp_source_l00040}{Max\+OS\+::drivers\+::disk\+::\+Disk\+::write()}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00357}{create\+\_\+inode()}}, \mbox{\hyperlink{ext2_8cpp_source_l00421}{free\+\_\+inode()}}, \mbox{\hyperlink{ext2_8cpp_source_l00715}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+File\+::write()}}, and \mbox{\hyperlink{ext2_8cpp_source_l00090}{write\+\_\+inode()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a2c24524148772b3666f9b8e1858a16f2}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a2c24524148772b3666f9b8e1858a16f2} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!write\_inode@{write\_inode}}
\index{write\_inode@{write\_inode}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{write\_inode()}{write\_inode()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} Ext2\+Volume\+::write\+\_\+inode (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{inode\+\_\+num,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{inode }\end{DoxyParamCaption})}



Write an inode to the filesystem. 


\begin{DoxyParams}{Parameters}
{\em inode\+\_\+num} & The inode index \\
\hline
{\em inode} & The inode to read from \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{ext2_8cpp_source_l00090}{90}} of file \mbox{\hyperlink{ext2_8cpp_source}{ext2.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{comment}{//\ Locate\ the\ inode}}
\DoxyCodeLine{00093\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{group}}\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_num}}\ -\/\ 1)\ /\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.inodes\_per\_group;}
\DoxyCodeLine{00094\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ index\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_num}}\ -\/\ 1)\ \%\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.inodes\_per\_group;}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{comment}{//\ Locate\ the\ block}}
\DoxyCodeLine{00097\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_table}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a28e53f409de30340066785e5a0d94993}{block\_groups}}[\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{group}}]-\/>inode\_table\_address;}
\DoxyCodeLine{00098\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ offset\ =\ index\ *\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}{superblock}}.inode\_size;}
\DoxyCodeLine{00099\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block}}\ =\ offset\ /\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500}{block\_size}};}
\DoxyCodeLine{00100\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{in\_block\_offset}}\ =\ offset\ \%\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500}{block\_size}};}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{comment}{//\ Read\ the\ inode}}
\DoxyCodeLine{00103\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer}{buffer\_t}}\ buffer(\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500}{block\_size}});}
\DoxyCodeLine{00104\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ae4dc8f1dc35d79da9a4a577cf66792f3}{read\_block}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_table}}\ +\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block}},\ \&buffer);}
\DoxyCodeLine{00105\ \ \ \ \ buffer.copy\_from(\mbox{\hyperlink{ext2_8h_a84dc3916ea975b79482a6d01f78c3d9f}{inode}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_t}}),\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{in\_block\_offset}});}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{comment}{//\ Modify\ the\ block}}
\DoxyCodeLine{00108\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_aab2449336fe290292f64260781a4871b}{write\_block}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{inode\_table}}\ +\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{block}},\ \&buffer);}
\DoxyCodeLine{00109\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{ext2_8h_source_l00245}{block\+\_\+groups}}, \mbox{\hyperlink{ext2_8h_source_l00247}{block\+\_\+size}}, \mbox{\hyperlink{buffer_8cpp_source_l00186}{Max\+OS\+::common\+::\+Buffer\+::copy\+\_\+from()}}, \mbox{\hyperlink{ext2_8h_source_l00000}{inode}}, \mbox{\hyperlink{ext2_8cpp_source_l00117}{read\+\_\+block()}}, \mbox{\hyperlink{ext2_8h_source_l00244}{superblock}}, and \mbox{\hyperlink{ext2_8cpp_source_l00068}{write\+\_\+block()}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00357}{create\+\_\+inode()}}, and \mbox{\hyperlink{ext2_8cpp_source_l00677}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Inode\+Handler\+::save()}}.



\doxysubsection{Member Data Documentation}
\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a568c077e33ab4a474c65cfcaf934b215}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a568c077e33ab4a474c65cfcaf934b215} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!block\_group\_descriptor\_table\_block@{block\_group\_descriptor\_table\_block}}
\index{block\_group\_descriptor\_table\_block@{block\_group\_descriptor\_table\_block}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{block\_group\_descriptor\_table\_block}{block\_group\_descriptor\_table\_block}}
{\footnotesize\ttfamily uint32\+\_\+t Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Volume\+::block\+\_\+group\+\_\+descriptor\+\_\+table\+\_\+block}



Definition at line \mbox{\hyperlink{ext2_8h_source_l00248}{248}} of file \mbox{\hyperlink{ext2_8h_source}{ext2.\+h}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00015}{Ext2\+Volume()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a7e8c97da6e5a645d3c69ec277b9f9a2e}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a7e8c97da6e5a645d3c69ec277b9f9a2e} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!block\_group\_descriptor\_table\_size@{block\_group\_descriptor\_table\_size}}
\index{block\_group\_descriptor\_table\_size@{block\_group\_descriptor\_table\_size}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{block\_group\_descriptor\_table\_size}{block\_group\_descriptor\_table\_size}}
{\footnotesize\ttfamily uint32\+\_\+t Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Volume\+::block\+\_\+group\+\_\+descriptor\+\_\+table\+\_\+size}



Definition at line \mbox{\hyperlink{ext2_8h_source_l00249}{249}} of file \mbox{\hyperlink{ext2_8h_source}{ext2.\+h}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00015}{Ext2\+Volume()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a28e53f409de30340066785e5a0d94993}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a28e53f409de30340066785e5a0d94993} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!block\_groups@{block\_groups}}
\index{block\_groups@{block\_groups}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{block\_groups}{block\_groups}}
{\footnotesize\ttfamily block\+\_\+group\+\_\+descriptor\+\_\+t\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*} Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Volume\+::block\+\_\+groups}



Definition at line \mbox{\hyperlink{ext2_8h_source_l00245}{245}} of file \mbox{\hyperlink{ext2_8h_source}{ext2.\+h}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00175}{allocate\+\_\+blocks()}}, \mbox{\hyperlink{ext2_8cpp_source_l00357}{create\+\_\+inode()}}, \mbox{\hyperlink{ext2_8cpp_source_l00015}{Ext2\+Volume()}}, \mbox{\hyperlink{ext2_8cpp_source_l00421}{free\+\_\+inode()}}, \mbox{\hyperlink{ext2_8cpp_source_l00136}{read\+\_\+inode()}}, and \mbox{\hyperlink{ext2_8cpp_source_l00090}{write\+\_\+inode()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a10014d7b0ae0cc94ea281d0e6ca56500} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!block\_size@{block\_size}}
\index{block\_size@{block\_size}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{block\_size}{block\_size}}
{\footnotesize\ttfamily size\+\_\+t Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Volume\+::block\+\_\+size}



Definition at line \mbox{\hyperlink{ext2_8h_source_l00247}{247}} of file \mbox{\hyperlink{ext2_8h_source}{ext2.\+h}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00347}{bytes\+\_\+to\+\_\+blocks()}}, \mbox{\hyperlink{ext2_8cpp_source_l00357}{create\+\_\+inode()}}, \mbox{\hyperlink{ext2_8cpp_source_l00015}{Ext2\+Volume()}}, \mbox{\hyperlink{ext2_8cpp_source_l00421}{free\+\_\+inode()}}, \mbox{\hyperlink{ext2_8cpp_source_l00491}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Inode\+Handler\+::\+Inode\+Handler()}}, \mbox{\hyperlink{ext2_8cpp_source_l00769}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+File\+::read()}}, \mbox{\hyperlink{ext2_8cpp_source_l00927}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Directory\+::read\+\_\+from\+\_\+disk()}}, \mbox{\hyperlink{ext2_8cpp_source_l00136}{read\+\_\+inode()}}, \mbox{\hyperlink{ext2_8cpp_source_l00715}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+File\+::write()}}, and \mbox{\hyperlink{ext2_8cpp_source_l00090}{write\+\_\+inode()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a7ddfbe5a0d61831f3ee40ebb6c5f2cde}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a7ddfbe5a0d61831f3ee40ebb6c5f2cde} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!blocks\_per\_inode\_table@{blocks\_per\_inode\_table}}
\index{blocks\_per\_inode\_table@{blocks\_per\_inode\_table}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{blocks\_per\_inode\_table}{blocks\_per\_inode\_table}}
{\footnotesize\ttfamily uint32\+\_\+t Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Volume\+::blocks\+\_\+per\+\_\+inode\+\_\+table}



Definition at line \mbox{\hyperlink{ext2_8h_source_l00255}{255}} of file \mbox{\hyperlink{ext2_8h_source}{ext2.\+h}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00015}{Ext2\+Volume()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_af92c050fd33ce1edb06897b9c5fe0862}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_af92c050fd33ce1edb06897b9c5fe0862} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!disk@{disk}}
\index{disk@{disk}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{disk}{disk}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1drivers_1_1disk_1_1Disk}{drivers\+::disk\+::\+Disk}}\texorpdfstring{$\ast$}{*} Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Volume\+::disk}



Definition at line \mbox{\hyperlink{ext2_8h_source_l00241}{241}} of file \mbox{\hyperlink{ext2_8h_source}{ext2.\+h}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00015}{Ext2\+Volume()}}, \mbox{\hyperlink{ext2_8cpp_source_l00117}{read\+\_\+block()}}, and \mbox{\hyperlink{ext2_8cpp_source_l00068}{write\+\_\+block()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a07e488e15a650d14870a5d9654b23193}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a07e488e15a650d14870a5d9654b23193} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!ext2\_lock@{ext2\_lock}}
\index{ext2\_lock@{ext2\_lock}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{ext2\_lock}{ext2\_lock}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Spinlock}{common\+::\+Spinlock}} Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Volume\+::ext2\+\_\+lock}



Definition at line \mbox{\hyperlink{ext2_8h_source_l00258}{258}} of file \mbox{\hyperlink{ext2_8h_source}{ext2.\+h}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00357}{create\+\_\+inode()}}, \mbox{\hyperlink{ext2_8cpp_source_l00685}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Inode\+Handler\+::free()}}, \mbox{\hyperlink{ext2_8cpp_source_l00769}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+File\+::read()}}, \mbox{\hyperlink{ext2_8cpp_source_l00927}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Directory\+::read\+\_\+from\+\_\+disk()}}, and \mbox{\hyperlink{ext2_8cpp_source_l00715}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+File\+::write()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_abc67bb9fb290354dca9c09c4ca5ff43d}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_abc67bb9fb290354dca9c09c4ca5ff43d} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!inodes\_per\_block@{inodes\_per\_block}}
\index{inodes\_per\_block@{inodes\_per\_block}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{inodes\_per\_block}{inodes\_per\_block}}
{\footnotesize\ttfamily uint32\+\_\+t Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Volume\+::inodes\+\_\+per\+\_\+block}



Definition at line \mbox{\hyperlink{ext2_8h_source_l00252}{252}} of file \mbox{\hyperlink{ext2_8h_source}{ext2.\+h}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00015}{Ext2\+Volume()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a7436ecf891301b9a4c9edb52212151db}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a7436ecf891301b9a4c9edb52212151db} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!partition\_offset@{partition\_offset}}
\index{partition\_offset@{partition\_offset}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{partition\_offset}{partition\_offset}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\+\_\+t}} Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Volume\+::partition\+\_\+offset}



Definition at line \mbox{\hyperlink{ext2_8h_source_l00242}{242}} of file \mbox{\hyperlink{ext2_8h_source}{ext2.\+h}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00015}{Ext2\+Volume()}}, \mbox{\hyperlink{ext2_8cpp_source_l00117}{read\+\_\+block()}}, and \mbox{\hyperlink{ext2_8cpp_source_l00068}{write\+\_\+block()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a6a06e6d63e1762b1921e67931e6bd3c7}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a6a06e6d63e1762b1921e67931e6bd3c7} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!pointers\_per\_block@{pointers\_per\_block}}
\index{pointers\_per\_block@{pointers\_per\_block}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{pointers\_per\_block}{pointers\_per\_block}}
{\footnotesize\ttfamily size\+\_\+t Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Volume\+::pointers\+\_\+per\+\_\+block}



Definition at line \mbox{\hyperlink{ext2_8h_source_l00251}{251}} of file \mbox{\hyperlink{ext2_8h_source}{ext2.\+h}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00015}{Ext2\+Volume()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_aa2fb31420bd869e0f42e672e6ede97b2}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_aa2fb31420bd869e0f42e672e6ede97b2} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!sectors\_per\_block@{sectors\_per\_block}}
\index{sectors\_per\_block@{sectors\_per\_block}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{sectors\_per\_block}{sectors\_per\_block}}
{\footnotesize\ttfamily uint32\+\_\+t Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Volume\+::sectors\+\_\+per\+\_\+block}



Definition at line \mbox{\hyperlink{ext2_8h_source_l00253}{253}} of file \mbox{\hyperlink{ext2_8h_source}{ext2.\+h}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00015}{Ext2\+Volume()}}, \mbox{\hyperlink{ext2_8cpp_source_l00117}{read\+\_\+block()}}, and \mbox{\hyperlink{ext2_8cpp_source_l00068}{write\+\_\+block()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a27730d8b9c0f817d5b08531121e393eb}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a27730d8b9c0f817d5b08531121e393eb} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!sectors\_per\_inode\_table@{sectors\_per\_inode\_table}}
\index{sectors\_per\_inode\_table@{sectors\_per\_inode\_table}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{sectors\_per\_inode\_table}{sectors\_per\_inode\_table}}
{\footnotesize\ttfamily uint32\+\_\+t Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Volume\+::sectors\+\_\+per\+\_\+inode\+\_\+table}



Definition at line \mbox{\hyperlink{ext2_8h_source_l00256}{256}} of file \mbox{\hyperlink{ext2_8h_source}{ext2.\+h}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00015}{Ext2\+Volume()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_a95e333eca8856f08ba4bc1724541a4b7} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!superblock@{superblock}}
\index{superblock@{superblock}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{superblock}{superblock}}
{\footnotesize\ttfamily superblock\+\_\+t Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Volume\+::superblock}



Definition at line \mbox{\hyperlink{ext2_8h_source_l00244}{244}} of file \mbox{\hyperlink{ext2_8h_source}{ext2.\+h}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00357}{create\+\_\+inode()}}, \mbox{\hyperlink{ext2_8cpp_source_l00015}{Ext2\+Volume()}}, \mbox{\hyperlink{ext2_8cpp_source_l00451}{free\+\_\+blocks()}}, \mbox{\hyperlink{ext2_8cpp_source_l00421}{free\+\_\+inode()}}, \mbox{\hyperlink{ext2_8cpp_source_l00136}{read\+\_\+inode()}}, and \mbox{\hyperlink{ext2_8cpp_source_l00090}{write\+\_\+inode()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ac5a90acfd7dd067a9fa54e4a1ea0e707}\label{classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_ac5a90acfd7dd067a9fa54e4a1ea0e707} 
\index{MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}!total\_block\_groups@{total\_block\_groups}}
\index{total\_block\_groups@{total\_block\_groups}!MaxOS::filesystem::format::ext2::Ext2Volume@{MaxOS::filesystem::format::ext2::Ext2Volume}}
\doxysubsubsection{\texorpdfstring{total\_block\_groups}{total\_block\_groups}}
{\footnotesize\ttfamily uint32\+\_\+t Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Volume\+::total\+\_\+block\+\_\+groups}



Definition at line \mbox{\hyperlink{ext2_8h_source_l00250}{250}} of file \mbox{\hyperlink{ext2_8h_source}{ext2.\+h}}.



Referenced by \mbox{\hyperlink{ext2_8cpp_source_l00175}{allocate\+\_\+blocks()}}, \mbox{\hyperlink{ext2_8cpp_source_l00357}{create\+\_\+inode()}}, and \mbox{\hyperlink{ext2_8cpp_source_l00015}{Ext2\+Volume()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/include/filesystem/format/\mbox{\hyperlink{ext2_8h}{ext2.\+h}}\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/src/filesystem/format/\mbox{\hyperlink{ext2_8cpp}{ext2.\+cpp}}\end{DoxyCompactItemize}
