\hypertarget{classmaxOS_1_1net_1_1AddressResolutionProtocol}{}\doxysection{max\+OS\+::net\+::Address\+Resolution\+Protocol Class Reference}
\label{classmaxOS_1_1net_1_1AddressResolutionProtocol}\index{maxOS::net::AddressResolutionProtocol@{maxOS::net::AddressResolutionProtocol}}


{\ttfamily \#include $<$arp.\+h$>$}

Inheritance diagram for max\+OS\+::net\+::Address\+Resolution\+Protocol\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classmaxOS_1_1net_1_1AddressResolutionProtocol}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classmaxOS_1_1net_1_1AddressResolutionProtocol_af89ec96fda818531345f775d6e45fb3a}{Address\+Resolution\+Protocol}} (\mbox{\hyperlink{classmaxOS_1_1net_1_1EthernetFrameHandler}{Ethernet\+Frame\+Handler}} $\ast$ethernet\+Frame\+Handler, \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler}{Internet\+Protocol\+Handler}} $\ast$internet\+Protocol\+Handler, \mbox{\hyperlink{classmaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} $\ast$error\+Messages)
\item 
\mbox{\hyperlink{classmaxOS_1_1net_1_1AddressResolutionProtocol_a7a758dd73520b9498ce5a13a0d906855}{$\sim$\+Address\+Resolution\+Protocol}} ()
\item 
bool \mbox{\hyperlink{classmaxOS_1_1net_1_1AddressResolutionProtocol_a421fa84d80d81f8a75414aba472d0a09}{handle\+Ethernet\+Frame\+Payload}} (uint8\+\_\+t $\ast$\mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}}, uint32\+\_\+t \mbox{\hyperlink{multiboot_8h_a6d813a0f2b5281b18dea3f4cda696c33}{size}})
\begin{DoxyCompactList}\small\item\em Called when an A\+RP packet is received. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmaxOS_1_1net_1_1AddressResolutionProtocol_ad84350376c832ffd8519595245eb9f7f}{Request\+M\+A\+C\+Address}} (\mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{Internet\+Protocol\+Address}} \mbox{\hyperlink{amd__am79c973_8h_ac0d31ca829f934cccd89f8054e02773e}{address}})
\begin{DoxyCompactList}\small\item\em Request the M\+AC address of a given IP address. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1ethernet_a6fad3f62f91a21251eb141e990287b1c}{drivers\+::ethernet\+::\+Media\+Access\+Control\+Address}} \mbox{\hyperlink{classmaxOS_1_1net_1_1AddressResolutionProtocol_a6b6fc2de577ac511d1b38caa2f470f50}{Resolve}} (\mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{Internet\+Protocol\+Address}} \mbox{\hyperlink{amd__am79c973_8h_ac0d31ca829f934cccd89f8054e02773e}{address}})
\begin{DoxyCompactList}\small\item\em Get the M\+AC address from an IP via A\+RP. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmaxOS_1_1net_1_1AddressResolutionProtocol_a05f57eb32a87c30b921b2b069f9bcecc}{Store}} (\mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{Internet\+Protocol\+Address}} internet\+Protocol\+Address, \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1ethernet_a6fad3f62f91a21251eb141e990287b1c}{drivers\+::ethernet\+::\+Media\+Access\+Control\+Address}} media\+Access\+Control\+Address)
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


Definition at line 34 of file arp.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classmaxOS_1_1net_1_1AddressResolutionProtocol_af89ec96fda818531345f775d6e45fb3a}\label{classmaxOS_1_1net_1_1AddressResolutionProtocol_af89ec96fda818531345f775d6e45fb3a}} 
\index{maxOS::net::AddressResolutionProtocol@{maxOS::net::AddressResolutionProtocol}!AddressResolutionProtocol@{AddressResolutionProtocol}}
\index{AddressResolutionProtocol@{AddressResolutionProtocol}!maxOS::net::AddressResolutionProtocol@{maxOS::net::AddressResolutionProtocol}}
\doxysubsubsection{\texorpdfstring{AddressResolutionProtocol()}{AddressResolutionProtocol()}}
{\footnotesize\ttfamily net\+::\+Address\+Resolution\+Protocol\+::\+Address\+Resolution\+Protocol (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classmaxOS_1_1net_1_1EthernetFrameHandler}{Ethernet\+Frame\+Handler}} $\ast$}]{ethernet\+Frame\+Handler,  }\item[{\mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler}{Internet\+Protocol\+Handler}} $\ast$}]{internet\+Protocol\+Handler,  }\item[{\mbox{\hyperlink{classmaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} $\ast$}]{error\+Messages }\end{DoxyParamCaption})}



Definition at line 15 of file arp.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{16 : \mbox{\hyperlink{classmaxOS_1_1net_1_1EthernetFramePayloadHandler_a5898c284c9e748b97254abcbaee68387}{EthernetFramePayloadHandler}}(ethernetFrameHandler, 0x0806),}
\DoxyCodeLine{17   \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolAddressResolver_aa9a233eb567c1e2354c1b18891a46412}{InternetProtocolAddressResolver}}(internetProtocolHandler)}
\DoxyCodeLine{18 \{}
\DoxyCodeLine{19     this-\/>internetProtocolHandler = internetProtocolHandler;}
\DoxyCodeLine{20     this-\/>errorMessages = errorMessages;}
\DoxyCodeLine{21 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classmaxOS_1_1net_1_1AddressResolutionProtocol_a7a758dd73520b9498ce5a13a0d906855}\label{classmaxOS_1_1net_1_1AddressResolutionProtocol_a7a758dd73520b9498ce5a13a0d906855}} 
\index{maxOS::net::AddressResolutionProtocol@{maxOS::net::AddressResolutionProtocol}!````~AddressResolutionProtocol@{$\sim$AddressResolutionProtocol}}
\index{````~AddressResolutionProtocol@{$\sim$AddressResolutionProtocol}!maxOS::net::AddressResolutionProtocol@{maxOS::net::AddressResolutionProtocol}}
\doxysubsubsection{\texorpdfstring{$\sim$AddressResolutionProtocol()}{~AddressResolutionProtocol()}}
{\footnotesize\ttfamily net\+::\+Address\+Resolution\+Protocol\+::$\sim$\+Address\+Resolution\+Protocol (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 23 of file arp.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{23                                                          \{}
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classmaxOS_1_1net_1_1AddressResolutionProtocol_a421fa84d80d81f8a75414aba472d0a09}\label{classmaxOS_1_1net_1_1AddressResolutionProtocol_a421fa84d80d81f8a75414aba472d0a09}} 
\index{maxOS::net::AddressResolutionProtocol@{maxOS::net::AddressResolutionProtocol}!handleEthernetFramePayload@{handleEthernetFramePayload}}
\index{handleEthernetFramePayload@{handleEthernetFramePayload}!maxOS::net::AddressResolutionProtocol@{maxOS::net::AddressResolutionProtocol}}
\doxysubsubsection{\texorpdfstring{handleEthernetFramePayload()}{handleEthernetFramePayload()}}
{\footnotesize\ttfamily bool Address\+Resolution\+Protocol\+::handle\+Ethernet\+Frame\+Payload (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{etherframe\+Payload,  }\item[{uint32\+\_\+t}]{size }\end{DoxyParamCaption})}



Called when an A\+RP packet is received. 


\begin{DoxyParams}{Parameters}
{\em etherframe\+Payload} & The payload of the A\+RP packet. \\
\hline
{\em size} & The size of the A\+RP packet. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if the device should send a response, false otherwise. 
\end{DoxyReturn}


Definition at line 34 of file arp.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{34                                                                                                     \{}
\DoxyCodeLine{35 }
\DoxyCodeLine{36     \textcolor{comment}{//Check if the size is correct}}
\DoxyCodeLine{37     \textcolor{keywordflow}{if}(\mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} < \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structmaxOS_1_1net_1_1AddressResolutionProtocolMessage}{AddressResolutionProtocolMessage}}))}
\DoxyCodeLine{38         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{39 }
\DoxyCodeLine{40     \textcolor{comment}{//Convert the payload to an ARP message}}
\DoxyCodeLine{41     \mbox{\hyperlink{structmaxOS_1_1net_1_1AddressResolutionProtocolMessage}{AddressResolutionProtocolMessage}}* arpMessage = (\mbox{\hyperlink{structmaxOS_1_1net_1_1AddressResolutionProtocolMessage}{AddressResolutionProtocolMessage}}*)etherframePayload;}
\DoxyCodeLine{42 }
\DoxyCodeLine{43     \textcolor{comment}{//Check if the message hardware type is Ethernet (BigEndian)}}
\DoxyCodeLine{44     \textcolor{keywordflow}{if}(arpMessage -\/> \mbox{\hyperlink{arp_8h_a2b086e723a0536605e1efded5c5dc2c5}{hardwareType}} == 0x100)\{}
\DoxyCodeLine{45 }
\DoxyCodeLine{46         \textcolor{keywordflow}{if}(arpMessage -\/> \mbox{\hyperlink{arp_8h_ab551400c74271f35d0c79f81d29cffbb}{protocol}} == 0x0008             \textcolor{comment}{//Check if the protocol is IPv4 (BigEndian)}}
\DoxyCodeLine{47         \&\& arpMessage -\/> \mbox{\hyperlink{arp_8h_aebe62a393e82cc885d20fe573533a97d}{hardwareAddressSize}} == 6}
\DoxyCodeLine{48         \&\& arpMessage -\/> \mbox{\hyperlink{arp_8h_adba723aeb3d5bd07fd84c106a19e5191}{protocolAddressSize}} == 4}
\DoxyCodeLine{49         \&\& arpMessage -\/> \mbox{\hyperlink{arp_8h_a2287eab8c0183320980c7a0addb74a5a}{dstIP}} == internetProtocolHandler -\/> GetInternetProtocolAddress())}
\DoxyCodeLine{50         \{}
\DoxyCodeLine{51 }
\DoxyCodeLine{52             \textcolor{keywordflow}{switch} (arpMessage -\/> \mbox{\hyperlink{arp_8h_a4635796d5c7e7a2639b11dfe83718acc}{command}}) \{}
\DoxyCodeLine{53                 \textcolor{comment}{//Request}}
\DoxyCodeLine{54                 \textcolor{keywordflow}{case} 0x0100:}
\DoxyCodeLine{55                     arpMessage -\/> \mbox{\hyperlink{arp_8h_a4635796d5c7e7a2639b11dfe83718acc}{command}} = 0x0200;                                                                         \textcolor{comment}{//Set the command to reply}}
\DoxyCodeLine{56                     arpMessage -\/> \mbox{\hyperlink{arp_8h_a71289944f99c52386724f566fe9624ce}{dstMAC}} = arpMessage -\/> \mbox{\hyperlink{arp_8h_a46444771ae92e57ee3ad2b3930f6cdaf}{srcMAC}};                                                            \textcolor{comment}{//Set the destination MAC to the source MAC}}
\DoxyCodeLine{57                     arpMessage -\/> \mbox{\hyperlink{arp_8h_a2287eab8c0183320980c7a0addb74a5a}{dstIP}} = arpMessage -\/> \mbox{\hyperlink{arp_8h_a2c21b87d7d19b79e094d74112253a776}{srcIP}};                                                              \textcolor{comment}{//Set the destination IP to the source IP}}
\DoxyCodeLine{58                     arpMessage -\/> \mbox{\hyperlink{arp_8h_a46444771ae92e57ee3ad2b3930f6cdaf}{srcMAC}} = internetProtocolHandler -\/> GetMediaAccessControlAddress();                      \textcolor{comment}{//Set the source MAC to this MAC}}
\DoxyCodeLine{59                     arpMessage -\/> \mbox{\hyperlink{arp_8h_a2c21b87d7d19b79e094d74112253a776}{srcIP}} = internetProtocolHandler -\/> GetInternetProtocolAddress();                         \textcolor{comment}{//Set the source IP to this IP}}
\DoxyCodeLine{60                     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{61                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{62 }
\DoxyCodeLine{63                 \textcolor{comment}{//Response}}
\DoxyCodeLine{64                 \textcolor{keywordflow}{case} 0x0200:}
\DoxyCodeLine{65                     addressCache.\mbox{\hyperlink{classmaxOS_1_1common_1_1Map_af2d7f388b98a4dd79e0909b46e076671}{insert}}((\mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{InternetProtocolAddress}})arpMessage -\/> \mbox{\hyperlink{arp_8h_a2c21b87d7d19b79e094d74112253a776}{srcIP}}, (\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1ethernet_a6fad3f62f91a21251eb141e990287b1c}{MediaAccessControlAddress}})arpMessage -\/> \mbox{\hyperlink{arp_8h_a46444771ae92e57ee3ad2b3930f6cdaf}{srcMAC}});     \textcolor{comment}{//Insert the MAC address into the cache}}
\DoxyCodeLine{66                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{67 }
\DoxyCodeLine{68                 \textcolor{keywordflow}{default}:}
\DoxyCodeLine{69                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{70 }
\DoxyCodeLine{71             \}}
\DoxyCodeLine{72 }
\DoxyCodeLine{73         \}}
\DoxyCodeLine{74 }
\DoxyCodeLine{75     \}}
\DoxyCodeLine{76 }
\DoxyCodeLine{77     \textcolor{comment}{//By default, don't send anything back}}
\DoxyCodeLine{78     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{79 }
\DoxyCodeLine{80 }
\DoxyCodeLine{81 \}}

\end{DoxyCode}


References command, dst\+IP, dst\+M\+AC, hardware\+Address\+Size, hardware\+Type, max\+O\+S\+::common\+::\+Map$<$ Key, Value $>$\+::insert(), protocol, protocol\+Address\+Size, size, src\+IP, and src\+M\+AC.

\mbox{\Hypertarget{classmaxOS_1_1net_1_1AddressResolutionProtocol_ad84350376c832ffd8519595245eb9f7f}\label{classmaxOS_1_1net_1_1AddressResolutionProtocol_ad84350376c832ffd8519595245eb9f7f}} 
\index{maxOS::net::AddressResolutionProtocol@{maxOS::net::AddressResolutionProtocol}!RequestMACAddress@{RequestMACAddress}}
\index{RequestMACAddress@{RequestMACAddress}!maxOS::net::AddressResolutionProtocol@{maxOS::net::AddressResolutionProtocol}}
\doxysubsubsection{\texorpdfstring{RequestMACAddress()}{RequestMACAddress()}}
{\footnotesize\ttfamily void Address\+Resolution\+Protocol\+::\+Request\+M\+A\+C\+Address (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{Internet\+Protocol\+Address}}}]{address }\end{DoxyParamCaption})}



Request the M\+AC address of a given IP address. 


\begin{DoxyParams}{Parameters}
{\em I\+P\+\_\+\+BE} & The IP address in Big\+Endian. \\
\hline
\end{DoxyParams}


Definition at line 89 of file arp.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{89                                                                                  \{}
\DoxyCodeLine{90 }
\DoxyCodeLine{91     \textcolor{comment}{//When a MAC adress is requested, instantiate a new ARP message block on the stack}}
\DoxyCodeLine{92     \mbox{\hyperlink{structmaxOS_1_1net_1_1AddressResolutionProtocolMessage}{AddressResolutionProtocolMessage}} arpMessage;}
\DoxyCodeLine{93 }
\DoxyCodeLine{94     \textcolor{comment}{//Set the message's values}}
\DoxyCodeLine{95     arpMessage.\mbox{\hyperlink{structmaxOS_1_1net_1_1AddressResolutionProtocolMessage_ac657dc1afaacc295e61c24586f7f3fc8}{hardwareType}} = 0x0100;                                                   \textcolor{comment}{//Ethernet, encoded in BigEndian}}
\DoxyCodeLine{96     arpMessage.\mbox{\hyperlink{structmaxOS_1_1net_1_1AddressResolutionProtocolMessage_a80788447bcdc0553377dcbe5eebd5fff}{protocol}} = 0x0008;                                                       \textcolor{comment}{//IPv4, encoded in BigEndian}}
\DoxyCodeLine{97     arpMessage.\mbox{\hyperlink{structmaxOS_1_1net_1_1AddressResolutionProtocolMessage_a1302327bb3ca77a65bff9c46fab1c81f}{hardwareAddressSize}} = 6;                                                 \textcolor{comment}{//MAC address size}}
\DoxyCodeLine{98     arpMessage.\mbox{\hyperlink{structmaxOS_1_1net_1_1AddressResolutionProtocolMessage_afdf4118e6a88f88f536711f152c85333}{protocolAddressSize}} = 4;                                                 \textcolor{comment}{//IPv4 address size}}
\DoxyCodeLine{99     arpMessage.\mbox{\hyperlink{structmaxOS_1_1net_1_1AddressResolutionProtocolMessage_a9b15eaae7481b491244bcc9b86d631d0}{command}} = 0x0100;                                                        \textcolor{comment}{//Request, encoded in BigEndian}}
\DoxyCodeLine{100 }
\DoxyCodeLine{101     \textcolor{comment}{//Set the message's source and destination}}
\DoxyCodeLine{102     arpMessage.\mbox{\hyperlink{structmaxOS_1_1net_1_1AddressResolutionProtocolMessage_a6799773b583fd0353aa29b928b95d165}{srcMAC}} = \mbox{\hyperlink{classmaxOS_1_1net_1_1EthernetFramePayloadHandler_ab9c1505188cd0695cdaccd0d004e1410}{frameHandler}} -\/> getMAC();                                       \textcolor{comment}{//Set the source MAC address to the backend's MAC address}}
\DoxyCodeLine{103     arpMessage.\mbox{\hyperlink{structmaxOS_1_1net_1_1AddressResolutionProtocolMessage_a125a642c1a470851403e4008a3507a5f}{srcIP}} = internetProtocolHandler -\/> GetInternetProtocolAddress();        \textcolor{comment}{//Set the source IP address to the backend's IP address}}
\DoxyCodeLine{104     arpMessage.\mbox{\hyperlink{structmaxOS_1_1net_1_1AddressResolutionProtocolMessage_a20a591583104c10a9ea2f8216757d83c}{dstMAC}} = 0xFFFFFFFFFFFF;                                                 \textcolor{comment}{//Set the destination MAC address to broadcast}}
\DoxyCodeLine{105     arpMessage.\mbox{\hyperlink{structmaxOS_1_1net_1_1AddressResolutionProtocolMessage_a28777e77e4505aad22f4336e518320bd}{dstIP}} = \mbox{\hyperlink{amd__am79c973_8h_ac0d31ca829f934cccd89f8054e02773e}{address}};                                                           \textcolor{comment}{//Set the destination IP address to the requested IP address}}
\DoxyCodeLine{106 }
\DoxyCodeLine{107     \textcolor{comment}{//Send the message}}
\DoxyCodeLine{108     \textcolor{keyword}{this} -\/> \mbox{\hyperlink{classmaxOS_1_1net_1_1EthernetFramePayloadHandler_a739be2fa5af3976cc46a1c6e4705fa43}{Send}}(arpMessage.\mbox{\hyperlink{structmaxOS_1_1net_1_1AddressResolutionProtocolMessage_a20a591583104c10a9ea2f8216757d83c}{dstMAC}}, (uint8\_t*)\&arpMessage, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structmaxOS_1_1net_1_1AddressResolutionProtocolMessage}{AddressResolutionProtocolMessage}}));}
\DoxyCodeLine{109 }
\DoxyCodeLine{110 }
\DoxyCodeLine{111 \}}

\end{DoxyCode}


References address, max\+O\+S\+::net\+::\+Address\+Resolution\+Protocol\+Message\+::command, max\+O\+S\+::net\+::\+Address\+Resolution\+Protocol\+Message\+::dst\+IP, max\+O\+S\+::net\+::\+Address\+Resolution\+Protocol\+Message\+::dst\+M\+AC, max\+O\+S\+::net\+::\+Ethernet\+Frame\+Payload\+Handler\+::frame\+Handler, max\+O\+S\+::net\+::\+Address\+Resolution\+Protocol\+Message\+::hardware\+Address\+Size, max\+O\+S\+::net\+::\+Address\+Resolution\+Protocol\+Message\+::hardware\+Type, max\+O\+S\+::net\+::\+Address\+Resolution\+Protocol\+Message\+::protocol, max\+O\+S\+::net\+::\+Address\+Resolution\+Protocol\+Message\+::protocol\+Address\+Size, max\+O\+S\+::net\+::\+Ethernet\+Frame\+Payload\+Handler\+::\+Send(), max\+O\+S\+::net\+::\+Address\+Resolution\+Protocol\+Message\+::src\+IP, and max\+O\+S\+::net\+::\+Address\+Resolution\+Protocol\+Message\+::src\+M\+AC.



Referenced by Resolve().

\mbox{\Hypertarget{classmaxOS_1_1net_1_1AddressResolutionProtocol_a6b6fc2de577ac511d1b38caa2f470f50}\label{classmaxOS_1_1net_1_1AddressResolutionProtocol_a6b6fc2de577ac511d1b38caa2f470f50}} 
\index{maxOS::net::AddressResolutionProtocol@{maxOS::net::AddressResolutionProtocol}!Resolve@{Resolve}}
\index{Resolve@{Resolve}!maxOS::net::AddressResolutionProtocol@{maxOS::net::AddressResolutionProtocol}}
\doxysubsubsection{\texorpdfstring{Resolve()}{Resolve()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1ethernet_a6fad3f62f91a21251eb141e990287b1c}{Media\+Access\+Control\+Address}} Address\+Resolution\+Protocol\+::\+Resolve (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{Internet\+Protocol\+Address}}}]{address }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Get the M\+AC address from an IP via A\+RP. 


\begin{DoxyParams}{Parameters}
{\em I\+P\+\_\+\+BE} & The IP address to get the M\+AC address from. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The M\+AC address of the IP address. 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolAddressResolver_aa75e8e59c64acf4f6dabc778f65f2522}{max\+O\+S\+::net\+::\+Internet\+Protocol\+Address\+Resolver}}.



Definition at line 120 of file arp.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{120                                                                                             \{}
\DoxyCodeLine{121 }
\DoxyCodeLine{122     \textcolor{keyword}{volatile} \mbox{\hyperlink{classmaxOS_1_1common_1_1Rectangle}{Map<InternetProtocolAddress, MediaAccessControlAddress>::iterator}} cacheIterator = addressCache.\mbox{\hyperlink{classmaxOS_1_1common_1_1Map_ab5b38544b3188986b33db651988f9784}{find}}(\mbox{\hyperlink{amd__am79c973_8h_ac0d31ca829f934cccd89f8054e02773e}{address}}); \textcolor{comment}{//Check if the MAC address is in the cache}}
\DoxyCodeLine{123 }
\DoxyCodeLine{124     \textcolor{comment}{//If not, request it}}
\DoxyCodeLine{125     \textcolor{keywordflow}{if}(addressCache.\mbox{\hyperlink{classmaxOS_1_1common_1_1Map_a4ae2c264d4b692d31ff34e56d2f16779}{end}}() == cacheIterator)\{}
\DoxyCodeLine{126         \mbox{\hyperlink{classmaxOS_1_1net_1_1AddressResolutionProtocol_ad84350376c832ffd8519595245eb9f7f}{RequestMACAddress}}(\mbox{\hyperlink{amd__am79c973_8h_ac0d31ca829f934cccd89f8054e02773e}{address}});}
\DoxyCodeLine{127     \}}
\DoxyCodeLine{128 }
\DoxyCodeLine{129     \textcolor{comment}{//TODO: Add clock to wait}}
\DoxyCodeLine{130 }
\DoxyCodeLine{131     \textcolor{comment}{//This isnt safe because the MAC address might not be in the cache yet or the machine may not be connected to the network (possible infinite loop) //TODO: TIMEOUT}}
\DoxyCodeLine{132     \textcolor{keywordflow}{while} (cacheIterator == addressCache.\mbox{\hyperlink{classmaxOS_1_1common_1_1Map_a4ae2c264d4b692d31ff34e56d2f16779}{end}}()) \{                         \textcolor{comment}{//Wait until the MAC address is found}}
\DoxyCodeLine{133         cacheIterator = addressCache.\mbox{\hyperlink{classmaxOS_1_1common_1_1Map_ab5b38544b3188986b33db651988f9784}{find}}(\mbox{\hyperlink{amd__am79c973_8h_ac0d31ca829f934cccd89f8054e02773e}{address}});}
\DoxyCodeLine{134     \}}
\DoxyCodeLine{135 }
\DoxyCodeLine{136     \textcolor{comment}{//Return the MAC address}}
\DoxyCodeLine{137 }
\DoxyCodeLine{138     \textcolor{keywordflow}{return} cacheIterator -\/> second;}
\DoxyCodeLine{139 }
\DoxyCodeLine{140 \}}

\end{DoxyCode}


References address, max\+O\+S\+::common\+::\+Map$<$ Key, Value $>$\+::end(), max\+O\+S\+::common\+::\+Map$<$ Key, Value $>$\+::find(), and Request\+M\+A\+C\+Address().

\mbox{\Hypertarget{classmaxOS_1_1net_1_1AddressResolutionProtocol_a05f57eb32a87c30b921b2b069f9bcecc}\label{classmaxOS_1_1net_1_1AddressResolutionProtocol_a05f57eb32a87c30b921b2b069f9bcecc}} 
\index{maxOS::net::AddressResolutionProtocol@{maxOS::net::AddressResolutionProtocol}!Store@{Store}}
\index{Store@{Store}!maxOS::net::AddressResolutionProtocol@{maxOS::net::AddressResolutionProtocol}}
\doxysubsubsection{\texorpdfstring{Store()}{Store()}}
{\footnotesize\ttfamily void Address\+Resolution\+Protocol\+::\+Store (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{Internet\+Protocol\+Address}}}]{internet\+Protocol\+Address,  }\item[{\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1ethernet_a6fad3f62f91a21251eb141e990287b1c}{drivers\+::ethernet\+::\+Media\+Access\+Control\+Address}}}]{media\+Access\+Control\+Address }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolAddressResolver_af587cedecbb5e49acd99e193ccce1e57}{max\+O\+S\+::net\+::\+Internet\+Protocol\+Address\+Resolver}}.



Definition at line 142 of file arp.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{142                                                                                                                                           \{}
\DoxyCodeLine{143     addressCache.\mbox{\hyperlink{classmaxOS_1_1common_1_1Map_af2d7f388b98a4dd79e0909b46e076671}{insert}}(internetProtocolAddress, mediaAccessControlAddress);}
\DoxyCodeLine{144 \}}

\end{DoxyCode}


References max\+O\+S\+::common\+::\+Map$<$ Key, Value $>$\+::insert().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/max-\/os/max-\/os/kernel/include/net/\mbox{\hyperlink{arp_8h}{arp.\+h}}\item 
/home/runner/work/max-\/os/max-\/os/kernel/src/net/\mbox{\hyperlink{arp_8cpp}{arp.\+cpp}}\end{DoxyCompactItemize}
