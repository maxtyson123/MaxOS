\hypertarget{classMaxOS_1_1memory_1_1MemoryManager}{}\doxysection{Max\+OS\+::memory\+::Memory\+Manager Class Reference}
\label{classMaxOS_1_1memory_1_1MemoryManager}\index{MaxOS::memory::MemoryManager@{MaxOS::memory::MemoryManager}}


Handles memory allocation and deallocation.  




{\ttfamily \#include $<$memorymanagement.\+h$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_adee7b9b31ba361be88480f9c5109e260}{Memory\+Manager}} (\mbox{\hyperlink{structmultiboot__tag__mmap}{multiboot\+\_\+tag\+\_\+mmap}} $\ast$memory\+\_\+map)
\item 
\mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_ad4570910ccfc14b2da679bee58ee8f48}{$\sim$\+Memory\+Manager}} ()
\item 
void $\ast$ \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_a90f2d5bec98f1e6cdd71c87853baaab9}{malloc}} (size\+\_\+t \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}})
\begin{DoxyCompactList}\small\item\em Allocates a block of memory. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_a7123a072d7307c6ee61759fa7da6f677}{free}} (void $\ast$pointer)
\begin{DoxyCompactList}\small\item\em Frees a block of memory. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_aba582f32d87efac7782b6ec2b6faaa03}{memory\+\_\+used}} ()
\begin{DoxyCompactList}\small\item\em Returns the amount of memory used. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static uint64\+\_\+t \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_a77c69c966ba657e00074e9e2944fb725}{map\+\_\+to\+\_\+higher\+\_\+half}} (uint64\+\_\+t physical\+\_\+address)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager}{Memory\+Manager}} $\ast$ \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_ac72c7219ae81f7abd58d5f4d7ce29291}{s\+\_\+active\+\_\+memory\+\_\+manager}} = 0
\item 
static const uint64\+\_\+t \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_a43858e53a4559c6bc0280f429b85c8da}{s\+\_\+higher\+\_\+half\+\_\+offset}} \{ 0x\+F\+F\+F\+F\+F\+F\+F\+F80000000 \}
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk}{Memory\+Chunk}} $\ast$ \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_addba17fadb19bb04943b5179121901e0}{m\+\_\+first\+\_\+memory\+\_\+chunk}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Handles memory allocation and deallocation. 

Definition at line 34 of file memorymanagement.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classMaxOS_1_1memory_1_1MemoryManager_adee7b9b31ba361be88480f9c5109e260}\label{classMaxOS_1_1memory_1_1MemoryManager_adee7b9b31ba361be88480f9c5109e260}} 
\index{MaxOS::memory::MemoryManager@{MaxOS::memory::MemoryManager}!MemoryManager@{MemoryManager}}
\index{MemoryManager@{MemoryManager}!MaxOS::memory::MemoryManager@{MaxOS::memory::MemoryManager}}
\doxysubsubsection{\texorpdfstring{MemoryManager()}{MemoryManager()}}
{\footnotesize\ttfamily Memory\+Manager\+::\+Memory\+Manager (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structmultiboot__tag__mmap}{multiboot\+\_\+tag\+\_\+mmap}} $\ast$}]{memory\+\_\+map }\end{DoxyParamCaption})}



Definition at line 12 of file memorymanagement.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{13 \{}
\DoxyCodeLine{14 }
\DoxyCodeLine{15      \textcolor{keywordtype}{size\_t} heap = 0;}
\DoxyCodeLine{16      \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} = 0;}
\DoxyCodeLine{17 }
\DoxyCodeLine{18     \textcolor{comment}{// Find the available memory}}
\DoxyCodeLine{19     \textcolor{keywordflow}{for} (\mbox{\hyperlink{structmultiboot__mmap__entry}{multiboot\_memory\_map\_t}}* mmap = memory\_map-\/>\mbox{\hyperlink{structmultiboot__tag__mmap_a20c4427afce786340b01ded5ed0532a2}{entries}}; (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long})mmap < (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long})memory\_map + memory\_map-\/>\mbox{\hyperlink{structmultiboot__tag__mmap_a0663e47406ed5799d5bd55ccf2d4fa95}{size}};}
\DoxyCodeLine{20          mmap = (\mbox{\hyperlink{structmultiboot__mmap__entry}{multiboot\_memory\_map\_t}}*)((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long})mmap + memory\_map-\/>\mbox{\hyperlink{structmultiboot__tag__mmap_aa5532c68672471f9da8ba18a8a16857d}{entry\_size}})) \{}
\DoxyCodeLine{21 }
\DoxyCodeLine{22         \textcolor{comment}{// If the memory is available then use it}}
\DoxyCodeLine{23         \textcolor{keywordflow}{if}(mmap -\/> \mbox{\hyperlink{apic_8h_a1d127017fb298b889f4ba24752d08b8e}{type}} == \mbox{\hyperlink{multiboot_8h_a7fe141351ebcde0acbd6118ad0ea1a21}{MULTIBOOT\_MEMORY\_AVAILABLE}})\{}
\DoxyCodeLine{24             heap = mmap -\/> addr;}
\DoxyCodeLine{25             \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} = mmap -\/> len;}
\DoxyCodeLine{26         \}}
\DoxyCodeLine{27     \}}
\DoxyCodeLine{28 }
\DoxyCodeLine{29     \textcolor{comment}{// Add a 10MB offset to the heap}}
\DoxyCodeLine{30         heap += 0x1000000;}
\DoxyCodeLine{31 }
\DoxyCodeLine{32     \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_ac72c7219ae81f7abd58d5f4d7ce29291}{s\_active\_memory\_manager}} = \textcolor{keyword}{this};}
\DoxyCodeLine{33 }
\DoxyCodeLine{34     \textcolor{comment}{//Prevent wiring outside the area that is allowed to write}}
\DoxyCodeLine{35     \textcolor{keywordflow}{if}(\mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} < \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk}{MemoryChunk}}))\{}
\DoxyCodeLine{36 }
\DoxyCodeLine{37         \textcolor{keyword}{this} -\/>\mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_addba17fadb19bb04943b5179121901e0}{m\_first\_memory\_chunk}} = 0;}
\DoxyCodeLine{38 }
\DoxyCodeLine{39     \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{40 }
\DoxyCodeLine{41         \textcolor{keyword}{this} -\/>m\_first\_memory\_chunk = (\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk}{MemoryChunk}}*)heap;}
\DoxyCodeLine{42         \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_addba17fadb19bb04943b5179121901e0}{m\_first\_memory\_chunk}}-\/> allocated = \textcolor{keyword}{false};}
\DoxyCodeLine{43         \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_addba17fadb19bb04943b5179121901e0}{m\_first\_memory\_chunk}}-\/> prev = 0;}
\DoxyCodeLine{44         \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_addba17fadb19bb04943b5179121901e0}{m\_first\_memory\_chunk}}-\/> next = 0;}
\DoxyCodeLine{45         \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_addba17fadb19bb04943b5179121901e0}{m\_first\_memory\_chunk}}-\/> \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} = \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} -\/ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk}{MemoryChunk}});}
\DoxyCodeLine{46     \}}
\DoxyCodeLine{47 \}}

\end{DoxyCode}


References multiboot\+\_\+tag\+\_\+mmap\+::entries, multiboot\+\_\+tag\+\_\+mmap\+::entry\+\_\+size, m\+\_\+first\+\_\+memory\+\_\+chunk, M\+U\+L\+T\+I\+B\+O\+O\+T\+\_\+\+M\+E\+M\+O\+R\+Y\+\_\+\+A\+V\+A\+I\+L\+A\+B\+LE, s\+\_\+active\+\_\+memory\+\_\+manager, size, multiboot\+\_\+tag\+\_\+mmap\+::size, and type.

\mbox{\Hypertarget{classMaxOS_1_1memory_1_1MemoryManager_ad4570910ccfc14b2da679bee58ee8f48}\label{classMaxOS_1_1memory_1_1MemoryManager_ad4570910ccfc14b2da679bee58ee8f48}} 
\index{MaxOS::memory::MemoryManager@{MaxOS::memory::MemoryManager}!````~MemoryManager@{$\sim$MemoryManager}}
\index{````~MemoryManager@{$\sim$MemoryManager}!MaxOS::memory::MemoryManager@{MaxOS::memory::MemoryManager}}
\doxysubsubsection{\texorpdfstring{$\sim$MemoryManager()}{~MemoryManager()}}
{\footnotesize\ttfamily Memory\+Manager\+::$\sim$\+Memory\+Manager (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 49 of file memorymanagement.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{49                               \{}
\DoxyCodeLine{50     \textcolor{keywordflow}{if}(\mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_ac72c7219ae81f7abd58d5f4d7ce29291}{s\_active\_memory\_manager}} == \textcolor{keyword}{this})}
\DoxyCodeLine{51       \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_ac72c7219ae81f7abd58d5f4d7ce29291}{s\_active\_memory\_manager}} = 0;}
\DoxyCodeLine{52 \}}

\end{DoxyCode}


References s\+\_\+active\+\_\+memory\+\_\+manager.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classMaxOS_1_1memory_1_1MemoryManager_a7123a072d7307c6ee61759fa7da6f677}\label{classMaxOS_1_1memory_1_1MemoryManager_a7123a072d7307c6ee61759fa7da6f677}} 
\index{MaxOS::memory::MemoryManager@{MaxOS::memory::MemoryManager}!free@{free}}
\index{free@{free}!MaxOS::memory::MemoryManager@{MaxOS::memory::MemoryManager}}
\doxysubsubsection{\texorpdfstring{free()}{free()}}
{\footnotesize\ttfamily void Memory\+Manager\+::free (\begin{DoxyParamCaption}\item[{void $\ast$}]{pointer }\end{DoxyParamCaption})}



Frees a block of memory. 


\begin{DoxyParams}{Parameters}
{\em pointer} & A pointer to the block \\
\hline
\end{DoxyParams}


Definition at line 108 of file memorymanagement.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{108                                       \{}
\DoxyCodeLine{109 }
\DoxyCodeLine{110 }
\DoxyCodeLine{111     \textcolor{comment}{// Create a new free chunk}}
\DoxyCodeLine{112     \mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk}{MemoryChunk}}* chunk = (\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk}{MemoryChunk}}*)((\textcolor{keywordtype}{size\_t})pointer -\/ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk}{MemoryChunk}}));}
\DoxyCodeLine{113     chunk -\/> allocated = \textcolor{keyword}{false};}
\DoxyCodeLine{114 }
\DoxyCodeLine{115     \textcolor{comment}{// If there is a free chunk before this chunk then merge them}}
\DoxyCodeLine{116     \textcolor{keywordflow}{if}(chunk -\/> prev != 0 \&\& !chunk -\/> prev -\/> allocated)\{}
\DoxyCodeLine{117 }
\DoxyCodeLine{118         \textcolor{comment}{// Increase the previous chunk's size and remove the current chunk from the linked list}}
\DoxyCodeLine{119         chunk-\/>\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk_a2165cec76c0674f5180990e65160a862}{prev}}-\/>\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk_aa61f41e5ca407c31027431719bb3695f}{size}} += chunk-\/>\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk_aa61f41e5ca407c31027431719bb3695f}{size}} + \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk}{MemoryChunk}});}
\DoxyCodeLine{120         chunk -\/> prev -\/> next = chunk -\/> next;}
\DoxyCodeLine{121 }
\DoxyCodeLine{122         \textcolor{comment}{// If there is a next chunk then ensure this chunk is removed from its linked list}}
\DoxyCodeLine{123         \textcolor{keywordflow}{if}(chunk -\/> next != 0)}
\DoxyCodeLine{124             chunk -\/> next -\/> prev = chunk-\/>\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk_a2165cec76c0674f5180990e65160a862}{prev}};}
\DoxyCodeLine{125 }
\DoxyCodeLine{126         \textcolor{comment}{// Chunk is now the previous chunk}}
\DoxyCodeLine{127         chunk = chunk -\/> prev;}
\DoxyCodeLine{128 }
\DoxyCodeLine{129     \}}
\DoxyCodeLine{130 }
\DoxyCodeLine{131     \textcolor{comment}{// If there is a free chunk after this chunk then merge them}}
\DoxyCodeLine{132     \textcolor{keywordflow}{if}(chunk -\/> next != 0 \&\& !chunk -\/> next -\/> allocated)\{}
\DoxyCodeLine{133 }
\DoxyCodeLine{134         \textcolor{comment}{// Increase the current chunk's size and remove the next chunk from the linked list}}
\DoxyCodeLine{135         chunk -\/> \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} += chunk -\/> next -\/> \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} + \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk}{MemoryChunk}});}
\DoxyCodeLine{136         chunk -\/> next = chunk -\/> next -\/> next;}
\DoxyCodeLine{137 }
\DoxyCodeLine{138         \textcolor{comment}{// Remove the just merged chunk from the linked list}}
\DoxyCodeLine{139         \textcolor{keywordflow}{if}(chunk -\/> next != 0)}
\DoxyCodeLine{140             chunk -\/> next -\/> prev = chunk;}
\DoxyCodeLine{141 }
\DoxyCodeLine{142     \}}
\DoxyCodeLine{143 \}}

\end{DoxyCode}


References Max\+O\+S\+::memory\+::\+Memory\+Chunk\+::prev, size, and Max\+O\+S\+::memory\+::\+Memory\+Chunk\+::size.

\mbox{\Hypertarget{classMaxOS_1_1memory_1_1MemoryManager_a90f2d5bec98f1e6cdd71c87853baaab9}\label{classMaxOS_1_1memory_1_1MemoryManager_a90f2d5bec98f1e6cdd71c87853baaab9}} 
\index{MaxOS::memory::MemoryManager@{MaxOS::memory::MemoryManager}!malloc@{malloc}}
\index{malloc@{malloc}!MaxOS::memory::MemoryManager@{MaxOS::memory::MemoryManager}}
\doxysubsubsection{\texorpdfstring{malloc()}{malloc()}}
{\footnotesize\ttfamily void $\ast$ Memory\+Manager\+::malloc (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})}



Allocates a block of memory. 


\begin{DoxyParams}{Parameters}
{\em size} & size of the block \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a pointer to the block, 0 if no block is available 
\end{DoxyReturn}


Definition at line 60 of file memorymanagement.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{60                                        \{}
\DoxyCodeLine{61 }
\DoxyCodeLine{62     \mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk}{MemoryChunk}}* result = 0;}
\DoxyCodeLine{63 }
\DoxyCodeLine{64     \textcolor{comment}{// Find the next free chunk that is big enough}}
\DoxyCodeLine{65     \textcolor{keywordflow}{for} (\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk}{MemoryChunk}}* chunk = \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_addba17fadb19bb04943b5179121901e0}{m\_first\_memory\_chunk}}; chunk != 0 \&\& result == 0; chunk = chunk-\/>\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk_a9b94dfe2f922882b76c7e592673a5a26}{next}}) \{}
\DoxyCodeLine{66         \textcolor{keywordflow}{if}(chunk -\/> \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} > \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} \&\& !chunk -\/> allocated)}
\DoxyCodeLine{67             result = chunk;}
\DoxyCodeLine{68     \}}
\DoxyCodeLine{69 }
\DoxyCodeLine{70     \textcolor{comment}{// If there is no free chunk then return 0}}
\DoxyCodeLine{71     \textcolor{keywordflow}{if}(result == 0)}
\DoxyCodeLine{72         \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{73 }
\DoxyCodeLine{74     \textcolor{comment}{// If there is space to split the chunk}}
\DoxyCodeLine{75     \textcolor{keywordflow}{if}(result -\/> \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} < \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} + \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk}{MemoryChunk}}) + 1) \{}
\DoxyCodeLine{76         result-\/>\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk_aeb2ac8030a7130c9e046c07c4cd4cfbb}{allocated}} = \textcolor{keyword}{true};}
\DoxyCodeLine{77         \textcolor{keywordflow}{return} (\textcolor{keywordtype}{void} *)(((size\_t)result) + \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk}{MemoryChunk}}));}
\DoxyCodeLine{78     \}}
\DoxyCodeLine{79 }
\DoxyCodeLine{80 }
\DoxyCodeLine{81     \textcolor{comment}{// Create a new chunk after the current one}}
\DoxyCodeLine{82     \mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk}{MemoryChunk}}* temp = (\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk}{MemoryChunk}}*)((\textcolor{keywordtype}{size\_t})result + \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk}{MemoryChunk}}) + \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}});}
\DoxyCodeLine{83 }
\DoxyCodeLine{84     \textcolor{comment}{// Set the new chunk's properties and insert it into the linked list}}
\DoxyCodeLine{85     temp -\/> allocated = \textcolor{keyword}{false};}
\DoxyCodeLine{86     temp -\/> \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} =  result-\/>\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk_aa61f41e5ca407c31027431719bb3695f}{size}} -\/ \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} -\/ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk}{MemoryChunk}});}
\DoxyCodeLine{87     temp -\/> prev = result;}
\DoxyCodeLine{88     temp -\/> next = result -\/> next;}
\DoxyCodeLine{89 }
\DoxyCodeLine{90     \textcolor{comment}{// If there is a chunk after the current one then set its previous to the new chunk}}
\DoxyCodeLine{91     \textcolor{keywordflow}{if}(temp -\/> next != 0)}
\DoxyCodeLine{92        temp -\/> next -\/> prev = temp;}
\DoxyCodeLine{93 }
\DoxyCodeLine{94     \textcolor{comment}{// Current chunk is now allocated and is pointing to the new chunk}}
\DoxyCodeLine{95     result-\/>\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk_aa61f41e5ca407c31027431719bb3695f}{size}} = \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}};}
\DoxyCodeLine{96     result -\/> allocated = \textcolor{keyword}{true};}
\DoxyCodeLine{97     result-\/>\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk_a9b94dfe2f922882b76c7e592673a5a26}{next}} = temp;}
\DoxyCodeLine{98 }
\DoxyCodeLine{99     \textcolor{keywordflow}{return} (\textcolor{keywordtype}{void}*)(((size\_t)result) + \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk}{MemoryChunk}}));}
\DoxyCodeLine{100 \}}

\end{DoxyCode}


References Max\+O\+S\+::memory\+::\+Memory\+Chunk\+::allocated, m\+\_\+first\+\_\+memory\+\_\+chunk, Max\+O\+S\+::memory\+::\+Memory\+Chunk\+::next, size, and Max\+O\+S\+::memory\+::\+Memory\+Chunk\+::size.

\mbox{\Hypertarget{classMaxOS_1_1memory_1_1MemoryManager_a77c69c966ba657e00074e9e2944fb725}\label{classMaxOS_1_1memory_1_1MemoryManager_a77c69c966ba657e00074e9e2944fb725}} 
\index{MaxOS::memory::MemoryManager@{MaxOS::memory::MemoryManager}!map\_to\_higher\_half@{map\_to\_higher\_half}}
\index{map\_to\_higher\_half@{map\_to\_higher\_half}!MaxOS::memory::MemoryManager@{MaxOS::memory::MemoryManager}}
\doxysubsubsection{\texorpdfstring{map\_to\_higher\_half()}{map\_to\_higher\_half()}}
{\footnotesize\ttfamily uint64\+\_\+t Memory\+Manager\+::map\+\_\+to\+\_\+higher\+\_\+half (\begin{DoxyParamCaption}\item[{uint64\+\_\+t}]{physical\+\_\+address }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 160 of file memorymanagement.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{160                                                                     \{}
\DoxyCodeLine{161 }
\DoxyCodeLine{162   \textcolor{comment}{// Check if the address is already mapped}}
\DoxyCodeLine{163   \textcolor{keywordflow}{if}(physical\_address >= \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_a43858e53a4559c6bc0280f429b85c8da}{s\_higher\_half\_offset}})}
\DoxyCodeLine{164       \textcolor{keywordflow}{return} physical\_address;}
\DoxyCodeLine{165 }
\DoxyCodeLine{166   \textcolor{comment}{// Map the address to the higher half}}
\DoxyCodeLine{167   \textcolor{keywordflow}{return} physical\_address + \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_a43858e53a4559c6bc0280f429b85c8da}{s\_higher\_half\_offset}};}
\DoxyCodeLine{168 \}}

\end{DoxyCode}


References s\+\_\+higher\+\_\+half\+\_\+offset.

\mbox{\Hypertarget{classMaxOS_1_1memory_1_1MemoryManager_aba582f32d87efac7782b6ec2b6faaa03}\label{classMaxOS_1_1memory_1_1MemoryManager_aba582f32d87efac7782b6ec2b6faaa03}} 
\index{MaxOS::memory::MemoryManager@{MaxOS::memory::MemoryManager}!memory\_used@{memory\_used}}
\index{memory\_used@{memory\_used}!MaxOS::memory::MemoryManager@{MaxOS::memory::MemoryManager}}
\doxysubsubsection{\texorpdfstring{memory\_used()}{memory\_used()}}
{\footnotesize\ttfamily int Memory\+Manager\+::memory\+\_\+used (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Returns the amount of memory used. 

\begin{DoxyReturn}{Returns}
The amount of memory used 
\end{DoxyReturn}


Definition at line 149 of file memorymanagement.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{149                                \{}
\DoxyCodeLine{150 }
\DoxyCodeLine{151         \textcolor{keywordtype}{int} result = 0;}
\DoxyCodeLine{152 }
\DoxyCodeLine{153         \textcolor{comment}{// Loop through all the chunks and add up the size of the allocated chunks}}
\DoxyCodeLine{154         \textcolor{keywordflow}{for} (\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk}{MemoryChunk}}* chunk = \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager_addba17fadb19bb04943b5179121901e0}{m\_first\_memory\_chunk}}; chunk != 0; chunk = chunk-\/>\mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk_a9b94dfe2f922882b76c7e592673a5a26}{next}})}
\DoxyCodeLine{155             \textcolor{keywordflow}{if}(chunk -\/> allocated)}
\DoxyCodeLine{156                 result += chunk -\/> \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}};}
\DoxyCodeLine{157 }
\DoxyCodeLine{158         \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{159 \}}

\end{DoxyCode}


References m\+\_\+first\+\_\+memory\+\_\+chunk, Max\+O\+S\+::memory\+::\+Memory\+Chunk\+::next, and size.



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classMaxOS_1_1memory_1_1MemoryManager_addba17fadb19bb04943b5179121901e0}\label{classMaxOS_1_1memory_1_1MemoryManager_addba17fadb19bb04943b5179121901e0}} 
\index{MaxOS::memory::MemoryManager@{MaxOS::memory::MemoryManager}!m\_first\_memory\_chunk@{m\_first\_memory\_chunk}}
\index{m\_first\_memory\_chunk@{m\_first\_memory\_chunk}!MaxOS::memory::MemoryManager@{MaxOS::memory::MemoryManager}}
\doxysubsubsection{\texorpdfstring{m\_first\_memory\_chunk}{m\_first\_memory\_chunk}}
{\footnotesize\ttfamily \mbox{\hyperlink{structMaxOS_1_1memory_1_1MemoryChunk}{Memory\+Chunk}}$\ast$ Max\+O\+S\+::memory\+::\+Memory\+Manager\+::m\+\_\+first\+\_\+memory\+\_\+chunk\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 37 of file memorymanagement.\+h.



Referenced by malloc(), memory\+\_\+used(), and Memory\+Manager().

\mbox{\Hypertarget{classMaxOS_1_1memory_1_1MemoryManager_ac72c7219ae81f7abd58d5f4d7ce29291}\label{classMaxOS_1_1memory_1_1MemoryManager_ac72c7219ae81f7abd58d5f4d7ce29291}} 
\index{MaxOS::memory::MemoryManager@{MaxOS::memory::MemoryManager}!s\_active\_memory\_manager@{s\_active\_memory\_manager}}
\index{s\_active\_memory\_manager@{s\_active\_memory\_manager}!MaxOS::memory::MemoryManager@{MaxOS::memory::MemoryManager}}
\doxysubsubsection{\texorpdfstring{s\_active\_memory\_manager}{s\_active\_memory\_manager}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1memory_1_1MemoryManager}{Memory\+Manager}} $\ast$ Memory\+Manager\+::s\+\_\+active\+\_\+memory\+\_\+manager = 0\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 40 of file memorymanagement.\+h.



Referenced by Memory\+Manager(), operator delete(), operator delete\mbox{[}$\,$\mbox{]}(), operator new(), operator new\mbox{[}$\,$\mbox{]}(), and $\sim$\+Memory\+Manager().

\mbox{\Hypertarget{classMaxOS_1_1memory_1_1MemoryManager_a43858e53a4559c6bc0280f429b85c8da}\label{classMaxOS_1_1memory_1_1MemoryManager_a43858e53a4559c6bc0280f429b85c8da}} 
\index{MaxOS::memory::MemoryManager@{MaxOS::memory::MemoryManager}!s\_higher\_half\_offset@{s\_higher\_half\_offset}}
\index{s\_higher\_half\_offset@{s\_higher\_half\_offset}!MaxOS::memory::MemoryManager@{MaxOS::memory::MemoryManager}}
\doxysubsubsection{\texorpdfstring{s\_higher\_half\_offset}{s\_higher\_half\_offset}}
{\footnotesize\ttfamily const uint64\+\_\+t Max\+O\+S\+::memory\+::\+Memory\+Manager\+::s\+\_\+higher\+\_\+half\+\_\+offset \{ 0x\+F\+F\+F\+F\+F\+F\+F\+F80000000 \}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 41 of file memorymanagement.\+h.



Referenced by map\+\_\+to\+\_\+higher\+\_\+half().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Max\+O\+S/\+Max\+O\+S/kernel/include/memory/\mbox{\hyperlink{memorymanagement_8h}{memorymanagement.\+h}}\item 
/home/runner/work/\+Max\+O\+S/\+Max\+O\+S/kernel/src/memory/\mbox{\hyperlink{memorymanagement_8cpp}{memorymanagement.\+cpp}}\end{DoxyCompactItemize}
