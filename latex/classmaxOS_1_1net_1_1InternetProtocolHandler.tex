\hypertarget{classmaxOS_1_1net_1_1InternetProtocolHandler}{}\doxysection{max\+OS\+::net\+::Internet\+Protocol\+Handler Class Reference}
\label{classmaxOS_1_1net_1_1InternetProtocolHandler}\index{maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}}


{\ttfamily \#include $<$ipv4.\+h$>$}

Inheritance diagram for max\+OS\+::net\+::Internet\+Protocol\+Handler\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classmaxOS_1_1net_1_1InternetProtocolHandler}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_ae6157a2dba220eb761e339dffec52653}{Internet\+Protocol\+Handler}} (\mbox{\hyperlink{classmaxOS_1_1net_1_1EthernetFrameHandler}{Ethernet\+Frame\+Handler}} $\ast$backend, \mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{Internet\+Protocol\+Address}} \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a061258d1aed4df48353cd47c2e65f966}{own\+Internet\+Protocol\+Address}}, \mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{Internet\+Protocol\+Address}} \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_aa827389d1defe14953167df8f76083ed}{default\+Gateway\+Internet\+Protocol\+Address}}, \mbox{\hyperlink{namespacemaxOS_1_1net_a8c823821695194f776d83809d63dc725}{Subnet\+Mask}} \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a0e6f871a2dba99b8cadc6dff6d8ac7d0}{subnet\+Mask}}, \mbox{\hyperlink{classmaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} $\ast$\mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a152276028a9b5118a7dbcf97b301bf5a}{error\+Messages}})
\item 
\mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_af7c23c1c67531f0add5de160d1b8f6c2}{$\sim$\+Internet\+Protocol\+Handler}} ()
\item 
bool \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_ad3d1bb7473fe8b1c77a25ed14316d4b6}{handle\+Ethernetframe\+Payload}} (uint8\+\_\+t $\ast$ethernetframe\+Payload, uint32\+\_\+t \mbox{\hyperlink{multiboot_8h_a6d813a0f2b5281b18dea3f4cda696c33}{size}}) override
\begin{DoxyCompactList}\small\item\em Called when an IP packet is received. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a5d7309a2c8d94bab4dbee0fe2dac9e6b}{send\+Internet\+Protocol\+Packet}} (uint32\+\_\+t dst\+I\+P\+\_\+\+BE, uint8\+\_\+t \mbox{\hyperlink{tcp_8h_ab551400c74271f35d0c79f81d29cffbb}{protocol}}, uint8\+\_\+t $\ast$\mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}}, uint32\+\_\+t \mbox{\hyperlink{multiboot_8h_a6d813a0f2b5281b18dea3f4cda696c33}{size}})
\begin{DoxyCompactList}\small\item\em Sends an IP packet. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{Internet\+Protocol\+Address}} \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_af055b5794e36d06d1c2de7200266336a}{Get\+Internet\+Protocol\+Address}} ()
\item 
\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1ethernet_a6fad3f62f91a21251eb141e990287b1c}{drivers\+::ethernet\+::\+Media\+Access\+Control\+Address}} \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a19e57b1275f830876149c174d7cba632}{Get\+Media\+Access\+Control\+Address}} ()
\item 
void \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_ace68ceb220909f204ff9140a19e7bc53}{connect\+Internet\+Protocol\+Payload\+Handler}} (\mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolPayloadHandler}{Internet\+Protocol\+Payload\+Handler}} $\ast$internet\+Protocol\+Payload\+Handler)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static uint16\+\_\+t \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_af21ed9d77b68f0c51f1d80524d327ded}{Checksum}} (uint16\+\_\+t $\ast$\mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}}, uint32\+\_\+t length\+In\+Bytes)
\begin{DoxyCompactList}\small\item\em Creates a checksum for the given data. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{Internet\+Protocol\+Address}} \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a3f7fcfa4bd0b8ea9dcc76d987affd875}{Create\+Internet\+Protocol\+Address}} (uint8\+\_\+t digit1, uint8\+\_\+t digit2, uint8\+\_\+t digit3, uint8\+\_\+t digit4)
\item 
static \mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{Internet\+Protocol\+Address}} \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_afe355c241075103457e041325d9b86c0}{Parse}} (\mbox{\hyperlink{namespacemaxOS_afb37cc4e82c35155b8c0785e8d9fa937}{string}} \mbox{\hyperlink{amd__am79c973_8h_ac0d31ca829f934cccd89f8054e02773e}{address}})
\item 
static \mbox{\hyperlink{namespacemaxOS_1_1net_a8c823821695194f776d83809d63dc725}{Subnet\+Mask}} \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a381d0d9daecb7fd7118125cb1e083cd4}{Create\+Subnet\+Mask}} (uint8\+\_\+t digit1, uint8\+\_\+t digit2, uint8\+\_\+t digit3, uint8\+\_\+t digit4)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a64f10c98db6120cf3cffcdf2d33d6db1}{Register\+Internet\+Protocol\+Address\+Resolver}} (\mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolAddressResolver}{Internet\+Protocol\+Address\+Resolver}} $\ast$\mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_aefecabd21a18ccddab98ff29220e7312}{resolver}})
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classmaxOS_1_1common_1_1Map}{common\+::\+Map}}$<$ uint8\+\_\+t, \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolPayloadHandler}{Internet\+Protocol\+Payload\+Handler}} $\ast$ $>$ \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a71d5bd208c9559576c4a5c2070d809bb}{internet\+Protocol\+Payload\+Handlers}}
\item 
\mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolAddressResolver}{Internet\+Protocol\+Address\+Resolver}} $\ast$ \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_aefecabd21a18ccddab98ff29220e7312}{resolver}}
\item 
\mbox{\hyperlink{classmaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} $\ast$ \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a152276028a9b5118a7dbcf97b301bf5a}{error\+Messages}}
\item 
\mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{Internet\+Protocol\+Address}} \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a061258d1aed4df48353cd47c2e65f966}{own\+Internet\+Protocol\+Address}}
\item 
\mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{Internet\+Protocol\+Address}} \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_aa827389d1defe14953167df8f76083ed}{default\+Gateway\+Internet\+Protocol\+Address}}
\item 
\mbox{\hyperlink{namespacemaxOS_1_1net_a8c823821695194f776d83809d63dc725}{Subnet\+Mask}} \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a0e6f871a2dba99b8cadc6dff6d8ac7d0}{subnet\+Mask}}
\end{DoxyCompactItemize}
\doxysubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_ac38717f2a2ac4e47c513da76498b3610}{Internet\+Protocol\+Address\+Resolver}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 62 of file ipv4.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classmaxOS_1_1net_1_1InternetProtocolHandler_ae6157a2dba220eb761e339dffec52653}\label{classmaxOS_1_1net_1_1InternetProtocolHandler_ae6157a2dba220eb761e339dffec52653}} 
\index{maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}!InternetProtocolHandler@{InternetProtocolHandler}}
\index{InternetProtocolHandler@{InternetProtocolHandler}!maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}}
\doxysubsubsection{\texorpdfstring{InternetProtocolHandler()}{InternetProtocolHandler()}}
{\footnotesize\ttfamily Internet\+Protocol\+Handler\+::\+Internet\+Protocol\+Handler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classmaxOS_1_1net_1_1EthernetFrameHandler}{Ethernet\+Frame\+Handler}} $\ast$}]{backend,  }\item[{\mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{Internet\+Protocol\+Address}}}]{own\+Internet\+Protocol\+Address,  }\item[{\mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{Internet\+Protocol\+Address}}}]{default\+Gateway\+Internet\+Protocol\+Address,  }\item[{\mbox{\hyperlink{namespacemaxOS_1_1net_a8c823821695194f776d83809d63dc725}{Subnet\+Mask}}}]{subnet\+Mask,  }\item[{\mbox{\hyperlink{classmaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} $\ast$}]{error\+Messages }\end{DoxyParamCaption})}



Definition at line 92 of file ipv4.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{93         : \mbox{\hyperlink{classmaxOS_1_1net_1_1EthernetFramePayloadHandler_a5898c284c9e748b97254abcbaee68387}{EthernetFramePayloadHandler}}(backend, 0x0800)}
\DoxyCodeLine{94 \{}
\DoxyCodeLine{95     \textcolor{comment}{//Store vars}}
\DoxyCodeLine{96     \textcolor{keyword}{this} -\/> \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a061258d1aed4df48353cd47c2e65f966}{ownInternetProtocolAddress}} = \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a061258d1aed4df48353cd47c2e65f966}{ownInternetProtocolAddress}};}
\DoxyCodeLine{97     \textcolor{keyword}{this} -\/> \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_aa827389d1defe14953167df8f76083ed}{defaultGatewayInternetProtocolAddress}} = \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_aa827389d1defe14953167df8f76083ed}{defaultGatewayInternetProtocolAddress}};}
\DoxyCodeLine{98     \textcolor{keyword}{this} -\/> \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a0e6f871a2dba99b8cadc6dff6d8ac7d0}{subnetMask}} = \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a0e6f871a2dba99b8cadc6dff6d8ac7d0}{subnetMask}};}
\DoxyCodeLine{99     \textcolor{keyword}{this} -\/> \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a152276028a9b5118a7dbcf97b301bf5a}{errorMessages}} = \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a152276028a9b5118a7dbcf97b301bf5a}{errorMessages}};}
\DoxyCodeLine{100 \}}

\end{DoxyCode}


References default\+Gateway\+Internet\+Protocol\+Address, error\+Messages, own\+Internet\+Protocol\+Address, and subnet\+Mask.

\mbox{\Hypertarget{classmaxOS_1_1net_1_1InternetProtocolHandler_af7c23c1c67531f0add5de160d1b8f6c2}\label{classmaxOS_1_1net_1_1InternetProtocolHandler_af7c23c1c67531f0add5de160d1b8f6c2}} 
\index{maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}!````~InternetProtocolHandler@{$\sim$InternetProtocolHandler}}
\index{````~InternetProtocolHandler@{$\sim$InternetProtocolHandler}!maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}}
\doxysubsubsection{\texorpdfstring{$\sim$InternetProtocolHandler()}{~InternetProtocolHandler()}}
{\footnotesize\ttfamily Internet\+Protocol\+Handler\+::$\sim$\+Internet\+Protocol\+Handler (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 102 of file ipv4.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{102                                                   \{}
\DoxyCodeLine{103 }
\DoxyCodeLine{104 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classmaxOS_1_1net_1_1InternetProtocolHandler_af21ed9d77b68f0c51f1d80524d327ded}\label{classmaxOS_1_1net_1_1InternetProtocolHandler_af21ed9d77b68f0c51f1d80524d327ded}} 
\index{maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}!Checksum@{Checksum}}
\index{Checksum@{Checksum}!maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}}
\doxysubsubsection{\texorpdfstring{Checksum()}{Checksum()}}
{\footnotesize\ttfamily uint16\+\_\+t Internet\+Protocol\+Handler\+::\+Checksum (\begin{DoxyParamCaption}\item[{uint16\+\_\+t $\ast$}]{data,  }\item[{uint32\+\_\+t}]{length\+In\+Bytes }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Creates a checksum for the given data. 


\begin{DoxyParams}{Parameters}
{\em data} & The data to create a checksum for. \\
\hline
{\em length\+In\+Bytes} & The length of the data in bytes. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The checksum. 
\end{DoxyReturn}


Definition at line 221 of file ipv4.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{221                                                                                  \{}
\DoxyCodeLine{222 }
\DoxyCodeLine{223     uint32\_t temp = 0;                                                                             \textcolor{comment}{//Init sum}}
\DoxyCodeLine{224 }
\DoxyCodeLine{225     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} = 0; \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} < lengthInBytes/2; \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}}++)                                                       \textcolor{comment}{//Loop through data (/2 bc bytes)}}
\DoxyCodeLine{226         temp += ((\mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}}[\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}}] \& 0xFF00) >> 8) | ((\mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}}[\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}}] \& 0x00FF) << 8);                             \textcolor{comment}{//Add data to sum in big endian}}
\DoxyCodeLine{227 }
\DoxyCodeLine{228     \textcolor{keywordflow}{if}(lengthInBytes \% 2)                                                                          \textcolor{comment}{//If there is an odd number of bytes}}
\DoxyCodeLine{229         temp += ((uint16\_t)((\textcolor{keywordtype}{string})\mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}})[lengthInBytes-\/1]) << 8;                                   \textcolor{comment}{//Add the last byte to the sum}}
\DoxyCodeLine{230 }
\DoxyCodeLine{231     \textcolor{keywordflow}{while}(temp \& 0xFFFF0000)                                                                       \textcolor{comment}{//While there is a carry}}
\DoxyCodeLine{232         temp = (temp \& 0xFFFF) + (temp >> 16);                                                     \textcolor{comment}{//Add the carry to the sum}}
\DoxyCodeLine{233 }
\DoxyCodeLine{234     \textcolor{keywordflow}{return} ((\string~temp \& 0xFF00) >> 8) | ((\string~temp \& 0x00FF) << 8);}
\DoxyCodeLine{235 \}}

\end{DoxyCode}


References data, and max\+O\+S\+::drivers\+::peripherals\+::i.



Referenced by handle\+Ethernetframe\+Payload(), max\+O\+S\+::net\+::\+Internet\+Control\+Message\+Protocol\+::handle\+Internet\+Protocol\+Payload(), max\+O\+S\+::net\+::\+Internet\+Control\+Message\+Protocol\+::\+Request\+Echo\+Reply(), send\+Internet\+Protocol\+Packet(), and max\+O\+S\+::net\+::\+Transmission\+Control\+Protocol\+Handler\+::send\+Transmission\+Control\+Protocol\+Packet().

\mbox{\Hypertarget{classmaxOS_1_1net_1_1InternetProtocolHandler_ace68ceb220909f204ff9140a19e7bc53}\label{classmaxOS_1_1net_1_1InternetProtocolHandler_ace68ceb220909f204ff9140a19e7bc53}} 
\index{maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}!connectInternetProtocolPayloadHandler@{connectInternetProtocolPayloadHandler}}
\index{connectInternetProtocolPayloadHandler@{connectInternetProtocolPayloadHandler}!maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}}
\doxysubsubsection{\texorpdfstring{connectInternetProtocolPayloadHandler()}{connectInternetProtocolPayloadHandler()}}
{\footnotesize\ttfamily void Internet\+Protocol\+Handler\+::connect\+Internet\+Protocol\+Payload\+Handler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolPayloadHandler}{Internet\+Protocol\+Payload\+Handler}} $\ast$}]{internet\+Protocol\+Payload\+Handler }\end{DoxyParamCaption})}



Definition at line 287 of file ipv4.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{287                                                                                                                                    \{}
\DoxyCodeLine{288     \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a71d5bd208c9559576c4a5c2070d809bb}{internetProtocolPayloadHandlers}}.insert(internetProtocolPayloadHandler -\/> ipProtocol, internetProtocolPayloadHandler);}
\DoxyCodeLine{289 \}}

\end{DoxyCode}


References internet\+Protocol\+Payload\+Handlers.



Referenced by max\+O\+S\+::net\+::\+Internet\+Protocol\+Payload\+Handler\+::\+Internet\+Protocol\+Payload\+Handler().

\mbox{\Hypertarget{classmaxOS_1_1net_1_1InternetProtocolHandler_a3f7fcfa4bd0b8ea9dcc76d987affd875}\label{classmaxOS_1_1net_1_1InternetProtocolHandler_a3f7fcfa4bd0b8ea9dcc76d987affd875}} 
\index{maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}!CreateInternetProtocolAddress@{CreateInternetProtocolAddress}}
\index{CreateInternetProtocolAddress@{CreateInternetProtocolAddress}!maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}}
\doxysubsubsection{\texorpdfstring{CreateInternetProtocolAddress()}{CreateInternetProtocolAddress()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{Internet\+Protocol\+Address}} Internet\+Protocol\+Handler\+::\+Create\+Internet\+Protocol\+Address (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{digit1,  }\item[{uint8\+\_\+t}]{digit2,  }\item[{uint8\+\_\+t}]{digit3,  }\item[{uint8\+\_\+t}]{digit4 }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 243 of file ipv4.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{243                                                                                                                                              \{}
\DoxyCodeLine{244     \mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{InternetProtocolAddress}} result = digit4;}
\DoxyCodeLine{245     result = (result << 8) | digit3;}
\DoxyCodeLine{246     result = (result << 8) | digit2;}
\DoxyCodeLine{247     result = (result << 8) | digit1;}
\DoxyCodeLine{248     \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{249 \}}

\end{DoxyCode}


Referenced by Create\+Subnet\+Mask(), and Parse().

\mbox{\Hypertarget{classmaxOS_1_1net_1_1InternetProtocolHandler_a381d0d9daecb7fd7118125cb1e083cd4}\label{classmaxOS_1_1net_1_1InternetProtocolHandler_a381d0d9daecb7fd7118125cb1e083cd4}} 
\index{maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}!CreateSubnetMask@{CreateSubnetMask}}
\index{CreateSubnetMask@{CreateSubnetMask}!maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}}
\doxysubsubsection{\texorpdfstring{CreateSubnetMask()}{CreateSubnetMask()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacemaxOS_1_1net_a8c823821695194f776d83809d63dc725}{Subnet\+Mask}} Internet\+Protocol\+Handler\+::\+Create\+Subnet\+Mask (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{digit1,  }\item[{uint8\+\_\+t}]{digit2,  }\item[{uint8\+\_\+t}]{digit3,  }\item[{uint8\+\_\+t}]{digit4 }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 275 of file ipv4.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{275                                                                                                                    \{}
\DoxyCodeLine{276     \textcolor{keywordflow}{return} (\mbox{\hyperlink{namespacemaxOS_1_1net_a8c823821695194f776d83809d63dc725}{SubnetMask}})\mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a3f7fcfa4bd0b8ea9dcc76d987affd875}{CreateInternetProtocolAddress}}(digit1, digit2, digit3, digit4);}
\DoxyCodeLine{277 \}}

\end{DoxyCode}


References Create\+Internet\+Protocol\+Address().

\mbox{\Hypertarget{classmaxOS_1_1net_1_1InternetProtocolHandler_af055b5794e36d06d1c2de7200266336a}\label{classmaxOS_1_1net_1_1InternetProtocolHandler_af055b5794e36d06d1c2de7200266336a}} 
\index{maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}!GetInternetProtocolAddress@{GetInternetProtocolAddress}}
\index{GetInternetProtocolAddress@{GetInternetProtocolAddress}!maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}}
\doxysubsubsection{\texorpdfstring{GetInternetProtocolAddress()}{GetInternetProtocolAddress()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{Internet\+Protocol\+Address}} Internet\+Protocol\+Handler\+::\+Get\+Internet\+Protocol\+Address (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 279 of file ipv4.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{279                                                                             \{}
\DoxyCodeLine{280     \textcolor{keywordflow}{return} \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a061258d1aed4df48353cd47c2e65f966}{ownInternetProtocolAddress}};}
\DoxyCodeLine{281 \}}

\end{DoxyCode}


References own\+Internet\+Protocol\+Address.



Referenced by handle\+Ethernetframe\+Payload(), and send\+Internet\+Protocol\+Packet().

\mbox{\Hypertarget{classmaxOS_1_1net_1_1InternetProtocolHandler_a19e57b1275f830876149c174d7cba632}\label{classmaxOS_1_1net_1_1InternetProtocolHandler_a19e57b1275f830876149c174d7cba632}} 
\index{maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}!GetMediaAccessControlAddress@{GetMediaAccessControlAddress}}
\index{GetMediaAccessControlAddress@{GetMediaAccessControlAddress}!maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}}
\doxysubsubsection{\texorpdfstring{GetMediaAccessControlAddress()}{GetMediaAccessControlAddress()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1ethernet_a6fad3f62f91a21251eb141e990287b1c}{Media\+Access\+Control\+Address}} Internet\+Protocol\+Handler\+::\+Get\+Media\+Access\+Control\+Address (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 283 of file ipv4.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{283                                                                                 \{}
\DoxyCodeLine{284     \textcolor{keywordflow}{return} \mbox{\hyperlink{classmaxOS_1_1net_1_1EthernetFramePayloadHandler_ab9c1505188cd0695cdaccd0d004e1410}{frameHandler}} -\/> getMAC();}
\DoxyCodeLine{285 \}}

\end{DoxyCode}


References max\+O\+S\+::net\+::\+Ethernet\+Frame\+Payload\+Handler\+::frame\+Handler.

\mbox{\Hypertarget{classmaxOS_1_1net_1_1InternetProtocolHandler_ad3d1bb7473fe8b1c77a25ed14316d4b6}\label{classmaxOS_1_1net_1_1InternetProtocolHandler_ad3d1bb7473fe8b1c77a25ed14316d4b6}} 
\index{maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}!handleEthernetframePayload@{handleEthernetframePayload}}
\index{handleEthernetframePayload@{handleEthernetframePayload}!maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}}
\doxysubsubsection{\texorpdfstring{handleEthernetframePayload()}{handleEthernetframePayload()}}
{\footnotesize\ttfamily bool Internet\+Protocol\+Handler\+::handle\+Ethernetframe\+Payload (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{ethernetframe\+Payload,  }\item[{uint32\+\_\+t}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Called when an IP packet is received. 


\begin{DoxyParams}{Parameters}
{\em etherframe\+Payload} & The payload of the IP packet. \\
\hline
{\em size} & The size of the IP packet. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if the packet is to be sent back, false otherwise. 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classmaxOS_1_1net_1_1EthernetFramePayloadHandler_a29c306ed3013ac7860f9facc04cb5a17}{max\+O\+S\+::net\+::\+Ethernet\+Frame\+Payload\+Handler}}.



Definition at line 113 of file ipv4.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{113                                                                                                     \{}
\DoxyCodeLine{114 }
\DoxyCodeLine{115     \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a152276028a9b5118a7dbcf97b301bf5a}{errorMessages}} -\/>\mbox{\hyperlink{classmaxOS_1_1common_1_1OutputStream_acd9ebbe1729dded0d4156f32ae77da95}{write}}(\textcolor{stringliteral}{"IP: Handling packet\(\backslash\)n"});}
\DoxyCodeLine{116 }
\DoxyCodeLine{117     \textcolor{comment}{//Check if the size is big enough to contain an ethernet frame}}
\DoxyCodeLine{118     \textcolor{keywordflow}{if}(\mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} < \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structmaxOS_1_1net_1_1InternetProtocolV4Header}{InternetProtocolV4Header}}))}
\DoxyCodeLine{119         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{120 }
\DoxyCodeLine{121     \textcolor{comment}{//Convert to struct for easier use}}
\DoxyCodeLine{122     \mbox{\hyperlink{structmaxOS_1_1net_1_1InternetProtocolV4Header}{InternetProtocolV4Header}}* ipMessage = (\mbox{\hyperlink{structmaxOS_1_1net_1_1InternetProtocolV4Header}{InternetProtocolV4Header}}*)ethernetframePayload;}
\DoxyCodeLine{123     \textcolor{keywordtype}{bool} sendBack = \textcolor{keyword}{false};}
\DoxyCodeLine{124 }
\DoxyCodeLine{125     \textcolor{comment}{//Only handle if it is for this device}}
\DoxyCodeLine{126     \textcolor{keywordflow}{if}(ipMessage -\/> \mbox{\hyperlink{ipv4_8h_afcc7048c1d9643cebaf1806fa4de390e}{destinationIP}} == \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_af055b5794e36d06d1c2de7200266336a}{GetInternetProtocolAddress}}())}
\DoxyCodeLine{127     \{}
\DoxyCodeLine{128         \textcolor{keywordtype}{int} \mbox{\hyperlink{intel__i217_8h_a1892eba2086d12ac2b09005aeb09ea3b}{length}} = ipMessage -\/> \mbox{\hyperlink{ipv4_8h_a46d6b08cf598408355fa1fc5c1de902a}{totalLength}};                          \textcolor{comment}{//Get length of the message}}
\DoxyCodeLine{129         \textcolor{keywordflow}{if}(\mbox{\hyperlink{intel__i217_8h_a1892eba2086d12ac2b09005aeb09ea3b}{length}} > \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}})                                               \textcolor{comment}{//Check if the length is bigger than the size of the message}}
\DoxyCodeLine{130             \mbox{\hyperlink{intel__i217_8h_a1892eba2086d12ac2b09005aeb09ea3b}{length}} = \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}};                                              \textcolor{comment}{//If so, set length to size (this stops heartbleed attacks as it will not read past the end of the message, which the attacker could have filled with data)}}
\DoxyCodeLine{131 }
\DoxyCodeLine{132         \textcolor{comment}{// Get the handler for the protocol}}
\DoxyCodeLine{133         \mbox{\hyperlink{classmaxOS_1_1common_1_1Rectangle}{Map<uint8\_t, InternetProtocolPayloadHandler*>::iterator}} handlerIterator = \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a71d5bd208c9559576c4a5c2070d809bb}{internetProtocolPayloadHandlers}}.find(ipMessage -\/> \mbox{\hyperlink{arp_8h_ab551400c74271f35d0c79f81d29cffbb}{protocol}});}
\DoxyCodeLine{134         \textcolor{keywordflow}{if}(handlerIterator != \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a71d5bd208c9559576c4a5c2070d809bb}{internetProtocolPayloadHandlers}}.end()) \{}
\DoxyCodeLine{135             \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolPayloadHandler}{InternetProtocolPayloadHandler}}* handler = handlerIterator -\/> second;}
\DoxyCodeLine{136             \textcolor{keywordflow}{if}(handler != 0) \{}
\DoxyCodeLine{137                 sendBack = handler -\/> handleInternetProtocolPayload(ipMessage -\/> \mbox{\hyperlink{ipv4_8h_aed74aa5789cabec794d6961455e80db3}{sourceIP}}, ipMessage -\/> \mbox{\hyperlink{ipv4_8h_afcc7048c1d9643cebaf1806fa4de390e}{destinationIP}}, ethernetframePayload + \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structmaxOS_1_1net_1_1InternetProtocolV4Header}{InternetProtocolV4Header}}), \mbox{\hyperlink{intel__i217_8h_a1892eba2086d12ac2b09005aeb09ea3b}{length}} -\/ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structmaxOS_1_1net_1_1InternetProtocolV4Header}{InternetProtocolV4Header}}));}
\DoxyCodeLine{138             \}}
\DoxyCodeLine{139         \}}
\DoxyCodeLine{140 }
\DoxyCodeLine{141 }
\DoxyCodeLine{142     \}}
\DoxyCodeLine{143 }
\DoxyCodeLine{144     \textcolor{comment}{//If the data is to be sent back again}}
\DoxyCodeLine{145     \textcolor{keywordflow}{if}(sendBack)\{}
\DoxyCodeLine{146 }
\DoxyCodeLine{147         \textcolor{comment}{//Swap source and destination}}
\DoxyCodeLine{148         uint32\_t temp = ipMessage -\/> \mbox{\hyperlink{ipv4_8h_afcc7048c1d9643cebaf1806fa4de390e}{destinationIP}};                                                                                     \textcolor{comment}{//Store destination IP}}
\DoxyCodeLine{149         ipMessage -\/> \mbox{\hyperlink{ipv4_8h_afcc7048c1d9643cebaf1806fa4de390e}{destinationIP}} = ipMessage -\/> \mbox{\hyperlink{ipv4_8h_aed74aa5789cabec794d6961455e80db3}{sourceIP}};                                                                                \textcolor{comment}{//Set destination IP to source IP}}
\DoxyCodeLine{150         ipMessage -\/> \mbox{\hyperlink{ipv4_8h_aed74aa5789cabec794d6961455e80db3}{sourceIP}} = temp;                                                                                              \textcolor{comment}{//Set source IP to destination IP}}
\DoxyCodeLine{151 }
\DoxyCodeLine{152         ipMessage -\/> \mbox{\hyperlink{ipv4_8h_a1c954c79d7e772d87d708498a586f206}{timeToLive}} = 0x40;                                                                                         \textcolor{comment}{//Reset TTL}}
\DoxyCodeLine{153         ipMessage -\/> \mbox{\hyperlink{intel__i217_8h_a6796c847bbd16253ce2538754c250bd6}{checksum}} = \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_af21ed9d77b68f0c51f1d80524d327ded}{Checksum}}((uint16\_t*)ipMessage, 4 * ipMessage -\/> \mbox{\hyperlink{ipv4_8h_abf2b1d816d4e2e459b2ed1bda26cb904}{headerLength}});                  \textcolor{comment}{//Reset checksum as the source and destination IP have changed so has the time to live and therefore there is a different header}}
\DoxyCodeLine{154 }
\DoxyCodeLine{155 }
\DoxyCodeLine{156         \textcolor{comment}{// TODO: Set the identifier}}
\DoxyCodeLine{157     \}}
\DoxyCodeLine{158 }
\DoxyCodeLine{159     \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a152276028a9b5118a7dbcf97b301bf5a}{errorMessages}} -\/>\mbox{\hyperlink{classmaxOS_1_1common_1_1OutputStream_acd9ebbe1729dded0d4156f32ae77da95}{write}}(\textcolor{stringliteral}{"IP: Handled packet\(\backslash\)n"});}
\DoxyCodeLine{160     \textcolor{keywordflow}{return} sendBack;}
\DoxyCodeLine{161 \}}

\end{DoxyCode}


References checksum, Checksum(), destination\+IP, error\+Messages, Get\+Internet\+Protocol\+Address(), header\+Length, internet\+Protocol\+Payload\+Handlers, length, protocol, size, source\+IP, time\+To\+Live, total\+Length, and max\+O\+S\+::common\+::\+Output\+Stream\+::write().

\mbox{\Hypertarget{classmaxOS_1_1net_1_1InternetProtocolHandler_afe355c241075103457e041325d9b86c0}\label{classmaxOS_1_1net_1_1InternetProtocolHandler_afe355c241075103457e041325d9b86c0}} 
\index{maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}!Parse@{Parse}}
\index{Parse@{Parse}!maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}}
\doxysubsubsection{\texorpdfstring{Parse()}{Parse()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{Internet\+Protocol\+Address}} Internet\+Protocol\+Handler\+::\+Parse (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacemaxOS_afb37cc4e82c35155b8c0785e8d9fa937}{string}}}]{address }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 251 of file ipv4.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{251                                                                      \{}
\DoxyCodeLine{252     uint8\_t digits[4];}
\DoxyCodeLine{253 }
\DoxyCodeLine{254     uint8\_t currentDigit = 0;}
\DoxyCodeLine{255     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} = 0; \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} < 4; \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}}++)}
\DoxyCodeLine{256         digits[\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}}] = 0;}
\DoxyCodeLine{257     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{string} \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} = (\textcolor{keywordtype}{string})\mbox{\hyperlink{amd__am79c973_8h_ac0d31ca829f934cccd89f8054e02773e}{address}}; *\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} != \textcolor{charliteral}{'\(\backslash\)0'}; ++\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}})}
\DoxyCodeLine{258     \{}
\DoxyCodeLine{259         \textcolor{keywordflow}{if}(\textcolor{charliteral}{'0'} <= *\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} \&\& *\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} <= \textcolor{charliteral}{'9'})}
\DoxyCodeLine{260         \{}
\DoxyCodeLine{261             digits[currentDigit] = digits[currentDigit] * 10 + *\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} -\/ \textcolor{charliteral}{'0'};}
\DoxyCodeLine{262         \}}
\DoxyCodeLine{263         \textcolor{keywordflow}{else}}
\DoxyCodeLine{264         \{}
\DoxyCodeLine{265             \textcolor{keywordflow}{if}(currentDigit >= 3)}
\DoxyCodeLine{266                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{267             currentDigit++;}
\DoxyCodeLine{268         \}}
\DoxyCodeLine{269 }
\DoxyCodeLine{270     \}}
\DoxyCodeLine{271 }
\DoxyCodeLine{272     \textcolor{keywordflow}{return} \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a3f7fcfa4bd0b8ea9dcc76d987affd875}{CreateInternetProtocolAddress}}(digits[0], digits[1], digits[2], digits[3]);}
\DoxyCodeLine{273 \}}

\end{DoxyCode}


References address, Create\+Internet\+Protocol\+Address(), and max\+O\+S\+::drivers\+::peripherals\+::i.



Referenced by max\+O\+S\+::net\+::\+User\+Datagram\+Protocol\+Handler\+::\+Connect(), and max\+O\+S\+::net\+::\+Transmission\+Control\+Protocol\+Handler\+::\+Connect().

\mbox{\Hypertarget{classmaxOS_1_1net_1_1InternetProtocolHandler_a64f10c98db6120cf3cffcdf2d33d6db1}\label{classmaxOS_1_1net_1_1InternetProtocolHandler_a64f10c98db6120cf3cffcdf2d33d6db1}} 
\index{maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}!RegisterInternetProtocolAddressResolver@{RegisterInternetProtocolAddressResolver}}
\index{RegisterInternetProtocolAddressResolver@{RegisterInternetProtocolAddressResolver}!maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}}
\doxysubsubsection{\texorpdfstring{RegisterInternetProtocolAddressResolver()}{RegisterInternetProtocolAddressResolver()}}
{\footnotesize\ttfamily void Internet\+Protocol\+Handler\+::\+Register\+Internet\+Protocol\+Address\+Resolver (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolAddressResolver}{Internet\+Protocol\+Address\+Resolver}} $\ast$}]{resolver }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 237 of file ipv4.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{237                                                                                                                \{}
\DoxyCodeLine{238 }
\DoxyCodeLine{239     \textcolor{keyword}{this} -\/> \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_aefecabd21a18ccddab98ff29220e7312}{resolver}} = \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_aefecabd21a18ccddab98ff29220e7312}{resolver}};}
\DoxyCodeLine{240 }
\DoxyCodeLine{241 \}}

\end{DoxyCode}


References resolver.

\mbox{\Hypertarget{classmaxOS_1_1net_1_1InternetProtocolHandler_a5d7309a2c8d94bab4dbee0fe2dac9e6b}\label{classmaxOS_1_1net_1_1InternetProtocolHandler_a5d7309a2c8d94bab4dbee0fe2dac9e6b}} 
\index{maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}!sendInternetProtocolPacket@{sendInternetProtocolPacket}}
\index{sendInternetProtocolPacket@{sendInternetProtocolPacket}!maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}}
\doxysubsubsection{\texorpdfstring{sendInternetProtocolPacket()}{sendInternetProtocolPacket()}}
{\footnotesize\ttfamily void Internet\+Protocol\+Handler\+::send\+Internet\+Protocol\+Packet (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{dst\+I\+P\+\_\+\+BE,  }\item[{uint8\+\_\+t}]{protocol,  }\item[{uint8\+\_\+t $\ast$}]{data,  }\item[{uint32\+\_\+t}]{size }\end{DoxyParamCaption})}



Sends an IP packet. 


\begin{DoxyParams}{Parameters}
{\em dst\+I\+P\+\_\+\+BE} & The destination IP address. \\
\hline
{\em protocol} & The protocol of the IP packet. \\
\hline
{\em data} & The payload of the IP packet. \\
\hline
{\em size} & The size of the IP packet. \\
\hline
\end{DoxyParams}


Definition at line 172 of file ipv4.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{172                                                                                                                           \{}
\DoxyCodeLine{173 }
\DoxyCodeLine{174     uint8\_t* buffer = (uint8\_t*)MemoryManager::s\_active\_memory\_manager-\/> malloc(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structmaxOS_1_1net_1_1InternetProtocolV4Header}{InternetProtocolV4Header}}) + \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}});                           \textcolor{comment}{//Allocate memory for the message}}
\DoxyCodeLine{175     \mbox{\hyperlink{structmaxOS_1_1net_1_1InternetProtocolV4Header}{InternetProtocolV4Header}} *message = (\mbox{\hyperlink{structmaxOS_1_1net_1_1InternetProtocolV4Header}{InternetProtocolV4Header}}*)buffer;                                                                            \textcolor{comment}{//Convert to struct for easier use}}
\DoxyCodeLine{176 }
\DoxyCodeLine{177     message -\/> \mbox{\hyperlink{ipv4_8h_ab22abc2906422da61885ac6c8e6a1a59}{version}} = 4;                                                                                                                           \textcolor{comment}{//Set version}}
\DoxyCodeLine{178     message -\/> \mbox{\hyperlink{ipv4_8h_abf2b1d816d4e2e459b2ed1bda26cb904}{headerLength}} = \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structmaxOS_1_1net_1_1InternetProtocolV4Header}{InternetProtocolV4Header}})/4;                                                                                     \textcolor{comment}{//Set header length}}
\DoxyCodeLine{179     message -\/> \mbox{\hyperlink{ipv4_8h_ab0548e81efcf280a5ae280858e578cde}{typeOfService}} = 0;                                                                                                                     \textcolor{comment}{//Set type of service (not priv)}}
\DoxyCodeLine{180 }
\DoxyCodeLine{181     message -\/> \mbox{\hyperlink{ipv4_8h_a46d6b08cf598408355fa1fc5c1de902a}{totalLength}} = \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} + \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structmaxOS_1_1net_1_1InternetProtocolV4Header}{InternetProtocolV4Header}});                                                                                 \textcolor{comment}{//Set total length}}
\DoxyCodeLine{182     message -\/> \mbox{\hyperlink{ipv4_8h_a46d6b08cf598408355fa1fc5c1de902a}{totalLength}} = ((message -\/> \mbox{\hyperlink{ipv4_8h_a46d6b08cf598408355fa1fc5c1de902a}{totalLength}} \& 0xFF00) >> 8)                                                                                 \textcolor{comment}{// Convert to big endian (Swap bytes)}}
\DoxyCodeLine{183                              | ((message -\/> \mbox{\hyperlink{ipv4_8h_a46d6b08cf598408355fa1fc5c1de902a}{totalLength}} \& 0x00FF) << 8);                                                                              \textcolor{comment}{// Convert to big endian (Swap bytes)}}
\DoxyCodeLine{184 }
\DoxyCodeLine{185     message -\/> \mbox{\hyperlink{ipv4_8h_a5868ad3e30cea561af39afae3efa4a7a}{identifier}} = 0x100;                                                                                                                    \textcolor{comment}{//Set identification TODO: do properly}}
\DoxyCodeLine{186     message -\/> \mbox{\hyperlink{ipv4_8h_ae5fbba8e197a2e68174867191be7ddac}{flagsAndOffset}} = 0x0040;                                                                                                               \textcolor{comment}{//Set flags/offset, 0x40 because we are not fragmenting (TODO: doesnt work for packets bigger than 1500 bytes)}}
\DoxyCodeLine{187 }
\DoxyCodeLine{188     message -\/> \mbox{\hyperlink{ipv4_8h_a1c954c79d7e772d87d708498a586f206}{timeToLive}} = 0x40;                                                                                                                     \textcolor{comment}{//Set time to live}}
\DoxyCodeLine{189     message -\/> \mbox{\hyperlink{arp_8h_ab551400c74271f35d0c79f81d29cffbb}{protocol}} = \mbox{\hyperlink{arp_8h_ab551400c74271f35d0c79f81d29cffbb}{protocol}};                                                                                                                   \textcolor{comment}{//Set protocol}}
\DoxyCodeLine{190 }
\DoxyCodeLine{191     message -\/> \mbox{\hyperlink{ipv4_8h_afcc7048c1d9643cebaf1806fa4de390e}{destinationIP}} = dstIP\_BE;                                                                                                                      \textcolor{comment}{//Set destination IP}}
\DoxyCodeLine{192     message -\/> \mbox{\hyperlink{ipv4_8h_aed74aa5789cabec794d6961455e80db3}{sourceIP}} = \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_af055b5794e36d06d1c2de7200266336a}{GetInternetProtocolAddress}}();                                                                                                  \textcolor{comment}{//Set source IP}}
\DoxyCodeLine{193 }
\DoxyCodeLine{194     message -\/> \mbox{\hyperlink{intel__i217_8h_a6796c847bbd16253ce2538754c250bd6}{checksum}} = 0;                                                                                                                          \textcolor{comment}{//Set checksum to 0, init with 0 as checksum funct will also add this value}}
\DoxyCodeLine{195     message -\/> \mbox{\hyperlink{intel__i217_8h_a6796c847bbd16253ce2538754c250bd6}{checksum}} = \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_af21ed9d77b68f0c51f1d80524d327ded}{Checksum}}((uint16\_t*)message, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structmaxOS_1_1net_1_1InternetProtocolV4Header}{InternetProtocolV4Header}}));                                             \textcolor{comment}{//Calculate checksum}}
\DoxyCodeLine{196 }
\DoxyCodeLine{197     \textcolor{comment}{//Copy data}}
\DoxyCodeLine{198     uint8\_t* databuffer = buffer + \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structmaxOS_1_1net_1_1InternetProtocolV4Header}{InternetProtocolV4Header}});                                                                                  \textcolor{comment}{//Get pointer to the data}}
\DoxyCodeLine{199     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} = 0; \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} < \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}}; \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}}++)                                                                                                                            \textcolor{comment}{//Loop through data}}
\DoxyCodeLine{200         databuffer[\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}}] = \mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}}[\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}}];                                                                                                                             \textcolor{comment}{//Copy data}}
\DoxyCodeLine{201 }
\DoxyCodeLine{202     \textcolor{comment}{//Check if the destination is on the same subnet, The if condition determines if the destination device is on the same Local network as the source device . and if they are not on the same local network then we resolve the ip address of the gateway .}}
\DoxyCodeLine{203     \mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{InternetProtocolAddress}} route = dstIP\_BE;                                                                                                                               \textcolor{comment}{//Set route to destination IP by default}}
\DoxyCodeLine{204     \textcolor{keywordflow}{if}((dstIP\_BE \& \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a0e6f871a2dba99b8cadc6dff6d8ac7d0}{subnetMask}}) != (\mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a061258d1aed4df48353cd47c2e65f966}{ownInternetProtocolAddress}} \& \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_a0e6f871a2dba99b8cadc6dff6d8ac7d0}{subnetMask}}))                                                                                             \textcolor{comment}{//Check if the destination is on the same subnet}}
\DoxyCodeLine{205         route = \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_aa827389d1defe14953167df8f76083ed}{defaultGatewayInternetProtocolAddress}};                                                                                                                                   \textcolor{comment}{//If not, set route to gateway IP}}
\DoxyCodeLine{206                                                                                                                     \textcolor{comment}{//Print debug info}}
\DoxyCodeLine{207     uint32\_t MAC = \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolHandler_aefecabd21a18ccddab98ff29220e7312}{resolver}} -\/>\mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolAddressResolver_aa75e8e59c64acf4f6dabc778f65f2522}{Resolve}}(route);}
\DoxyCodeLine{208 }
\DoxyCodeLine{209     \textcolor{comment}{//Send message}}
\DoxyCodeLine{210     \mbox{\hyperlink{classmaxOS_1_1net_1_1EthernetFramePayloadHandler_ab9c1505188cd0695cdaccd0d004e1410}{frameHandler}} -\/> sendEthernetFrame(MAC, \textcolor{keyword}{this} -\/> \mbox{\hyperlink{classmaxOS_1_1net_1_1EthernetFramePayloadHandler_a01baf72ce5c0fa37d30fc196b0df7eb7}{handledType}}, buffer, \mbox{\hyperlink{fat32_8h_ab2c6b258f02add8fdf4cfc7c371dd772}{size}} + \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structmaxOS_1_1net_1_1InternetProtocolV4Header}{InternetProtocolV4Header}}));      \textcolor{comment}{//Send message}}
\DoxyCodeLine{211     MemoryManager::s\_active\_memory\_manager-\/>free(buffer);                                                                                                 \textcolor{comment}{//Free memory}}
\DoxyCodeLine{212 \}}

\end{DoxyCode}


References checksum, Checksum(), data, default\+Gateway\+Internet\+Protocol\+Address, destination\+IP, flags\+And\+Offset, max\+O\+S\+::net\+::\+Ethernet\+Frame\+Payload\+Handler\+::frame\+Handler, Get\+Internet\+Protocol\+Address(), max\+O\+S\+::net\+::\+Ethernet\+Frame\+Payload\+Handler\+::handled\+Type, header\+Length, max\+O\+S\+::drivers\+::peripherals\+::i, identifier, own\+Internet\+Protocol\+Address, protocol, max\+O\+S\+::net\+::\+Internet\+Protocol\+Address\+Resolver\+::\+Resolve(), resolver, size, source\+IP, subnet\+Mask, time\+To\+Live, total\+Length, type\+Of\+Service, and version.



\doxysubsection{Friends And Related Function Documentation}
\mbox{\Hypertarget{classmaxOS_1_1net_1_1InternetProtocolHandler_ac38717f2a2ac4e47c513da76498b3610}\label{classmaxOS_1_1net_1_1InternetProtocolHandler_ac38717f2a2ac4e47c513da76498b3610}} 
\index{maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}!InternetProtocolAddressResolver@{InternetProtocolAddressResolver}}
\index{InternetProtocolAddressResolver@{InternetProtocolAddressResolver}!maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}}
\doxysubsubsection{\texorpdfstring{InternetProtocolAddressResolver}{InternetProtocolAddressResolver}}
{\footnotesize\ttfamily friend class \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolAddressResolver}{Internet\+Protocol\+Address\+Resolver}}\hspace{0.3cm}{\ttfamily [friend]}}



Definition at line 64 of file ipv4.\+h.



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classmaxOS_1_1net_1_1InternetProtocolHandler_aa827389d1defe14953167df8f76083ed}\label{classmaxOS_1_1net_1_1InternetProtocolHandler_aa827389d1defe14953167df8f76083ed}} 
\index{maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}!defaultGatewayInternetProtocolAddress@{defaultGatewayInternetProtocolAddress}}
\index{defaultGatewayInternetProtocolAddress@{defaultGatewayInternetProtocolAddress}!maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}}
\doxysubsubsection{\texorpdfstring{defaultGatewayInternetProtocolAddress}{defaultGatewayInternetProtocolAddress}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{Internet\+Protocol\+Address}} max\+O\+S\+::net\+::\+Internet\+Protocol\+Handler\+::default\+Gateway\+Internet\+Protocol\+Address\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 74 of file ipv4.\+h.



Referenced by Internet\+Protocol\+Handler(), and send\+Internet\+Protocol\+Packet().

\mbox{\Hypertarget{classmaxOS_1_1net_1_1InternetProtocolHandler_a152276028a9b5118a7dbcf97b301bf5a}\label{classmaxOS_1_1net_1_1InternetProtocolHandler_a152276028a9b5118a7dbcf97b301bf5a}} 
\index{maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}!errorMessages@{errorMessages}}
\index{errorMessages@{errorMessages}!maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}}
\doxysubsubsection{\texorpdfstring{errorMessages}{errorMessages}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}}$\ast$ max\+O\+S\+::net\+::\+Internet\+Protocol\+Handler\+::error\+Messages\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 71 of file ipv4.\+h.



Referenced by handle\+Ethernetframe\+Payload(), and Internet\+Protocol\+Handler().

\mbox{\Hypertarget{classmaxOS_1_1net_1_1InternetProtocolHandler_a71d5bd208c9559576c4a5c2070d809bb}\label{classmaxOS_1_1net_1_1InternetProtocolHandler_a71d5bd208c9559576c4a5c2070d809bb}} 
\index{maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}!internetProtocolPayloadHandlers@{internetProtocolPayloadHandlers}}
\index{internetProtocolPayloadHandlers@{internetProtocolPayloadHandlers}!maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}}
\doxysubsubsection{\texorpdfstring{internetProtocolPayloadHandlers}{internetProtocolPayloadHandlers}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmaxOS_1_1common_1_1Map}{common\+::\+Map}}$<$uint8\+\_\+t, \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolPayloadHandler}{Internet\+Protocol\+Payload\+Handler}}$\ast$$>$ max\+O\+S\+::net\+::\+Internet\+Protocol\+Handler\+::internet\+Protocol\+Payload\+Handlers\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 68 of file ipv4.\+h.



Referenced by connect\+Internet\+Protocol\+Payload\+Handler(), and handle\+Ethernetframe\+Payload().

\mbox{\Hypertarget{classmaxOS_1_1net_1_1InternetProtocolHandler_a061258d1aed4df48353cd47c2e65f966}\label{classmaxOS_1_1net_1_1InternetProtocolHandler_a061258d1aed4df48353cd47c2e65f966}} 
\index{maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}!ownInternetProtocolAddress@{ownInternetProtocolAddress}}
\index{ownInternetProtocolAddress@{ownInternetProtocolAddress}!maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}}
\doxysubsubsection{\texorpdfstring{ownInternetProtocolAddress}{ownInternetProtocolAddress}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacemaxOS_1_1net_a6160a1724f91d5d2caafdde3185f5e32}{Internet\+Protocol\+Address}} max\+O\+S\+::net\+::\+Internet\+Protocol\+Handler\+::own\+Internet\+Protocol\+Address\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 73 of file ipv4.\+h.



Referenced by Get\+Internet\+Protocol\+Address(), Internet\+Protocol\+Handler(), and send\+Internet\+Protocol\+Packet().

\mbox{\Hypertarget{classmaxOS_1_1net_1_1InternetProtocolHandler_aefecabd21a18ccddab98ff29220e7312}\label{classmaxOS_1_1net_1_1InternetProtocolHandler_aefecabd21a18ccddab98ff29220e7312}} 
\index{maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}!resolver@{resolver}}
\index{resolver@{resolver}!maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}}
\doxysubsubsection{\texorpdfstring{resolver}{resolver}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmaxOS_1_1net_1_1InternetProtocolAddressResolver}{Internet\+Protocol\+Address\+Resolver}}$\ast$ max\+O\+S\+::net\+::\+Internet\+Protocol\+Handler\+::resolver\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 70 of file ipv4.\+h.



Referenced by Register\+Internet\+Protocol\+Address\+Resolver(), and send\+Internet\+Protocol\+Packet().

\mbox{\Hypertarget{classmaxOS_1_1net_1_1InternetProtocolHandler_a0e6f871a2dba99b8cadc6dff6d8ac7d0}\label{classmaxOS_1_1net_1_1InternetProtocolHandler_a0e6f871a2dba99b8cadc6dff6d8ac7d0}} 
\index{maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}!subnetMask@{subnetMask}}
\index{subnetMask@{subnetMask}!maxOS::net::InternetProtocolHandler@{maxOS::net::InternetProtocolHandler}}
\doxysubsubsection{\texorpdfstring{subnetMask}{subnetMask}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacemaxOS_1_1net_a8c823821695194f776d83809d63dc725}{Subnet\+Mask}} max\+O\+S\+::net\+::\+Internet\+Protocol\+Handler\+::subnet\+Mask\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 75 of file ipv4.\+h.



Referenced by Internet\+Protocol\+Handler(), and send\+Internet\+Protocol\+Packet().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/max-\/os/max-\/os/kernel/include/net/\mbox{\hyperlink{ipv4_8h}{ipv4.\+h}}\item 
/home/runner/work/max-\/os/max-\/os/kernel/src/net/\mbox{\hyperlink{ipv4_8cpp}{ipv4.\+cpp}}\end{DoxyCompactItemize}
