\doxysection{Max\+OS\+::filesystem\+::format\+::Fat32\+Volume Class Reference}
\hypertarget{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume}{}\label{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume}\index{MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}}


Handles the FAT table that stores the information about the files on the disk and operations on the disk.  




{\ttfamily \#include $<$fat32.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a37d49499071a45b3148a4f2f5b7bc85b}{Fat32\+Volume}} (\mbox{\hyperlink{classMaxOS_1_1drivers_1_1disk_1_1Disk}{drivers\+::disk\+::\+Disk}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5d5ea78e0213ece71259dc171b3bd239}{disk}}, \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\+\_\+t}} partition\+\_\+offset)
\item 
\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a843e1b74cf444de13338d8697eaa7c6e}{\texorpdfstring{$\sim$}{\string~}\+Fat32\+Volume}} ()
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ae41ed06c929a596714cf3e0906647986}{next\+\_\+cluster}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}})
\begin{DoxyCompactList}\small\item\em Take the cluster and gets the next cluster in the chain. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5e3fe2d7c920484cc693eb24a0994960}{set\+\_\+next\+\_\+cluster}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ae41ed06c929a596714cf3e0906647986}{next\+\_\+cluster}})
\begin{DoxyCompactList}\small\item\em Sets the next cluster in the chain (where the base cluster should point) \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a0946f929b78b73c74d7a24b41a1886f7}{find\+\_\+free\+\_\+cluster}} ()
\begin{DoxyCompactList}\small\item\em Searches the fat table for a free cluster starting from the first free cluster in the fsinfo, will then wrap around. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a2ad6d0cd23155bcee69a6c712edd3d5e}{allocate\+\_\+cluster}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}})
\begin{DoxyCompactList}\small\item\em Allocate a cluster in the FAT table. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a4b6b16063eca806447da97bc16d5e5e3}{allocate\+\_\+cluster}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{size\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{amount}})
\begin{DoxyCompactList}\small\item\em Allocate a number of clusters in the FAT table, updates the fsinfo and the chain. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a37ab9f38bf0e1aeed0968dbffa9dccec}{free\+\_\+cluster}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}})
\begin{DoxyCompactList}\small\item\em Free a cluster in the FAT table. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a15dc2308b11f88e74f3a7ec8c997fffc}{free\+\_\+cluster}} (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}}, \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{size\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{amount}})
\begin{DoxyCompactList}\small\item\em Free a number of clusters in the FAT table. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
bpb32\+\_\+t \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}}
\item 
fs\+\_\+info\+\_\+t \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a2f24d84d808a398ffa87f8442f23dae5}{fsinfo}}
\item 
size\+\_\+t \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ac1f52f6db41c0111a70b6f1f9c561bf5}{fat\+\_\+total\+\_\+clusters}}
\item 
\mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5836d8b8bb40ad92b2ce27acfa523ec1}{fat\+\_\+lba}}
\item 
\mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a8c5fdd64bed46dbe38b8f7136b6a91a8}{fat\+\_\+info\+\_\+lba}}
\item 
\mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ab7d0b75ebd4c8e9a4f9cb698b31bae21}{fat\+\_\+copies}}
\item 
\mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_aba48c72b1770313b4b4a9a01af962008}{data\+\_\+lba}}
\item 
\mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\+\_\+t}} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_aa8e35edc75d20219e76ac30b5e4fa56f}{root\+\_\+lba}}
\item 
\mbox{\hyperlink{classMaxOS_1_1drivers_1_1disk_1_1Disk}{drivers\+::disk\+::\+Disk}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5d5ea78e0213ece71259dc171b3bd239}{disk}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Handles the FAT table that stores the information about the files on the disk and operations on the disk. 

Definition at line \mbox{\hyperlink{fat32_8h_source_l00166}{166}} of file \mbox{\hyperlink{fat32_8h_source}{fat32.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a37d49499071a45b3148a4f2f5b7bc85b}\label{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a37d49499071a45b3148a4f2f5b7bc85b} 
\index{MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}!Fat32Volume@{Fat32Volume}}
\index{Fat32Volume@{Fat32Volume}!MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}}
\doxysubsubsection{\texorpdfstring{Fat32Volume()}{Fat32Volume()}}
{\footnotesize\ttfamily Fat32\+Volume\+::\+Fat32\+Volume (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1drivers_1_1disk_1_1Disk}{drivers\+::disk\+::\+Disk}} \texorpdfstring{$\ast$}{*}}]{disk,  }\item[{\mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\+\_\+t}}}]{partition\+\_\+offset }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{fat32_8cpp_source_l00016}{16}} of file \mbox{\hyperlink{fat32_8cpp_source}{fat32.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00017\ :\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5d5ea78e0213ece71259dc171b3bd239}{disk}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{hd}})}
\DoxyCodeLine{00018\ \{}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{comment}{//\ Read\ the\ BIOS\ parameter\ block}}
\DoxyCodeLine{00021\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer}{buffer\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bpb\_buffer}}(\&\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bpb32\_t}}));}
\DoxyCodeLine{00022\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5d5ea78e0213ece71259dc171b3bd239}{disk}}-\/>\mbox{\hyperlink{classMaxOS_1_1drivers_1_1disk_1_1Disk_a9fa1c1952cece4f322ba0f2552f16c24}{read}}(partition\_offset,\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bpb\_buffer}});}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{comment}{//\ Parse\ the\ FAT\ info}}
\DoxyCodeLine{00025\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{total\_data\_sectors}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}}.total\_sectors\_32\ -\/\ (\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}}.reserved\_sectors\ +\ (\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}}.table\_copies\ *\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}}.table\_size\_32));}
\DoxyCodeLine{00026\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ac1f52f6db41c0111a70b6f1f9c561bf5}{fat\_total\_clusters}}\ \ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{total\_data\_sectors}}\ /\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}}.sectors\_per\_cluster;}
\DoxyCodeLine{00027\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5836d8b8bb40ad92b2ce27acfa523ec1}{fat\_lba}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ partition\_offset\ +\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}}.reserved\_sectors;}
\DoxyCodeLine{00028\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ab7d0b75ebd4c8e9a4f9cb698b31bae21}{fat\_copies}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}}.table\_copies;}
\DoxyCodeLine{00029\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a8c5fdd64bed46dbe38b8f7136b6a91a8}{fat\_info\_lba}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ partition\_offset\ +\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}}.fat\_info;}
\DoxyCodeLine{00030\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_aba48c72b1770313b4b4a9a01af962008}{data\_lba}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5836d8b8bb40ad92b2ce27acfa523ec1}{fat\_lba}}\ +\ (\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}}.table\_copies\ *\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}}.table\_size\_32);}
\DoxyCodeLine{00031\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_aa8e35edc75d20219e76ac30b5e4fa56f}{root\_lba}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_aba48c72b1770313b4b4a9a01af962008}{data\_lba}}\ +\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}}.sectors\_per\_cluster\ *\ (\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}}.root\_cluster\ -\/\ 2);}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{comment}{//\ Read\ the\ fs\ info}}
\DoxyCodeLine{00034\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer}{buffer\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{fs\_buffer}}(\&\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a2f24d84d808a398ffa87f8442f23dae5}{fsinfo}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{fs\_info\_t}}));}
\DoxyCodeLine{00035\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5d5ea78e0213ece71259dc171b3bd239}{disk}}-\/>\mbox{\hyperlink{classMaxOS_1_1drivers_1_1disk_1_1Disk_a9fa1c1952cece4f322ba0f2552f16c24}{read}}(\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a8c5fdd64bed46dbe38b8f7136b6a91a8}{fat\_info\_lba}},\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{fs\_buffer}});}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{comment}{//\ Validate\ the\ fat\ information}}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a2f24d84d808a398ffa87f8442f23dae5}{fsinfo}}.lead\_signature\ !=\ 0x41615252\ ||\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a2f24d84d808a398ffa87f8442f23dae5}{fsinfo}}.structure\_signature\ !=\ 0x61417272\ ||}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a2f24d84d808a398ffa87f8442f23dae5}{fsinfo}}.trail\_signature\ !=\ 0xAA550000)\ \{}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classLogger_a9d5741991cc756d6abb2ca80b019e137}{Logger::ERROR}}()\ <<\ \textcolor{stringliteral}{"{}Invalid\ FAT32\ filesystem\ information\ TODO:\ Handle\ this\(\backslash\)n"{}};}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00042\ \ \ \ \ \}}
\DoxyCodeLine{00043\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{fat32_8h_source_l00172}{bpb}}, \mbox{\hyperlink{fat32_8h_source_l00180}{data\+\_\+lba}}, \mbox{\hyperlink{fat32_8h_source_l00183}{disk}}, \mbox{\hyperlink{logger_8cpp_source_l00191}{Logger\+::\+ERROR()}}, \mbox{\hyperlink{fat32_8h_source_l00178}{fat\+\_\+copies}}, \mbox{\hyperlink{fat32_8h_source_l00177}{fat\+\_\+info\+\_\+lba}}, \mbox{\hyperlink{fat32_8h_source_l00176}{fat\+\_\+lba}}, \mbox{\hyperlink{fat32_8h_source_l00175}{fat\+\_\+total\+\_\+clusters}}, \mbox{\hyperlink{fat32_8h_source_l00173}{fsinfo}}, \mbox{\hyperlink{disk_8cpp_source_l00022}{Max\+OS\+::drivers\+::disk\+::\+Disk\+::read()}}, and \mbox{\hyperlink{fat32_8h_source_l00181}{root\+\_\+lba}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a843e1b74cf444de13338d8697eaa7c6e}\label{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a843e1b74cf444de13338d8697eaa7c6e} 
\index{MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}!````~Fat32Volume@{\texorpdfstring{$\sim$}{\string~}Fat32Volume}}
\index{````~Fat32Volume@{\texorpdfstring{$\sim$}{\string~}Fat32Volume}!MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}Fat32Volume()}{\string~Fat32Volume()}}
{\footnotesize\ttfamily Fat32\+Volume\+::\texorpdfstring{$\sim$}{\string~}\+Fat32\+Volume (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



\doxysubsection{Member Function Documentation}
\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a2ad6d0cd23155bcee69a6c712edd3d5e}\label{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a2ad6d0cd23155bcee69a6c712edd3d5e} 
\index{MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}!allocate\_cluster@{allocate\_cluster}}
\index{allocate\_cluster@{allocate\_cluster}!MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}}
\doxysubsubsection{\texorpdfstring{allocate\_cluster()}{allocate\_cluster()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} Fat32\+Volume\+::allocate\+\_\+cluster (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{cluster }\end{DoxyParamCaption})}



Allocate a cluster in the FAT table. 


\begin{DoxyParams}{Parameters}
{\em cluster} & The base cluster to start from or 0 if this is a new chain \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The next cluster in the chain 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{fat32_8cpp_source_l00129}{129}} of file \mbox{\hyperlink{fat32_8cpp_source}{fat32.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{comment}{//\ Allocate\ 1\ cluster}}
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a2ad6d0cd23155bcee69a6c712edd3d5e}{allocate\_cluster}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}},\ 1);}
\DoxyCodeLine{00133\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{fat32_8cpp_source_l00129}{allocate\+\_\+cluster()}}.



Referenced by \mbox{\hyperlink{fat32_8cpp_source_l00129}{allocate\+\_\+cluster()}}, and \mbox{\hyperlink{fat32_8cpp_source_l00242}{Max\+OS\+::filesystem\+::format\+::\+Fat32\+File\+::write()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a4b6b16063eca806447da97bc16d5e5e3}\label{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a4b6b16063eca806447da97bc16d5e5e3} 
\index{MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}!allocate\_cluster@{allocate\_cluster}}
\index{allocate\_cluster@{allocate\_cluster}!MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}}
\doxysubsubsection{\texorpdfstring{allocate\_cluster()}{allocate\_cluster()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} Fat32\+Volume\+::allocate\+\_\+cluster (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{cluster,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{size\+\_\+t}}}]{amount }\end{DoxyParamCaption})}



Allocate a number of clusters in the FAT table, updates the fsinfo and the chain. 


\begin{DoxyParams}{Parameters}
{\em cluster} & The base cluster to start from or 0 if this is a new chain \\
\hline
{\em amount} & The number of clusters to allocate \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The next cluster in the chain 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{fat32_8cpp_source_l00142}{142}} of file \mbox{\hyperlink{fat32_8cpp_source}{fat32.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{comment}{//\ Make\ sure\ within\ bounds}}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}}\ >\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ac1f52f6db41c0111a70b6f1f9c561bf5}{fat\_total\_clusters}}\ ||\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}}\ +\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{amount}}\ >\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ac1f52f6db41c0111a70b6f1f9c561bf5}{fat\_total\_clusters}})}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{comment}{//\ Go\ through\ allocating\ the\ clusters}}
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{amount}};\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}++)\ \{}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ae41ed06c929a596714cf3e0906647986}{next\_cluster}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a0946f929b78b73c74d7a24b41a1886f7}{find\_free\_cluster}}();}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Update\ the\ fsinfo}}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a2f24d84d808a398ffa87f8442f23dae5}{fsinfo}}.next\_free\_cluster\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ae41ed06c929a596714cf3e0906647986}{next\_cluster}}\ +\ 1;}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a2f24d84d808a398ffa87f8442f23dae5}{fsinfo}}.free\_cluster\_count\ -\/=\ 1;}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ there\ is\ an\ existing\ chain\ it\ needs\ to\ be\ updated}}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}}\ !=\ 0)}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5e3fe2d7c920484cc693eb24a0994960}{set\_next\_cluster}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}},\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ae41ed06c929a596714cf3e0906647986}{next\_cluster}});}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ae41ed06c929a596714cf3e0906647986}{next\_cluster}};}
\DoxyCodeLine{00161\ \ \ \ \ \}}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{comment}{//\ Once\ all\ the\ updates\ are\ done\ flush\ the\ changes\ to\ the\ disk}}
\DoxyCodeLine{00164\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer}{buffer\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{fs\_info\_buffer}}(\&\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a2f24d84d808a398ffa87f8442f23dae5}{fsinfo}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{fs\_info\_t}}));}
\DoxyCodeLine{00165\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5d5ea78e0213ece71259dc171b3bd239}{disk}}-\/>\mbox{\hyperlink{classMaxOS_1_1drivers_1_1disk_1_1Disk_a307fc8dc97cc4c8f3668a18a1e0257de}{write}}(\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a8c5fdd64bed46dbe38b8f7136b6a91a8}{fat\_info\_lba}},\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{fs\_info\_buffer}});}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{comment}{//\ Finish\ the\ chin}}
\DoxyCodeLine{00168\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5e3fe2d7c920484cc693eb24a0994960}{set\_next\_cluster}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}},\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}})\ \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_1_1format_a21e185e98587cd02f56fcd5b93cafe64acf542699ffaa1a09c5b27c0f72cd3f6f}{ClusterState::END\_OF\_CHAIN}});}
\DoxyCodeLine{00169\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{virtual_8h_a20e8ff4d4c943d29eee7cfd80a5ff0f3}{next}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ae41ed06c929a596714cf3e0906647986}{next\_cluster}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}});}
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}};}
\DoxyCodeLine{00171\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{fat32_8h_source_l00183}{disk}}, \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_1_1format_a21e185e98587cd02f56fcd5b93cafe64acf542699ffaa1a09c5b27c0f72cd3f6f}{Max\+OS\+::filesystem\+::format\+::\+END\+\_\+\+OF\+\_\+\+CHAIN}}, \mbox{\hyperlink{fat32_8h_source_l00177}{fat\+\_\+info\+\_\+lba}}, \mbox{\hyperlink{fat32_8h_source_l00175}{fat\+\_\+total\+\_\+clusters}}, \mbox{\hyperlink{fat32_8cpp_source_l00107}{find\+\_\+free\+\_\+cluster()}}, \mbox{\hyperlink{fat32_8h_source_l00173}{fsinfo}}, \mbox{\hyperlink{virtual_8h_source_l00001}{next}}, \mbox{\hyperlink{fat32_8cpp_source_l00053}{next\+\_\+cluster()}}, \mbox{\hyperlink{fat32_8cpp_source_l00076}{set\+\_\+next\+\_\+cluster()}}, and \mbox{\hyperlink{disk_8cpp_source_l00040}{Max\+OS\+::drivers\+::disk\+::\+Disk\+::write()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a0946f929b78b73c74d7a24b41a1886f7}\label{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a0946f929b78b73c74d7a24b41a1886f7} 
\index{MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}!find\_free\_cluster@{find\_free\_cluster}}
\index{find\_free\_cluster@{find\_free\_cluster}!MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}}
\doxysubsubsection{\texorpdfstring{find\_free\_cluster()}{find\_free\_cluster()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} Fat32\+Volume\+::find\+\_\+free\+\_\+cluster (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Searches the fat table for a free cluster starting from the first free cluster in the fsinfo, will then wrap around. 

\begin{DoxyReturn}{Returns}
The first free cluster in the FAT table 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{fat32_8cpp_source_l00107}{107}} of file \mbox{\hyperlink{fat32_8cpp_source}{fat32.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ first\ free\ cluster}}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a2f24d84d808a398ffa87f8442f23dae5}{fsinfo}}.next\_free\_cluster;\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}}\ <\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ac1f52f6db41c0111a70b6f1f9c561bf5}{fat\_total\_clusters}}\ +\ 1;\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}}++)}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ae41ed06c929a596714cf3e0906647986}{next\_cluster}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}})\ ==\ 0)}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}};}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{comment}{//\ Check\ any\ clusters\ before\ the\ first\ free\ cluster}}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}}\ =\ 2;\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}}\ <\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a2f24d84d808a398ffa87f8442f23dae5}{fsinfo}}.next\_free\_cluster;\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}}++)}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ae41ed06c929a596714cf3e0906647986}{next\_cluster}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}})\ ==\ 0)}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{start}};}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \ \ \mbox{\hyperlink{logger_8h_adf7b5d69e4c25995b3211b91b27f33b6}{ASSERT}}(\textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}No\ free\ clusters\ found\ in\ the\ FAT\ table"{}});}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00121\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{logger_8h_source_l00089}{ASSERT}}, \mbox{\hyperlink{fat32_8h_source_l00175}{fat\+\_\+total\+\_\+clusters}}, \mbox{\hyperlink{fat32_8h_source_l00173}{fsinfo}}, and \mbox{\hyperlink{fat32_8cpp_source_l00053}{next\+\_\+cluster()}}.



Referenced by \mbox{\hyperlink{fat32_8cpp_source_l00142}{allocate\+\_\+cluster()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a37ab9f38bf0e1aeed0968dbffa9dccec}\label{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a37ab9f38bf0e1aeed0968dbffa9dccec} 
\index{MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}!free\_cluster@{free\_cluster}}
\index{free\_cluster@{free\_cluster}!MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}}
\doxysubsubsection{\texorpdfstring{free\_cluster()}{free\_cluster()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} Fat32\+Volume\+::free\+\_\+cluster (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{cluster }\end{DoxyParamCaption})}



Free a cluster in the FAT table. 


\begin{DoxyParams}{Parameters}
{\em cluster} & The base cluster to start from \\
\hline
{\em full} & Weather the chain\textquotesingle{}s length is 1 or not \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{fat32_8cpp_source_l00179}{179}} of file \mbox{\hyperlink{fat32_8cpp_source}{fat32.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{comment}{//\ Free\ 1\ cluster}}
\DoxyCodeLine{00182\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a37ab9f38bf0e1aeed0968dbffa9dccec}{free\_cluster}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}},\ 1);}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{fat32_8cpp_source_l00179}{free\+\_\+cluster()}}.



Referenced by \mbox{\hyperlink{fat32_8cpp_source_l00179}{free\+\_\+cluster()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a15dc2308b11f88e74f3a7ec8c997fffc}\label{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a15dc2308b11f88e74f3a7ec8c997fffc} 
\index{MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}!free\_cluster@{free\_cluster}}
\index{free\_cluster@{free\_cluster}!MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}}
\doxysubsubsection{\texorpdfstring{free\_cluster()}{free\_cluster()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} Fat32\+Volume\+::free\+\_\+cluster (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{cluster,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{size\+\_\+t}}}]{amount }\end{DoxyParamCaption})}



Free a number of clusters in the FAT table. 


\begin{DoxyParams}{Parameters}
{\em cluster} & The base cluster to start from \\
\hline
{\em amount} & The number of clusters to free \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{fat32_8cpp_source_l00192}{192}} of file \mbox{\hyperlink{fat32_8cpp_source}{fat32.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{comment}{//\ Make\ sure\ within\ bounds}}
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster\ <\ 2\ ||\ cluster\ >}}\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ac1f52f6db41c0111a70b6f1f9c561bf5}{fat\_total\_clusters}}\ ||\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}}\ +\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{amount}}\ >\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ac1f52f6db41c0111a70b6f1f9c561bf5}{fat\_total\_clusters}})}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{comment}{//\ Go\ through\ freeing\ the\ clusters}}
\DoxyCodeLine{00199\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{amount}};\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}++)\ \{}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Find\ the\ next\ cluster\ before\ it\ is\ removed\ from\ the\ chain}}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{next\_in\_chain}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ae41ed06c929a596714cf3e0906647986}{next\_cluster}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}});}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Update\ the\ fsinfo}}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a2f24d84d808a398ffa87f8442f23dae5}{fsinfo}}.next\_free\_cluster\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}};}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a2f24d84d808a398ffa87f8442f23dae5}{fsinfo}}.free\_cluster\_count\ +=\ 1;}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Update\ the\ chain}}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5e3fe2d7c920484cc693eb24a0994960}{set\_next\_cluster}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}},\ (\mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\_t}})\ \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_1_1format_a21e185e98587cd02f56fcd5b93cafe64a88c189a42c87aa49d667fc8ab76bc323}{ClusterState::FREE}});}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}}\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{next\_in\_chain}};}
\DoxyCodeLine{00211\ \ \ \ \ \}}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{comment}{//\ Save\ the\ fsinfo}}
\DoxyCodeLine{00214\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer}{buffer\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{fs\_info\_buffer}}(\&\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a2f24d84d808a398ffa87f8442f23dae5}{fsinfo}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{fs\_info\_t}}));}
\DoxyCodeLine{00215\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5d5ea78e0213ece71259dc171b3bd239}{disk}}-\/>\mbox{\hyperlink{classMaxOS_1_1drivers_1_1disk_1_1Disk_a307fc8dc97cc4c8f3668a18a1e0257de}{write}}(\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a8c5fdd64bed46dbe38b8f7136b6a91a8}{fat\_info\_lba}},\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{fs\_info\_buffer}});}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{comment}{//\ Mark\ the\ end\ of\ the\ chain}}
\DoxyCodeLine{00218\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5e3fe2d7c920484cc693eb24a0994960}{set\_next\_cluster}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}},\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}})\ \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_1_1format_a21e185e98587cd02f56fcd5b93cafe64acf542699ffaa1a09c5b27c0f72cd3f6f}{ClusterState::END\_OF\_CHAIN}});}
\DoxyCodeLine{00219\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{fat32_8h_source_l00183}{disk}}, \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_1_1format_a21e185e98587cd02f56fcd5b93cafe64acf542699ffaa1a09c5b27c0f72cd3f6f}{Max\+OS\+::filesystem\+::format\+::\+END\+\_\+\+OF\+\_\+\+CHAIN}}, \mbox{\hyperlink{fat32_8h_source_l00177}{fat\+\_\+info\+\_\+lba}}, \mbox{\hyperlink{fat32_8h_source_l00175}{fat\+\_\+total\+\_\+clusters}}, \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_1_1format_a21e185e98587cd02f56fcd5b93cafe64a88c189a42c87aa49d667fc8ab76bc323}{Max\+OS\+::filesystem\+::format\+::\+FREE}}, \mbox{\hyperlink{fat32_8h_source_l00173}{fsinfo}}, \mbox{\hyperlink{fat32_8cpp_source_l00053}{next\+\_\+cluster()}}, \mbox{\hyperlink{fat32_8cpp_source_l00076}{set\+\_\+next\+\_\+cluster()}}, and \mbox{\hyperlink{disk_8cpp_source_l00040}{Max\+OS\+::drivers\+::disk\+::\+Disk\+::write()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ae41ed06c929a596714cf3e0906647986}\label{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ae41ed06c929a596714cf3e0906647986} 
\index{MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}!next\_cluster@{next\_cluster}}
\index{next\_cluster@{next\_cluster}!MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}}
\doxysubsubsection{\texorpdfstring{next\_cluster()}{next\_cluster()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\+\_\+t}} Fat32\+Volume\+::next\+\_\+cluster (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{cluster }\end{DoxyParamCaption})}



Take the cluster and gets the next cluster in the chain. 


\begin{DoxyParams}{Parameters}
{\em cluster} & The base cluster to start from \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The next cluster in the chain 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{fat32_8cpp_source_l00053}{53}} of file \mbox{\hyperlink{fat32_8cpp_source}{fat32.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ location\ in\ the\ FAT\ table}}
\DoxyCodeLine{00056\ \ \ \ \ \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\_t}}\ offset\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}}\ *\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}});}
\DoxyCodeLine{00057\ \ \ \ \ \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{sector}}\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5836d8b8bb40ad92b2ce27acfa523ec1}{fat\_lba}}\ +\ (offset\ /\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}}.bytes\_per\_sector);}
\DoxyCodeLine{00058\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ entry\_index\ =\ offset\ \%\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}}.bytes\_per\_sector;}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{comment}{//\ Read\ the\ FAT\ entry}}
\DoxyCodeLine{00061\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer}{buffer\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{fat}}(\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}}.bytes\_per\_sector);}
\DoxyCodeLine{00062\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5d5ea78e0213ece71259dc171b3bd239}{disk}}-\/>\mbox{\hyperlink{classMaxOS_1_1drivers_1_1disk_1_1Disk_a9fa1c1952cece4f322ba0f2552f16c24}{read}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{sector}},\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{fat}});}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ next\ cluster\ info\ (mask\ the\ upper\ 4\ bits)}}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keyword}{auto}\ entry\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ *)\ (\&(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{fat}}.raw()[entry\_index]));\ \textcolor{comment}{//\ \ TODO\ \&\ here\ is\ weird}}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordflow}{return}\ *entry\ \&\ 0x0FFFFFFF;}
\DoxyCodeLine{00067\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{fat32_8h_source_l00172}{bpb}}, \mbox{\hyperlink{fat32_8h_source_l00183}{disk}}, \mbox{\hyperlink{fat32_8h_source_l00176}{fat\+\_\+lba}}, and \mbox{\hyperlink{disk_8cpp_source_l00022}{Max\+OS\+::drivers\+::disk\+::\+Disk\+::read()}}.



Referenced by \mbox{\hyperlink{fat32_8cpp_source_l00142}{allocate\+\_\+cluster()}}, \mbox{\hyperlink{fat32_8cpp_source_l00107}{find\+\_\+free\+\_\+cluster()}}, \mbox{\hyperlink{fat32_8cpp_source_l00192}{free\+\_\+cluster()}}, \mbox{\hyperlink{fat32_8cpp_source_l00343}{Max\+OS\+::filesystem\+::format\+::\+Fat32\+File\+::read()}}, \mbox{\hyperlink{fat32_8cpp_source_l00076}{set\+\_\+next\+\_\+cluster()}}, \mbox{\hyperlink{fat32_8cpp_source_l00578}{Max\+OS\+::filesystem\+::format\+::\+Fat32\+Directory\+::update\+\_\+entry\+\_\+on\+\_\+disk()}}, and \mbox{\hyperlink{fat32_8cpp_source_l00242}{Max\+OS\+::filesystem\+::format\+::\+Fat32\+File\+::write()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5e3fe2d7c920484cc693eb24a0994960}\label{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5e3fe2d7c920484cc693eb24a0994960} 
\index{MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}!set\_next\_cluster@{set\_next\_cluster}}
\index{set\_next\_cluster@{set\_next\_cluster}!MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}}
\doxysubsubsection{\texorpdfstring{set\_next\_cluster()}{set\_next\_cluster()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}} Fat32\+Volume\+::set\+\_\+next\+\_\+cluster (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{cluster,  }\item[{\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\+\_\+t}}}]{next\+\_\+cluster }\end{DoxyParamCaption})}



Sets the next cluster in the chain (where the base cluster should point) 


\begin{DoxyParams}{Parameters}
{\em cluster} & The base cluster to start from \\
\hline
{\em next\+\_\+cluster} & The next cluster in the chain \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The next cluster in the chain 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{fat32_8cpp_source_l00076}{76}} of file \mbox{\hyperlink{fat32_8cpp_source}{fat32.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{comment}{//\ TODO\ -\/\ when\ in\ userspace:\ For\ performance\ cache\ fat\ entirely,\ cache\ file\ data,\ cache\ cluster\ chains}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ location\ in\ the\ FAT\ table}}
\DoxyCodeLine{00081\ \ \ \ \ \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\_t}}\ offset\ =\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{cluster}}\ *\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}});}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ab7d0b75ebd4c8e9a4f9cb698b31bae21}{fat\_copies}};\ ++\mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}})\ \{}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{sector}}\ =\ (\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5836d8b8bb40ad92b2ce27acfa523ec1}{fat\_lba}}\ +\ \mbox{\hyperlink{namespaceMaxOS_1_1drivers_1_1peripherals_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ *\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}}.table\_size\_32)\ +\ (offset\ /\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}}.bytes\_per\_sector);}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ entry\_index\ =\ offset\ \%\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}}.bytes\_per\_sector;}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Read\ the\ FAT\ entry}}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Buffer}{buffer\_t}}\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{fat}}(\mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}{bpb}}.bytes\_per\_sector);}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5d5ea78e0213ece71259dc171b3bd239}{disk}}-\/>\mbox{\hyperlink{classMaxOS_1_1drivers_1_1disk_1_1Disk_a9fa1c1952cece4f322ba0f2552f16c24}{read}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{sector}},\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{fat}});}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ the\ next\ cluster\ info\ (mask\ the\ upper\ 4\ bits)}}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ entry\ =\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{uint32\_t}}\ *)\ (\&(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{fat}}.raw()[entry\_index]));}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ *entry\ =\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ae41ed06c929a596714cf3e0906647986}{next\_cluster}}\ \&\ 0x0FFFFFFF;}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5d5ea78e0213ece71259dc171b3bd239}{disk}}-\/>\mbox{\hyperlink{classMaxOS_1_1drivers_1_1disk_1_1Disk_a307fc8dc97cc4c8f3668a18a1e0257de}{write}}(\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{sector}},\ \&\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{fat}});}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ae41ed06c929a596714cf3e0906647986}{next\_cluster}};}
\DoxyCodeLine{00100\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{fat32_8h_source_l00172}{bpb}}, \mbox{\hyperlink{fat32_8h_source_l00183}{disk}}, \mbox{\hyperlink{fat32_8h_source_l00178}{fat\+\_\+copies}}, \mbox{\hyperlink{fat32_8h_source_l00176}{fat\+\_\+lba}}, \mbox{\hyperlink{fat32_8cpp_source_l00053}{next\+\_\+cluster()}}, \mbox{\hyperlink{disk_8cpp_source_l00022}{Max\+OS\+::drivers\+::disk\+::\+Disk\+::read()}}, and \mbox{\hyperlink{disk_8cpp_source_l00040}{Max\+OS\+::drivers\+::disk\+::\+Disk\+::write()}}.



Referenced by \mbox{\hyperlink{fat32_8cpp_source_l00142}{allocate\+\_\+cluster()}}, and \mbox{\hyperlink{fat32_8cpp_source_l00192}{free\+\_\+cluster()}}.



\doxysubsection{Member Data Documentation}
\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4}\label{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a88fa8cf8322df1bc922905e66d5569f4} 
\index{MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}!bpb@{bpb}}
\index{bpb@{bpb}!MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}}
\doxysubsubsection{\texorpdfstring{bpb}{bpb}}
{\footnotesize\ttfamily bpb32\+\_\+t Max\+OS\+::filesystem\+::format\+::\+Fat32\+Volume\+::bpb}



Definition at line \mbox{\hyperlink{fat32_8h_source_l00172}{172}} of file \mbox{\hyperlink{fat32_8h_source}{fat32.\+h}}.



Referenced by \mbox{\hyperlink{fat32_8cpp_source_l00955}{Max\+OS\+::filesystem\+::format\+::\+Fat32\+File\+System\+::\+Fat32\+File\+System()}}, \mbox{\hyperlink{fat32_8cpp_source_l00016}{Fat32\+Volume()}}, \mbox{\hyperlink{fat32_8cpp_source_l00053}{next\+\_\+cluster()}}, \mbox{\hyperlink{fat32_8cpp_source_l00343}{Max\+OS\+::filesystem\+::format\+::\+Fat32\+File\+::read()}}, \mbox{\hyperlink{fat32_8cpp_source_l00076}{set\+\_\+next\+\_\+cluster()}}, \mbox{\hyperlink{fat32_8cpp_source_l00578}{Max\+OS\+::filesystem\+::format\+::\+Fat32\+Directory\+::update\+\_\+entry\+\_\+on\+\_\+disk()}}, and \mbox{\hyperlink{fat32_8cpp_source_l00242}{Max\+OS\+::filesystem\+::format\+::\+Fat32\+File\+::write()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_aba48c72b1770313b4b4a9a01af962008}\label{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_aba48c72b1770313b4b4a9a01af962008} 
\index{MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}!data\_lba@{data\_lba}}
\index{data\_lba@{data\_lba}!MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}}
\doxysubsubsection{\texorpdfstring{data\_lba}{data\_lba}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\+\_\+t}} Max\+OS\+::filesystem\+::format\+::\+Fat32\+Volume\+::data\+\_\+lba}



Definition at line \mbox{\hyperlink{fat32_8h_source_l00180}{180}} of file \mbox{\hyperlink{fat32_8h_source}{fat32.\+h}}.



Referenced by \mbox{\hyperlink{fat32_8cpp_source_l00016}{Fat32\+Volume()}}, \mbox{\hyperlink{fat32_8cpp_source_l00343}{Max\+OS\+::filesystem\+::format\+::\+Fat32\+File\+::read()}}, \mbox{\hyperlink{fat32_8cpp_source_l00578}{Max\+OS\+::filesystem\+::format\+::\+Fat32\+Directory\+::update\+\_\+entry\+\_\+on\+\_\+disk()}}, and \mbox{\hyperlink{fat32_8cpp_source_l00242}{Max\+OS\+::filesystem\+::format\+::\+Fat32\+File\+::write()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5d5ea78e0213ece71259dc171b3bd239}\label{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5d5ea78e0213ece71259dc171b3bd239} 
\index{MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}!disk@{disk}}
\index{disk@{disk}!MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}}
\doxysubsubsection{\texorpdfstring{disk}{disk}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1drivers_1_1disk_1_1Disk}{drivers\+::disk\+::\+Disk}}\texorpdfstring{$\ast$}{*} Max\+OS\+::filesystem\+::format\+::\+Fat32\+Volume\+::disk}



Definition at line \mbox{\hyperlink{fat32_8h_source_l00183}{183}} of file \mbox{\hyperlink{fat32_8h_source}{fat32.\+h}}.



Referenced by \mbox{\hyperlink{fat32_8cpp_source_l00142}{allocate\+\_\+cluster()}}, \mbox{\hyperlink{fat32_8cpp_source_l00016}{Fat32\+Volume()}}, \mbox{\hyperlink{fat32_8cpp_source_l00192}{free\+\_\+cluster()}}, \mbox{\hyperlink{fat32_8cpp_source_l00053}{next\+\_\+cluster()}}, \mbox{\hyperlink{fat32_8cpp_source_l00343}{Max\+OS\+::filesystem\+::format\+::\+Fat32\+File\+::read()}}, \mbox{\hyperlink{fat32_8cpp_source_l00076}{set\+\_\+next\+\_\+cluster()}}, \mbox{\hyperlink{fat32_8cpp_source_l00578}{Max\+OS\+::filesystem\+::format\+::\+Fat32\+Directory\+::update\+\_\+entry\+\_\+on\+\_\+disk()}}, and \mbox{\hyperlink{fat32_8cpp_source_l00242}{Max\+OS\+::filesystem\+::format\+::\+Fat32\+File\+::write()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ab7d0b75ebd4c8e9a4f9cb698b31bae21}\label{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ab7d0b75ebd4c8e9a4f9cb698b31bae21} 
\index{MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}!fat\_copies@{fat\_copies}}
\index{fat\_copies@{fat\_copies}!MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}}
\doxysubsubsection{\texorpdfstring{fat\_copies}{fat\_copies}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\+\_\+t}} Max\+OS\+::filesystem\+::format\+::\+Fat32\+Volume\+::fat\+\_\+copies}



Definition at line \mbox{\hyperlink{fat32_8h_source_l00178}{178}} of file \mbox{\hyperlink{fat32_8h_source}{fat32.\+h}}.



Referenced by \mbox{\hyperlink{fat32_8cpp_source_l00016}{Fat32\+Volume()}}, and \mbox{\hyperlink{fat32_8cpp_source_l00076}{set\+\_\+next\+\_\+cluster()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a8c5fdd64bed46dbe38b8f7136b6a91a8}\label{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a8c5fdd64bed46dbe38b8f7136b6a91a8} 
\index{MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}!fat\_info\_lba@{fat\_info\_lba}}
\index{fat\_info\_lba@{fat\_info\_lba}!MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}}
\doxysubsubsection{\texorpdfstring{fat\_info\_lba}{fat\_info\_lba}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\+\_\+t}} Max\+OS\+::filesystem\+::format\+::\+Fat32\+Volume\+::fat\+\_\+info\+\_\+lba}



Definition at line \mbox{\hyperlink{fat32_8h_source_l00177}{177}} of file \mbox{\hyperlink{fat32_8h_source}{fat32.\+h}}.



Referenced by \mbox{\hyperlink{fat32_8cpp_source_l00142}{allocate\+\_\+cluster()}}, \mbox{\hyperlink{fat32_8cpp_source_l00016}{Fat32\+Volume()}}, and \mbox{\hyperlink{fat32_8cpp_source_l00192}{free\+\_\+cluster()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5836d8b8bb40ad92b2ce27acfa523ec1}\label{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a5836d8b8bb40ad92b2ce27acfa523ec1} 
\index{MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}!fat\_lba@{fat\_lba}}
\index{fat\_lba@{fat\_lba}!MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}}
\doxysubsubsection{\texorpdfstring{fat\_lba}{fat\_lba}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\+\_\+t}} Max\+OS\+::filesystem\+::format\+::\+Fat32\+Volume\+::fat\+\_\+lba}



Definition at line \mbox{\hyperlink{fat32_8h_source_l00176}{176}} of file \mbox{\hyperlink{fat32_8h_source}{fat32.\+h}}.



Referenced by \mbox{\hyperlink{fat32_8cpp_source_l00016}{Fat32\+Volume()}}, \mbox{\hyperlink{fat32_8cpp_source_l00053}{next\+\_\+cluster()}}, and \mbox{\hyperlink{fat32_8cpp_source_l00076}{set\+\_\+next\+\_\+cluster()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ac1f52f6db41c0111a70b6f1f9c561bf5}\label{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_ac1f52f6db41c0111a70b6f1f9c561bf5} 
\index{MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}!fat\_total\_clusters@{fat\_total\_clusters}}
\index{fat\_total\_clusters@{fat\_total\_clusters}!MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}}
\doxysubsubsection{\texorpdfstring{fat\_total\_clusters}{fat\_total\_clusters}}
{\footnotesize\ttfamily size\+\_\+t Max\+OS\+::filesystem\+::format\+::\+Fat32\+Volume\+::fat\+\_\+total\+\_\+clusters}



Definition at line \mbox{\hyperlink{fat32_8h_source_l00175}{175}} of file \mbox{\hyperlink{fat32_8h_source}{fat32.\+h}}.



Referenced by \mbox{\hyperlink{fat32_8cpp_source_l00142}{allocate\+\_\+cluster()}}, \mbox{\hyperlink{fat32_8cpp_source_l00016}{Fat32\+Volume()}}, \mbox{\hyperlink{fat32_8cpp_source_l00107}{find\+\_\+free\+\_\+cluster()}}, and \mbox{\hyperlink{fat32_8cpp_source_l00192}{free\+\_\+cluster()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a2f24d84d808a398ffa87f8442f23dae5}\label{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_a2f24d84d808a398ffa87f8442f23dae5} 
\index{MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}!fsinfo@{fsinfo}}
\index{fsinfo@{fsinfo}!MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}}
\doxysubsubsection{\texorpdfstring{fsinfo}{fsinfo}}
{\footnotesize\ttfamily fs\+\_\+info\+\_\+t Max\+OS\+::filesystem\+::format\+::\+Fat32\+Volume\+::fsinfo}



Definition at line \mbox{\hyperlink{fat32_8h_source_l00173}{173}} of file \mbox{\hyperlink{fat32_8h_source}{fat32.\+h}}.



Referenced by \mbox{\hyperlink{fat32_8cpp_source_l00142}{allocate\+\_\+cluster()}}, \mbox{\hyperlink{fat32_8cpp_source_l00016}{Fat32\+Volume()}}, \mbox{\hyperlink{fat32_8cpp_source_l00107}{find\+\_\+free\+\_\+cluster()}}, and \mbox{\hyperlink{fat32_8cpp_source_l00192}{free\+\_\+cluster()}}.

\Hypertarget{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_aa8e35edc75d20219e76ac30b5e4fa56f}\label{classMaxOS_1_1filesystem_1_1format_1_1Fat32Volume_aa8e35edc75d20219e76ac30b5e4fa56f} 
\index{MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}!root\_lba@{root\_lba}}
\index{root\_lba@{root\_lba}!MaxOS::filesystem::format::Fat32Volume@{MaxOS::filesystem::format::Fat32Volume}}
\doxysubsubsection{\texorpdfstring{root\_lba}{root\_lba}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespaceMaxOS_1_1filesystem_af466a9d32fd2bf17acb2efa91031ded0}{lba\+\_\+t}} Max\+OS\+::filesystem\+::format\+::\+Fat32\+Volume\+::root\+\_\+lba}



Definition at line \mbox{\hyperlink{fat32_8h_source_l00181}{181}} of file \mbox{\hyperlink{fat32_8h_source}{fat32.\+h}}.



Referenced by \mbox{\hyperlink{fat32_8cpp_source_l00016}{Fat32\+Volume()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/include/filesystem/format/\mbox{\hyperlink{fat32_8h}{fat32.\+h}}\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/src/filesystem/format/\mbox{\hyperlink{fat32_8cpp}{fat32.\+cpp}}\end{DoxyCompactItemize}
