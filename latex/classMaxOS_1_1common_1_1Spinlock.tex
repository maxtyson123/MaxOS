\doxysection{Max\+OS\+::common\+::Spinlock Class Reference}
\hypertarget{classMaxOS_1_1common_1_1Spinlock}{}\label{classMaxOS_1_1common_1_1Spinlock}\index{MaxOS::common::Spinlock@{MaxOS::common::Spinlock}}


Enables a resource to be used by only one instance at a time through locking and unlocking.  




{\ttfamily \#include $<$spinlock.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Spinlock_a27a03c3d6b4cdd677e7d16e59689e38e}{lock}} ()
\begin{DoxyCompactList}\small\item\em Lock the spinlock once it is available. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Spinlock_a7c26334ccfa43ef932ef3c73e2c11492}{unlock}} ()
\begin{DoxyCompactList}\small\item\em Unlock the spinlock. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bool}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Spinlock_a9632d6c0ad743f60bd0d515556220d32}{is\+\_\+locked}} () \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{const}}
\begin{DoxyCompactList}\small\item\em Check if the spinlock is locked. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Spinlock_aa107bfcf0d1345cea3f97cdb993321aa}{acquire}} ()
\begin{DoxyCompactList}\small\item\em Acquire the spinlock\+: wait until the lock is available, spinning until that happens. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} \mbox{\hyperlink{classMaxOS_1_1common_1_1Spinlock_a50cca0412a4d430ea09b64bf6266b626}{release}} ()
\begin{DoxyCompactList}\small\item\em Release the spinlock. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Enables a resource to be used by only one instance at a time through locking and unlocking. 

Definition at line \mbox{\hyperlink{spinlock_8h_source_l00022}{22}} of file \mbox{\hyperlink{spinlock_8h_source}{spinlock.\+h}}.



\doxysubsection{Member Function Documentation}
\Hypertarget{classMaxOS_1_1common_1_1Spinlock_aa107bfcf0d1345cea3f97cdb993321aa}\label{classMaxOS_1_1common_1_1Spinlock_aa107bfcf0d1345cea3f97cdb993321aa} 
\index{MaxOS::common::Spinlock@{MaxOS::common::Spinlock}!acquire@{acquire}}
\index{acquire@{acquire}!MaxOS::common::Spinlock@{MaxOS::common::Spinlock}}
\doxysubsubsection{\texorpdfstring{acquire()}{acquire()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} Spinlock\+::acquire (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Acquire the spinlock\+: wait until the lock is available, spinning until that happens. 



Definition at line \mbox{\hyperlink{spinlock_8cpp_source_l00051}{51}} of file \mbox{\hyperlink{spinlock_8cpp_source}{spinlock.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{\_\_atomic\_test\_and\_set}}(\&m\_locked,\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{\_\_ATOMIC\_ACQUIRE}}))}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{keyword}{asm}(\textcolor{stringliteral}{"{}nop"{}});}
\DoxyCodeLine{00054\ \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{spinlock_8cpp_source_l00024}{lock()}}.

\Hypertarget{classMaxOS_1_1common_1_1Spinlock_a9632d6c0ad743f60bd0d515556220d32}\label{classMaxOS_1_1common_1_1Spinlock_a9632d6c0ad743f60bd0d515556220d32} 
\index{MaxOS::common::Spinlock@{MaxOS::common::Spinlock}!is\_locked@{is\_locked}}
\index{is\_locked@{is\_locked}!MaxOS::common::Spinlock@{MaxOS::common::Spinlock}}
\doxysubsubsection{\texorpdfstring{is\_locked()}{is\_locked()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{bool}} Spinlock\+::is\+\_\+locked (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Check if the spinlock is locked. 

\begin{DoxyReturn}{Returns}
True if the spinlock is locked, false otherwise 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{spinlock_8cpp_source_l00043}{43}} of file \mbox{\hyperlink{spinlock_8cpp_source}{spinlock.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_locked;}
\DoxyCodeLine{00045\ \}}

\end{DoxyCode}
\Hypertarget{classMaxOS_1_1common_1_1Spinlock_a27a03c3d6b4cdd677e7d16e59689e38e}\label{classMaxOS_1_1common_1_1Spinlock_a27a03c3d6b4cdd677e7d16e59689e38e} 
\index{MaxOS::common::Spinlock@{MaxOS::common::Spinlock}!lock@{lock}}
\index{lock@{lock}!MaxOS::common::Spinlock@{MaxOS::common::Spinlock}}
\doxysubsubsection{\texorpdfstring{lock()}{lock()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} Spinlock\+::lock (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Lock the spinlock once it is available. 



Definition at line \mbox{\hyperlink{spinlock_8cpp_source_l00024}{24}} of file \mbox{\hyperlink{spinlock_8cpp_source}{spinlock.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00025\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Spinlock_aa107bfcf0d1345cea3f97cdb993321aa}{acquire}}();}
\DoxyCodeLine{00026\ \ \ \ \ m\_locked\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00027\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{spinlock_8cpp_source_l00051}{acquire()}}.



Referenced by \mbox{\hyperlink{process_8cpp_source_l00251}{Max\+OS\+::processes\+::\+Process\+::add\+\_\+thread()}}, \mbox{\hyperlink{physical_8cpp_source_l00262}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::allocate\+\_\+area()}}, \mbox{\hyperlink{physical_8cpp_source_l00187}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::allocate\+\_\+frame()}}, \mbox{\hyperlink{ext2_8cpp_source_l00367}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Volume\+::create\+\_\+inode()}}, \mbox{\hyperlink{ext2_8cpp_source_l00703}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Inode\+Handler\+::free()}}, \mbox{\hyperlink{physical_8cpp_source_l00331}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::free\+\_\+area()}}, \mbox{\hyperlink{physical_8cpp_source_l00243}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::free\+\_\+frame()}}, \mbox{\hyperlink{ext2_8cpp_source_l00794}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+File\+::read()}}, \mbox{\hyperlink{ext2_8cpp_source_l00959}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Directory\+::read\+\_\+from\+\_\+disk()}}, \mbox{\hyperlink{physical_8cpp_source_l00770}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::reserve()}}, \mbox{\hyperlink{ext2_8cpp_source_l00740}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+File\+::write()}}, and \mbox{\hyperlink{ipc_8cpp_source_l00155}{Max\+OS\+::processes\+::\+Shared\+Message\+Endpoint\+::write()}}.

\Hypertarget{classMaxOS_1_1common_1_1Spinlock_a50cca0412a4d430ea09b64bf6266b626}\label{classMaxOS_1_1common_1_1Spinlock_a50cca0412a4d430ea09b64bf6266b626} 
\index{MaxOS::common::Spinlock@{MaxOS::common::Spinlock}!release@{release}}
\index{release@{release}!MaxOS::common::Spinlock@{MaxOS::common::Spinlock}}
\doxysubsubsection{\texorpdfstring{release()}{release()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} Spinlock\+::release (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Release the spinlock. 



Definition at line \mbox{\hyperlink{spinlock_8cpp_source_l00059}{59}} of file \mbox{\hyperlink{spinlock_8cpp_source}{spinlock.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00060\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{\_\_atomic\_clear}}(\&m\_locked,\ \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{\_\_ATOMIC\_RELEASE}});}
\DoxyCodeLine{00061\ \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{spinlock_8cpp_source_l00032}{unlock()}}.

\Hypertarget{classMaxOS_1_1common_1_1Spinlock_a7c26334ccfa43ef932ef3c73e2c11492}\label{classMaxOS_1_1common_1_1Spinlock_a7c26334ccfa43ef932ef3c73e2c11492} 
\index{MaxOS::common::Spinlock@{MaxOS::common::Spinlock}!unlock@{unlock}}
\index{unlock@{unlock}!MaxOS::common::Spinlock@{MaxOS::common::Spinlock}}
\doxysubsubsection{\texorpdfstring{unlock()}{unlock()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{void}} Spinlock\+::unlock (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Unlock the spinlock. 



Definition at line \mbox{\hyperlink{spinlock_8cpp_source_l00032}{32}} of file \mbox{\hyperlink{spinlock_8cpp_source}{spinlock.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ m\_locked\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00035\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1common_1_1Spinlock_a50cca0412a4d430ea09b64bf6266b626}{release}}();}
\DoxyCodeLine{00036\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{spinlock_8cpp_source_l00059}{release()}}.



Referenced by \mbox{\hyperlink{process_8cpp_source_l00251}{Max\+OS\+::processes\+::\+Process\+::add\+\_\+thread()}}, \mbox{\hyperlink{physical_8cpp_source_l00262}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::allocate\+\_\+area()}}, \mbox{\hyperlink{physical_8cpp_source_l00187}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::allocate\+\_\+frame()}}, \mbox{\hyperlink{ext2_8cpp_source_l00367}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Volume\+::create\+\_\+inode()}}, \mbox{\hyperlink{ext2_8cpp_source_l00703}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Inode\+Handler\+::free()}}, \mbox{\hyperlink{physical_8cpp_source_l00331}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::free\+\_\+area()}}, \mbox{\hyperlink{physical_8cpp_source_l00243}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::free\+\_\+frame()}}, \mbox{\hyperlink{ext2_8cpp_source_l00794}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+File\+::read()}}, \mbox{\hyperlink{ext2_8cpp_source_l00959}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+Directory\+::read\+\_\+from\+\_\+disk()}}, \mbox{\hyperlink{physical_8cpp_source_l00770}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::reserve()}}, \mbox{\hyperlink{ext2_8cpp_source_l00740}{Max\+OS\+::filesystem\+::format\+::ext2\+::\+Ext2\+File\+::write()}}, and \mbox{\hyperlink{ipc_8cpp_source_l00155}{Max\+OS\+::processes\+::\+Shared\+Message\+Endpoint\+::write()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/include/common/\mbox{\hyperlink{spinlock_8h}{spinlock.\+h}}\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/src/common/\mbox{\hyperlink{spinlock_8cpp}{spinlock.\+cpp}}\end{DoxyCompactItemize}
