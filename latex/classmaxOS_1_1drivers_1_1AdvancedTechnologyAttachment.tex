\hypertarget{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment}{}\doxysection{max\+OS\+::drivers\+::Advanced\+Technology\+Attachment Class Reference}
\label{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment}\index{maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}}


\mbox{\hyperlink{classmaxOS_1_1drivers_1_1Driver}{Driver}} for the A\+TA controller, handles the reading and writing of data to the hard drive.  




{\ttfamily \#include $<$ata.\+h$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_abb21b2690c211c9b923547ee8956bf23}{Advanced\+Technology\+Attachment}} (uint16\+\_\+t port\+\_\+base, bool master, \mbox{\hyperlink{classmaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} $\ast$output\+\_\+stream)
\item 
\mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_add10484c2f7970041539f9d1fe20855b}{$\sim$\+Advanced\+Technology\+Attachment}} ()
\item 
void \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a2a8845575338a60cc7a55d343ac6f4d4}{identify}} ()
\begin{DoxyCompactList}\small\item\em Identify the A\+TA device. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a359d3cf339e6fccd7492f72ae605c42d}{read\+\_\+28}} (uint32\+\_\+t sector, uint8\+\_\+t $\ast$\mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}}, int count)
\begin{DoxyCompactList}\small\item\em read a sector from the A\+TA device \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1cd4fdd67b475ca9012eaa31063dba54}{write\+\_\+28}} (uint32\+\_\+t sector, uint8\+\_\+t $\ast$\mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}}, int count)
\begin{DoxyCompactList}\small\item\em write to a sector on the A\+TA device \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a07c95c31ccced6255adacb26015967fb}{flush}} ()
\begin{DoxyCompactList}\small\item\em Flush the cache of the A\+TA device. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port16Bit}{hardwarecommunication\+::\+Port16\+Bit}} \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_ad35541cae060e84edf025aa82d99ee99}{m\+\_\+data\+\_\+port}}
\item 
\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_aa29dbd2cb659cb713d2306419516ff48}{m\+\_\+error\+\_\+port}}
\item 
\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_abe791a4aea063caad3fb50b5ef14628f}{m\+\_\+sector\+\_\+count\+\_\+port}}
\item 
\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_ab4d5218d8cd7c875d61e80f8d0a15f63}{m\+\_\+\+L\+B\+A\+\_\+low\+\_\+port}}
\item 
\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_abe2bbba83e358ef8da181ec032a0d074}{m\+\_\+\+L\+B\+A\+\_\+mid\+\_\+port}}
\item 
\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a7ae74275df5d1228bee0e20ed956afc4}{m\+\_\+\+L\+B\+A\+\_\+high\+\_\+\+Port}}
\item 
\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1f6cbe97ee1b6cda26307bfe0c6f5a33}{m\+\_\+device\+\_\+port}}
\item 
\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4ce0c37151f7104a7b9e7fad541e089c}{m\+\_\+command\+\_\+port}}
\item 
\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_aa13d7f1ea0b5595905d416eca0958242}{m\+\_\+control\+\_\+port}}
\item 
bool \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_aaabac42e39975c4f9832068cb6982047}{m\+\_\+is\+\_\+master}}
\item 
uint16\+\_\+t \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1820e2fb7f4a600e6bc3872b598c62f0}{m\+\_\+bytes\+\_\+per\+\_\+sector}} \{ 512 \}
\item 
\mbox{\hyperlink{classmaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} $\ast$ \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4f88d0c27dde8dcee4910cdc0805fcd6}{ata\+\_\+message\+\_\+stream}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\mbox{\hyperlink{classmaxOS_1_1drivers_1_1Driver}{Driver}} for the A\+TA controller, handles the reading and writing of data to the hard drive. 

Definition at line 20 of file ata.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_abb21b2690c211c9b923547ee8956bf23}\label{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_abb21b2690c211c9b923547ee8956bf23}} 
\index{maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}!AdvancedTechnologyAttachment@{AdvancedTechnologyAttachment}}
\index{AdvancedTechnologyAttachment@{AdvancedTechnologyAttachment}!maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}}
\doxysubsubsection{\texorpdfstring{AdvancedTechnologyAttachment()}{AdvancedTechnologyAttachment()}}
{\footnotesize\ttfamily Advanced\+Technology\+Attachment\+::\+Advanced\+Technology\+Attachment (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{port\+\_\+base,  }\item[{bool}]{master,  }\item[{\mbox{\hyperlink{classmaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}} $\ast$}]{output\+\_\+stream }\end{DoxyParamCaption})}



Definition at line 12 of file ata.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{13 : \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_ad35541cae060e84edf025aa82d99ee99}{m\_data\_port}}(port\_base),}
\DoxyCodeLine{14   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_aa29dbd2cb659cb713d2306419516ff48}{m\_error\_port}}(port\_base + 1),}
\DoxyCodeLine{15   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_abe791a4aea063caad3fb50b5ef14628f}{m\_sector\_count\_port}}(port\_base + 2),}
\DoxyCodeLine{16   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_ab4d5218d8cd7c875d61e80f8d0a15f63}{m\_LBA\_low\_port}}(port\_base + 3),}
\DoxyCodeLine{17   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_abe2bbba83e358ef8da181ec032a0d074}{m\_LBA\_mid\_port}}(port\_base + 4),}
\DoxyCodeLine{18   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a7ae74275df5d1228bee0e20ed956afc4}{m\_LBA\_high\_Port}}(port\_base + 5),}
\DoxyCodeLine{19   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1f6cbe97ee1b6cda26307bfe0c6f5a33}{m\_device\_port}}(port\_base + 6),}
\DoxyCodeLine{20   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4ce0c37151f7104a7b9e7fad541e089c}{m\_command\_port}}(port\_base + 7),}
\DoxyCodeLine{21   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_aa13d7f1ea0b5595905d416eca0958242}{m\_control\_port}}(port\_base + 0x206),}
\DoxyCodeLine{22   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_aaabac42e39975c4f9832068cb6982047}{m\_is\_master}}(master),}
\DoxyCodeLine{23   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4f88d0c27dde8dcee4910cdc0805fcd6}{ata\_message\_stream}}(output\_stream)}
\DoxyCodeLine{24 \{}
\DoxyCodeLine{25 }
\DoxyCodeLine{26 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_add10484c2f7970041539f9d1fe20855b}\label{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_add10484c2f7970041539f9d1fe20855b}} 
\index{maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}!````~AdvancedTechnologyAttachment@{$\sim$AdvancedTechnologyAttachment}}
\index{````~AdvancedTechnologyAttachment@{$\sim$AdvancedTechnologyAttachment}!maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}}
\doxysubsubsection{\texorpdfstring{$\sim$AdvancedTechnologyAttachment()}{~AdvancedTechnologyAttachment()}}
{\footnotesize\ttfamily Advanced\+Technology\+Attachment\+::$\sim$\+Advanced\+Technology\+Attachment (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 28 of file ata.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{28                                                             \{}
\DoxyCodeLine{29 }
\DoxyCodeLine{30 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a07c95c31ccced6255adacb26015967fb}\label{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a07c95c31ccced6255adacb26015967fb}} 
\index{maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}!flush@{flush}}
\index{flush@{flush}!maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}}
\doxysubsubsection{\texorpdfstring{flush()}{flush()}}
{\footnotesize\ttfamily void Advanced\+Technology\+Attachment\+::flush (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Flush the cache of the A\+TA device. 



Definition at line 190 of file ata.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{190                                          \{}
\DoxyCodeLine{191 }
\DoxyCodeLine{192   \textcolor{comment}{// Select the device (master or slave)}}
\DoxyCodeLine{193   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1f6cbe97ee1b6cda26307bfe0c6f5a33}{m\_device\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(\mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_aaabac42e39975c4f9832068cb6982047}{m\_is\_master}} ? 0xE0 : 0xF0);}
\DoxyCodeLine{194 }
\DoxyCodeLine{195   \textcolor{comment}{// Send the flush command}}
\DoxyCodeLine{196   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4ce0c37151f7104a7b9e7fad541e089c}{m\_command\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(0xE7);}
\DoxyCodeLine{197 }
\DoxyCodeLine{198   \textcolor{comment}{// Make sure the device is there}}
\DoxyCodeLine{199   uint8\_t \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} = \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4ce0c37151f7104a7b9e7fad541e089c}{m\_command\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a425297307d64cb5d9889b32767f8fdc3}{read}}();}
\DoxyCodeLine{200   \textcolor{keywordflow}{if}(\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} == 0x00)}
\DoxyCodeLine{201     \textcolor{keywordflow}{return};}
\DoxyCodeLine{202 }
\DoxyCodeLine{203 }
\DoxyCodeLine{204   \textcolor{comment}{// Wait for the device to be ready or for an error to occur}}
\DoxyCodeLine{205   \textcolor{keywordflow}{while} (((\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} \& 0x80) == 0x80) \&\& ((\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} \& 0x01) != 0x01))}
\DoxyCodeLine{206       \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} = \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4ce0c37151f7104a7b9e7fad541e089c}{m\_command\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a425297307d64cb5d9889b32767f8fdc3}{read}}();}
\DoxyCodeLine{207 }
\DoxyCodeLine{208   \textcolor{keywordflow}{if}(\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} \& 0x01)}
\DoxyCodeLine{209       \textcolor{keywordflow}{return};}
\DoxyCodeLine{210 }
\DoxyCodeLine{211 \}}

\end{DoxyCode}


References m\+\_\+command\+\_\+port, m\+\_\+device\+\_\+port, m\+\_\+is\+\_\+master, max\+O\+S\+::hardwarecommunication\+::\+Port8\+Bit\+::read(), status, and max\+O\+S\+::hardwarecommunication\+::\+Port8\+Bit\+::write().

\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a2a8845575338a60cc7a55d343ac6f4d4}\label{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a2a8845575338a60cc7a55d343ac6f4d4}} 
\index{maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}!identify@{identify}}
\index{identify@{identify}!maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}}
\doxysubsubsection{\texorpdfstring{identify()}{identify()}}
{\footnotesize\ttfamily void Advanced\+Technology\+Attachment\+::identify (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Identify the A\+TA device. 



Definition at line 35 of file ata.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{35                                             \{}
\DoxyCodeLine{36 }
\DoxyCodeLine{37   \textcolor{comment}{// Select the device (master or slave)}}
\DoxyCodeLine{38   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1f6cbe97ee1b6cda26307bfe0c6f5a33}{m\_device\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(\mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_aaabac42e39975c4f9832068cb6982047}{m\_is\_master}} ? 0xA0 : 0xB0);}
\DoxyCodeLine{39 }
\DoxyCodeLine{40   \textcolor{comment}{// Reset the HOB (High Order Byte)}}
\DoxyCodeLine{41   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_aa13d7f1ea0b5595905d416eca0958242}{m\_control\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(0);}
\DoxyCodeLine{42 }
\DoxyCodeLine{43   \textcolor{comment}{// Check if the master is present}}
\DoxyCodeLine{44   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1f6cbe97ee1b6cda26307bfe0c6f5a33}{m\_device\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(0xA0);}
\DoxyCodeLine{45   uint8\_t \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} = \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4ce0c37151f7104a7b9e7fad541e089c}{m\_command\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a425297307d64cb5d9889b32767f8fdc3}{read}}();}
\DoxyCodeLine{46   \textcolor{keywordflow}{if}(\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} == 0xFF)\{}
\DoxyCodeLine{47     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4f88d0c27dde8dcee4910cdc0805fcd6}{ata\_message\_stream}}-\/> write(\textcolor{stringliteral}{"Invalid Status"});}
\DoxyCodeLine{48     \textcolor{keywordflow}{return};}
\DoxyCodeLine{49   \}}
\DoxyCodeLine{50 }
\DoxyCodeLine{51   \textcolor{comment}{// Select the device (master or slave)}}
\DoxyCodeLine{52   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1f6cbe97ee1b6cda26307bfe0c6f5a33}{m\_device\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(\mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_aaabac42e39975c4f9832068cb6982047}{m\_is\_master}} ? 0xA0 : 0xB0);}
\DoxyCodeLine{53 }
\DoxyCodeLine{54   \textcolor{comment}{// Clear the ports}}
\DoxyCodeLine{55   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_abe791a4aea063caad3fb50b5ef14628f}{m\_sector\_count\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(0);}
\DoxyCodeLine{56   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_ab4d5218d8cd7c875d61e80f8d0a15f63}{m\_LBA\_low\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(0);}
\DoxyCodeLine{57   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_abe2bbba83e358ef8da181ec032a0d074}{m\_LBA\_mid\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(0);}
\DoxyCodeLine{58   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a7ae74275df5d1228bee0e20ed956afc4}{m\_LBA\_high\_Port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(0);}
\DoxyCodeLine{59 }
\DoxyCodeLine{60   \textcolor{comment}{// Send the identify command}}
\DoxyCodeLine{61   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4ce0c37151f7104a7b9e7fad541e089c}{m\_command\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(0x0EC);}
\DoxyCodeLine{62 }
\DoxyCodeLine{63   \textcolor{comment}{// Check if the device is present}}
\DoxyCodeLine{64   \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} = \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4ce0c37151f7104a7b9e7fad541e089c}{m\_command\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a425297307d64cb5d9889b32767f8fdc3}{read}}();}
\DoxyCodeLine{65   \textcolor{keywordflow}{if}(\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} == 0x00)}
\DoxyCodeLine{66     \textcolor{keywordflow}{return};}
\DoxyCodeLine{67 }
\DoxyCodeLine{68   \textcolor{comment}{// Wait for the device to be ready or for an error to occur}}
\DoxyCodeLine{69   \textcolor{keywordflow}{while} (((\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} \& 0x80) == 0x80)  \&\& ((\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} \& 0x01) != 0x01))}
\DoxyCodeLine{70     \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} = \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4ce0c37151f7104a7b9e7fad541e089c}{m\_command\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a425297307d64cb5d9889b32767f8fdc3}{read}}();}
\DoxyCodeLine{71 }
\DoxyCodeLine{72   \textcolor{comment}{//Check for any errors}}
\DoxyCodeLine{73   \textcolor{keywordflow}{if}(\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} \& 0x01)\{}
\DoxyCodeLine{74     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4f88d0c27dde8dcee4910cdc0805fcd6}{ata\_message\_stream}}-\/> write(\textcolor{stringliteral}{"ERROR"});}
\DoxyCodeLine{75     \textcolor{keywordflow}{return};}
\DoxyCodeLine{76   \}}
\DoxyCodeLine{77 }
\DoxyCodeLine{78   \textcolor{comment}{// read the data and print it}}
\DoxyCodeLine{79   \textcolor{keywordflow}{for} (uint16\_t \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} = 0; \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} < 256; ++\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}}) \{}
\DoxyCodeLine{80       uint16\_t \mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}} = \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_ad35541cae060e84edf025aa82d99ee99}{m\_data\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}();}
\DoxyCodeLine{81       \textcolor{keywordtype}{char} *text = \textcolor{stringliteral}{"  \(\backslash\)0"};}
\DoxyCodeLine{82       text[0] = (\mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}} >> 8) \& 0xFF;}
\DoxyCodeLine{83       text[1] = \mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}} \& 0xFF;}
\DoxyCodeLine{84       \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4f88d0c27dde8dcee4910cdc0805fcd6}{ata\_message\_stream}}-\/> write(text);}
\DoxyCodeLine{85   \}}
\DoxyCodeLine{86 \}}

\end{DoxyCode}


References ata\+\_\+message\+\_\+stream, data, max\+O\+S\+::drivers\+::peripherals\+::i, m\+\_\+command\+\_\+port, m\+\_\+control\+\_\+port, m\+\_\+data\+\_\+port, m\+\_\+device\+\_\+port, m\+\_\+is\+\_\+master, m\+\_\+\+L\+B\+A\+\_\+high\+\_\+\+Port, m\+\_\+\+L\+B\+A\+\_\+low\+\_\+port, m\+\_\+\+L\+B\+A\+\_\+mid\+\_\+port, m\+\_\+sector\+\_\+count\+\_\+port, max\+O\+S\+::hardwarecommunication\+::\+Port8\+Bit\+::read(), max\+O\+S\+::hardwarecommunication\+::\+Port16\+Bit\+::read(), status, and max\+O\+S\+::hardwarecommunication\+::\+Port8\+Bit\+::write().

\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a359d3cf339e6fccd7492f72ae605c42d}\label{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a359d3cf339e6fccd7492f72ae605c42d}} 
\index{maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}!read\_28@{read\_28}}
\index{read\_28@{read\_28}!maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}}
\doxysubsubsection{\texorpdfstring{read\_28()}{read\_28()}}
{\footnotesize\ttfamily void Advanced\+Technology\+Attachment\+::read\+\_\+28 (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{sector,  }\item[{uint8\+\_\+t $\ast$}]{data,  }\item[{int}]{count }\end{DoxyParamCaption})}



read a sector from the A\+TA device 


\begin{DoxyParams}{Parameters}
{\em sector} & The sector to read \\
\hline
{\em data} & The data to read into \\
\hline
{\em count} & The amount of data to read from that sector \\
\hline
\end{DoxyParams}


Definition at line 95 of file ata.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{96 \{}
\DoxyCodeLine{97     \textcolor{comment}{// Don't allow reading more then a sector}}
\DoxyCodeLine{98     \textcolor{keywordflow}{if}(sector \& 0xF0000000 || count > \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1820e2fb7f4a600e6bc3872b598c62f0}{m\_bytes\_per\_sector}})}
\DoxyCodeLine{99         \textcolor{keywordflow}{return};}
\DoxyCodeLine{100 }
\DoxyCodeLine{101     \textcolor{comment}{// Select the device (master or slave) and reset it}}
\DoxyCodeLine{102     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1f6cbe97ee1b6cda26307bfe0c6f5a33}{m\_device\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}((\mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_aaabac42e39975c4f9832068cb6982047}{m\_is\_master}} ? 0xE0 : 0xF0) |}
\DoxyCodeLine{103                         ((sector \& 0x0F000000) >> 24));}
\DoxyCodeLine{104     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_aa29dbd2cb659cb713d2306419516ff48}{m\_error\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(0);}
\DoxyCodeLine{105     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_abe791a4aea063caad3fb50b5ef14628f}{m\_sector\_count\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(1);}
\DoxyCodeLine{106 }
\DoxyCodeLine{107     \textcolor{comment}{// Split the sector into the ports}}
\DoxyCodeLine{108     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_ab4d5218d8cd7c875d61e80f8d0a15f63}{m\_LBA\_low\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(sector \& 0x000000FF);}
\DoxyCodeLine{109     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_abe2bbba83e358ef8da181ec032a0d074}{m\_LBA\_mid\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}((sector \& 0x0000FF00) >> 8);}
\DoxyCodeLine{110     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a7ae74275df5d1228bee0e20ed956afc4}{m\_LBA\_high\_Port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}((sector \& 0x00FF0000) >> 16);}
\DoxyCodeLine{111 }
\DoxyCodeLine{112     \textcolor{comment}{// Send the read command}}
\DoxyCodeLine{113     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4ce0c37151f7104a7b9e7fad541e089c}{m\_command\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(0x20);}
\DoxyCodeLine{114 }
\DoxyCodeLine{115     \textcolor{comment}{// Make sure the device is there}}
\DoxyCodeLine{116     uint8\_t \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} = \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4ce0c37151f7104a7b9e7fad541e089c}{m\_command\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a425297307d64cb5d9889b32767f8fdc3}{read}}();}
\DoxyCodeLine{117     \textcolor{keywordflow}{if}(\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} == 0x00)}
\DoxyCodeLine{118       \textcolor{keywordflow}{return};}
\DoxyCodeLine{119 }
\DoxyCodeLine{120     \textcolor{comment}{// Wait for the device to be ready or for an error to occur}}
\DoxyCodeLine{121     \textcolor{keywordflow}{while}(((\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} \& 0x80) == 0x80) \&\& ((\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} \& 0x01) != 0x01))}
\DoxyCodeLine{122         \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} = \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4ce0c37151f7104a7b9e7fad541e089c}{m\_command\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a425297307d64cb5d9889b32767f8fdc3}{read}}();}
\DoxyCodeLine{123 }
\DoxyCodeLine{124     \textcolor{comment}{//Check for any errors}}
\DoxyCodeLine{125     \textcolor{keywordflow}{if}(\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} \& 0x01)}
\DoxyCodeLine{126         \textcolor{keywordflow}{return};}
\DoxyCodeLine{127 }
\DoxyCodeLine{128     \textcolor{comment}{// read the data and store it in the array}}
\DoxyCodeLine{129     \textcolor{keywordflow}{for}(uint16\_t \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} = 0; \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} < count; \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}}+= 2)}
\DoxyCodeLine{130     \{}
\DoxyCodeLine{131         uint16\_t read\_data = \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_ad35541cae060e84edf025aa82d99ee99}{m\_data\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}();}
\DoxyCodeLine{132 }
\DoxyCodeLine{133         \mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}}[\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}}] = read\_data \& 0x00FF;}
\DoxyCodeLine{134 }
\DoxyCodeLine{135         \textcolor{comment}{// Place the next byte in the array if there is one}}
\DoxyCodeLine{136         \textcolor{keywordflow}{if}(\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}}+1 < count)}
\DoxyCodeLine{137             \mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}}[\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}}+1] = (read\_data >> 8) \& 0x00FF;}
\DoxyCodeLine{138     \}}
\DoxyCodeLine{139 }
\DoxyCodeLine{140     \textcolor{comment}{// read the remaining bytes}}
\DoxyCodeLine{141     \textcolor{keywordflow}{for}(uint16\_t \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} = count + (count \% 2); \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} < \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1820e2fb7f4a600e6bc3872b598c62f0}{m\_bytes\_per\_sector}}; \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}}+= 2)}
\DoxyCodeLine{142       \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_ad35541cae060e84edf025aa82d99ee99}{m\_data\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port16Bit_a5147c7c28ca813536015969ae6ba6bb6}{read}}();}
\DoxyCodeLine{143 \}}

\end{DoxyCode}


References data, max\+O\+S\+::drivers\+::peripherals\+::i, m\+\_\+bytes\+\_\+per\+\_\+sector, m\+\_\+command\+\_\+port, m\+\_\+data\+\_\+port, m\+\_\+device\+\_\+port, m\+\_\+error\+\_\+port, m\+\_\+is\+\_\+master, m\+\_\+\+L\+B\+A\+\_\+high\+\_\+\+Port, m\+\_\+\+L\+B\+A\+\_\+low\+\_\+port, m\+\_\+\+L\+B\+A\+\_\+mid\+\_\+port, m\+\_\+sector\+\_\+count\+\_\+port, max\+O\+S\+::hardwarecommunication\+::\+Port8\+Bit\+::read(), max\+O\+S\+::hardwarecommunication\+::\+Port16\+Bit\+::read(), status, and max\+O\+S\+::hardwarecommunication\+::\+Port8\+Bit\+::write().

\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1cd4fdd67b475ca9012eaa31063dba54}\label{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1cd4fdd67b475ca9012eaa31063dba54}} 
\index{maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}!write\_28@{write\_28}}
\index{write\_28@{write\_28}!maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}}
\doxysubsubsection{\texorpdfstring{write\_28()}{write\_28()}}
{\footnotesize\ttfamily void Advanced\+Technology\+Attachment\+::write\+\_\+28 (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{sector,  }\item[{uint8\+\_\+t $\ast$}]{data,  }\item[{int}]{count }\end{DoxyParamCaption})}



write to a sector on the A\+TA device 


\begin{DoxyParams}{Parameters}
{\em sector} & The sector to write to \\
\hline
{\em count} & The amount of data to write to that sector \\
\hline
\end{DoxyParams}


Definition at line 151 of file ata.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{151                                                                                     \{}
\DoxyCodeLine{152 }
\DoxyCodeLine{153     \textcolor{comment}{// Don't allow writing more then a sector}}
\DoxyCodeLine{154     \textcolor{keywordflow}{if}(sector > 0x0FFFFFFF || count > \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1820e2fb7f4a600e6bc3872b598c62f0}{m\_bytes\_per\_sector}})}
\DoxyCodeLine{155         \textcolor{keywordflow}{return};}
\DoxyCodeLine{156 }
\DoxyCodeLine{157     \textcolor{comment}{// Select the device (master or slave) and reset it}}
\DoxyCodeLine{158     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1f6cbe97ee1b6cda26307bfe0c6f5a33}{m\_device\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(\mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_aaabac42e39975c4f9832068cb6982047}{m\_is\_master}} ? 0xE0}
\DoxyCodeLine{159                                     : 0xF0 | ((sector \& 0x0F000000) >> 24));}
\DoxyCodeLine{160     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_aa29dbd2cb659cb713d2306419516ff48}{m\_error\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(0);}
\DoxyCodeLine{161     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_abe791a4aea063caad3fb50b5ef14628f}{m\_sector\_count\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(1);}
\DoxyCodeLine{162 }
\DoxyCodeLine{163     \textcolor{comment}{// Split the sector into the ports}}
\DoxyCodeLine{164     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_ab4d5218d8cd7c875d61e80f8d0a15f63}{m\_LBA\_low\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(sector \& 0x000000FF);}
\DoxyCodeLine{165     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_abe2bbba83e358ef8da181ec032a0d074}{m\_LBA\_mid\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}((sector \& 0x0000FF00) >> 8);}
\DoxyCodeLine{166     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a7ae74275df5d1228bee0e20ed956afc4}{m\_LBA\_high\_Port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}((sector \& 0x00FF0000) >> 16);}
\DoxyCodeLine{167 }
\DoxyCodeLine{168     \textcolor{comment}{// Send the write command}}
\DoxyCodeLine{169     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4ce0c37151f7104a7b9e7fad541e089c}{m\_command\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(0x30);}
\DoxyCodeLine{170 }
\DoxyCodeLine{171     \textcolor{comment}{// write the data to the device}}
\DoxyCodeLine{172     \textcolor{keywordflow}{for} (uint16\_t \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} = 0; \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} < \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1820e2fb7f4a600e6bc3872b598c62f0}{m\_bytes\_per\_sector}}; \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}}+= 2) \{}
\DoxyCodeLine{173 }
\DoxyCodeLine{174         uint16\_t  writeData = \mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}}[\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}}];}
\DoxyCodeLine{175 }
\DoxyCodeLine{176         \textcolor{comment}{// Place the next byte in the array if there is one}}
\DoxyCodeLine{177         \textcolor{keywordflow}{if}(\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}}+1 < count)}
\DoxyCodeLine{178             writeData |= ((uint16\_t)\mbox{\hyperlink{icmp_8h_a1e43bf7d608e87228b625cca2c04d641}{data}}[\mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}}+1]) << 8;}
\DoxyCodeLine{179 }
\DoxyCodeLine{180         \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_ad35541cae060e84edf025aa82d99ee99}{m\_data\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(writeData);}
\DoxyCodeLine{181     \}}
\DoxyCodeLine{182 }
\DoxyCodeLine{183     \textcolor{comment}{// write the remaining bytes}}
\DoxyCodeLine{184     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} = count + (count\%2); \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} < \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1820e2fb7f4a600e6bc3872b598c62f0}{m\_bytes\_per\_sector}}; \mbox{\hyperlink{namespacemaxOS_1_1drivers_1_1peripherals_a9854b786a692cef8357e51059ed90ab4a45ce6c8daf3081e4b64797e319378cb0}{i}} += 2)}
\DoxyCodeLine{185       \mbox{\hyperlink{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_ad35541cae060e84edf025aa82d99ee99}{m\_data\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port16Bit_a24f6a288e57d4c01634926ca3580324d}{write}}(0x0000);}
\DoxyCodeLine{186 \}}

\end{DoxyCode}


References data, max\+O\+S\+::drivers\+::peripherals\+::i, m\+\_\+bytes\+\_\+per\+\_\+sector, m\+\_\+command\+\_\+port, m\+\_\+data\+\_\+port, m\+\_\+device\+\_\+port, m\+\_\+error\+\_\+port, m\+\_\+is\+\_\+master, m\+\_\+\+L\+B\+A\+\_\+high\+\_\+\+Port, m\+\_\+\+L\+B\+A\+\_\+low\+\_\+port, m\+\_\+\+L\+B\+A\+\_\+mid\+\_\+port, m\+\_\+sector\+\_\+count\+\_\+port, max\+O\+S\+::hardwarecommunication\+::\+Port8\+Bit\+::write(), and max\+O\+S\+::hardwarecommunication\+::\+Port16\+Bit\+::write().



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4f88d0c27dde8dcee4910cdc0805fcd6}\label{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4f88d0c27dde8dcee4910cdc0805fcd6}} 
\index{maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}!ata\_message\_stream@{ata\_message\_stream}}
\index{ata\_message\_stream@{ata\_message\_stream}!maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}}
\doxysubsubsection{\texorpdfstring{ata\_message\_stream}{ata\_message\_stream}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmaxOS_1_1common_1_1OutputStream}{common\+::\+Output\+Stream}}$\ast$ max\+O\+S\+::drivers\+::\+Advanced\+Technology\+Attachment\+::ata\+\_\+message\+\_\+stream\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 35 of file ata.\+h.



Referenced by identify().

\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1820e2fb7f4a600e6bc3872b598c62f0}\label{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1820e2fb7f4a600e6bc3872b598c62f0}} 
\index{maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}!m\_bytes\_per\_sector@{m\_bytes\_per\_sector}}
\index{m\_bytes\_per\_sector@{m\_bytes\_per\_sector}!maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}}
\doxysubsubsection{\texorpdfstring{m\_bytes\_per\_sector}{m\_bytes\_per\_sector}}
{\footnotesize\ttfamily uint16\+\_\+t max\+O\+S\+::drivers\+::\+Advanced\+Technology\+Attachment\+::m\+\_\+bytes\+\_\+per\+\_\+sector \{ 512 \}\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 33 of file ata.\+h.



Referenced by read\+\_\+28(), and write\+\_\+28().

\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4ce0c37151f7104a7b9e7fad541e089c}\label{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a4ce0c37151f7104a7b9e7fad541e089c}} 
\index{maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}!m\_command\_port@{m\_command\_port}}
\index{m\_command\_port@{m\_command\_port}!maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}}
\doxysubsubsection{\texorpdfstring{m\_command\_port}{m\_command\_port}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} max\+O\+S\+::drivers\+::\+Advanced\+Technology\+Attachment\+::m\+\_\+command\+\_\+port\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 30 of file ata.\+h.



Referenced by flush(), identify(), read\+\_\+28(), and write\+\_\+28().

\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_aa13d7f1ea0b5595905d416eca0958242}\label{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_aa13d7f1ea0b5595905d416eca0958242}} 
\index{maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}!m\_control\_port@{m\_control\_port}}
\index{m\_control\_port@{m\_control\_port}!maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}}
\doxysubsubsection{\texorpdfstring{m\_control\_port}{m\_control\_port}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} max\+O\+S\+::drivers\+::\+Advanced\+Technology\+Attachment\+::m\+\_\+control\+\_\+port\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 31 of file ata.\+h.



Referenced by identify().

\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_ad35541cae060e84edf025aa82d99ee99}\label{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_ad35541cae060e84edf025aa82d99ee99}} 
\index{maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}!m\_data\_port@{m\_data\_port}}
\index{m\_data\_port@{m\_data\_port}!maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}}
\doxysubsubsection{\texorpdfstring{m\_data\_port}{m\_data\_port}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port16Bit}{hardwarecommunication\+::\+Port16\+Bit}} max\+O\+S\+::drivers\+::\+Advanced\+Technology\+Attachment\+::m\+\_\+data\+\_\+port\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 23 of file ata.\+h.



Referenced by identify(), read\+\_\+28(), and write\+\_\+28().

\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1f6cbe97ee1b6cda26307bfe0c6f5a33}\label{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a1f6cbe97ee1b6cda26307bfe0c6f5a33}} 
\index{maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}!m\_device\_port@{m\_device\_port}}
\index{m\_device\_port@{m\_device\_port}!maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}}
\doxysubsubsection{\texorpdfstring{m\_device\_port}{m\_device\_port}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} max\+O\+S\+::drivers\+::\+Advanced\+Technology\+Attachment\+::m\+\_\+device\+\_\+port\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 29 of file ata.\+h.



Referenced by flush(), identify(), read\+\_\+28(), and write\+\_\+28().

\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_aa29dbd2cb659cb713d2306419516ff48}\label{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_aa29dbd2cb659cb713d2306419516ff48}} 
\index{maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}!m\_error\_port@{m\_error\_port}}
\index{m\_error\_port@{m\_error\_port}!maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}}
\doxysubsubsection{\texorpdfstring{m\_error\_port}{m\_error\_port}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} max\+O\+S\+::drivers\+::\+Advanced\+Technology\+Attachment\+::m\+\_\+error\+\_\+port\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 24 of file ata.\+h.



Referenced by read\+\_\+28(), and write\+\_\+28().

\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_aaabac42e39975c4f9832068cb6982047}\label{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_aaabac42e39975c4f9832068cb6982047}} 
\index{maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}!m\_is\_master@{m\_is\_master}}
\index{m\_is\_master@{m\_is\_master}!maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}}
\doxysubsubsection{\texorpdfstring{m\_is\_master}{m\_is\_master}}
{\footnotesize\ttfamily bool max\+O\+S\+::drivers\+::\+Advanced\+Technology\+Attachment\+::m\+\_\+is\+\_\+master\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 32 of file ata.\+h.



Referenced by flush(), identify(), read\+\_\+28(), and write\+\_\+28().

\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a7ae74275df5d1228bee0e20ed956afc4}\label{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_a7ae74275df5d1228bee0e20ed956afc4}} 
\index{maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}!m\_LBA\_high\_Port@{m\_LBA\_high\_Port}}
\index{m\_LBA\_high\_Port@{m\_LBA\_high\_Port}!maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}}
\doxysubsubsection{\texorpdfstring{m\_LBA\_high\_Port}{m\_LBA\_high\_Port}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} max\+O\+S\+::drivers\+::\+Advanced\+Technology\+Attachment\+::m\+\_\+\+L\+B\+A\+\_\+high\+\_\+\+Port\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 28 of file ata.\+h.



Referenced by identify(), read\+\_\+28(), and write\+\_\+28().

\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_ab4d5218d8cd7c875d61e80f8d0a15f63}\label{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_ab4d5218d8cd7c875d61e80f8d0a15f63}} 
\index{maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}!m\_LBA\_low\_port@{m\_LBA\_low\_port}}
\index{m\_LBA\_low\_port@{m\_LBA\_low\_port}!maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}}
\doxysubsubsection{\texorpdfstring{m\_LBA\_low\_port}{m\_LBA\_low\_port}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} max\+O\+S\+::drivers\+::\+Advanced\+Technology\+Attachment\+::m\+\_\+\+L\+B\+A\+\_\+low\+\_\+port\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 26 of file ata.\+h.



Referenced by identify(), read\+\_\+28(), and write\+\_\+28().

\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_abe2bbba83e358ef8da181ec032a0d074}\label{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_abe2bbba83e358ef8da181ec032a0d074}} 
\index{maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}!m\_LBA\_mid\_port@{m\_LBA\_mid\_port}}
\index{m\_LBA\_mid\_port@{m\_LBA\_mid\_port}!maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}}
\doxysubsubsection{\texorpdfstring{m\_LBA\_mid\_port}{m\_LBA\_mid\_port}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} max\+O\+S\+::drivers\+::\+Advanced\+Technology\+Attachment\+::m\+\_\+\+L\+B\+A\+\_\+mid\+\_\+port\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 27 of file ata.\+h.



Referenced by identify(), read\+\_\+28(), and write\+\_\+28().

\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_abe791a4aea063caad3fb50b5ef14628f}\label{classmaxOS_1_1drivers_1_1AdvancedTechnologyAttachment_abe791a4aea063caad3fb50b5ef14628f}} 
\index{maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}!m\_sector\_count\_port@{m\_sector\_count\_port}}
\index{m\_sector\_count\_port@{m\_sector\_count\_port}!maxOS::drivers::AdvancedTechnologyAttachment@{maxOS::drivers::AdvancedTechnologyAttachment}}
\doxysubsubsection{\texorpdfstring{m\_sector\_count\_port}{m\_sector\_count\_port}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} max\+O\+S\+::drivers\+::\+Advanced\+Technology\+Attachment\+::m\+\_\+sector\+\_\+count\+\_\+port\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 25 of file ata.\+h.



Referenced by identify(), read\+\_\+28(), and write\+\_\+28().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/max-\/os/max-\/os/kernel/include/drivers/\mbox{\hyperlink{ata_8h}{ata.\+h}}\item 
/home/runner/work/max-\/os/max-\/os/kernel/src/drivers/\mbox{\hyperlink{ata_8cpp}{ata.\+cpp}}\end{DoxyCompactItemize}
