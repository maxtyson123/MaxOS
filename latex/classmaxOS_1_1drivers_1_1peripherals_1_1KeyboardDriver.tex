\hypertarget{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver}{}\doxysection{max\+OS\+::drivers\+::peripherals\+::Keyboard\+Driver Class Reference}
\label{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver}\index{maxOS::drivers::peripherals::KeyboardDriver@{maxOS::drivers::peripherals::KeyboardDriver}}


\mbox{\hyperlink{classmaxOS_1_1drivers_1_1Driver}{Driver}} for the Keyboard Controller, manages the events and the keyboard state.  




{\ttfamily \#include $<$keyboard.\+h$>$}

Inheritance diagram for max\+OS\+::drivers\+::peripherals\+::Keyboard\+Driver\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=1.240310cm]{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_ab072171f250743eaa34e7ed2c22a8aa5}{Keyboard\+Driver}} (\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1InterruptManager}{hardwarecommunication\+::\+Interrupt\+Manager}} $\ast$)
\begin{DoxyCompactList}\small\item\em \+\_\+\+\_\+\+\_\+\+Driver\+\_\+\+\_\+\+\_\+ \end{DoxyCompactList}\item 
\mbox{\hyperlink{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_ad6d861600fa8b332d42b0b3f96904329}{$\sim$\+Keyboard\+Driver}} ()
\item 
void \mbox{\hyperlink{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_a2e23ac39d852e6ecce2954fcce778d0f}{handle\+\_\+interrupt}} () final
\begin{DoxyCompactList}\small\item\em deactivate the keyboard driver \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_adc16d0857364171bbed8c68982c4114d}{activate}} () final
\begin{DoxyCompactList}\small\item\em activate the keyboard driver \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacemaxOS_afb37cc4e82c35155b8c0785e8d9fa937}{string}} \mbox{\hyperlink{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_a16c9d7e72fde7e4b69af12379bdff85c}{get\+\_\+device\+\_\+name}} () final
\begin{DoxyCompactList}\small\item\em Get the device name. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} \mbox{\hyperlink{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_ab997ba90c909ec1877be12bb617821e7}{m\+\_\+data\+\_\+port}}
\item 
\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} \mbox{\hyperlink{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_aed2d1aceb87968d8d3dea12c4b0c7089}{m\+\_\+command\+\_\+port}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
\mbox{\hyperlink{classmaxOS_1_1drivers_1_1Driver}{Driver}} for the Keyboard Controller, manages the events and the keyboard state. 

Definition at line 422 of file keyboard.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_ab072171f250743eaa34e7ed2c22a8aa5}\label{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_ab072171f250743eaa34e7ed2c22a8aa5}} 
\index{maxOS::drivers::peripherals::KeyboardDriver@{maxOS::drivers::peripherals::KeyboardDriver}!KeyboardDriver@{KeyboardDriver}}
\index{KeyboardDriver@{KeyboardDriver}!maxOS::drivers::peripherals::KeyboardDriver@{maxOS::drivers::peripherals::KeyboardDriver}}
\doxysubsubsection{\texorpdfstring{KeyboardDriver()}{KeyboardDriver()}}
{\footnotesize\ttfamily Keyboard\+Driver\+::\+Keyboard\+Driver (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1InterruptManager}{hardwarecommunication\+::\+Interrupt\+Manager}} $\ast$}]{manager }\end{DoxyParamCaption})}



\+\_\+\+\_\+\+\_\+\+Driver\+\_\+\+\_\+\+\_\+ 



Definition at line 77 of file keyboard.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{78 : \mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1InterruptHandler_a23513de3e722d6f7183a9b51b1d86c48}{InterruptHandler}}(0x21, manager),}
\DoxyCodeLine{79   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_ab997ba90c909ec1877be12bb617821e7}{m\_data\_port}}(0x60),}
\DoxyCodeLine{80   \mbox{\hyperlink{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_aed2d1aceb87968d8d3dea12c4b0c7089}{m\_command\_port}}(0x64)}
\DoxyCodeLine{81 \{}
\DoxyCodeLine{82 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_ad6d861600fa8b332d42b0b3f96904329}\label{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_ad6d861600fa8b332d42b0b3f96904329}} 
\index{maxOS::drivers::peripherals::KeyboardDriver@{maxOS::drivers::peripherals::KeyboardDriver}!````~KeyboardDriver@{$\sim$KeyboardDriver}}
\index{````~KeyboardDriver@{$\sim$KeyboardDriver}!maxOS::drivers::peripherals::KeyboardDriver@{maxOS::drivers::peripherals::KeyboardDriver}}
\doxysubsubsection{\texorpdfstring{$\sim$KeyboardDriver()}{~KeyboardDriver()}}
{\footnotesize\ttfamily Keyboard\+Driver\+::$\sim$\+Keyboard\+Driver (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 83 of file keyboard.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{83                                \{}
\DoxyCodeLine{84 }
\DoxyCodeLine{85 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_adc16d0857364171bbed8c68982c4114d}\label{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_adc16d0857364171bbed8c68982c4114d}} 
\index{maxOS::drivers::peripherals::KeyboardDriver@{maxOS::drivers::peripherals::KeyboardDriver}!activate@{activate}}
\index{activate@{activate}!maxOS::drivers::peripherals::KeyboardDriver@{maxOS::drivers::peripherals::KeyboardDriver}}
\doxysubsubsection{\texorpdfstring{activate()}{activate()}}
{\footnotesize\ttfamily void Keyboard\+Driver\+::activate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



activate the keyboard driver 



Reimplemented from \mbox{\hyperlink{classmaxOS_1_1drivers_1_1Driver_a92276c08d77279b6a86c900190ef797b}{max\+O\+S\+::drivers\+::\+Driver}}.



Definition at line 90 of file keyboard.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{90                               \{}
\DoxyCodeLine{91 }
\DoxyCodeLine{92     \textcolor{comment}{// Wait for user to stop pressing key (this is for the start-\/up key eg.. hold 'F12' for boot menu or hold 'del' for bios )}}
\DoxyCodeLine{93     \textcolor{keywordflow}{while} (\mbox{\hyperlink{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_aed2d1aceb87968d8d3dea12c4b0c7089}{m\_command\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a425297307d64cb5d9889b32767f8fdc3}{read}}() \& 0x1)}
\DoxyCodeLine{94       \mbox{\hyperlink{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_ab997ba90c909ec1877be12bb617821e7}{m\_data\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a425297307d64cb5d9889b32767f8fdc3}{read}}();}
\DoxyCodeLine{95 }
\DoxyCodeLine{96     \textcolor{comment}{// Enable keyboard interrupts}}
\DoxyCodeLine{97     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_aed2d1aceb87968d8d3dea12c4b0c7089}{m\_command\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(0xAE);}
\DoxyCodeLine{98 }
\DoxyCodeLine{99     \textcolor{comment}{// Get the current state of the keyboard}}
\DoxyCodeLine{100     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_aed2d1aceb87968d8d3dea12c4b0c7089}{m\_command\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(0x20);}
\DoxyCodeLine{101     uint8\_t \mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}} = (\mbox{\hyperlink{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_ab997ba90c909ec1877be12bb617821e7}{m\_data\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a425297307d64cb5d9889b32767f8fdc3}{read}}() | 1)  \& \string~ 0x10;}
\DoxyCodeLine{102 }
\DoxyCodeLine{103     \textcolor{comment}{// Reset the keyboard}}
\DoxyCodeLine{104     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_aed2d1aceb87968d8d3dea12c4b0c7089}{m\_command\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(0x60);}
\DoxyCodeLine{105     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_ab997ba90c909ec1877be12bb617821e7}{m\_data\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(\mbox{\hyperlink{intel__i217_8h_ade818037fd6c985038ff29656089758d}{status}});}
\DoxyCodeLine{106 }
\DoxyCodeLine{107     \textcolor{comment}{// activate the keyboard}}
\DoxyCodeLine{108     \mbox{\hyperlink{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_ab997ba90c909ec1877be12bb617821e7}{m\_data\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a6ede8fba6ba7e26c5982a91a3d5ffa72}{write}}(0xF4);}
\DoxyCodeLine{109 \}}

\end{DoxyCode}


References m\+\_\+command\+\_\+port, m\+\_\+data\+\_\+port, max\+O\+S\+::hardwarecommunication\+::\+Port8\+Bit\+::read(), status, and max\+O\+S\+::hardwarecommunication\+::\+Port8\+Bit\+::write().

\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_a16c9d7e72fde7e4b69af12379bdff85c}\label{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_a16c9d7e72fde7e4b69af12379bdff85c}} 
\index{maxOS::drivers::peripherals::KeyboardDriver@{maxOS::drivers::peripherals::KeyboardDriver}!get\_device\_name@{get\_device\_name}}
\index{get\_device\_name@{get\_device\_name}!maxOS::drivers::peripherals::KeyboardDriver@{maxOS::drivers::peripherals::KeyboardDriver}}
\doxysubsubsection{\texorpdfstring{get\_device\_name()}{get\_device\_name()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacemaxOS_afb37cc4e82c35155b8c0785e8d9fa937}{string}} Keyboard\+Driver\+::get\+\_\+device\+\_\+name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



Get the device name. 

\begin{DoxyReturn}{Returns}
The device name 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classmaxOS_1_1drivers_1_1Driver_a65b06f2917f7a781e68f3748e81806b6}{max\+O\+S\+::drivers\+::\+Driver}}.



Definition at line 129 of file keyboard.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{129                                        \{}
\DoxyCodeLine{130     \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Keyboard"};}
\DoxyCodeLine{131 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_a2e23ac39d852e6ecce2954fcce778d0f}\label{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_a2e23ac39d852e6ecce2954fcce778d0f}} 
\index{maxOS::drivers::peripherals::KeyboardDriver@{maxOS::drivers::peripherals::KeyboardDriver}!handle\_interrupt@{handle\_interrupt}}
\index{handle\_interrupt@{handle\_interrupt}!maxOS::drivers::peripherals::KeyboardDriver@{maxOS::drivers::peripherals::KeyboardDriver}}
\doxysubsubsection{\texorpdfstring{handle\_interrupt()}{handle\_interrupt()}}
{\footnotesize\ttfamily void Keyboard\+Driver\+::handle\+\_\+interrupt (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



deactivate the keyboard driver 



Reimplemented from \mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1InterruptHandler_abd792bc53ec7dd1b70c8386853cc3c33}{max\+O\+S\+::hardwarecommunication\+::\+Interrupt\+Handler}}.



Definition at line 114 of file keyboard.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{114                                      \{}
\DoxyCodeLine{115 }
\DoxyCodeLine{116     \textcolor{comment}{// read the scancode from the keyboard}}
\DoxyCodeLine{117     uint8\_t key = \mbox{\hyperlink{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_ab997ba90c909ec1877be12bb617821e7}{m\_data\_port}}.\mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit_a425297307d64cb5d9889b32767f8fdc3}{read}}();}
\DoxyCodeLine{118 }
\DoxyCodeLine{119     \textcolor{comment}{// Pass the scan code to the m\_handlers}}
\DoxyCodeLine{120     \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\& handler : \textcolor{keyword}{this} -\/> \mbox{\hyperlink{classmaxOS_1_1common_1_1GenericInputStream_aad5dfd54a40e3d98ab6268206d095b12}{m\_input\_stream\_event\_handlers}})\{}
\DoxyCodeLine{121         handler -\/> on\_stream\_read(key);}
\DoxyCodeLine{122     \}}
\DoxyCodeLine{123 \}}

\end{DoxyCode}


References m\+\_\+data\+\_\+port, max\+O\+S\+::common\+::\+Generic\+Input\+Stream$<$ uint8\+\_\+t $>$\+::m\+\_\+input\+\_\+stream\+\_\+event\+\_\+handlers, and max\+O\+S\+::hardwarecommunication\+::\+Port8\+Bit\+::read().



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_aed2d1aceb87968d8d3dea12c4b0c7089}\label{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_aed2d1aceb87968d8d3dea12c4b0c7089}} 
\index{maxOS::drivers::peripherals::KeyboardDriver@{maxOS::drivers::peripherals::KeyboardDriver}!m\_command\_port@{m\_command\_port}}
\index{m\_command\_port@{m\_command\_port}!maxOS::drivers::peripherals::KeyboardDriver@{maxOS::drivers::peripherals::KeyboardDriver}}
\doxysubsubsection{\texorpdfstring{m\_command\_port}{m\_command\_port}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} max\+O\+S\+::drivers\+::peripherals\+::\+Keyboard\+Driver\+::m\+\_\+command\+\_\+port\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 426 of file keyboard.\+h.



Referenced by activate().

\mbox{\Hypertarget{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_ab997ba90c909ec1877be12bb617821e7}\label{classmaxOS_1_1drivers_1_1peripherals_1_1KeyboardDriver_ab997ba90c909ec1877be12bb617821e7}} 
\index{maxOS::drivers::peripherals::KeyboardDriver@{maxOS::drivers::peripherals::KeyboardDriver}!m\_data\_port@{m\_data\_port}}
\index{m\_data\_port@{m\_data\_port}!maxOS::drivers::peripherals::KeyboardDriver@{maxOS::drivers::peripherals::KeyboardDriver}}
\doxysubsubsection{\texorpdfstring{m\_data\_port}{m\_data\_port}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmaxOS_1_1hardwarecommunication_1_1Port8Bit}{hardwarecommunication\+::\+Port8\+Bit}} max\+O\+S\+::drivers\+::peripherals\+::\+Keyboard\+Driver\+::m\+\_\+data\+\_\+port\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 425 of file keyboard.\+h.



Referenced by activate(), and handle\+\_\+interrupt().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/max-\/os/max-\/os/kernel/include/drivers/peripherals/\mbox{\hyperlink{keyboard_8h}{keyboard.\+h}}\item 
/home/runner/work/max-\/os/max-\/os/kernel/src/drivers/peripherals/\mbox{\hyperlink{keyboard_8cpp}{keyboard.\+cpp}}\end{DoxyCompactItemize}
