\doxysection{Max\+OS\+::hardwarecommunication\+::Local\+APIC Class Reference}
\hypertarget{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC}{}\label{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC}\index{MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}}


{\ttfamily \#include $<$apic.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_aad298560517032c27e104146e740938d}{Local\+APIC}} ()
\item 
\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a84eafc2ea20a276e8dc52b6f6f46b73b}{\texorpdfstring{$\sim$}{\string~}\+Local\+APIC}} ()
\item 
void \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a77bd672dc5572b51cb8e4644da1786aa}{init}} ()
\item 
uint32\+\_\+t \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_ad1a2879252218ed8d96e385b3cc34a7e}{read}} (uint32\+\_\+t reg) const
\begin{DoxyCompactList}\small\item\em Read a value from the apic register using the MSR or memory I/O depending on the local apic version. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a58100a1d7ff3dac52a6abfb1d5686561}{write}} (uint32\+\_\+t reg, uint32\+\_\+t value) const
\begin{DoxyCompactList}\small\item\em Write a value to the apic register using the MSR or memory I/O depending on the local apic version. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a6c2c7d947c09f992a1733565d8652eb3}{id}} () const
\begin{DoxyCompactList}\small\item\em Get the id of the local apic. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a45235d175880c3ef2123d57b588bc675}{send\+\_\+eoi}} () const
\begin{DoxyCompactList}\small\item\em Acknowledge that the interrupt has been handled, allowing the PIC to process the next interrupt. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
uint64\+\_\+t \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a745e7ee6cc83206664fbf157b01fd082}{m\+\_\+apic\+\_\+base}} \{\}
\item 
uint64\+\_\+t \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a334dd5e1bfd0ad7825a01765e4ec0139}{m\+\_\+apic\+\_\+base\+\_\+high}} \{\}
\item 
uint32\+\_\+t \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a732229d18e57d83bb36444cc6eed0c69}{m\+\_\+id}} \{\}
\item 
bool \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a655174d55ab5579b3c8b0bdbbcfae57a}{m\+\_\+x2apic}} \{\}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{apic_8h_source_l00016}{16}} of file \mbox{\hyperlink{apic_8h_source}{apic.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_aad298560517032c27e104146e740938d}\label{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_aad298560517032c27e104146e740938d} 
\index{MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}!LocalAPIC@{LocalAPIC}}
\index{LocalAPIC@{LocalAPIC}!MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}}
\doxysubsubsection{\texorpdfstring{LocalAPIC()}{LocalAPIC()}}
{\footnotesize\ttfamily Local\+APIC\+::\+Local\+APIC (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apic_8cpp_source_l00013}{13}} of file \mbox{\hyperlink{apic_8cpp_source}{apic.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00013\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ APIC\ base\ address}}
\DoxyCodeLine{00016\ \ \ \ \ uint64\_t\ msr\_info\ =\ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_ac2eb28384db21eb3075768c17302fff4}{CPU::read\_msr}}(0x1B);}
\DoxyCodeLine{00017\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a745e7ee6cc83206664fbf157b01fd082}{m\_apic\_base}}\ =\ msr\_info\ \&\ 0xFFFFF000;}
\DoxyCodeLine{00018\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1memory_1_1PhysicalMemoryManager_aac616421554f724ac8810d5bff76c3f1}{PhysicalMemoryManager::s\_current\_manager}}-\/>\mbox{\hyperlink{classMaxOS_1_1memory_1_1PhysicalMemoryManager_a1cd55c3baaf52d7e41acc76541dd31e1}{reserve}}(\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a745e7ee6cc83206664fbf157b01fd082}{m\_apic\_base}});}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{comment}{//\ Check\ if\ the\ APIC\ supports\ x2APIC}}
\DoxyCodeLine{00021\ \ \ \ \ uint32\_t\ ignored,\ xleaf,\ x2leaf;}
\DoxyCodeLine{00022\ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_a9ff943a994f211939c9f1a907e73b0e1}{CPU::cpuid}}(0x01,\ \&ignored,\ \&ignored,\ \&x2leaf,\ \&xleaf);}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keywordflow}{if}\ (x2leaf\ \&\ (1\ <<\ 21))\ \{}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Enable\ x2APIC}}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a655174d55ab5579b3c8b0bdbbcfae57a}{m\_x2apic}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ msr\_info\ |=\ (1\ <<\ 10);}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_ae37f29176f1bd55eb7401d1d34e7c69b}{CPU::write\_msr}}(0x1B,\ msr\_info);}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classLogger_a1df434c9cd82457b6830c0500731a601}{Logger::DEBUG}}()\ <<\ \textcolor{stringliteral}{"{}CPU\ supports\ x2APIC\(\backslash\)n"{}};}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (xleaf\ \&\ (1\ <<\ 9))\ \{}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a655174d55ab5579b3c8b0bdbbcfae57a}{m\_x2apic}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classLogger_a1df434c9cd82457b6830c0500731a601}{Logger::DEBUG}}()\ <<\ \textcolor{stringliteral}{"{}CPU\ supports\ xAPIC\(\backslash\)n"{}};}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Map\ the\ APIC\ base\ address\ to\ the\ higher\ half}}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a334dd5e1bfd0ad7825a01765e4ec0139}{m\_apic\_base\_high}}\ =\ (uint64\_t)\ \mbox{\hyperlink{classMaxOS_1_1memory_1_1PhysicalMemoryManager_a1ad616354df4569df849c6f1331cd4b4}{PhysicalMemoryManager::to\_io\_region}}(\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a745e7ee6cc83206664fbf157b01fd082}{m\_apic\_base}});}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1memory_1_1PhysicalMemoryManager_aac616421554f724ac8810d5bff76c3f1}{PhysicalMemoryManager::s\_current\_manager}}-\/>\mbox{\hyperlink{classMaxOS_1_1memory_1_1PhysicalMemoryManager_a732ea9bd93397bbddd596bee127ac8f3}{map}}((\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{physical\_address\_t}}*)\ \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a745e7ee6cc83206664fbf157b01fd082}{m\_apic\_base}},}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{classMaxOS_1_1common_1_1Rectangle}{virtual\_address\_t}}*)\ \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a334dd5e1bfd0ad7825a01765e4ec0139}{m\_apic\_base\_high}},\ \mbox{\hyperlink{namespaceMaxOS_1_1memory_ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151}{Write}}\ |\ \mbox{\hyperlink{namespaceMaxOS_1_1memory_ae0e83b5743a37b4d0d2a93bb3bbe84eba980a5bc5e6393398f4e52e1c27bdd382}{Present}});}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classLogger_a1df434c9cd82457b6830c0500731a601}{Logger::DEBUG}}()\ <<\ \textcolor{stringliteral}{"{}APIC\ Base:\ phy=0x"{}}\ <<\ \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a745e7ee6cc83206664fbf157b01fd082}{m\_apic\_base}}\ <<\ \textcolor{stringliteral}{"{},\ virt=0x"{}}\ <<\ \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a334dd5e1bfd0ad7825a01765e4ec0139}{m\_apic\_base\_high}}\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8h_adf7b5d69e4c25995b3211b91b27f33b6}{ASSERT}}(\textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}CPU\ does\ not\ support\ xAPIC"{}});}
\DoxyCodeLine{00045\ \ \ \ \ \}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{comment}{//\ Get\ information\ about\ the\ APIC}}
\DoxyCodeLine{00048\ \ \ \ \ uint32\_t\ spurious\_vector\ =\ \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_ad1a2879252218ed8d96e385b3cc34a7e}{read}}(0xF0);}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_enabled\ =\ msr\_info\ \&\ (1\ <<\ 11);}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_bsp\ =\ msr\_info\ \&\ (1\ <<\ 8);}
\DoxyCodeLine{00051\ \ \ \ \ \mbox{\hyperlink{classLogger_a1df434c9cd82457b6830c0500731a601}{Logger::DEBUG}}()\ <<\ \textcolor{stringliteral}{"{}APIC:\ boot\ processor:\ "{}}\ <<\ (is\_bsp\ ?\ \textcolor{stringliteral}{"{}Yes"{}}\ :\ \textcolor{stringliteral}{"{}No"{}})\ <<\ \textcolor{stringliteral}{"{},\ enabled\ (globally):\ "{}}\ <<\ (is\_enabled\ ?\ \textcolor{stringliteral}{"{}Yes"{}}\ :\ \textcolor{stringliteral}{"{}No"{}})\ <<\ \textcolor{stringliteral}{"{}\ Spurious\ Vector:\ 0x"{}}\ <<\ (uint64\_t)\ (spurious\_vector\ \&\ 0xFF)\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordflow}{if}\ (!is\_enabled)\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classLogger_a4cc5871bd96523f5c50a2ac8ccbf44f3}{Logger::WARNING}}()\ <<\ \textcolor{stringliteral}{"{}APIC\ is\ not\ enabled\(\backslash\)n"{}};}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00057\ \ \ \ \ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{comment}{//\ Enable\ the\ APIC}}
\DoxyCodeLine{00060\ \ \ \ \ \mbox{\hyperlink{physical_8h_ab4d8d1259f524270d625ab8933700d27}{write}}(0xF0,\ (1\ <<\ 8)\ |\ 0x100);}
\DoxyCodeLine{00061\ \ \ \ \ \mbox{\hyperlink{classLogger_a1df434c9cd82457b6830c0500731a601}{Logger::DEBUG}}()\ <<\ \textcolor{stringliteral}{"{}APIC\ Enabled\(\backslash\)n"{}};}
\DoxyCodeLine{00062\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{logger_8h_source_l00089}{ASSERT}}, \mbox{\hyperlink{cpu_8cpp_source_l00129}{Max\+OS\+::system\+::\+CPU\+::cpuid()}}, \mbox{\hyperlink{logger_8cpp_source_l00168}{Logger\+::\+DEBUG()}}, \mbox{\hyperlink{apic_8h_source_l00019}{m\+\_\+apic\+\_\+base}}, \mbox{\hyperlink{apic_8h_source_l00020}{m\+\_\+apic\+\_\+base\+\_\+high}}, \mbox{\hyperlink{apic_8h_source_l00022}{m\+\_\+x2apic}}, \mbox{\hyperlink{physical_8cpp_source_l00520}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::map()}}, \mbox{\hyperlink{physical_8h_source_l00033}{Max\+OS\+::memory\+::\+Present}}, \mbox{\hyperlink{apic_8cpp_source_l00072}{read()}}, \mbox{\hyperlink{cpu_8cpp_source_l00113}{Max\+OS\+::system\+::\+CPU\+::read\+\_\+msr()}}, \mbox{\hyperlink{physical_8cpp_source_l00788}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::reserve()}}, \mbox{\hyperlink{physical_8h_source_l00160}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::s\+\_\+current\+\_\+manager}}, \mbox{\hyperlink{physical_8cpp_source_l00927}{Max\+OS\+::memory\+::\+Physical\+Memory\+Manager\+::to\+\_\+io\+\_\+region()}}, \mbox{\hyperlink{logger_8cpp_source_l00180}{Logger\+::\+WARNING()}}, \mbox{\hyperlink{physical_8h_source_l00001}{write}}, \mbox{\hyperlink{physical_8h_source_l00034}{Max\+OS\+::memory\+::\+Write}}, and \mbox{\hyperlink{cpu_8cpp_source_l00123}{Max\+OS\+::system\+::\+CPU\+::write\+\_\+msr()}}.

\Hypertarget{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a84eafc2ea20a276e8dc52b6f6f46b73b}\label{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a84eafc2ea20a276e8dc52b6f6f46b73b} 
\index{MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}!````~LocalAPIC@{\texorpdfstring{$\sim$}{\string~}LocalAPIC}}
\index{````~LocalAPIC@{\texorpdfstring{$\sim$}{\string~}LocalAPIC}!MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}LocalAPIC()}{\string~LocalAPIC()}}
{\footnotesize\ttfamily Local\+APIC\+::\texorpdfstring{$\sim$}{\string~}\+Local\+APIC (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



\doxysubsection{Member Function Documentation}
\Hypertarget{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a6c2c7d947c09f992a1733565d8652eb3}\label{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a6c2c7d947c09f992a1733565d8652eb3} 
\index{MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}!id@{id}}
\index{id@{id}!MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}}
\doxysubsubsection{\texorpdfstring{id()}{id()}}
{\footnotesize\ttfamily uint32\+\_\+t Local\+APIC\+::id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Get the id of the local apic. 

\begin{DoxyReturn}{Returns}
The id of the local apic 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{apic_8cpp_source_l00102}{102}} of file \mbox{\hyperlink{apic_8cpp_source}{apic.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{comment}{//\ Read\ the\ id}}
\DoxyCodeLine{00105\ \ \ \ \ uint32\_t\ \textcolor{keywordtype}{id}\ =\ \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_ad1a2879252218ed8d96e385b3cc34a7e}{read}}(0x20);}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{comment}{//\ Return\ the\ id}}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a655174d55ab5579b3c8b0bdbbcfae57a}{m\_x2apic}}\ ?\ \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a6c2c7d947c09f992a1733565d8652eb3}{id}}\ :\ (\textcolor{keywordtype}{id}\ >>\ 24);}
\DoxyCodeLine{00109\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{apic_8cpp_source_l00102}{id()}}, \mbox{\hyperlink{apic_8h_source_l00022}{m\+\_\+x2apic}}, and \mbox{\hyperlink{apic_8cpp_source_l00072}{read()}}.



Referenced by \mbox{\hyperlink{apic_8cpp_source_l00102}{id()}}.

\Hypertarget{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a77bd672dc5572b51cb8e4644da1786aa}\label{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a77bd672dc5572b51cb8e4644da1786aa} 
\index{MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}!init@{init}}
\index{init@{init}!MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily void Max\+OS\+::hardwarecommunication\+::\+Local\+APIC\+::init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\Hypertarget{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_ad1a2879252218ed8d96e385b3cc34a7e}\label{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_ad1a2879252218ed8d96e385b3cc34a7e} 
\index{MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}!read@{read}}
\index{read@{read}!MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}}
\doxysubsubsection{\texorpdfstring{read()}{read()}}
{\footnotesize\ttfamily uint32\+\_\+t Local\+APIC\+::read (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{reg }\end{DoxyParamCaption}) const}



Read a value from the apic register using the MSR or memory I/O depending on the local apic version. 


\begin{DoxyParams}{Parameters}
{\em reg} & The register to read \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The value of the register 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{apic_8cpp_source_l00072}{72}} of file \mbox{\hyperlink{apic_8cpp_source}{apic.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{comment}{//\ If\ x2APIC\ is\ enabled\ I/O\ is\ done\ through\ the\ MSR}}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a655174d55ab5579b3c8b0bdbbcfae57a}{m\_x2apic}})}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (uint32\_t)\ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_ac2eb28384db21eb3075768c17302fff4}{CPU::read\_msr}}((reg\ >>\ 4)\ +\ 0x800);}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordflow}{return}\ *(\textcolor{keyword}{volatile}\ uint32\_t*)\ ((uintptr\_t)\ \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a334dd5e1bfd0ad7825a01765e4ec0139}{m\_apic\_base\_high}}\ +\ reg);}
\DoxyCodeLine{00079\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{apic_8h_source_l00020}{m\+\_\+apic\+\_\+base\+\_\+high}}, \mbox{\hyperlink{apic_8h_source_l00022}{m\+\_\+x2apic}}, and \mbox{\hyperlink{cpu_8cpp_source_l00113}{Max\+OS\+::system\+::\+CPU\+::read\+\_\+msr()}}.



Referenced by \mbox{\hyperlink{apic_8cpp_source_l00102}{id()}}, \mbox{\hyperlink{apic_8cpp_source_l00013}{Local\+APIC()}}, and \mbox{\hyperlink{clock_8cpp_source_l00260}{Max\+OS\+::drivers\+::clock\+::\+PIT\+::ticks\+\_\+per\+\_\+ms()}}.

\Hypertarget{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a45235d175880c3ef2123d57b588bc675}\label{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a45235d175880c3ef2123d57b588bc675} 
\index{MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}!send\_eoi@{send\_eoi}}
\index{send\_eoi@{send\_eoi}!MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}}
\doxysubsubsection{\texorpdfstring{send\_eoi()}{send\_eoi()}}
{\footnotesize\ttfamily void Local\+APIC\+::send\+\_\+eoi (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Acknowledge that the interrupt has been handled, allowing the PIC to process the next interrupt. 



Definition at line \mbox{\hyperlink{apic_8cpp_source_l00114}{114}} of file \mbox{\hyperlink{apic_8cpp_source}{apic.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \ \ \mbox{\hyperlink{physical_8h_ab4d8d1259f524270d625ab8933700d27}{write}}(0xB0,\ 0);}
\DoxyCodeLine{00117\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{physical_8h_source_l00001}{write}}.



Referenced by \mbox{\hyperlink{interrupts_8cpp_source_l00272}{Max\+OS\+::hardwarecommunication\+::\+Interrupt\+Manager\+::handle\+\_\+interrupt\+\_\+request()}}.

\Hypertarget{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a58100a1d7ff3dac52a6abfb1d5686561}\label{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a58100a1d7ff3dac52a6abfb1d5686561} 
\index{MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}!write@{write}}
\index{write@{write}!MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}}
\doxysubsubsection{\texorpdfstring{write()}{write()}}
{\footnotesize\ttfamily void Local\+APIC\+::write (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{reg,  }\item[{uint32\+\_\+t}]{value }\end{DoxyParamCaption}) const}



Write a value to the apic register using the MSR or memory I/O depending on the local apic version. 


\begin{DoxyParams}{Parameters}
{\em reg} & The register to write to \\
\hline
{\em value} & The value to write \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{apic_8cpp_source_l00087}{87}} of file \mbox{\hyperlink{apic_8cpp_source}{apic.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{comment}{//\ If\ x2APIC\ is\ enabled\ I/O\ is\ done\ through\ the\ MSR}}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a655174d55ab5579b3c8b0bdbbcfae57a}{m\_x2apic}})}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMaxOS_1_1system_1_1CPU_ae37f29176f1bd55eb7401d1d34e7c69b}{CPU::write\_msr}}((reg\ >>\ 4)\ +\ 0x800,\ value);}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{comment}{//\ Default\ to\ memory\ I/O}}
\DoxyCodeLine{00094\ \ \ \ \ *(\textcolor{keyword}{volatile}\ uint32\_t*)\ ((uintptr\_t)\ \mbox{\hyperlink{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a334dd5e1bfd0ad7825a01765e4ec0139}{m\_apic\_base\_high}}\ +\ reg)\ =\ value;}
\DoxyCodeLine{00095\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{apic_8h_source_l00020}{m\+\_\+apic\+\_\+base\+\_\+high}}, \mbox{\hyperlink{apic_8h_source_l00022}{m\+\_\+x2apic}}, and \mbox{\hyperlink{cpu_8cpp_source_l00123}{Max\+OS\+::system\+::\+CPU\+::write\+\_\+msr()}}.



Referenced by \mbox{\hyperlink{clock_8cpp_source_l00173}{Max\+OS\+::drivers\+::clock\+::\+Clock\+::calibrate()}}, and \mbox{\hyperlink{clock_8cpp_source_l00260}{Max\+OS\+::drivers\+::clock\+::\+PIT\+::ticks\+\_\+per\+\_\+ms()}}.



\doxysubsection{Member Data Documentation}
\Hypertarget{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a745e7ee6cc83206664fbf157b01fd082}\label{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a745e7ee6cc83206664fbf157b01fd082} 
\index{MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}!m\_apic\_base@{m\_apic\_base}}
\index{m\_apic\_base@{m\_apic\_base}!MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}}
\doxysubsubsection{\texorpdfstring{m\_apic\_base}{m\_apic\_base}}
{\footnotesize\ttfamily uint64\+\_\+t Max\+OS\+::hardwarecommunication\+::\+Local\+APIC\+::m\+\_\+apic\+\_\+base \{\}\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{apic_8h_source_l00019}{19}} of file \mbox{\hyperlink{apic_8h_source}{apic.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00019\ \{\};}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{apic_8cpp_source_l00013}{Local\+APIC()}}.

\Hypertarget{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a334dd5e1bfd0ad7825a01765e4ec0139}\label{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a334dd5e1bfd0ad7825a01765e4ec0139} 
\index{MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}!m\_apic\_base\_high@{m\_apic\_base\_high}}
\index{m\_apic\_base\_high@{m\_apic\_base\_high}!MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}}
\doxysubsubsection{\texorpdfstring{m\_apic\_base\_high}{m\_apic\_base\_high}}
{\footnotesize\ttfamily uint64\+\_\+t Max\+OS\+::hardwarecommunication\+::\+Local\+APIC\+::m\+\_\+apic\+\_\+base\+\_\+high \{\}\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{apic_8h_source_l00020}{20}} of file \mbox{\hyperlink{apic_8h_source}{apic.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00020\ \{\};}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{apic_8cpp_source_l00013}{Local\+APIC()}}, \mbox{\hyperlink{apic_8cpp_source_l00072}{read()}}, and \mbox{\hyperlink{apic_8cpp_source_l00087}{write()}}.

\Hypertarget{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a732229d18e57d83bb36444cc6eed0c69}\label{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a732229d18e57d83bb36444cc6eed0c69} 
\index{MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}!m\_id@{m\_id}}
\index{m\_id@{m\_id}!MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}}
\doxysubsubsection{\texorpdfstring{m\_id}{m\_id}}
{\footnotesize\ttfamily uint32\+\_\+t Max\+OS\+::hardwarecommunication\+::\+Local\+APIC\+::m\+\_\+id \{\}\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{apic_8h_source_l00021}{21}} of file \mbox{\hyperlink{apic_8h_source}{apic.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00021\ \{\};}

\end{DoxyCode}
\Hypertarget{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a655174d55ab5579b3c8b0bdbbcfae57a}\label{classMaxOS_1_1hardwarecommunication_1_1LocalAPIC_a655174d55ab5579b3c8b0bdbbcfae57a} 
\index{MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}!m\_x2apic@{m\_x2apic}}
\index{m\_x2apic@{m\_x2apic}!MaxOS::hardwarecommunication::LocalAPIC@{MaxOS::hardwarecommunication::LocalAPIC}}
\doxysubsubsection{\texorpdfstring{m\_x2apic}{m\_x2apic}}
{\footnotesize\ttfamily bool Max\+OS\+::hardwarecommunication\+::\+Local\+APIC\+::m\+\_\+x2apic \{\}\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{apic_8h_source_l00022}{22}} of file \mbox{\hyperlink{apic_8h_source}{apic.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00022\ \{\};}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{apic_8cpp_source_l00102}{id()}}, \mbox{\hyperlink{apic_8cpp_source_l00013}{Local\+APIC()}}, \mbox{\hyperlink{apic_8cpp_source_l00072}{read()}}, and \mbox{\hyperlink{apic_8cpp_source_l00087}{write()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/include/hardwarecommunication/\mbox{\hyperlink{apic_8h}{apic.\+h}}\item 
/home/runner/work/\+Max\+OS/\+Max\+OS/kernel/src/hardwarecommunication/\mbox{\hyperlink{apic_8cpp}{apic.\+cpp}}\end{DoxyCompactItemize}
