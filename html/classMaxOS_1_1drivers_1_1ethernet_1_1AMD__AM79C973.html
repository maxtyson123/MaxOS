<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Max OS: MaxOS::drivers::ethernet::AMD_AM79C973 Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Max OS<span id="projectnumber">&#160;0.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">MaxOS::drivers::ethernet::AMD_AM79C973 Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classMaxOS_1_1drivers_1_1Driver.html" title="base class for all drivers, handles the activation, deactivation, initialisation and reset of the dri...">Driver</a> for the AMD AM79C973 Ethernet Controller.  
 <a href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="amd__am79c973_8h_source.html">amd_am79c973.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for MaxOS::drivers::ethernet::AMD_AM79C973:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.png" usemap="#MaxOS::drivers::ethernet::AMD_5FAM79C973_map" alt=""/>
  <map id="MaxOS::drivers::ethernet::AMD_5FAM79C973_map" name="MaxOS::drivers::ethernet::AMD_5FAM79C973_map">
<area href="classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver.html" title="Driver for the Ethernet Controller, manages the sending and receiving of data, the mac address,..." alt="MaxOS::drivers::ethernet::EthernetDriver" shape="rect" coords="175,56,515,80"/>
<area href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html" title="Handles a certain interrupt number." alt="MaxOS::hardwarecommunication::InterruptHandler" shape="rect" coords="525,56,865,80"/>
<area href="classMaxOS_1_1drivers_1_1Driver.html" title="base class for all drivers, handles the activation, deactivation, initialisation and reset of the dri..." alt="MaxOS::drivers::Driver" shape="rect" coords="0,0,340,24"/>
<area href="classMaxOS_1_1common_1_1EventManager.html" alt="MaxOS::common::EventManager&lt; EthernetDriverEvents &gt;" shape="rect" coords="350,0,690,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a600f7e035ce585e05d89084856201240" id="r_a600f7e035ce585e05d89084856201240"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a600f7e035ce585e05d89084856201240">AMD_AM79C973</a> (<a class="el" href="classMaxOS_1_1hardwarecommunication_1_1PCIDeviceDescriptor.html">hardwarecommunication::PCIDeviceDescriptor</a> *<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">dev</a>)</td></tr>
<tr class="memdesc:a600f7e035ce585e05d89084856201240"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a new <a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html" title="Driver for the AMD AM79C973 Ethernet Controller.">AMD_AM79C973</a> Ethernet driver, reads the MAC address and sets up the initialisation block and buffer descriptors.  <br /></td></tr>
<tr class="separator:a600f7e035ce585e05d89084856201240"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f92c35763581a0454dac5783d693c33" id="r_a1f92c35763581a0454dac5783d693c33"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a1f92c35763581a0454dac5783d693c33">reset</a> () <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">final</a></td></tr>
<tr class="memdesc:a1f92c35763581a0454dac5783d693c33"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function resets the device.  <br /></td></tr>
<tr class="separator:a1f92c35763581a0454dac5783d693c33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53c3ac082e5eab68d8543b9b90cc21bd" id="r_a53c3ac082e5eab68d8543b9b90cc21bd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a53c3ac082e5eab68d8543b9b90cc21bd">activate</a> () <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">final</a></td></tr>
<tr class="memdesc:a53c3ac082e5eab68d8543b9b90cc21bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function activates the device and starts it (Runs when the driver-manger calls activateAll())  <br /></td></tr>
<tr class="separator:a53c3ac082e5eab68d8543b9b90cc21bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af71695cfd40bf9bc49ac865521264fd9" id="r_af71695cfd40bf9bc49ac865521264fd9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#af71695cfd40bf9bc49ac865521264fd9">deactivate</a> () <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">final</a></td></tr>
<tr class="memdesc:af71695cfd40bf9bc49ac865521264fd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deactivate the driver.  <br /></td></tr>
<tr class="separator:af71695cfd40bf9bc49ac865521264fd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a287dbe7304c0b56850b9b339c1299618" id="r_a287dbe7304c0b56850b9b339c1299618"><td class="memItemLeft" align="right" valign="top"><a class="el" href="string_8h.html#a4a6e5834af96b66d8015f5a24c09e1b3">string</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a287dbe7304c0b56850b9b339c1299618">vendor_name</a> () <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">final</a></td></tr>
<tr class="memdesc:a287dbe7304c0b56850b9b339c1299618"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get who created the device.  <br /></td></tr>
<tr class="separator:a287dbe7304c0b56850b9b339c1299618"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a426beb375fff8d28dbc4aee45a0c71b5" id="r_a426beb375fff8d28dbc4aee45a0c71b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="string_8h.html#a4a6e5834af96b66d8015f5a24c09e1b3">string</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a426beb375fff8d28dbc4aee45a0c71b5">device_name</a> () <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">final</a></td></tr>
<tr class="memdesc:a426beb375fff8d28dbc4aee45a0c71b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the device name of the driver.  <br /></td></tr>
<tr class="separator:a426beb375fff8d28dbc4aee45a0c71b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8edad1ca75667f1e4d407178b5493f7a" id="r_a8edad1ca75667f1e4d407178b5493f7a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a8edad1ca75667f1e4d407178b5493f7a">handle_interrupt</a> () <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">final</a></td></tr>
<tr class="memdesc:a8edad1ca75667f1e4d407178b5493f7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function handles the interrupt for the device.  <br /></td></tr>
<tr class="separator:a8edad1ca75667f1e4d407178b5493f7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae298c2fab9186c4b36f1e0f3ec9bad64" id="r_ae298c2fab9186c4b36f1e0f3ec9bad64"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#ae298c2fab9186c4b36f1e0f3ec9bad64">do_send</a> (<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a> *buffer, <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> size) <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">final</a></td></tr>
<tr class="memdesc:ae298c2fab9186c4b36f1e0f3ec9bad64"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sends a package.  <br /></td></tr>
<tr class="separator:ae298c2fab9186c4b36f1e0f3ec9bad64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca8230bce11a76894d893998c52204cb" id="r_aca8230bce11a76894d893998c52204cb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#aca8230bce11a76894d893998c52204cb">get_media_access_control_address</a> () <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">final</a></td></tr>
<tr class="memdesc:aca8230bce11a76894d893998c52204cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function gets the MAC address.  <br /></td></tr>
<tr class="separator:aca8230bce11a76894d893998c52204cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver.html">MaxOS::drivers::ethernet::EthernetDriver</a></td></tr>
<tr class="memitem:a4b165209d0c09c6c7684bf4650f1fca7 inherit pub_methods_classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver" id="r_a4b165209d0c09c6c7684bf4650f1fca7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver.html#a4b165209d0c09c6c7684bf4650f1fca7">send</a> (<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a> *buffer, <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> size)</td></tr>
<tr class="memdesc:a4b165209d0c09c6c7684bf4650f1fca7 inherit pub_methods_classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver"><td class="mdescLeft">&#160;</td><td class="mdescRight">send data to the network via the driver backend  <br /></td></tr>
<tr class="separator:a4b165209d0c09c6c7684bf4650f1fca7 inherit pub_methods_classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classMaxOS_1_1drivers_1_1Driver"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classMaxOS_1_1drivers_1_1Driver')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classMaxOS_1_1drivers_1_1Driver.html">MaxOS::drivers::Driver</a></td></tr>
<tr class="memitem:a87dab1f49da667742d00da02d6e8ef8e inherit pub_methods_classMaxOS_1_1drivers_1_1Driver" id="r_a87dab1f49da667742d00da02d6e8ef8e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">virtual</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1drivers_1_1Driver.html#a87dab1f49da667742d00da02d6e8ef8e">initialise</a> ()</td></tr>
<tr class="memdesc:a87dab1f49da667742d00da02d6e8ef8e inherit pub_methods_classMaxOS_1_1drivers_1_1Driver"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise the driver.  <br /></td></tr>
<tr class="separator:a87dab1f49da667742d00da02d6e8ef8e inherit pub_methods_classMaxOS_1_1drivers_1_1Driver"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classMaxOS_1_1common_1_1EventManager"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classMaxOS_1_1common_1_1EventManager')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classMaxOS_1_1common_1_1EventManager.html">MaxOS::common::EventManager&lt; EthernetDriverEvents &gt;</a></td></tr>
<tr class="memitem:ab8e353bbb4b256d394968a02cc1447ca inherit pub_methods_classMaxOS_1_1common_1_1EventManager" id="r_ab8e353bbb4b256d394968a02cc1447ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1common_1_1EventManager.html#ab8e353bbb4b256d394968a02cc1447ca">connect_event_handler</a> (<a class="el" href="classMaxOS_1_1common_1_1EventHandler.html">EventHandler</a>&lt; EthernetDriverEvents &gt; *<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">handler</a>)</td></tr>
<tr class="memdesc:ab8e353bbb4b256d394968a02cc1447ca inherit pub_methods_classMaxOS_1_1common_1_1EventManager"><td class="mdescLeft">&#160;</td><td class="mdescRight">connect an event handler to the event manager if it is not already connected  <br /></td></tr>
<tr class="separator:ab8e353bbb4b256d394968a02cc1447ca inherit pub_methods_classMaxOS_1_1common_1_1EventManager"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f0dbfda9c65048761e3728c2acddb1d inherit pub_methods_classMaxOS_1_1common_1_1EventManager" id="r_a6f0dbfda9c65048761e3728c2acddb1d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1common_1_1EventManager.html#a6f0dbfda9c65048761e3728c2acddb1d">disconnect_event_handler</a> (<a class="el" href="classMaxOS_1_1common_1_1EventHandler.html">EventHandler</a>&lt; EthernetDriverEvents &gt; *<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">handler</a>)</td></tr>
<tr class="memdesc:a6f0dbfda9c65048761e3728c2acddb1d inherit pub_methods_classMaxOS_1_1common_1_1EventManager"><td class="mdescLeft">&#160;</td><td class="mdescRight">disconnect an event handler from the event manager if it is connected  <br /></td></tr>
<tr class="separator:a6f0dbfda9c65048761e3728c2acddb1d inherit pub_methods_classMaxOS_1_1common_1_1EventManager"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f25cd0e7747ab76ee9e057ad43966c9 inherit pub_methods_classMaxOS_1_1common_1_1EventManager" id="r_a5f25cd0e7747ab76ee9e057ad43966c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Vector.html">Vector</a>&lt; <a class="el" href="classMaxOS_1_1common_1_1Event.html">Event</a>&lt; EthernetDriverEvents &gt; * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1common_1_1EventManager.html#a5f25cd0e7747ab76ee9e057ad43966c9">raise_event</a> (<a class="el" href="classMaxOS_1_1common_1_1Event.html">Event</a>&lt; EthernetDriverEvents &gt; *<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">event</a>)</td></tr>
<tr class="memdesc:a5f25cd0e7747ab76ee9e057ad43966c9 inherit pub_methods_classMaxOS_1_1common_1_1EventManager"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls the on_event function of all the event m_handlers connected to the event manager and returns a list of the results.  <br /></td></tr>
<tr class="separator:a5f25cd0e7747ab76ee9e057ad43966c9 inherit pub_methods_classMaxOS_1_1common_1_1EventManager"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html">MaxOS::hardwarecommunication::InterruptHandler</a></td></tr>
<tr class="memitem:a3f4303652151fbba92aa7b4513ae0875 inherit pub_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler" id="r_a3f4303652151fbba92aa7b4513ae0875"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">virtual</a> <a class="el" href="cpu_8h.html#a605489186b2c614af947b15ae8a77418">system::cpu_status_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html#a3f4303652151fbba92aa7b4513ae0875">handle_interrupt</a> (<a class="el" href="cpu_8h.html#a605489186b2c614af947b15ae8a77418">system::cpu_status_t</a> *status)</td></tr>
<tr class="memdesc:a3f4303652151fbba92aa7b4513ae0875 inherit pub_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles an interrupt and returns the status.  <br /></td></tr>
<tr class="separator:a3f4303652151fbba92aa7b4513ae0875 inherit pub_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver.html">MaxOS::drivers::ethernet::EthernetDriver</a></td></tr>
<tr class="memitem:a2cfbe13ac9f10a6f9dc0c065ca980cff inherit pub_static_methods_classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver" id="r_a2cfbe13ac9f10a6f9dc0c065ca980cff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">static</a> <a class="el" href="ethernet_8h.html#a65f54d2d9dfdb9eafd1affd62abe8d18">MediaAccessControlAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver.html#a2cfbe13ac9f10a6f9dc0c065ca980cff">create_media_access_control_address</a> (<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">digit1</a>, <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">digit2</a>, <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">digit3</a>, <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">digit4</a>, <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">digit5</a>, <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">digit6</a>)</td></tr>
<tr class="memdesc:a2cfbe13ac9f10a6f9dc0c065ca980cff inherit pub_static_methods_classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a Media Access Control Address.  <br /></td></tr>
<tr class="separator:a2cfbe13ac9f10a6f9dc0c065ca980cff inherit pub_static_methods_classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver.html">MaxOS::drivers::ethernet::EthernetDriver</a></td></tr>
<tr class="memitem:a788f4c5744af1a13a4dd0a09c82d8a1b inherit pro_methods_classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver" id="r_a788f4c5744af1a13a4dd0a09c82d8a1b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver.html#a788f4c5744af1a13a4dd0a09c82d8a1b">fire_data_received</a> (<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a> *buffer, <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> size)</td></tr>
<tr class="memdesc:a788f4c5744af1a13a4dd0a09c82d8a1b inherit pro_methods_classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle the recieved data.  <br /></td></tr>
<tr class="separator:a788f4c5744af1a13a4dd0a09c82d8a1b inherit pro_methods_classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc00907b5c51714928b3ebac5439a0ea inherit pro_methods_classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver" id="r_afc00907b5c51714928b3ebac5439a0ea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver.html#afc00907b5c51714928b3ebac5439a0ea">fire_data_sent</a> (<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a> *buffer, <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> size)</td></tr>
<tr class="memdesc:afc00907b5c51714928b3ebac5439a0ea inherit pro_methods_classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver"><td class="mdescLeft">&#160;</td><td class="mdescRight">send data  <br /></td></tr>
<tr class="separator:afc00907b5c51714928b3ebac5439a0ea inherit pro_methods_classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html">MaxOS::hardwarecommunication::InterruptHandler</a></td></tr>
<tr class="memitem:a79b1054c04bbcc2c72a6d6938212909c inherit pro_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler" id="r_a79b1054c04bbcc2c72a6d6938212909c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html#a79b1054c04bbcc2c72a6d6938212909c">InterruptHandler</a> (<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a> interrupt_number, <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">int64_t</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">redirect</a>=-1, <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">redirect_index</a>=0)</td></tr>
<tr class="memdesc:a79b1054c04bbcc2c72a6d6938212909c inherit pro_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new interrupt handler and registers it with the interrupt manager.  <br /></td></tr>
<tr class="separator:a79b1054c04bbcc2c72a6d6938212909c inherit pro_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12b87c89015a61b702184070354e7876 inherit pro_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler" id="r_a12b87c89015a61b702184070354e7876"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html#a12b87c89015a61b702184070354e7876">~InterruptHandler</a> ()</td></tr>
<tr class="memdesc:a12b87c89015a61b702184070354e7876 inherit pro_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys the interrupt handler and unregisters it from the interrupt manager.  <br /></td></tr>
<tr class="separator:a12b87c89015a61b702184070354e7876 inherit pro_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classMaxOS_1_1common_1_1EventManager"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classMaxOS_1_1common_1_1EventManager')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classMaxOS_1_1common_1_1EventManager.html">MaxOS::common::EventManager&lt; EthernetDriverEvents &gt;</a></td></tr>
<tr class="memitem:aeb26c8e6b4a6f00ecaec79a67d7bb815 inherit pro_attribs_classMaxOS_1_1common_1_1EventManager" id="r_aeb26c8e6b4a6f00ecaec79a67d7bb815"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Vector.html">Vector</a>&lt; <a class="el" href="classMaxOS_1_1common_1_1EventHandler.html">EventHandler</a>&lt; EthernetDriverEvents &gt; * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1common_1_1EventManager.html#aeb26c8e6b4a6f00ecaec79a67d7bb815">m_handlers</a></td></tr>
<tr class="separator:aeb26c8e6b4a6f00ecaec79a67d7bb815 inherit pro_attribs_classMaxOS_1_1common_1_1EventManager"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html">MaxOS::hardwarecommunication::InterruptHandler</a></td></tr>
<tr class="memitem:aac2ba4da525d342fc83fe344780c1850 inherit pro_attribs_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler" id="r_aac2ba4da525d342fc83fe344780c1850"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html#aac2ba4da525d342fc83fe344780c1850">m_interrupt_number</a></td></tr>
<tr class="memdesc:aac2ba4da525d342fc83fe344780c1850 inherit pro_attribs_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler"><td class="mdescLeft">&#160;</td><td class="mdescRight">The interrupt number this handler handles.  <br /></td></tr>
<tr class="separator:aac2ba4da525d342fc83fe344780c1850 inherit pro_attribs_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classMaxOS_1_1drivers_1_1Driver.html" title="base class for all drivers, handles the activation, deactivation, initialisation and reset of the dri...">Driver</a> for the AMD AM79C973 Ethernet Controller. </p>

<p class="definition">Definition at line <a class="el" href="amd__am79c973_8h_source.html#l00065">65</a> of file <a class="el" href="amd__am79c973_8h_source.html">amd_am79c973.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a600f7e035ce585e05d89084856201240" name="a600f7e035ce585e05d89084856201240"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a600f7e035ce585e05d89084856201240">&#9670;&#160;</a></span>AMD_AM79C973()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AMD_AM79C973::AMD_AM79C973 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1hardwarecommunication_1_1PCIDeviceDescriptor.html">hardwarecommunication::PCIDeviceDescriptor</a> *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a new <a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html" title="Driver for the AMD AM79C973 Ethernet Controller.">AMD_AM79C973</a> Ethernet driver, reads the MAC address and sets up the initialisation block and buffer descriptors. </p>
<p>MAX OS NET CODE: All the old (this) networking code poorly written and not used, this will be moved to userspace in the future but is kept here as a reference for now. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>The PCI device descriptor for this device </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000053">Todo:</a></b></dt><dd>move all this to initilise() </dd></dl>

<p class="definition">Definition at line <a class="el" href="amd__am79c973_8cpp_source.html#l00026">26</a> of file <a class="el" href="amd__am79c973_8cpp_source.html">amd_am79c973.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   27</span>: <a class="code hl_class" href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html">InterruptHandler</a>(0x20 + <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dev</a>-&gt;interrupt),</div>
<div class="line"><span class="lineno">   28</span>mac_address_0_port(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dev</a>-&gt;port_base),</div>
<div class="line"><span class="lineno">   29</span>mac_address_2_port(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dev</a>-&gt;port_base + 0x02),</div>
<div class="line"><span class="lineno">   30</span>mac_address_4_port(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dev</a>-&gt;port_base + 0x04),</div>
<div class="line"><span class="lineno">   31</span>register_data_port(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dev</a>-&gt;port_base + 0x10),</div>
<div class="line"><span class="lineno">   32</span>register_address_port(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dev</a>-&gt;port_base + 0x12),</div>
<div class="line"><span class="lineno">   33</span>bus_control_register_data_port(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dev</a>-&gt;port_base + 0x16),</div>
<div class="line"><span class="lineno">   34</span>reset_port(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dev</a>-&gt;port_base + 0x14),</div>
<div class="line"><span class="lineno">   35</span>init_block(),</div>
<div class="line"><span class="lineno">   36</span>send_buffers(),</div>
<div class="line"><span class="lineno">   37</span>recv_buffers() {</div>
<div class="line"><span class="lineno">   38</span>    <span class="comment">// No active buffer at the start</span></div>
<div class="line"><span class="lineno">   39</span>    current_send_buffer = 0;</div>
<div class="line"><span class="lineno">   40</span>    current_recv_buffer = 0;</div>
<div class="line"><span class="lineno">   41</span> </div>
<div class="line"><span class="lineno">   42</span>    <span class="comment">//Not active or initialised</span></div>
<div class="line"><span class="lineno">   43</span>    active = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   44</span>    init_done = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   45</span> </div>
<div class="line"><span class="lineno">   47</span> </div>
<div class="line"><span class="lineno">   48</span>    <span class="comment">// Get the MAC addresses (split up in little endian order)</span></div>
<div class="line"><span class="lineno">   49</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_0</a> = mac_address_0_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a5147c7c28ca813536015969ae6ba6bb6">read</a>() % 256;</div>
<div class="line"><span class="lineno">   50</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_1</a> = mac_address_0_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a5147c7c28ca813536015969ae6ba6bb6">read</a>() / 256;</div>
<div class="line"><span class="lineno">   51</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_2</a> = mac_address_2_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a5147c7c28ca813536015969ae6ba6bb6">read</a>() % 256;</div>
<div class="line"><span class="lineno">   52</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_3</a> = mac_address_2_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a5147c7c28ca813536015969ae6ba6bb6">read</a>() / 256;</div>
<div class="line"><span class="lineno">   53</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_4</a> = mac_address_4_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a5147c7c28ca813536015969ae6ba6bb6">read</a>() % 256;</div>
<div class="line"><span class="lineno">   54</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_5</a> = mac_address_4_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a5147c7c28ca813536015969ae6ba6bb6">read</a>() / 256;</div>
<div class="line"><span class="lineno">   55</span> </div>
<div class="line"><span class="lineno">   56</span>    <span class="comment">// Combine MAC addresses into one 48 bit number</span></div>
<div class="line"><span class="lineno">   57</span>    own_mac = <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_5</a> &lt;&lt; 40</div>
<div class="line"><span class="lineno">   58</span>              | <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_4</a> &lt;&lt; 32</div>
<div class="line"><span class="lineno">   59</span>              | <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_3</a> &lt;&lt; 24</div>
<div class="line"><span class="lineno">   60</span>              | <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_2</a> &lt;&lt; 16</div>
<div class="line"><span class="lineno">   61</span>              | <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_1</a> &lt;&lt; 8</div>
<div class="line"><span class="lineno">   62</span>              | <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_0</a>;</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>    <span class="comment">// Set the device to 32 bit mode</span></div>
<div class="line"><span class="lineno">   65</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(20);              <span class="comment">// Tell device to write to register 20</span></div>
<div class="line"><span class="lineno">   66</span>    bus_control_register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(0x102);    <span class="comment">// write desired data</span></div>
<div class="line"><span class="lineno">   67</span> </div>
<div class="line"><span class="lineno">   68</span>    <span class="comment">// Reset the stop bit (tell device it&#39;s not supposed to be reset now)</span></div>
<div class="line"><span class="lineno">   69</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(0);               <span class="comment">// Tell device to write to register 0</span></div>
<div class="line"><span class="lineno">   70</span>    register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(0x04);               <span class="comment">// write desired data</span></div>
<div class="line"><span class="lineno">   71</span> </div>
<div class="line"><span class="lineno">   72</span>    <span class="comment">// Set the initialization block</span></div>
<div class="line"><span class="lineno">   73</span>    init_block.mode = 0x0000;                         <span class="comment">// Promiscuous mode = false   ( promiscuous mode tells it to receive all packets, not just broadcasts and those for its own MAC address)</span></div>
<div class="line"><span class="lineno">   74</span>    init_block.reserved1 = 0;                         <span class="comment">// Reserved</span></div>
<div class="line"><span class="lineno">   75</span>    init_block.num_send_buffers = 3;                    <span class="comment">// Means 8 because 2^8 (number of bits used)</span></div>
<div class="line"><span class="lineno">   76</span>    init_block.reserved2 = 0;                         <span class="comment">// Reserved</span></div>
<div class="line"><span class="lineno">   77</span>    init_block.num_recv_buffers = 3;                    <span class="comment">// Means 8 because 2^8 (number of bits used)</span></div>
<div class="line"><span class="lineno">   78</span>    init_block.physical_address = own_mac;              <span class="comment">// Set the physical address to the MAC address</span></div>
<div class="line"><span class="lineno">   79</span>    init_block.reserved3 = 0;                         <span class="comment">// Reserved</span></div>
<div class="line"><span class="lineno">   80</span>    init_block.logical_address = 0;                    <span class="comment">// None for now</span></div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>    <span class="comment">// Set Buffer descriptors memory</span></div>
<div class="line"><span class="lineno">   83</span>    send_buffer_descr = (<a class="code hl_struct" href="structMaxOS_1_1drivers_1_1ethernet_1_1BufferDescriptor.html">BufferDescriptor</a>*) (<a class="code hl_function" href="classMaxOS_1_1memory_1_1MemoryManager.html#a983c849ff604367f7c8a0e70172bb331">MemoryManager::kmalloc</a>((<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structMaxOS_1_1drivers_1_1ethernet_1_1BufferDescriptor.html">BufferDescriptor</a>) * 8) + 15));  <span class="comment">// Allocate memory for 8 buffer descriptors</span></div>
<div class="line"><span class="lineno">   84</span>    init_block.send_buffer_descr_address = (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a>) send_buffer_descr;</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>    recv_buffer_descr = (<a class="code hl_struct" href="structMaxOS_1_1drivers_1_1ethernet_1_1BufferDescriptor.html">BufferDescriptor</a>*) (<a class="code hl_function" href="classMaxOS_1_1memory_1_1MemoryManager.html#a983c849ff604367f7c8a0e70172bb331">MemoryManager::kmalloc</a>((<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structMaxOS_1_1drivers_1_1ethernet_1_1BufferDescriptor.html">BufferDescriptor</a>) * 8) + 15));  <span class="comment">// Allocate memory for 8 buffer descriptors</span></div>
<div class="line"><span class="lineno">   87</span>    init_block.recv_buffer_descr_address = (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a>) recv_buffer_descr;</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">for</span>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a> i = 0; i &lt; 8; i++) {</div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span>        <span class="comment">// Send buffer descriptors</span></div>
<div class="line"><span class="lineno">   92</span>        send_buffer_descr[i].address = (((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a>) &amp;send_buffers[i]) + 15) &amp; ~(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a>) 0xF;       <span class="comment">// Same as above</span></div>
<div class="line"><span class="lineno">   93</span>        send_buffer_descr[i].flags =</div>
<div class="line"><span class="lineno">   94</span>        0x7FF                                                         <span class="comment">// Length of descriptor</span></div>
<div class="line"><span class="lineno">   95</span>        | 0xF000;                                                     <span class="comment">// Set it to send buffer</span></div>
<div class="line"><span class="lineno">   96</span>        send_buffer_descr[i].flags2 = 0;                                                           <span class="comment">// &quot;Flags2&quot; shows whether an error occurred while sending and should therefore be set to 0 by the drive</span></div>
<div class="line"><span class="lineno">   97</span>        send_buffer_descr[i].avail = 0;                                                            <span class="comment">// IF it is in use</span></div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span>        <span class="comment">// Receive</span></div>
<div class="line"><span class="lineno">  100</span>        recv_buffer_descr[i].address = (((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a>) &amp;recv_buffers[i]) + 15) &amp; ~(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a>) 0xF;   <span class="comment">// Same as above</span></div>
<div class="line"><span class="lineno">  101</span>        recv_buffer_descr[i].flags =</div>
<div class="line"><span class="lineno">  102</span>        0xF7FF                                                        <span class="comment">// Length of descriptor        (This 0xF7FF is what was causing the problem, it used to be 0x7FF)</span></div>
<div class="line"><span class="lineno">  103</span>        | 0x80000000;                                                 <span class="comment">// Set it to receive buffer</span></div>
<div class="line"><span class="lineno">  104</span>        recv_buffer_descr[i].flags2 = 0;                                                           <span class="comment">// &quot;Flags2&quot; shows whether an error occurred while sending and should therefore be set to 0 by the drive</span></div>
<div class="line"><span class="lineno">  105</span>        recv_buffer_descr[i].avail = 0;                                                            <span class="comment">// IF it is in use</span></div>
<div class="line"><span class="lineno">  106</span>    }</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>    <span class="comment">// Move initialization block into device</span></div>
<div class="line"><span class="lineno">  109</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(1);                                     <span class="comment">// Tell device to write to register 1</span></div>
<div class="line"><span class="lineno">  110</span>    register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a>) (&amp;init_block) &amp;</div>
<div class="line"><span class="lineno">  111</span>                             0xFFFF);             <span class="comment">// write address data</span></div>
<div class="line"><span class="lineno">  112</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(2);                                     <span class="comment">// Tell device to write to register 2</span></div>
<div class="line"><span class="lineno">  113</span>    register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a>) (&amp;init_block) &gt;&gt; 16) &amp;</div>
<div class="line"><span class="lineno">  114</span>                             0xFFFF);     <span class="comment">// write shifted address data</span></div>
<div class="line"><span class="lineno">  115</span> </div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1common_1_1Rectangle_html"><div class="ttname"><a href="classMaxOS_1_1common_1_1Rectangle.html">MaxOS::common::Rectangle</a></div><div class="ttdoc">Stores the left, top, width and height of a rectangle.</div><div class="ttdef"><b>Definition</b> <a href="rectangle_8h_source.html#l00022">rectangle.h:22</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1hardwarecommunication_1_1InterruptHandler_html"><div class="ttname"><a href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html">MaxOS::hardwarecommunication::InterruptHandler</a></div><div class="ttdoc">Handles a certain interrupt number.</div><div class="ttdef"><b>Definition</b> <a href="interrupts_8h_source.html#l00030">interrupts.h:30</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1hardwarecommunication_1_1Port16Bit_html_a24f6a288e57d4c01634926ca3580324d"><div class="ttname"><a href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">MaxOS::hardwarecommunication::Port16Bit::write</a></div><div class="ttdeci">virtual void write(uint16_t data)</div><div class="ttdoc">write a word to the port</div><div class="ttdef"><b>Definition</b> <a href="port_8cpp_source.html#l00095">port.cpp:95</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1hardwarecommunication_1_1Port16Bit_html_a5147c7c28ca813536015969ae6ba6bb6"><div class="ttname"><a href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a5147c7c28ca813536015969ae6ba6bb6">MaxOS::hardwarecommunication::Port16Bit::read</a></div><div class="ttdeci">virtual uint16_t read()</div><div class="ttdoc">read a word from the port</div><div class="ttdef"><b>Definition</b> <a href="port_8cpp_source.html#l00105">port.cpp:105</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1memory_1_1MemoryManager_html_a983c849ff604367f7c8a0e70172bb331"><div class="ttname"><a href="classMaxOS_1_1memory_1_1MemoryManager.html#a983c849ff604367f7c8a0e70172bb331">MaxOS::memory::MemoryManager::kmalloc</a></div><div class="ttdeci">static void * kmalloc(size_t size)</div><div class="ttdoc">Allocates a block of memory in the KERNEL space.</div><div class="ttdef"><b>Definition</b> <a href="memorymanagement_8cpp_source.html#l00085">memorymanagement.cpp:85</a></div></div>
<div class="ttc" id="astructMaxOS_1_1drivers_1_1ethernet_1_1BufferDescriptor_html"><div class="ttname"><a href="structMaxOS_1_1drivers_1_1ethernet_1_1BufferDescriptor.html">MaxOS::drivers::ethernet::BufferDescriptor</a></div><div class="ttdoc">Defines the layout of a buffer descriptor for the AMD AM79C973 Ethernet Controller.</div><div class="ttdef"><b>Definition</b> <a href="amd__am79c973_8h_source.html#l00051">amd_am79c973.h:51</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memorymanagement_8cpp_source.html#l00085">MaxOS::memory::MemoryManager::kmalloc()</a>, <a class="el" href="port_8cpp_source.html#l00105">MaxOS::hardwarecommunication::Port16Bit::read()</a>, and <a class="el" href="port_8cpp_source.html#l00095">MaxOS::hardwarecommunication::Port16Bit::write()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a53c3ac082e5eab68d8543b9b90cc21bd" name="a53c3ac082e5eab68d8543b9b90cc21bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53c3ac082e5eab68d8543b9b90cc21bd">&#9670;&#160;</a></span>activate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a> AMD_AM79C973::activate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function activates the device and starts it (Runs when the driver-manger calls activateAll()) </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000054">Todo:</a></b></dt><dd>Re-implement this class </dd></dl>

<p>Reimplemented from <a class="el" href="classMaxOS_1_1drivers_1_1Driver.html#a92276c08d77279b6a86c900190ef797b">MaxOS::drivers::Driver</a>.</p>

<p class="definition">Definition at line <a class="el" href="amd__am79c973_8cpp_source.html#l00127">127</a> of file <a class="el" href="amd__am79c973_8cpp_source.html">amd_am79c973.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  127</span>                            {</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>    init_done = <span class="keyword">false</span>;                                            <span class="comment">// Set initDone to false</span></div>
<div class="line"><span class="lineno">  132</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(0);                           <span class="comment">// Tell device to write to register 0</span></div>
<div class="line"><span class="lineno">  133</span>    register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(0x41);                           <span class="comment">// Enable Interrupts and start the device</span></div>
<div class="line"><span class="lineno">  134</span>    <span class="keywordflow">while</span>(!init_done);                                            <span class="comment">// Wait for initDone to be set to true</span></div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(4);                           <span class="comment">// Tell device to read from register 4</span></div>
<div class="line"><span class="lineno">  137</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a> = register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a5147c7c28ca813536015969ae6ba6bb6">read</a>();                     <span class="comment">// Get current data</span></div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(4);                           <span class="comment">// Tell device to write to register 4</span></div>
<div class="line"><span class="lineno">  140</span>    register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a> |</div>
<div class="line"><span class="lineno">  141</span>                             0xC00);                   <span class="comment">// Bitwise OR function on data (This automatically enlarges packets smaller than 64 bytes to that size and removes some relatively superfluous information from received packets.)</span></div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(0);                           <span class="comment">// Tell device to write to register 0</span></div>
<div class="line"><span class="lineno">  144</span>    register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(</div>
<div class="line"><span class="lineno">  145</span>    0x42);                           <span class="comment">// Tell device that it is initialised and can begin operating</span></div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>    active = <span class="keyword">true</span>;                                               <span class="comment">// Set active to true</span></div>
<div class="line"><span class="lineno">  148</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="port_8cpp_source.html#l00105">MaxOS::hardwarecommunication::Port16Bit::read()</a>, and <a class="el" href="port_8cpp_source.html#l00095">MaxOS::hardwarecommunication::Port16Bit::write()</a>.</p>

</div>
</div>
<a id="af71695cfd40bf9bc49ac865521264fd9" name="af71695cfd40bf9bc49ac865521264fd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af71695cfd40bf9bc49ac865521264fd9">&#9670;&#160;</a></span>deactivate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a> AMD_AM79C973::deactivate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deactivate the driver. </p>

<p>Reimplemented from <a class="el" href="classMaxOS_1_1drivers_1_1Driver.html#aa8d91fd440659b56c4ecf5c877925210">MaxOS::drivers::Driver</a>.</p>

<p class="definition">Definition at line <a class="el" href="amd__am79c973_8cpp_source.html#l00305">305</a> of file <a class="el" href="amd__am79c973_8cpp_source.html">amd_am79c973.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  305</span>                              {</div>
<div class="line"><span class="lineno">  306</span> </div>
<div class="line"><span class="lineno">  307</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a426beb375fff8d28dbc4aee45a0c71b5" name="a426beb375fff8d28dbc4aee45a0c71b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a426beb375fff8d28dbc4aee45a0c71b5">&#9670;&#160;</a></span>device_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="string_8h.html#a4a6e5834af96b66d8015f5a24c09e1b3">string</a> AMD_AM79C973::device_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the device name of the driver. </p>
<dl class="section return"><dt>Returns</dt><dd>The device name of the driver </dd></dl>

<p>Reimplemented from <a class="el" href="classMaxOS_1_1drivers_1_1Driver.html#a2870bc0edff29cd802f10e6acc50cf89">MaxOS::drivers::Driver</a>.</p>

<p class="definition">Definition at line <a class="el" href="amd__am79c973_8cpp_source.html#l00313">313</a> of file <a class="el" href="amd__am79c973_8cpp_source.html">amd_am79c973.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  313</span>                                 {</div>
<div class="line"><span class="lineno">  314</span>    <span class="keywordflow">return</span> <span class="stringliteral">&quot;PCnet-Fast III (Am79C973)&quot;</span>;</div>
<div class="line"><span class="lineno">  315</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae298c2fab9186c4b36f1e0f3ec9bad64" name="ae298c2fab9186c4b36f1e0f3ec9bad64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae298c2fab9186c4b36f1e0f3ec9bad64">&#9670;&#160;</a></span>do_send()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a> AMD_AM79C973::do_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function sends a package. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The buffer to send </td></tr>
    <tr><td class="paramname">size</td><td>The size of the buffer </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver.html#ad13f1122a7bedf091f8c9ad6388e6094">MaxOS::drivers::ethernet::EthernetDriver</a>.</p>

<p class="definition">Definition at line <a class="el" href="amd__am79c973_8cpp_source.html#l00210">210</a> of file <a class="el" href="amd__am79c973_8cpp_source.html">amd_am79c973.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  210</span>                                                         {</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>    <span class="keywordflow">while</span>(!active);</div>
<div class="line"><span class="lineno">  213</span> </div>
<div class="line"><span class="lineno">  214</span>    <span class="keywordtype">int</span> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">send_descriptor</a> = current_send_buffer;              <span class="comment">// Get where data has been written to</span></div>
<div class="line"><span class="lineno">  215</span>    current_send_buffer = (current_send_buffer + 1) %</div>
<div class="line"><span class="lineno">  216</span>                          8;    <span class="comment">// Move send buffer to next send buffer (div by 8 so that it is cycled) (this allows for data to be sent from different m_tasks in parallel)</span></div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>    <span class="keywordflow">if</span>(size &gt;</div>
<div class="line"><span class="lineno">  219</span>       1518) {                                    <span class="comment">// If attempt to send more than 1518 bytes at once it will be too large</span></div>
<div class="line"><span class="lineno">  220</span>        size = 1518;                                    <span class="comment">// Discard all data after that  (Generally if data is bigger than that at driver level then a higher up network layer must have made a mistake)</span></div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>    }</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>    <span class="comment">// What this loop does is copy the information passed as the parameter buffer (src) to the send buffer in the ram (dst) which the card will then use to send the data</span></div>
<div class="line"><span class="lineno">  225</span>    <span class="keywordflow">for</span>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a>* <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">src</a> = buffer + size -</div>
<div class="line"><span class="lineno">  226</span>                       1,                                                   <span class="comment">// Set src pointer to the end of the data that is being sent</span></div>
<div class="line"><span class="lineno">  227</span>        * <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dst</a> = (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a>*) (send_buffer_descr[<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">send_descriptor</a>].address + size -</div>
<div class="line"><span class="lineno">  228</span>                            1);       <span class="comment">// Take the buffer that has been selected</span></div>
<div class="line"><span class="lineno">  229</span>        <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">src</a> &gt;=</div>
<div class="line"><span class="lineno">  230</span>        buffer;                                                             <span class="comment">// While there is still information in the buffer that hasn&#39;t been written to src</span></div>
<div class="line"><span class="lineno">  231</span>        <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">src</a>--, <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dst</a>--                                                                <span class="comment">// Move 2 pointers to the end of the buffers</span></div>
<div class="line"><span class="lineno">  232</span>    ) {</div>
<div class="line"><span class="lineno">  233</span>        *<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dst</a> = *<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">src</a>;                                                                        <span class="comment">// Copy data from source buffer to destination buffer</span></div>
<div class="line"><span class="lineno">  234</span>    }</div>
<div class="line"><span class="lineno">  235</span> </div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>    send_buffer_descr[<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">send_descriptor</a>].avail = 0;                               <span class="comment">// Set that this buffer is in use</span></div>
<div class="line"><span class="lineno">  238</span>    send_buffer_descr[<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">send_descriptor</a>].flags2 = 0;                              <span class="comment">// Clear any previous error messages</span></div>
<div class="line"><span class="lineno">  239</span>    send_buffer_descr[<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">send_descriptor</a>].flags = 0x8300F000                       <span class="comment">// Encode the size of what is being sent</span></div>
<div class="line"><span class="lineno">  240</span>                                               | ((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) ((-size) &amp; 0xFFF));</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(0);                           <span class="comment">// Tell device to write to register 0</span></div>
<div class="line"><span class="lineno">  243</span>    register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(</div>
<div class="line"><span class="lineno">  244</span>    0x48);                           <span class="comment">// Tell device to send the data currently in the buffer</span></div>
<div class="line"><span class="lineno">  245</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="port_8cpp_source.html#l00095">MaxOS::hardwarecommunication::Port16Bit::write()</a>.</p>

</div>
</div>
<a id="aca8230bce11a76894d893998c52204cb" name="aca8230bce11a76894d893998c52204cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca8230bce11a76894d893998c52204cb">&#9670;&#160;</a></span>get_media_access_control_address()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a> AMD_AM79C973::get_media_access_control_address </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function gets the MAC address. </p>
<dl class="section return"><dt>Returns</dt><dd>The MAC address </dd></dl>

<p>Reimplemented from <a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver.html#a42c15c21c898dc336fa4423c92e2461d">MaxOS::drivers::ethernet::EthernetDriver</a>.</p>

<p class="definition">Definition at line <a class="el" href="amd__am79c973_8cpp_source.html#l00300">300</a> of file <a class="el" href="amd__am79c973_8cpp_source.html">amd_am79c973.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  300</span>                                                        {</div>
<div class="line"><span class="lineno">  301</span>    <span class="keywordflow">while</span>(own_mac == 0);</div>
<div class="line"><span class="lineno">  302</span>    <span class="keywordflow">return</span> own_mac;</div>
<div class="line"><span class="lineno">  303</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8edad1ca75667f1e4d407178b5493f7a" name="a8edad1ca75667f1e4d407178b5493f7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8edad1ca75667f1e4d407178b5493f7a">&#9670;&#160;</a></span>handle_interrupt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a> AMD_AM79C973::handle_interrupt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function handles the interrupt for the device. </p>

<p>Reimplemented from <a class="el" href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html#abd792bc53ec7dd1b70c8386853cc3c33">MaxOS::hardwarecommunication::InterruptHandler</a>.</p>

<p class="definition">Definition at line <a class="el" href="amd__am79c973_8cpp_source.html#l00168">168</a> of file <a class="el" href="amd__am79c973_8cpp_source.html">amd_am79c973.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  168</span>                                    {</div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>    <span class="comment">// Similar to PIC, data needs to be read when an interrupt is sent, or it hangs</span></div>
<div class="line"><span class="lineno">  171</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(0);                           <span class="comment">// Tell device to read from register 0</span></div>
<div class="line"><span class="lineno">  172</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a> = register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a5147c7c28ca813536015969ae6ba6bb6">read</a>();                     <span class="comment">// Get current data</span></div>
<div class="line"><span class="lineno">  173</span> </div>
<div class="line"><span class="lineno">  174</span>    <span class="comment">// Note: Cant be switch case as multiple errors can occur at the same time</span></div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>    <span class="comment">// Errors</span></div>
<div class="line"><span class="lineno">  177</span>    <span class="keywordflow">if</span>((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a> &amp; 0x8000) == 0x8000)</div>
<div class="line"><span class="lineno">  178</span>        <a class="code hl_function" href="classMaxOS_1_1Logger.html#a4cc5871bd96523f5c50a2ac8ccbf44f3">Logger::WARNING</a>() &lt;&lt; <span class="stringliteral">&quot;AMD am79c973 ERROR: &quot;</span>;</div>
<div class="line"><span class="lineno">  179</span>    <span class="keywordflow">if</span>((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a> &amp; 0x2000) == 0x2000)</div>
<div class="line"><span class="lineno">  180</span>        <a class="code hl_function" href="classMaxOS_1_1Logger.html#a4cc5871bd96523f5c50a2ac8ccbf44f3">Logger::WARNING</a>() &lt;&lt; <span class="stringliteral">&quot;COLLISION ERROR\n&quot;</span>;</div>
<div class="line"><span class="lineno">  181</span>    <span class="keywordflow">if</span>((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a> &amp; 0x1000) == 0x1000)</div>
<div class="line"><span class="lineno">  182</span>        <a class="code hl_function" href="classMaxOS_1_1Logger.html#a4cc5871bd96523f5c50a2ac8ccbf44f3">Logger::WARNING</a>() &lt;&lt; <span class="stringliteral">&quot;MISSED FRAME\n&quot;</span>;</div>
<div class="line"><span class="lineno">  183</span>    <span class="keywordflow">if</span>((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a> &amp; 0x0800) == 0x0800)</div>
<div class="line"><span class="lineno">  184</span>        <a class="code hl_function" href="classMaxOS_1_1Logger.html#a4cc5871bd96523f5c50a2ac8ccbf44f3">Logger::WARNING</a>() &lt;&lt; <span class="stringliteral">&quot;MEMORY ERROR\n&quot;</span>;</div>
<div class="line"><span class="lineno">  185</span> </div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>    <span class="comment">// Responses</span></div>
<div class="line"><span class="lineno">  188</span>    <span class="keywordflow">if</span>((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a> &amp; 0x0400) == 0x0400) fetch_data_received();</div>
<div class="line"><span class="lineno">  189</span>    <span class="keywordflow">if</span>((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a> &amp; 0x0200) == 0x0200) fetch_data_sent();</div>
<div class="line"><span class="lineno">  190</span>    <span class="keywordflow">if</span>((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a> &amp; 0x0100) == 0x0100) init_done = <span class="keyword">true</span>;<span class="comment">//</span></div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>    <span class="comment">// Reply that it was received</span></div>
<div class="line"><span class="lineno">  193</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(0);                           <span class="comment">// Tell device to write to register 0</span></div>
<div class="line"><span class="lineno">  194</span>    register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a>);                           <span class="comment">// Tell device that the interrupt was received</span></div>
<div class="line"><span class="lineno">  195</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1Logger_html_a4cc5871bd96523f5c50a2ac8ccbf44f3"><div class="ttname"><a href="classMaxOS_1_1Logger.html#a4cc5871bd96523f5c50a2ac8ccbf44f3">MaxOS::Logger::WARNING</a></div><div class="ttdeci">static Logger WARNING()</div><div class="ttdoc">Gets active logger set to WARNING level.</div><div class="ttdef"><b>Definition</b> <a href="logger_8cpp_source.html#l00205">logger.cpp:205</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="port_8cpp_source.html#l00105">MaxOS::hardwarecommunication::Port16Bit::read()</a>, <a class="el" href="logger_8cpp_source.html#l00205">MaxOS::Logger::WARNING()</a>, and <a class="el" href="port_8cpp_source.html#l00095">MaxOS::hardwarecommunication::Port16Bit::write()</a>.</p>

</div>
</div>
<a id="a1f92c35763581a0454dac5783d693c33" name="a1f92c35763581a0454dac5783d693c33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f92c35763581a0454dac5783d693c33">&#9670;&#160;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> AMD_AM79C973::reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function resets the device. </p>
<dl class="section return"><dt>Returns</dt><dd>The amount of ms to wait </dd></dl>

<p>Reimplemented from <a class="el" href="classMaxOS_1_1drivers_1_1Driver.html#a2371d6b69c1bf351e9c80bde265ac8be">MaxOS::drivers::Driver</a>.</p>

<p class="definition">Definition at line <a class="el" href="amd__am79c973_8cpp_source.html#l00155">155</a> of file <a class="el" href="amd__am79c973_8cpp_source.html">amd_am79c973.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  155</span>                             {</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>    reset_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a5147c7c28ca813536015969ae6ba6bb6">read</a>();</div>
<div class="line"><span class="lineno">  158</span>    reset_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(0);</div>
<div class="line"><span class="lineno">  159</span>    <span class="keywordflow">return</span> 10;                      <span class="comment">// 10 means wait for 10ms</span></div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="port_8cpp_source.html#l00105">MaxOS::hardwarecommunication::Port16Bit::read()</a>, and <a class="el" href="port_8cpp_source.html#l00095">MaxOS::hardwarecommunication::Port16Bit::write()</a>.</p>

</div>
</div>
<a id="a287dbe7304c0b56850b9b339c1299618" name="a287dbe7304c0b56850b9b339c1299618"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a287dbe7304c0b56850b9b339c1299618">&#9670;&#160;</a></span>vendor_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="string_8h.html#a4a6e5834af96b66d8015f5a24c09e1b3">string</a> AMD_AM79C973::vendor_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get who created the device. </p>
<dl class="section return"><dt>Returns</dt><dd>The vendor name of the driver </dd></dl>

<p>Reimplemented from <a class="el" href="classMaxOS_1_1drivers_1_1Driver.html#a1d0f9643af1af6964724b898cecd1bae">MaxOS::drivers::Driver</a>.</p>

<p class="definition">Definition at line <a class="el" href="amd__am79c973_8cpp_source.html#l00309">309</a> of file <a class="el" href="amd__am79c973_8cpp_source.html">amd_am79c973.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  309</span>                                 {</div>
<div class="line"><span class="lineno">  310</span>    <span class="keywordflow">return</span> <span class="stringliteral">&quot;AMD&quot;</span>;</div>
<div class="line"><span class="lineno">  311</span>}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/runner/work/MaxOS/MaxOS/kernel/include/drivers/ethernet/<a class="el" href="amd__am79c973_8h_source.html">amd_am79c973.h</a></li>
<li>/home/runner/work/MaxOS/MaxOS/kernel/src/drivers/ethernet/<a class="el" href="amd__am79c973_8cpp_source.html">amd_am79c973.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>MaxOS</b></li><li class="navelem"><b>drivers</b></li><li class="navelem"><b>ethernet</b></li><li class="navelem"><a class="el" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html">AMD_AM79C973</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
