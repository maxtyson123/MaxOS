<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Max OS: MaxOS::processes::Scheduler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Max OS<span id="projectnumber">&#160;0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classMaxOS_1_1processes_1_1Scheduler.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classMaxOS_1_1processes_1_1Scheduler-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">MaxOS::processes::Scheduler Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Schedules processes to run on the core via their threads.  
 <a href="classMaxOS_1_1processes_1_1Scheduler.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="scheduler_8h_source.html">scheduler.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3b61aac11466cd45ae42ab8c2b0013f6" id="r_a3b61aac11466cd45ae42ab8c2b0013f6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html#a3b61aac11466cd45ae42ab8c2b0013f6">Scheduler</a> ()</td></tr>
<tr class="memdesc:a3b61aac11466cd45ae42ab8c2b0013f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a new <a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html" title="Schedules processes to run on the core via their threads.">Scheduler</a> object and creates the idle process.  <br /></td></tr>
<tr class="separator:a3b61aac11466cd45ae42ab8c2b0013f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85c82e3f0b71fd6e7d570594ea7be397" id="r_a85c82e3f0b71fd6e7d570594ea7be397"><td class="memItemLeft" align="right" valign="top">system::cpu_status_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html#a85c82e3f0b71fd6e7d570594ea7be397">schedule</a> (system::cpu_status_t *cpu_state)</td></tr>
<tr class="memdesc:a85c82e3f0b71fd6e7d570594ea7be397"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedules the next thread to run.  <br /></td></tr>
<tr class="separator:a85c82e3f0b71fd6e7d570594ea7be397"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0094b696d420844c5475311e556dd70" id="r_af0094b696d420844c5475311e556dd70"><td class="memItemLeft" align="right" valign="top">system::cpu_status_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html#af0094b696d420844c5475311e556dd70">schedule_next</a> (system::cpu_status_t *status)</td></tr>
<tr class="memdesc:af0094b696d420844c5475311e556dd70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedules the next thread to run.  <br /></td></tr>
<tr class="separator:af0094b696d420844c5475311e556dd70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e3cb6c6cc95d62dc6149c0ec934c723" id="r_a4e3cb6c6cc95d62dc6149c0ec934c723"><td class="memItemLeft" align="right" valign="top">system::cpu_status_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html#a4e3cb6c6cc95d62dc6149c0ec934c723">yield</a> ()</td></tr>
<tr class="memdesc:a4e3cb6c6cc95d62dc6149c0ec934c723"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pass execution to the next thread.  <br /></td></tr>
<tr class="separator:a4e3cb6c6cc95d62dc6149c0ec934c723"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57f5f5eecb3fbbc693b6462c880129b0" id="r_a57f5f5eecb3fbbc693b6462c880129b0"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html#a57f5f5eecb3fbbc693b6462c880129b0">add_process</a> (<a class="el" href="classMaxOS_1_1processes_1_1Process.html">Process</a> *process)</td></tr>
<tr class="memdesc:a57f5f5eecb3fbbc693b6462c880129b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a process to the scheduler.  <br /></td></tr>
<tr class="separator:a57f5f5eecb3fbbc693b6462c880129b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00c2995b3a91021eb4f278a591ff994f" id="r_a00c2995b3a91021eb4f278a591ff994f"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html#a00c2995b3a91021eb4f278a591ff994f">remove_process</a> (<a class="el" href="classMaxOS_1_1processes_1_1Process.html">Process</a> *process)</td></tr>
<tr class="memdesc:a00c2995b3a91021eb4f278a591ff994f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a process from the scheduler if the process has no threads, if it does then the threads are stopped but the process is not removed (this will be done automatically when all threads are stopped)  <br /></td></tr>
<tr class="separator:a00c2995b3a91021eb4f278a591ff994f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a501213a82c4fa7c7aa8bc6ff39377c0f" id="r_a501213a82c4fa7c7aa8bc6ff39377c0f"><td class="memItemLeft" align="right" valign="top">system::cpu_status_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html#a501213a82c4fa7c7aa8bc6ff39377c0f">force_remove_process</a> (<a class="el" href="classMaxOS_1_1processes_1_1Process.html">Process</a> *process)</td></tr>
<tr class="memdesc:a501213a82c4fa7c7aa8bc6ff39377c0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a process from the scheduler and deletes all threads, begins running the next process.  <br /></td></tr>
<tr class="separator:a501213a82c4fa7c7aa8bc6ff39377c0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85c088e0e4d5e5d6fb646c842127c36c" id="r_a85c088e0e4d5e5d6fb646c842127c36c"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html#a85c088e0e4d5e5d6fb646c842127c36c">add_thread</a> (<a class="el" href="classMaxOS_1_1processes_1_1Thread.html">Thread</a> *thread)</td></tr>
<tr class="memdesc:a85c088e0e4d5e5d6fb646c842127c36c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a thread to the scheduler.  <br /></td></tr>
<tr class="separator:a85c088e0e4d5e5d6fb646c842127c36c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6984a0be65698916c382ed9abd9fc79" id="r_ae6984a0be65698916c382ed9abd9fc79"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1processes_1_1Process.html">Process</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html#ae6984a0be65698916c382ed9abd9fc79">current_process</a> ()</td></tr>
<tr class="memdesc:ae6984a0be65698916c382ed9abd9fc79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the current process.  <br /></td></tr>
<tr class="separator:ae6984a0be65698916c382ed9abd9fc79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51b58af8b283f0f98131dd2d6ce51540" id="r_a51b58af8b283f0f98131dd2d6ce51540"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1processes_1_1Process.html">Process</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html#a51b58af8b283f0f98131dd2d6ce51540">get_process</a> (uint64_t pid)</td></tr>
<tr class="memdesc:a51b58af8b283f0f98131dd2d6ce51540"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a process by its PID.  <br /></td></tr>
<tr class="separator:a51b58af8b283f0f98131dd2d6ce51540"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab16bfaa6ff6992298aa292a22ebe8397" id="r_ab16bfaa6ff6992298aa292a22ebe8397"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html#ab16bfaa6ff6992298aa292a22ebe8397">process_amount</a> ()</td></tr>
<tr class="memdesc:ab16bfaa6ff6992298aa292a22ebe8397"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets how processes are running on this scheduler.  <br /></td></tr>
<tr class="separator:ab16bfaa6ff6992298aa292a22ebe8397"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b29a981d21849fa08d64a51a5111932" id="r_a4b29a981d21849fa08d64a51a5111932"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1processes_1_1Thread.html">Thread</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">current_thread</a> ()</td></tr>
<tr class="memdesc:a4b29a981d21849fa08d64a51a5111932"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the currently executing thread.  <br /></td></tr>
<tr class="separator:a4b29a981d21849fa08d64a51a5111932"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73cf68e70de225ce465f249989766468" id="r_a73cf68e70de225ce465f249989766468"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1processes_1_1Thread.html">Thread</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html#a73cf68e70de225ce465f249989766468">get_thread</a> (uint64_t tid)</td></tr>
<tr class="memdesc:a73cf68e70de225ce465f249989766468"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a thread by its TID.  <br /></td></tr>
<tr class="separator:a73cf68e70de225ce465f249989766468"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ce2093679daf9acde62bbabc020728e" id="r_a3ce2093679daf9acde62bbabc020728e"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html#a3ce2093679daf9acde62bbabc020728e">thread_amount</a> ()</td></tr>
<tr class="memdesc:a3ce2093679daf9acde62bbabc020728e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets how many threads are running on this scheduler.  <br /></td></tr>
<tr class="separator:a3ce2093679daf9acde62bbabc020728e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a349f28166719d94bd978439f24cd2448" id="r_a349f28166719d94bd978439f24cd2448"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html#a349f28166719d94bd978439f24cd2448">ticks</a> () const</td></tr>
<tr class="memdesc:a349f28166719d94bd978439f24cd2448"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets how long the system has been running for.  <br /></td></tr>
<tr class="separator:a349f28166719d94bd978439f24cd2448"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7bd11e0611b0cad2fc18e3499d82dec" id="r_ad7bd11e0611b0cad2fc18e3499d82dec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html#ad7bd11e0611b0cad2fc18e3499d82dec">activate</a> ()</td></tr>
<tr class="memdesc:ad7bd11e0611b0cad2fc18e3499d82dec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Activates the scheduler.  <br /></td></tr>
<tr class="separator:ad7bd11e0611b0cad2fc18e3499d82dec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4792bed046b34d0010412e336ec2970" id="r_af4792bed046b34d0010412e336ec2970"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html#af4792bed046b34d0010412e336ec2970">deactivate</a> ()</td></tr>
<tr class="memdesc:af4792bed046b34d0010412e336ec2970"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deactivates the scheduler.  <br /></td></tr>
<tr class="separator:af4792bed046b34d0010412e336ec2970"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Schedules processes to run on the core via their threads. </p>

<p class="definition">Definition at line <a class="el" href="scheduler_8h_source.html#l00085">85</a> of file <a class="el" href="scheduler_8h_source.html">scheduler.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a3b61aac11466cd45ae42ab8c2b0013f6" name="a3b61aac11466cd45ae42ab8c2b0013f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b61aac11466cd45ae42ab8c2b0013f6">&#9670;&#160;</a></span>Scheduler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Scheduler::Scheduler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs a new <a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html" title="Schedules processes to run on the core via their threads.">Scheduler</a> object and creates the idle process. </p>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00362">362</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  363</span>: m_next_thread_index(0),</div>
<div class="line"><span class="lineno">  364</span>  m_active(<span class="keyword">false</span>),</div>
<div class="line"><span class="lineno">  365</span>  m_ticks(0)</div>
<div class="line"><span class="lineno">  366</span>{</div>
<div class="line"><span class="lineno">  367</span> </div>
<div class="line"><span class="lineno">  368</span>    <span class="comment">// Create this idle process</span></div>
<div class="line"><span class="lineno">  369</span>    <span class="keyword">auto</span>* idle = <span class="keyword">new</span> <a class="code hl_class" href="classMaxOS_1_1processes_1_1Process.html">Process</a>(<span class="stringliteral">&quot;Idle&quot;</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, 0, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  370</span>    idle-&gt;memory_manager = <a class="code hl_variable" href="classMaxOS_1_1memory_1_1MemoryManager.html#a80d8e713d6ad371a4b564a5202542d48">MemoryManager::s_kernel_memory_manager</a>;</div>
<div class="line"><span class="lineno">  371</span>    idle-&gt;set_pid(0);</div>
<div class="line"><span class="lineno">  372</span>    <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a57f5f5eecb3fbbc693b6462c880129b0">add_process</a>(idle);</div>
<div class="line"><span class="lineno">  373</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1memory_1_1MemoryManager_html_a80d8e713d6ad371a4b564a5202542d48"><div class="ttname"><a href="classMaxOS_1_1memory_1_1MemoryManager.html#a80d8e713d6ad371a4b564a5202542d48">MaxOS::memory::MemoryManager::s_kernel_memory_manager</a></div><div class="ttdeci">static MemoryManager * s_kernel_memory_manager</div><div class="ttdoc">The memory manager for any kernel processes and all kernel allocations.</div><div class="ttdef"><b>Definition</b> <a href="memorymanagement_8h_source.html#l00053">memorymanagement.h:53</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Process_html"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Process.html">MaxOS::processes::Process</a></div><div class="ttdoc">A process that can be scheduled by the Scheduler, wraps &amp; manages threads as well as its own address ...</div><div class="ttdef"><b>Definition</b> <a href="process_8h_source.html#l00083">process.h:84</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Scheduler_html_a57f5f5eecb3fbbc693b6462c880129b0"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Scheduler.html#a57f5f5eecb3fbbc693b6462c880129b0">MaxOS::processes::Scheduler::add_process</a></div><div class="ttdeci">uint64_t add_process(Process *process)</div><div class="ttdoc">Adds a process to the scheduler.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00502">scheduler.cpp:502</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="scheduler_8cpp_source.html#l00502">add_process()</a>, and <a class="el" href="memorymanagement_8h_source.html#l00053">MaxOS::memory::MemoryManager::s_kernel_memory_manager</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad7bd11e0611b0cad2fc18e3499d82dec" name="ad7bd11e0611b0cad2fc18e3499d82dec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7bd11e0611b0cad2fc18e3499d82dec">&#9670;&#160;</a></span>activate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Scheduler::activate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Activates the scheduler. </p>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00568">568</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  568</span>                         {</div>
<div class="line"><span class="lineno">  569</span> </div>
<div class="line"><span class="lineno">  570</span>    m_active = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  571</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a57f5f5eecb3fbbc693b6462c880129b0" name="a57f5f5eecb3fbbc693b6462c880129b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57f5f5eecb3fbbc693b6462c880129b0">&#9670;&#160;</a></span>add_process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t Scheduler::add_process </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1processes_1_1Process.html">Process</a> *&#160;</td>
          <td class="paramname"><em>process</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a process to the scheduler. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">process</td><td>The process to add </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The process ID (will be assigned during add) </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00502">502</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  502</span>                                                {</div>
<div class="line"><span class="lineno">  503</span> </div>
<div class="line"><span class="lineno">  504</span>    <span class="comment">// Get the next process ID</span></div>
<div class="line"><span class="lineno">  505</span>    <span class="keyword">auto</span> pid = <a class="code hl_function" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a06e979b83c4cd3db3eed8b333188d037">GlobalScheduler::next_pid</a>();</div>
<div class="line"><span class="lineno">  506</span>    process-&gt;<a class="code hl_function" href="classMaxOS_1_1processes_1_1Process.html#ad8173b9cedf33f4f14536985edc5a509">set_pid</a>(pid);</div>
<div class="line"><span class="lineno">  507</span> </div>
<div class="line"><span class="lineno">  508</span>    <span class="comment">// Add the process to the list</span></div>
<div class="line"><span class="lineno">  509</span>    m_processes.push_back(process);</div>
<div class="line"><span class="lineno">  510</span> </div>
<div class="line"><span class="lineno">  511</span>    <span class="comment">// Add the threads to the list</span></div>
<div class="line"><span class="lineno">  512</span>    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; thread : process-&gt;threads())</div>
<div class="line"><span class="lineno">  513</span>        thread-&gt;tid = <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a85c088e0e4d5e5d6fb646c842127c36c">add_thread</a>(thread);</div>
<div class="line"><span class="lineno">  514</span> </div>
<div class="line"><span class="lineno">  515</span>    <span class="keywordflow">return</span> pid;</div>
<div class="line"><span class="lineno">  516</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1GlobalScheduler_html_a06e979b83c4cd3db3eed8b333188d037"><div class="ttname"><a href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a06e979b83c4cd3db3eed8b333188d037">MaxOS::processes::GlobalScheduler::next_pid</a></div><div class="ttdeci">static uint64_t next_pid()</div><div class="ttdoc">Gets the next usable global PID.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00304">scheduler.cpp:304</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Process_html_ad8173b9cedf33f4f14536985edc5a509"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Process.html#ad8173b9cedf33f4f14536985edc5a509">MaxOS::processes::Process::set_pid</a></div><div class="ttdeci">void set_pid(uint64_t pid)</div><div class="ttdoc">Sets the pid of the process once added to the queue.</div><div class="ttdef"><b>Definition</b> <a href="process_8cpp_source.html#l00291">process.cpp:291</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Scheduler_html_a85c088e0e4d5e5d6fb646c842127c36c"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Scheduler.html#a85c088e0e4d5e5d6fb646c842127c36c">MaxOS::processes::Scheduler::add_thread</a></div><div class="ttdeci">uint64_t add_thread(Thread *thread)</div><div class="ttdoc">Adds a thread to the scheduler.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00524">scheduler.cpp:524</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="scheduler_8cpp_source.html#l00524">add_thread()</a>, <a class="el" href="scheduler_8cpp_source.html#l00304">MaxOS::processes::GlobalScheduler::next_pid()</a>, <a class="el" href="process_8cpp_source.html#l00291">MaxOS::processes::Process::set_pid()</a>, <a class="el" href="process_8cpp_source.html#l00309">MaxOS::processes::Process::threads()</a>, and <a class="el" href="process_8h_source.html#l00062">MaxOS::processes::Thread::tid</a>.</p>

<p class="reference">Referenced by <a class="el" href="scheduler_8cpp_source.html#l00183">MaxOS::processes::GlobalScheduler::add_process()</a>, and <a class="el" href="scheduler_8cpp_source.html#l00362">Scheduler()</a>.</p>

</div>
</div>
<a id="a85c088e0e4d5e5d6fb646c842127c36c" name="a85c088e0e4d5e5d6fb646c842127c36c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85c088e0e4d5e5d6fb646c842127c36c">&#9670;&#160;</a></span>add_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t Scheduler::add_thread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1processes_1_1Thread.html">Thread</a> *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a thread to the scheduler. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thread</td><td>The thread to add </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The thread ID </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00524">524</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  524</span>                                             {</div>
<div class="line"><span class="lineno">  525</span> </div>
<div class="line"><span class="lineno">  526</span>    <span class="comment">// Get the next thread ID</span></div>
<div class="line"><span class="lineno">  527</span>    <span class="keyword">auto</span> tid = <a class="code hl_function" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a6197a324f9a16fdf1b3990df4eb7ddd3">GlobalScheduler::next_tid</a>();</div>
<div class="line"><span class="lineno">  528</span>    thread-&gt;<a class="code hl_variable" href="classMaxOS_1_1processes_1_1Thread.html#a29d70fe3b961ad7389f00976bc5f7e0b">tid</a> = tid;</div>
<div class="line"><span class="lineno">  529</span> </div>
<div class="line"><span class="lineno">  530</span>    <span class="comment">// Add the thread to the list</span></div>
<div class="line"><span class="lineno">  531</span>    m_threads.push_back(thread);</div>
<div class="line"><span class="lineno">  532</span> </div>
<div class="line"><span class="lineno">  533</span>    <span class="comment">// Return the thread ID</span></div>
<div class="line"><span class="lineno">  534</span>    <span class="keywordflow">return</span> tid;</div>
<div class="line"><span class="lineno">  535</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1GlobalScheduler_html_a6197a324f9a16fdf1b3990df4eb7ddd3"><div class="ttname"><a href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a6197a324f9a16fdf1b3990df4eb7ddd3">MaxOS::processes::GlobalScheduler::next_tid</a></div><div class="ttdeci">static uint64_t next_tid()</div><div class="ttdoc">Gets the next usable global TID.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00337">scheduler.cpp:337</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Thread_html_a29d70fe3b961ad7389f00976bc5f7e0b"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Thread.html#a29d70fe3b961ad7389f00976bc5f7e0b">MaxOS::processes::Thread::tid</a></div><div class="ttdeci">uint64_t tid</div><div class="ttdoc">The thread ID.</div><div class="ttdef"><b>Definition</b> <a href="process_8h_source.html#l00062">process.h:62</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="scheduler_8cpp_source.html#l00337">MaxOS::processes::GlobalScheduler::next_tid()</a>, and <a class="el" href="process_8h_source.html#l00062">MaxOS::processes::Thread::tid</a>.</p>

<p class="reference">Referenced by <a class="el" href="scheduler_8cpp_source.html#l00502">add_process()</a>, and <a class="el" href="scheduler_8cpp_source.html#l00214">MaxOS::processes::GlobalScheduler::add_thread()</a>.</p>

</div>
</div>
<a id="ae6984a0be65698916c382ed9abd9fc79" name="ae6984a0be65698916c382ed9abd9fc79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6984a0be65698916c382ed9abd9fc79">&#9670;&#160;</a></span>current_process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1processes_1_1Process.html">Process</a> * Scheduler::current_process </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the current process. </p>
<dl class="section return"><dt>Returns</dt><dd>The current process, or nullptr if not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00642">642</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  642</span>                                    {</div>
<div class="line"><span class="lineno">  643</span> </div>
<div class="line"><span class="lineno">  644</span>    <a class="code hl_class" href="classMaxOS_1_1processes_1_1Process.html">Process</a>* <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#ae6984a0be65698916c382ed9abd9fc79">current_process</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  645</span> </div>
<div class="line"><span class="lineno">  646</span>    <span class="comment">// Find the process that has the thread being executed</span></div>
<div class="line"><span class="lineno">  647</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> process: m_processes)</div>
<div class="line"><span class="lineno">  648</span>        if (process-&gt;pid() == <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">current_thread</a>()-&gt;parent_pid) {</div>
<div class="line"><span class="lineno">  649</span>            <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#ae6984a0be65698916c382ed9abd9fc79">current_process</a> = process;</div>
<div class="line"><span class="lineno">  650</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  651</span>        }</div>
<div class="line"><span class="lineno">  652</span> </div>
<div class="line"><span class="lineno">  653</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#ae6984a0be65698916c382ed9abd9fc79">current_process</a>;</div>
<div class="line"><span class="lineno">  654</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Scheduler_html_a4b29a981d21849fa08d64a51a5111932"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">MaxOS::processes::Scheduler::current_thread</a></div><div class="ttdeci">Thread * current_thread()</div><div class="ttdoc">Gets the currently executing thread.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00686">scheduler.cpp:686</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Scheduler_html_ae6984a0be65698916c382ed9abd9fc79"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Scheduler.html#ae6984a0be65698916c382ed9abd9fc79">MaxOS::processes::Scheduler::current_process</a></div><div class="ttdeci">Process * current_process()</div><div class="ttdoc">Gets the current process.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00642">scheduler.cpp:642</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="scheduler_8cpp_source.html#l00642">current_process()</a>, <a class="el" href="scheduler_8cpp_source.html#l00686">current_thread()</a>, <a class="el" href="process_8h_source.html#l00063">MaxOS::processes::Thread::parent_pid</a>, and <a class="el" href="process_8cpp_source.html#l00319">MaxOS::processes::Process::pid()</a>.</p>

<p class="reference">Referenced by <a class="el" href="scheduler_8cpp_source.html#l00277">MaxOS::processes::GlobalScheduler::current_process()</a>, <a class="el" href="scheduler_8cpp_source.html#l00642">current_process()</a>, and <a class="el" href="scheduler_8cpp_source.html#l00413">schedule_next()</a>.</p>

</div>
</div>
<a id="a4b29a981d21849fa08d64a51a5111932" name="a4b29a981d21849fa08d64a51a5111932"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b29a981d21849fa08d64a51a5111932">&#9670;&#160;</a></span>current_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1processes_1_1Thread.html">Thread</a> * Scheduler::current_thread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the currently executing thread. </p>
<dl class="section return"><dt>Returns</dt><dd>The currently executing thread </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00686">686</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  686</span>                                  {</div>
<div class="line"><span class="lineno">  687</span> </div>
<div class="line"><span class="lineno">  688</span>    <span class="keywordflow">return</span> m_threads[m_next_thread_index];</div>
<div class="line"><span class="lineno">  689</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="scheduler_8cpp_source.html#l00642">current_process()</a>, <a class="el" href="scheduler_8cpp_source.html#l00313">MaxOS::processes::GlobalScheduler::current_thread()</a>, <a class="el" href="scheduler_8cpp_source.html#l00614">force_remove_process()</a>, <a class="el" href="scheduler_8cpp_source.html#l00384">schedule()</a>, <a class="el" href="scheduler_8cpp_source.html#l00413">schedule_next()</a>, and <a class="el" href="scheduler_8cpp_source.html#l00550">yield()</a>.</p>

</div>
</div>
<a id="af4792bed046b34d0010412e336ec2970" name="af4792bed046b34d0010412e336ec2970"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4792bed046b34d0010412e336ec2970">&#9670;&#160;</a></span>deactivate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Scheduler::deactivate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deactivates the scheduler. </p>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00702">702</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  702</span>                           {</div>
<div class="line"><span class="lineno">  703</span> </div>
<div class="line"><span class="lineno">  704</span>    m_active = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  705</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a501213a82c4fa7c7aa8bc6ff39377c0f" name="a501213a82c4fa7c7aa8bc6ff39377c0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a501213a82c4fa7c7aa8bc6ff39377c0f">&#9670;&#160;</a></span>force_remove_process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cpu_status_t * Scheduler::force_remove_process </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1processes_1_1Process.html">Process</a> *&#160;</td>
          <td class="paramname"><em>process</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a process from the scheduler and deletes all threads, begins running the next process. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">process</td><td>The process to remove </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the CPU for the next process to run or nullptr if the process was not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00614">614</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  614</span>                                                              {</div>
<div class="line"><span class="lineno">  615</span> </div>
<div class="line"><span class="lineno">  616</span>    <span class="comment">// If there is no process, fail</span></div>
<div class="line"><span class="lineno">  617</span>    <span class="keywordflow">if</span> (!process)</div>
<div class="line"><span class="lineno">  618</span>        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  619</span> </div>
<div class="line"><span class="lineno">  620</span>    <span class="comment">// Remove all the threads</span></div>
<div class="line"><span class="lineno">  621</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> thread: process-&gt;threads()) {</div>
<div class="line"><span class="lineno">  622</span> </div>
<div class="line"><span class="lineno">  623</span>        <span class="comment">// Remove the thread from the scheduler</span></div>
<div class="line"><span class="lineno">  624</span>        <span class="keywordtype">int</span> index = m_threads.find(thread) - m_threads.begin();</div>
<div class="line"><span class="lineno">  625</span>        m_threads.erase(m_threads.begin() + index);</div>
<div class="line"><span class="lineno">  626</span> </div>
<div class="line"><span class="lineno">  627</span>        <span class="comment">// Delete the thread</span></div>
<div class="line"><span class="lineno">  628</span>        process-&gt;<a class="code hl_function" href="classMaxOS_1_1processes_1_1Process.html#af57385b2fab714504b20e95ceb0a8bbd">remove_thread</a>(thread-&gt;tid);</div>
<div class="line"><span class="lineno">  629</span> </div>
<div class="line"><span class="lineno">  630</span>    }</div>
<div class="line"><span class="lineno">  631</span> </div>
<div class="line"><span class="lineno">  632</span>    <span class="comment">// Process will be dead now so run the next process (don&#39;t care about the execution state being outdated as it is being</span></div>
<div class="line"><span class="lineno">  633</span>    <span class="comment">// removed regardless)</span></div>
<div class="line"><span class="lineno">  634</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#af0094b696d420844c5475311e556dd70">schedule_next</a>(&amp;<a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">current_thread</a>()-&gt;execution_state);</div>
<div class="line"><span class="lineno">  635</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Process_html_af57385b2fab714504b20e95ceb0a8bbd"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Process.html#af57385b2fab714504b20e95ceb0a8bbd">MaxOS::processes::Process::remove_thread</a></div><div class="ttdeci">void remove_thread(uint64_t tid)</div><div class="ttdoc">Remove a thread by its tid (NOTE: this will not remove it from the scheduler)</div><div class="ttdef"><b>Definition</b> <a href="process_8cpp_source.html#l00267">process.cpp:267</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Scheduler_html_af0094b696d420844c5475311e556dd70"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Scheduler.html#af0094b696d420844c5475311e556dd70">MaxOS::processes::Scheduler::schedule_next</a></div><div class="ttdeci">system::cpu_status_t * schedule_next(system::cpu_status_t *status)</div><div class="ttdoc">Schedules the next thread to run.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00413">scheduler.cpp:413</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="scheduler_8cpp_source.html#l00686">current_thread()</a>, <a class="el" href="process_8cpp_source.html#l00267">MaxOS::processes::Process::remove_thread()</a>, <a class="el" href="scheduler_8cpp_source.html#l00413">schedule_next()</a>, <a class="el" href="process_8cpp_source.html#l00309">MaxOS::processes::Process::threads()</a>, and <a class="el" href="process_8h_source.html#l00062">MaxOS::processes::Thread::tid</a>.</p>

</div>
</div>
<a id="a51b58af8b283f0f98131dd2d6ce51540" name="a51b58af8b283f0f98131dd2d6ce51540"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51b58af8b283f0f98131dd2d6ce51540">&#9670;&#160;</a></span>get_process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1processes_1_1Process.html">Process</a> * Scheduler::get_process </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>pid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a process by its PID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>The process ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The process or nullptr if not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00662">662</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  662</span>                                            {</div>
<div class="line"><span class="lineno">  663</span> </div>
<div class="line"><span class="lineno">  664</span>    <span class="comment">// Try to find the process</span></div>
<div class="line"><span class="lineno">  665</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> process: m_processes)</div>
<div class="line"><span class="lineno">  666</span>        if (process-&gt;pid() == pid)</div>
<div class="line"><span class="lineno">  667</span>            return process;</div>
<div class="line"><span class="lineno">  668</span> </div>
<div class="line"><span class="lineno">  669</span>    <span class="comment">// Not found</span></div>
<div class="line"><span class="lineno">  670</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  671</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="process_8cpp_source.html#l00319">MaxOS::processes::Process::pid()</a>.</p>

</div>
</div>
<a id="a73cf68e70de225ce465f249989766468" name="a73cf68e70de225ce465f249989766468"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73cf68e70de225ce465f249989766468">&#9670;&#160;</a></span>get_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1processes_1_1Thread.html">Thread</a> * Scheduler::get_thread </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>tid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a thread by its TID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>The thread ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The thread or nullptr if not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00713">713</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  713</span>                                          {</div>
<div class="line"><span class="lineno">  714</span> </div>
<div class="line"><span class="lineno">  715</span>    <span class="comment">// Try to find the thread</span></div>
<div class="line"><span class="lineno">  716</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> thread: m_threads)</div>
<div class="line"><span class="lineno">  717</span>        if (thread-&gt;tid == tid)</div>
<div class="line"><span class="lineno">  718</span>            return thread;</div>
<div class="line"><span class="lineno">  719</span> </div>
<div class="line"><span class="lineno">  720</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  721</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="process_8h_source.html#l00062">MaxOS::processes::Thread::tid</a>.</p>

</div>
</div>
<a id="ab16bfaa6ff6992298aa292a22ebe8397" name="ab16bfaa6ff6992298aa292a22ebe8397"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab16bfaa6ff6992298aa292a22ebe8397">&#9670;&#160;</a></span>process_amount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t Scheduler::process_amount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets how processes are running on this scheduler. </p>
<dl class="section return"><dt>Returns</dt><dd>The amount </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00677">677</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  677</span>                                   {</div>
<div class="line"><span class="lineno">  678</span>    <span class="keywordflow">return</span> m_processes.size();</div>
<div class="line"><span class="lineno">  679</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="scheduler_8cpp_source.html#l00183">MaxOS::processes::GlobalScheduler::add_process()</a>.</p>

</div>
</div>
<a id="a00c2995b3a91021eb4f278a591ff994f" name="a00c2995b3a91021eb4f278a591ff994f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00c2995b3a91021eb4f278a591ff994f">&#9670;&#160;</a></span>remove_process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t Scheduler::remove_process </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1processes_1_1Process.html">Process</a> *&#160;</td>
          <td class="paramname"><em>process</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a process from the scheduler if the process has no threads, if it does then the threads are stopped but the process is not removed (this will be done automatically when all threads are stopped) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">process</td><td>The process to remove </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 if the process has threads, 0 otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00579">579</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  579</span>                                                   {</div>
<div class="line"><span class="lineno">  580</span> </div>
<div class="line"><span class="lineno">  581</span>    <span class="comment">// Check if the process has no threads</span></div>
<div class="line"><span class="lineno">  582</span>    <span class="keywordflow">if</span> (!process-&gt;<a class="code hl_function" href="classMaxOS_1_1processes_1_1Process.html#a8595e1ab73f585be41005a6bbd88eb2f">threads</a>().empty()) {</div>
<div class="line"><span class="lineno">  583</span> </div>
<div class="line"><span class="lineno">  584</span>        <span class="comment">// Set the threads to stopped or remove them if forced</span></div>
<div class="line"><span class="lineno">  585</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> thread: process-&gt;threads())</div>
<div class="line"><span class="lineno">  586</span>            thread-&gt;thread_state = ThreadState::STOPPED;</div>
<div class="line"><span class="lineno">  587</span> </div>
<div class="line"><span class="lineno">  588</span>        <span class="comment">// Need to wait until the threads are stopped before removing the process (this will be called again when all threads are stopped)</span></div>
<div class="line"><span class="lineno">  589</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  590</span> </div>
<div class="line"><span class="lineno">  591</span>    }</div>
<div class="line"><span class="lineno">  592</span> </div>
<div class="line"><span class="lineno">  593</span>    <span class="comment">// Remove the process</span></div>
<div class="line"><span class="lineno">  594</span>    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; m_processes.size(); i++) {</div>
<div class="line"><span class="lineno">  595</span>        <span class="keywordflow">if</span> (m_processes[i] == process) {</div>
<div class="line"><span class="lineno">  596</span>            m_processes.erase(m_processes.begin() + i);</div>
<div class="line"><span class="lineno">  597</span> </div>
<div class="line"><span class="lineno">  598</span>            <span class="comment">// Delete the process mem</span></div>
<div class="line"><span class="lineno">  599</span>            <span class="keyword">delete</span> process;</div>
<div class="line"><span class="lineno">  600</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  601</span>        }</div>
<div class="line"><span class="lineno">  602</span>    }</div>
<div class="line"><span class="lineno">  603</span> </div>
<div class="line"><span class="lineno">  604</span>    <span class="comment">// Process not found</span></div>
<div class="line"><span class="lineno">  605</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  606</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Process_html_a8595e1ab73f585be41005a6bbd88eb2f"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Process.html#a8595e1ab73f585be41005a6bbd88eb2f">MaxOS::processes::Process::threads</a></div><div class="ttdeci">common::Vector&lt; Thread * &gt; threads()</div><div class="ttdoc">Gets the threads of the process.</div><div class="ttdef"><b>Definition</b> <a href="process_8cpp_source.html#l00309">process.cpp:309</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="process_8h_source.html#l00066">MaxOS::processes::Thread::thread_state</a>, and <a class="el" href="process_8cpp_source.html#l00309">MaxOS::processes::Process::threads()</a>.</p>

<p class="reference">Referenced by <a class="el" href="scheduler_8cpp_source.html#l00413">schedule_next()</a>.</p>

</div>
</div>
<a id="a85c82e3f0b71fd6e7d570594ea7be397" name="a85c82e3f0b71fd6e7d570594ea7be397"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85c82e3f0b71fd6e7d570594ea7be397">&#9670;&#160;</a></span>schedule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cpu_status_t * Scheduler::schedule </td>
          <td>(</td>
          <td class="paramtype">system::cpu_status_t *&#160;</td>
          <td class="paramname"><em>cpu_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedules the next thread to run. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cpu_state</td><td>The current CPU state </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The next CPU state </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00384">384</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  384</span>                                                         {</div>
<div class="line"><span class="lineno">  385</span> </div>
<div class="line"><span class="lineno">  386</span>    <span class="comment">// Scheduler cant schedule anything</span></div>
<div class="line"><span class="lineno">  387</span>    <span class="keywordflow">if</span> (m_threads.empty() || !m_active)</div>
<div class="line"><span class="lineno">  388</span>        <span class="keywordflow">return</span> cpu_state;</div>
<div class="line"><span class="lineno">  389</span> </div>
<div class="line"><span class="lineno">  390</span>    <span class="comment">// Thread that we are dealing with</span></div>
<div class="line"><span class="lineno">  391</span>    <a class="code hl_class" href="classMaxOS_1_1processes_1_1Thread.html">Thread</a>* <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">current_thread</a> = m_threads[m_next_thread_index];</div>
<div class="line"><span class="lineno">  392</span> </div>
<div class="line"><span class="lineno">  393</span>    <span class="comment">// Ticked</span></div>
<div class="line"><span class="lineno">  394</span>    m_ticks++;</div>
<div class="line"><span class="lineno">  395</span>    <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">current_thread</a>-&gt;<a class="code hl_variable" href="classMaxOS_1_1processes_1_1Thread.html#adac2079967569c8686ab0d05631065bc">ticks</a>++;</div>
<div class="line"><span class="lineno">  396</span> </div>
<div class="line"><span class="lineno">  397</span>    <span class="comment">// Thread hasn&#39;t used its time slot yet</span></div>
<div class="line"><span class="lineno">  398</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">current_thread</a>-&gt;<a class="code hl_variable" href="classMaxOS_1_1processes_1_1Thread.html#adac2079967569c8686ab0d05631065bc">ticks</a> % TICKS_PER_EVENT)</div>
<div class="line"><span class="lineno">  399</span>        <span class="keywordflow">return</span> cpu_state;</div>
<div class="line"><span class="lineno">  400</span> </div>
<div class="line"><span class="lineno">  401</span>    <span class="comment">// Schedule the next thread</span></div>
<div class="line"><span class="lineno">  402</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#af0094b696d420844c5475311e556dd70">schedule_next</a>(cpu_state);</div>
<div class="line"><span class="lineno">  403</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Thread_html"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Thread.html">MaxOS::processes::Thread</a></div><div class="ttdoc">The execution context of a sub-process thread.</div><div class="ttdef"><b>Definition</b> <a href="process_8h_source.html#l00047">process.h:47</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Thread_html_adac2079967569c8686ab0d05631065bc"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Thread.html#adac2079967569c8686ab0d05631065bc">MaxOS::processes::Thread::ticks</a></div><div class="ttdeci">size_t ticks</div><div class="ttdoc">The number of ticks the thread has run for.</div><div class="ttdef"><b>Definition</b> <a href="process_8h_source.html#l00068">process.h:68</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="scheduler_8cpp_source.html#l00686">current_thread()</a>, <a class="el" href="scheduler_8cpp_source.html#l00413">schedule_next()</a>, <a class="el" href="process_8h_source.html#l00068">MaxOS::processes::Thread::ticks</a>, and <a class="el" href="scheduler_8h_source.html#l00079">MaxOS::processes::TICKS_PER_EVENT</a>.</p>

<p class="reference">Referenced by <a class="el" href="scheduler_8cpp_source.html#l00062">MaxOS::processes::GlobalScheduler::handle_interrupt()</a>.</p>

</div>
</div>
<a id="af0094b696d420844c5475311e556dd70" name="af0094b696d420844c5475311e556dd70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0094b696d420844c5475311e556dd70">&#9670;&#160;</a></span>schedule_next()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cpu_status_t * Scheduler::schedule_next </td>
          <td>(</td>
          <td class="paramtype">system::cpu_status_t *&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedules the next thread to run. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">status</td><td>The current CPU status of the thread </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The next CPU status</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000074">Todo:</a></b></dt><dd>Remove by reference where possible </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00413">413</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  413</span>                                                              {</div>
<div class="line"><span class="lineno">  414</span> </div>
<div class="line"><span class="lineno">  415</span>    <span class="comment">// Get the current state</span></div>
<div class="line"><span class="lineno">  416</span>    <a class="code hl_class" href="classMaxOS_1_1processes_1_1Thread.html">Thread</a>* <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">current_thread</a> = m_threads[m_next_thread_index];</div>
<div class="line"><span class="lineno">  417</span>    <a class="code hl_class" href="classMaxOS_1_1processes_1_1Process.html">Process</a>* owner_process = <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#ae6984a0be65698916c382ed9abd9fc79">current_process</a>();</div>
<div class="line"><span class="lineno">  418</span>    <span class="keyword">auto</span> old_tid = m_next_thread_index;</div>
<div class="line"><span class="lineno">  419</span> </div>
<div class="line"><span class="lineno">  420</span>    <span class="comment">// Save the executing thread state</span></div>
<div class="line"><span class="lineno">  421</span>    <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">current_thread</a>-&gt;<a class="code hl_variable" href="classMaxOS_1_1processes_1_1Thread.html#a920e84f873b5ad33355fbde1fb2d8047">execution_state</a> = *cpu_state;</div>
<div class="line"><span class="lineno">  422</span>    <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">current_thread</a>-&gt;<a class="code hl_function" href="classMaxOS_1_1processes_1_1Thread.html#a21abe4a5d20033649696849094c415d0">save_sse_state</a>();</div>
<div class="line"><span class="lineno">  423</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">current_thread</a>-&gt;<a class="code hl_variable" href="classMaxOS_1_1processes_1_1Thread.html#a07fecafeda2dc5867ef07db926de4617">thread_state</a> == ThreadState::RUNNING)</div>
<div class="line"><span class="lineno">  424</span>        <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">current_thread</a>-&gt;<a class="code hl_variable" href="classMaxOS_1_1processes_1_1Thread.html#a07fecafeda2dc5867ef07db926de4617">thread_state</a> = ThreadState::READY;</div>
<div class="line"><span class="lineno">  425</span> </div>
<div class="line"><span class="lineno">  426</span>    <span class="comment">// Find a free thread to run</span></div>
<div class="line"><span class="lineno">  427</span>    <span class="keywordflow">while</span> ((++m_next_thread_index) != old_tid){</div>
<div class="line"><span class="lineno">  428</span>        m_next_thread_index %= m_threads.size();</div>
<div class="line"><span class="lineno">  429</span> </div>
<div class="line"><span class="lineno">  430</span>        <span class="comment">// Get the current thread</span></div>
<div class="line"><span class="lineno">  431</span>        <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">current_thread</a> = m_threads[m_next_thread_index];</div>
<div class="line"><span class="lineno">  432</span>        owner_process = <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#ae6984a0be65698916c382ed9abd9fc79">current_process</a>();</div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span>        <span class="comment">// Handle state changes</span></div>
<div class="line"><span class="lineno">  435</span>        <span class="keywordflow">switch</span> (<a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">current_thread</a>-&gt;<a class="code hl_variable" href="classMaxOS_1_1processes_1_1Thread.html#a07fecafeda2dc5867ef07db926de4617">thread_state</a>) {</div>
<div class="line"><span class="lineno">  436</span> </div>
<div class="line"><span class="lineno">  437</span>            <span class="keywordflow">case</span> ThreadState::SLEEPING:</div>
<div class="line"><span class="lineno">  438</span> </div>
<div class="line"><span class="lineno">  439</span>                <span class="comment">// If the wake-up time hasn&#39;t occurred yet, run the next thread</span></div>
<div class="line"><span class="lineno">  440</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">current_thread</a>-&gt;<a class="code hl_variable" href="classMaxOS_1_1processes_1_1Thread.html#a2cda049e10651cb61318f38cd88f22e2">wakeup_time</a> &gt; TICKS_PER_EVENT){</div>
<div class="line"><span class="lineno">  441</span>                    <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">current_thread</a>-&gt;<a class="code hl_variable" href="classMaxOS_1_1processes_1_1Thread.html#a2cda049e10651cb61318f38cd88f22e2">wakeup_time</a> -= <a class="code hl_variable" href="scheduler_8h.html#a16e9836793c1567dfa036940aef3db6d">TICKS_PER_EVENT</a>;</div>
<div class="line"><span class="lineno">  442</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  443</span>                }</div>
<div class="line"><span class="lineno">  444</span> </div>
<div class="line"><span class="lineno">  445</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  446</span> </div>
<div class="line"><span class="lineno">  447</span>            <span class="keywordflow">case</span> ThreadState::STOPPED:</div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span>                <span class="comment">// Find the process that has the thread and remove it</span></div>
<div class="line"><span class="lineno">  450</span>                <span class="keywordflow">for</span> (<span class="keyword">auto</span> thread: owner_process-&gt;threads()) {</div>
<div class="line"><span class="lineno">  451</span>                    <span class="keywordflow">if</span> (thread == <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">current_thread</a>) {</div>
<div class="line"><span class="lineno">  452</span>                        owner_process-&gt;<a class="code hl_function" href="classMaxOS_1_1processes_1_1Process.html#af57385b2fab714504b20e95ceb0a8bbd">remove_thread</a>(thread-&gt;tid);</div>
<div class="line"><span class="lineno">  453</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  454</span>                    }</div>
<div class="line"><span class="lineno">  455</span>                }</div>
<div class="line"><span class="lineno">  456</span> </div>
<div class="line"><span class="lineno">  457</span>                <span class="comment">// Remove the thread</span></div>
<div class="line"><span class="lineno">  458</span>                m_threads.erase(m_threads.begin() + m_next_thread_index);</div>
<div class="line"><span class="lineno">  459</span>                <span class="keywordflow">if</span>(owner_process-&gt;<a class="code hl_function" href="classMaxOS_1_1processes_1_1Process.html#a8595e1ab73f585be41005a6bbd88eb2f">threads</a>().empty())</div>
<div class="line"><span class="lineno">  460</span>                    <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a00c2995b3a91021eb4f278a591ff994f">remove_process</a>(owner_process);</div>
<div class="line"><span class="lineno">  461</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  462</span> </div>
<div class="line"><span class="lineno">  463</span>            <span class="keywordflow">case</span> ThreadState::WAITING:</div>
<div class="line"><span class="lineno">  464</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  465</span> </div>
<div class="line"><span class="lineno">  466</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  467</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  468</span>        }</div>
<div class="line"><span class="lineno">  469</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  470</span>    }</div>
<div class="line"><span class="lineno">  471</span> </div>
<div class="line"><span class="lineno">  472</span>    <span class="comment">// Load the thread&#39;s state</span></div>
<div class="line"><span class="lineno">  473</span>    <span class="keywordflow">return</span> load_process(owner_process, <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">current_thread</a>);</div>
<div class="line"><span class="lineno">  474</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Scheduler_html_a00c2995b3a91021eb4f278a591ff994f"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Scheduler.html#a00c2995b3a91021eb4f278a591ff994f">MaxOS::processes::Scheduler::remove_process</a></div><div class="ttdeci">uint64_t remove_process(Process *process)</div><div class="ttdoc">Removes a process from the scheduler if the process has no threads, if it does then the threads are s...</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00579">scheduler.cpp:579</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Thread_html_a07fecafeda2dc5867ef07db926de4617"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Thread.html#a07fecafeda2dc5867ef07db926de4617">MaxOS::processes::Thread::thread_state</a></div><div class="ttdeci">thread_state_t thread_state</div><div class="ttdoc">The current state of the thread.</div><div class="ttdef"><b>Definition</b> <a href="process_8h_source.html#l00066">process.h:66</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Thread_html_a21abe4a5d20033649696849094c415d0"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Thread.html#a21abe4a5d20033649696849094c415d0">MaxOS::processes::Thread::save_sse_state</a></div><div class="ttdeci">void save_sse_state()</div><div class="ttdoc">Saves the SSE, x87 FPU, and MMX states from memory to the thread.</div><div class="ttdef"><b>Definition</b> <a href="process_8cpp_source.html#l00087">process.cpp:87</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Thread_html_a2cda049e10651cb61318f38cd88f22e2"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Thread.html#a2cda049e10651cb61318f38cd88f22e2">MaxOS::processes::Thread::wakeup_time</a></div><div class="ttdeci">size_t wakeup_time</div><div class="ttdoc">The time at which the thread should wake up (if sleeping)</div><div class="ttdef"><b>Definition</b> <a href="process_8h_source.html#l00069">process.h:69</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Thread_html_a920e84f873b5ad33355fbde1fb2d8047"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Thread.html#a920e84f873b5ad33355fbde1fb2d8047">MaxOS::processes::Thread::execution_state</a></div><div class="ttdeci">system::cpu_status_t execution_state</div><div class="ttdoc">The CPU state of the thread.</div><div class="ttdef"><b>Definition</b> <a href="process_8h_source.html#l00065">process.h:65</a></div></div>
<div class="ttc" id="ascheduler_8h_html_a16e9836793c1567dfa036940aef3db6d"><div class="ttname"><a href="scheduler_8h.html#a16e9836793c1567dfa036940aef3db6d">MaxOS::processes::TICKS_PER_EVENT</a></div><div class="ttdeci">constexpr size_t TICKS_PER_EVENT</div><div class="ttdoc">Number of times the clock has to interrupt before switching to the next process/thread.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8h_source.html#l00079">scheduler.h:79</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="scheduler_8cpp_source.html#l00642">current_process()</a>, <a class="el" href="scheduler_8cpp_source.html#l00686">current_thread()</a>, <a class="el" href="process_8h_source.html#l00065">MaxOS::processes::Thread::execution_state</a>, <a class="el" href="scheduler_8cpp_source.html#l00579">remove_process()</a>, <a class="el" href="process_8cpp_source.html#l00267">MaxOS::processes::Process::remove_thread()</a>, <a class="el" href="process_8cpp_source.html#l00087">MaxOS::processes::Thread::save_sse_state()</a>, <a class="el" href="process_8h_source.html#l00066">MaxOS::processes::Thread::thread_state</a>, <a class="el" href="process_8cpp_source.html#l00309">MaxOS::processes::Process::threads()</a>, <a class="el" href="scheduler_8h_source.html#l00079">MaxOS::processes::TICKS_PER_EVENT</a>, and <a class="el" href="process_8h_source.html#l00069">MaxOS::processes::Thread::wakeup_time</a>.</p>

<p class="reference">Referenced by <a class="el" href="scheduler_8cpp_source.html#l00614">force_remove_process()</a>, <a class="el" href="scheduler_8cpp_source.html#l00384">schedule()</a>, and <a class="el" href="scheduler_8cpp_source.html#l00550">yield()</a>.</p>

</div>
</div>
<a id="a3ce2093679daf9acde62bbabc020728e" name="a3ce2093679daf9acde62bbabc020728e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ce2093679daf9acde62bbabc020728e">&#9670;&#160;</a></span>thread_amount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t Scheduler::thread_amount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets how many threads are running on this scheduler. </p>
<dl class="section return"><dt>Returns</dt><dd>The amount </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00695">695</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  695</span>                                 {</div>
<div class="line"><span class="lineno">  696</span>    <span class="keywordflow">return</span> m_threads.size();</div>
<div class="line"><span class="lineno">  697</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="scheduler_8cpp_source.html#l00214">MaxOS::processes::GlobalScheduler::add_thread()</a>.</p>

</div>
</div>
<a id="a349f28166719d94bd978439f24cd2448" name="a349f28166719d94bd978439f24cd2448"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a349f28166719d94bd978439f24cd2448">&#9670;&#160;</a></span>ticks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t Scheduler::ticks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets how long the system has been running for. </p>
<dl class="section return"><dt>Returns</dt><dd>The number of ticks </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00542">542</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  542</span>                                {</div>
<div class="line"><span class="lineno">  543</span> </div>
<div class="line"><span class="lineno">  544</span>    <span class="keywordflow">return</span> m_ticks;</div>
<div class="line"><span class="lineno">  545</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4e3cb6c6cc95d62dc6149c0ec934c723" name="a4e3cb6c6cc95d62dc6149c0ec934c723"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e3cb6c6cc95d62dc6149c0ec934c723">&#9670;&#160;</a></span>yield()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cpu_status_t * Scheduler::yield </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pass execution to the next thread. </p>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00550">550</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  550</span>                               {</div>
<div class="line"><span class="lineno">  551</span> </div>
<div class="line"><span class="lineno">  552</span>    <span class="comment">// If this is the only thread, can&#39;t yield</span></div>
<div class="line"><span class="lineno">  553</span>    <span class="keywordflow">if</span> (m_threads.size() &lt;= 1)</div>
<div class="line"><span class="lineno">  554</span>        <span class="keywordflow">return</span> &amp;<a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">current_thread</a>()-&gt;<a class="code hl_variable" href="classMaxOS_1_1processes_1_1Thread.html#a920e84f873b5ad33355fbde1fb2d8047">execution_state</a>;</div>
<div class="line"><span class="lineno">  555</span> </div>
<div class="line"><span class="lineno">  556</span>    <span class="comment">// Set the current thread to waiting if running</span></div>
<div class="line"><span class="lineno">  557</span>    <span class="keyword">auto</span> thread = <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">current_thread</a>();</div>
<div class="line"><span class="lineno">  558</span>    <span class="keywordflow">if</span> (thread-&gt;thread_state == ThreadState::RUNNING)</div>
<div class="line"><span class="lineno">  559</span>        thread-&gt;thread_state = ThreadState::READY;</div>
<div class="line"><span class="lineno">  560</span> </div>
<div class="line"><span class="lineno">  561</span>    <span class="comment">// Schedule the next thread</span></div>
<div class="line"><span class="lineno">  562</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#af0094b696d420844c5475311e556dd70">schedule_next</a>(&amp;thread-&gt;execution_state);</div>
<div class="line"><span class="lineno">  563</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="scheduler_8cpp_source.html#l00686">current_thread()</a>, <a class="el" href="process_8h_source.html#l00065">MaxOS::processes::Thread::execution_state</a>, <a class="el" href="scheduler_8cpp_source.html#l00413">schedule_next()</a>, and <a class="el" href="process_8h_source.html#l00066">MaxOS::processes::Thread::thread_state</a>.</p>

<p class="reference">Referenced by <a class="el" href="scheduler_8cpp_source.html#l00078">MaxOS::processes::GlobalScheduler::yield()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/runner/work/MaxOS/MaxOS/kernel/include/processes/<a class="el" href="scheduler_8h_source.html">scheduler.h</a></li>
<li>/home/runner/work/MaxOS/MaxOS/kernel/src/processes/<a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>MaxOS</b></li><li class="navelem"><b>processes</b></li><li class="navelem"><a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html">Scheduler</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
