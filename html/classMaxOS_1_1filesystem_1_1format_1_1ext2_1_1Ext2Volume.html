<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Max OS: MaxOS::filesystem::format::ext2::Ext2Volume Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Max OS<span id="projectnumber">&#160;0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">MaxOS::filesystem::format::ext2::Ext2Volume Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="ext2_8h_source.html">ext2.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4d627232293c978be4f587224170dc9b" id="r_a4d627232293c978be4f587224170dc9b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a4d627232293c978be4f587224170dc9b">Ext2Volume</a> (<a class="el" href="classMaxOS_1_1drivers_1_1disk_1_1Disk.html">drivers::disk::Disk</a> *<a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#af92c050fd33ce1edb06897b9c5fe0862">disk</a>, <a class="el" href="namespaceMaxOS_1_1filesystem.html#af466a9d32fd2bf17acb2efa91031ded0">lba_t</a> <a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a7436ecf891301b9a4c9edb52212151db">partition_offset</a>)</td></tr>
<tr class="separator:a4d627232293c978be4f587224170dc9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85af61d689225472c2c26f8a330f2f6c" id="r_a85af61d689225472c2c26f8a330f2f6c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a85af61d689225472c2c26f8a330f2f6c">~Ext2Volume</a> ()</td></tr>
<tr class="separator:a85af61d689225472c2c26f8a330f2f6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab2449336fe290292f64260781a4871b" id="r_aab2449336fe290292f64260781a4871b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#aab2449336fe290292f64260781a4871b">write_block</a> (<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">block_num</a>, <a class="el" href="namespaceMaxOS_1_1common.html#ae34c2f95637029a49836360ddf075b3d">common::buffer_t</a> *buffer)</td></tr>
<tr class="separator:aab2449336fe290292f64260781a4871b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c24524148772b3666f9b8e1858a16f2" id="r_a2c24524148772b3666f9b8e1858a16f2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a2c24524148772b3666f9b8e1858a16f2">write_inode</a> (<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">inode_num</a>, <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">inode_t</a> *<a class="el" href="ext2_8h.html#a84dc3916ea975b79482a6d01f78c3d9f">inode</a>)</td></tr>
<tr class="memdesc:a2c24524148772b3666f9b8e1858a16f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write an inode to the filesystem.  <br /></td></tr>
<tr class="separator:a2c24524148772b3666f9b8e1858a16f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a657c2f9cd60960648f1e1cec6d95a144" id="r_a657c2f9cd60960648f1e1cec6d95a144"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a657c2f9cd60960648f1e1cec6d95a144">create_inode</a> (<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">bool</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">is_directory</a>)</td></tr>
<tr class="memdesc:a657c2f9cd60960648f1e1cec6d95a144"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a new inode and sets the base metadata. Also allocates block 0 of the inode.  <br /></td></tr>
<tr class="separator:a657c2f9cd60960648f1e1cec6d95a144"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4acd208a882871ef4ce89ab5e297e31c" id="r_a4acd208a882871ef4ce89ab5e297e31c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a4acd208a882871ef4ce89ab5e297e31c">free_inode</a> (<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="el" href="ext2_8h.html#a84dc3916ea975b79482a6d01f78c3d9f">inode</a>)</td></tr>
<tr class="memdesc:a4acd208a882871ef4ce89ab5e297e31c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark an inode as free. Note: does NOT unallocated the inodes blocks, use free_group_blocks().  <br /></td></tr>
<tr class="separator:a4acd208a882871ef4ce89ab5e297e31c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4dc8f1dc35d79da9a4a577cf66792f3" id="r_ae4dc8f1dc35d79da9a4a577cf66792f3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#ae4dc8f1dc35d79da9a4a577cf66792f3">read_block</a> (<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">block_num</a>, <a class="el" href="namespaceMaxOS_1_1common.html#ae34c2f95637029a49836360ddf075b3d">common::buffer_t</a> *buffer) <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">const</a></td></tr>
<tr class="separator:ae4dc8f1dc35d79da9a4a577cf66792f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ea16aa4dc886e18b353c1f4a3076100" id="r_a3ea16aa4dc886e18b353c1f4a3076100"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">inode_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a3ea16aa4dc886e18b353c1f4a3076100">read_inode</a> (<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">inode_num</a>) <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">const</a></td></tr>
<tr class="memdesc:a3ea16aa4dc886e18b353c1f4a3076100"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read an inode from the filesystem.  <br /></td></tr>
<tr class="separator:a3ea16aa4dc886e18b353c1f4a3076100"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2440f7c00021606ee91f68983abf206" id="r_ae2440f7c00021606ee91f68983abf206"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#ae2440f7c00021606ee91f68983abf206">allocate_block</a> ()</td></tr>
<tr class="memdesc:ae2440f7c00021606ee91f68983abf206"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a single block to be used by an inode.  <br /></td></tr>
<tr class="separator:ae2440f7c00021606ee91f68983abf206"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf68810ccb0f9cdb2b9491c077710205" id="r_acf68810ccb0f9cdb2b9491c077710205"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Vector.html">common::Vector</a>&lt; <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#acf68810ccb0f9cdb2b9491c077710205">allocate_blocks</a> (<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">amount</a>)</td></tr>
<tr class="memdesc:acf68810ccb0f9cdb2b9491c077710205"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a set of blocks to be used by an inode.  <br /></td></tr>
<tr class="separator:acf68810ccb0f9cdb2b9491c077710205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9769f68d14aa0c2c44b9313c151eafc" id="r_af9769f68d14aa0c2c44b9313c151eafc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#af9769f68d14aa0c2c44b9313c151eafc">bytes_to_blocks</a> (<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">size_t</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">bytes</a>) <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">const</a></td></tr>
<tr class="memdesc:af9769f68d14aa0c2c44b9313c151eafc"><td class="mdescLeft">&#160;</td><td class="mdescRight">How many blocks are needed to contain a set amount of bytes.  <br /></td></tr>
<tr class="separator:af9769f68d14aa0c2c44b9313c151eafc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afee2108a1f09f919a3cafff60f3bc5dd" id="r_afee2108a1f09f919a3cafff60f3bc5dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#afee2108a1f09f919a3cafff60f3bc5dd">free_blocks</a> (<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">const</a> <a class="el" href="classMaxOS_1_1common_1_1Vector.html">common::Vector</a>&lt; <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> &gt; &amp;<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">blocks</a>)</td></tr>
<tr class="memdesc:afee2108a1f09f919a3cafff60f3bc5dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees a group of blocks. Preferably with adjacent blocks apearing next to each other but not enforced.  <br /></td></tr>
<tr class="separator:afee2108a1f09f919a3cafff60f3bc5dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:af92c050fd33ce1edb06897b9c5fe0862" id="r_af92c050fd33ce1edb06897b9c5fe0862"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1drivers_1_1disk_1_1Disk.html">drivers::disk::Disk</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#af92c050fd33ce1edb06897b9c5fe0862">disk</a></td></tr>
<tr class="separator:af92c050fd33ce1edb06897b9c5fe0862"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7436ecf891301b9a4c9edb52212151db" id="r_a7436ecf891301b9a4c9edb52212151db"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceMaxOS_1_1filesystem.html#af466a9d32fd2bf17acb2efa91031ded0">lba_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a7436ecf891301b9a4c9edb52212151db">partition_offset</a></td></tr>
<tr class="separator:a7436ecf891301b9a4c9edb52212151db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95e333eca8856f08ba4bc1724541a4b7" id="r_a95e333eca8856f08ba4bc1724541a4b7"><td class="memItemLeft" align="right" valign="top">superblock_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a></td></tr>
<tr class="separator:a95e333eca8856f08ba4bc1724541a4b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28e53f409de30340066785e5a0d94993" id="r_a28e53f409de30340066785e5a0d94993"><td class="memItemLeft" align="right" valign="top">block_group_descriptor_t **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a28e53f409de30340066785e5a0d94993">block_groups</a></td></tr>
<tr class="separator:a28e53f409de30340066785e5a0d94993"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10014d7b0ae0cc94ea281d0e6ca56500" id="r_a10014d7b0ae0cc94ea281d0e6ca56500"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a10014d7b0ae0cc94ea281d0e6ca56500">block_size</a></td></tr>
<tr class="separator:a10014d7b0ae0cc94ea281d0e6ca56500"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a568c077e33ab4a474c65cfcaf934b215" id="r_a568c077e33ab4a474c65cfcaf934b215"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a568c077e33ab4a474c65cfcaf934b215">block_group_descriptor_table_block</a></td></tr>
<tr class="separator:a568c077e33ab4a474c65cfcaf934b215"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e8c97da6e5a645d3c69ec277b9f9a2e" id="r_a7e8c97da6e5a645d3c69ec277b9f9a2e"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a7e8c97da6e5a645d3c69ec277b9f9a2e">block_group_descriptor_table_size</a></td></tr>
<tr class="separator:a7e8c97da6e5a645d3c69ec277b9f9a2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5a90acfd7dd067a9fa54e4a1ea0e707" id="r_ac5a90acfd7dd067a9fa54e4a1ea0e707"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#ac5a90acfd7dd067a9fa54e4a1ea0e707">total_block_groups</a></td></tr>
<tr class="separator:ac5a90acfd7dd067a9fa54e4a1ea0e707"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a06e6d63e1762b1921e67931e6bd3c7" id="r_a6a06e6d63e1762b1921e67931e6bd3c7"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a6a06e6d63e1762b1921e67931e6bd3c7">pointers_per_block</a></td></tr>
<tr class="separator:a6a06e6d63e1762b1921e67931e6bd3c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc67bb9fb290354dca9c09c4ca5ff43d" id="r_abc67bb9fb290354dca9c09c4ca5ff43d"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#abc67bb9fb290354dca9c09c4ca5ff43d">inodes_per_block</a></td></tr>
<tr class="separator:abc67bb9fb290354dca9c09c4ca5ff43d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2fb31420bd869e0f42e672e6ede97b2" id="r_aa2fb31420bd869e0f42e672e6ede97b2"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#aa2fb31420bd869e0f42e672e6ede97b2">sectors_per_block</a></td></tr>
<tr class="separator:aa2fb31420bd869e0f42e672e6ede97b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ddfbe5a0d61831f3ee40ebb6c5f2cde" id="r_a7ddfbe5a0d61831f3ee40ebb6c5f2cde"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a7ddfbe5a0d61831f3ee40ebb6c5f2cde">blocks_per_inode_table</a></td></tr>
<tr class="separator:a7ddfbe5a0d61831f3ee40ebb6c5f2cde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27730d8b9c0f817d5b08531121e393eb" id="r_a27730d8b9c0f817d5b08531121e393eb"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a27730d8b9c0f817d5b08531121e393eb">sectors_per_inode_table</a></td></tr>
<tr class="separator:a27730d8b9c0f817d5b08531121e393eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07e488e15a650d14870a5d9654b23193" id="r_a07e488e15a650d14870a5d9654b23193"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Spinlock.html">common::Spinlock</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a07e488e15a650d14870a5d9654b23193">ext2_lock</a></td></tr>
<tr class="separator:a07e488e15a650d14870a5d9654b23193"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="ext2_8h_source.html#l00227">227</a> of file <a class="el" href="ext2_8h_source.html">ext2.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a4d627232293c978be4f587224170dc9b" name="a4d627232293c978be4f587224170dc9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d627232293c978be4f587224170dc9b">&#9670;&#160;</a></span>Ext2Volume()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Ext2Volume::Ext2Volume </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1drivers_1_1disk_1_1Disk.html">drivers::disk::Disk</a> *&#160;</td>
          <td class="paramname"><em>disk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceMaxOS_1_1filesystem.html#af466a9d32fd2bf17acb2efa91031ded0">lba_t</a>&#160;</td>
          <td class="paramname"><em>partition_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ext2_8cpp_source.html#l00015">15</a> of file <a class="el" href="ext2_8cpp_source.html">ext2.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   16</span>: <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#af92c050fd33ce1edb06897b9c5fe0862">disk</a>(<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#af92c050fd33ce1edb06897b9c5fe0862">disk</a>),</div>
<div class="line"><span class="lineno">   17</span>  <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a7436ecf891301b9a4c9edb52212151db">partition_offset</a>(<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a7436ecf891301b9a4c9edb52212151db">partition_offset</a>)</div>
<div class="line"><span class="lineno">   18</span>{</div>
<div class="line"><span class="lineno">   19</span> </div>
<div class="line"><span class="lineno">   20</span>    <span class="comment">// Read superblock</span></div>
<div class="line"><span class="lineno">   21</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Buffer.html">buffer_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">superblock_buffer</a>(&amp;<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>, 1024);</div>
<div class="line"><span class="lineno">   22</span>    <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#af92c050fd33ce1edb06897b9c5fe0862">disk</a>-&gt;<a class="code hl_function" href="classMaxOS_1_1drivers_1_1disk_1_1Disk.html#a9fa1c1952cece4f322ba0f2552f16c24">read</a>(<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a7436ecf891301b9a4c9edb52212151db">partition_offset</a> + 2, &amp;<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">superblock_buffer</a>, 512);</div>
<div class="line"><span class="lineno">   23</span>    <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#af92c050fd33ce1edb06897b9c5fe0862">disk</a>-&gt;<a class="code hl_function" href="classMaxOS_1_1drivers_1_1disk_1_1Disk.html#a9fa1c1952cece4f322ba0f2552f16c24">read</a>(<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a7436ecf891301b9a4c9edb52212151db">partition_offset</a> + 3, &amp;<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">superblock_buffer</a>, 512);</div>
<div class="line"><span class="lineno">   24</span> </div>
<div class="line"><span class="lineno">   25</span>    <span class="comment">// Validate signature</span></div>
<div class="line"><span class="lineno">   26</span>    <a class="code hl_define" href="logger_8h.html#adf7b5d69e4c25995b3211b91b27f33b6">ASSERT</a>(<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.signature == 0xEF53, <span class="stringliteral">&quot;Ext2 Filesystem doesnt have a valid signature\n&quot;</span>);</div>
<div class="line"><span class="lineno">   27</span> </div>
<div class="line"><span class="lineno">   28</span>    <span class="comment">// Version 0 has constant inode info</span></div>
<div class="line"><span class="lineno">   29</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.version_major &lt; 1) {</div>
<div class="line"><span class="lineno">   30</span>        <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.first_inode = 11;</div>
<div class="line"><span class="lineno">   31</span>        <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.inode_size = 128;</div>
<div class="line"><span class="lineno">   32</span>    }</div>
<div class="line"><span class="lineno">   33</span> </div>
<div class="line"><span class="lineno">   34</span>    <span class="comment">// Parse the superblock</span></div>
<div class="line"><span class="lineno">   35</span>    <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a10014d7b0ae0cc94ea281d0e6ca56500">block_size</a> = 1024 &lt;&lt; <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.block_size;</div>
<div class="line"><span class="lineno">   36</span>    <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#ac5a90acfd7dd067a9fa54e4a1ea0e707">total_block_groups</a> = (<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.total_blocks + <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.blocks_per_group - 1) / <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.blocks_per_group;</div>
<div class="line"><span class="lineno">   37</span>    <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a568c077e33ab4a474c65cfcaf934b215">block_group_descriptor_table_block</a> = <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.starting_block + 1;</div>
<div class="line"><span class="lineno">   38</span>    <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a7e8c97da6e5a645d3c69ec277b9f9a2e">block_group_descriptor_table_size</a> = <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#ac5a90acfd7dd067a9fa54e4a1ea0e707">total_block_groups</a> * <span class="keyword">sizeof</span>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group_descriptor_t</a>);</div>
<div class="line"><span class="lineno">   39</span>    <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a6a06e6d63e1762b1921e67931e6bd3c7">pointers_per_block</a> = <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a10014d7b0ae0cc94ea281d0e6ca56500">block_size</a> / <span class="keyword">sizeof</span>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a>);</div>
<div class="line"><span class="lineno">   40</span>    <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#abc67bb9fb290354dca9c09c4ca5ff43d">inodes_per_block</a> = <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a10014d7b0ae0cc94ea281d0e6ca56500">block_size</a> / <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.inode_size;</div>
<div class="line"><span class="lineno">   41</span>    <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#aa2fb31420bd869e0f42e672e6ede97b2">sectors_per_block</a> = <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a10014d7b0ae0cc94ea281d0e6ca56500">block_size</a> / 512;</div>
<div class="line"><span class="lineno">   42</span>    <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a7ddfbe5a0d61831f3ee40ebb6c5f2cde">blocks_per_inode_table</a> = (<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.inode_size * <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.inodes_per_group + (<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a10014d7b0ae0cc94ea281d0e6ca56500">block_size</a> - 1)) / <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a10014d7b0ae0cc94ea281d0e6ca56500">block_size</a>;</div>
<div class="line"><span class="lineno">   43</span>    <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a27730d8b9c0f817d5b08531121e393eb">sectors_per_inode_table</a> = (<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.inode_size * <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.inodes_per_group + (512 - 1)) / 512;</div>
<div class="line"><span class="lineno">   44</span> </div>
<div class="line"><span class="lineno">   45</span>    <span class="comment">// Read the block groups</span></div>
<div class="line"><span class="lineno">   46</span>    <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a28e53f409de30340066785e5a0d94993">block_groups</a> = <span class="keyword">new</span> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group_descriptor_t</a> *[<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#ac5a90acfd7dd067a9fa54e4a1ea0e707">total_block_groups</a>]{<span class="keyword">nullptr</span>};</div>
<div class="line"><span class="lineno">   47</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bgdt_lba</a> = <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a7436ecf891301b9a4c9edb52212151db">partition_offset</a> + <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a568c077e33ab4a474c65cfcaf934b215">block_group_descriptor_table_block</a> * <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#aa2fb31420bd869e0f42e672e6ede97b2">sectors_per_block</a>;</div>
<div class="line"><span class="lineno">   48</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">sectors_to_read</a> = (<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a7e8c97da6e5a645d3c69ec277b9f9a2e">block_group_descriptor_table_size</a> + <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a10014d7b0ae0cc94ea281d0e6ca56500">block_size</a> - 1) / <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a10014d7b0ae0cc94ea281d0e6ca56500">block_size</a> * <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#aa2fb31420bd869e0f42e672e6ede97b2">sectors_per_block</a>;</div>
<div class="line"><span class="lineno">   49</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Buffer.html">buffer_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_buffer</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">sectors_to_read</a> * 512);</div>
<div class="line"><span class="lineno">   50</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> i = 0; <a class="code hl_enumvalue" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741">i</a> &lt; <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">sectors_to_read</a>; ++<a class="code hl_enumvalue" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741">i</a>)</div>
<div class="line"><span class="lineno">   51</span>        <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#af92c050fd33ce1edb06897b9c5fe0862">disk</a>-&gt;<a class="code hl_function" href="classMaxOS_1_1drivers_1_1disk_1_1Disk.html#a9fa1c1952cece4f322ba0f2552f16c24">read</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bgdt_lba</a> + i, &amp;<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_buffer</a>, 512);</div>
<div class="line"><span class="lineno">   52</span> </div>
<div class="line"><span class="lineno">   53</span>    <span class="comment">// Store the block groups</span></div>
<div class="line"><span class="lineno">   54</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> i = 0; <a class="code hl_enumvalue" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741">i</a> &lt; <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#ac5a90acfd7dd067a9fa54e4a1ea0e707">total_block_groups</a>; ++<a class="code hl_enumvalue" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741">i</a>) {</div>
<div class="line"><span class="lineno">   55</span>        <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a28e53f409de30340066785e5a0d94993">block_groups</a>[<a class="code hl_enumvalue" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741">i</a>] = <span class="keyword">new</span> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group_descriptor_t</a>;</div>
<div class="line"><span class="lineno">   56</span>        <a class="code hl_function" href="memoryIO_8h.html#a5d860365491e432b125606a6f8e464bc">memcpy</a>(<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a28e53f409de30340066785e5a0d94993">block_groups</a>[i], <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_buffer</a>.raw() + i * <span class="keyword">sizeof</span>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group_descriptor_t</a>), <span class="keyword">sizeof</span>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group_descriptor_t</a>));</div>
<div class="line"><span class="lineno">   57</span>    }</div>
<div class="line"><span class="lineno">   58</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1common_1_1Buffer_html"><div class="ttname"><a href="classMaxOS_1_1common_1_1Buffer.html">MaxOS::common::Buffer</a></div><div class="ttdoc">Wrapper class for a region of bytes in memor in an attempt to add some memory safety....</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00022">buffer.h:22</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1common_1_1Rectangle_html"><div class="ttname"><a href="classMaxOS_1_1common_1_1Rectangle.html">MaxOS::common::Rectangle</a></div><div class="ttdoc">Stores the left, top, width and height of a rectangle.</div><div class="ttdef"><b>Definition</b> <a href="rectangle_8h_source.html#l00020">rectangle.h:20</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1disk_1_1Disk_html_a9fa1c1952cece4f322ba0f2552f16c24"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1disk_1_1Disk.html#a9fa1c1952cece4f322ba0f2552f16c24">MaxOS::drivers::disk::Disk::read</a></div><div class="ttdeci">void read(uint32_t sector, common::buffer_t *data_buffer)</div><div class="ttdoc">Read data from the disk into a buffer (max capacity 512 bytes)</div><div class="ttdef"><b>Definition</b> <a href="disk_8cpp_source.html#l00022">disk.cpp:22</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_html_a10014d7b0ae0cc94ea281d0e6ca56500"><div class="ttname"><a href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a10014d7b0ae0cc94ea281d0e6ca56500">MaxOS::filesystem::format::ext2::Ext2Volume::block_size</a></div><div class="ttdeci">size_t block_size</div><div class="ttdef"><b>Definition</b> <a href="ext2_8h_source.html#l00247">ext2.h:247</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_html_a27730d8b9c0f817d5b08531121e393eb"><div class="ttname"><a href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a27730d8b9c0f817d5b08531121e393eb">MaxOS::filesystem::format::ext2::Ext2Volume::sectors_per_inode_table</a></div><div class="ttdeci">uint32_t sectors_per_inode_table</div><div class="ttdef"><b>Definition</b> <a href="ext2_8h_source.html#l00256">ext2.h:256</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_html_a28e53f409de30340066785e5a0d94993"><div class="ttname"><a href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a28e53f409de30340066785e5a0d94993">MaxOS::filesystem::format::ext2::Ext2Volume::block_groups</a></div><div class="ttdeci">block_group_descriptor_t ** block_groups</div><div class="ttdef"><b>Definition</b> <a href="ext2_8h_source.html#l00245">ext2.h:245</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_html_a568c077e33ab4a474c65cfcaf934b215"><div class="ttname"><a href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a568c077e33ab4a474c65cfcaf934b215">MaxOS::filesystem::format::ext2::Ext2Volume::block_group_descriptor_table_block</a></div><div class="ttdeci">uint32_t block_group_descriptor_table_block</div><div class="ttdef"><b>Definition</b> <a href="ext2_8h_source.html#l00248">ext2.h:248</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_html_a6a06e6d63e1762b1921e67931e6bd3c7"><div class="ttname"><a href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a6a06e6d63e1762b1921e67931e6bd3c7">MaxOS::filesystem::format::ext2::Ext2Volume::pointers_per_block</a></div><div class="ttdeci">size_t pointers_per_block</div><div class="ttdef"><b>Definition</b> <a href="ext2_8h_source.html#l00251">ext2.h:251</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_html_a7436ecf891301b9a4c9edb52212151db"><div class="ttname"><a href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a7436ecf891301b9a4c9edb52212151db">MaxOS::filesystem::format::ext2::Ext2Volume::partition_offset</a></div><div class="ttdeci">lba_t partition_offset</div><div class="ttdef"><b>Definition</b> <a href="ext2_8h_source.html#l00242">ext2.h:242</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_html_a7ddfbe5a0d61831f3ee40ebb6c5f2cde"><div class="ttname"><a href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a7ddfbe5a0d61831f3ee40ebb6c5f2cde">MaxOS::filesystem::format::ext2::Ext2Volume::blocks_per_inode_table</a></div><div class="ttdeci">uint32_t blocks_per_inode_table</div><div class="ttdef"><b>Definition</b> <a href="ext2_8h_source.html#l00255">ext2.h:255</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_html_a7e8c97da6e5a645d3c69ec277b9f9a2e"><div class="ttname"><a href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a7e8c97da6e5a645d3c69ec277b9f9a2e">MaxOS::filesystem::format::ext2::Ext2Volume::block_group_descriptor_table_size</a></div><div class="ttdeci">uint32_t block_group_descriptor_table_size</div><div class="ttdef"><b>Definition</b> <a href="ext2_8h_source.html#l00249">ext2.h:249</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_html_a95e333eca8856f08ba4bc1724541a4b7"><div class="ttname"><a href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">MaxOS::filesystem::format::ext2::Ext2Volume::superblock</a></div><div class="ttdeci">superblock_t superblock</div><div class="ttdef"><b>Definition</b> <a href="ext2_8h_source.html#l00244">ext2.h:244</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_html_aa2fb31420bd869e0f42e672e6ede97b2"><div class="ttname"><a href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#aa2fb31420bd869e0f42e672e6ede97b2">MaxOS::filesystem::format::ext2::Ext2Volume::sectors_per_block</a></div><div class="ttdeci">uint32_t sectors_per_block</div><div class="ttdef"><b>Definition</b> <a href="ext2_8h_source.html#l00253">ext2.h:253</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_html_abc67bb9fb290354dca9c09c4ca5ff43d"><div class="ttname"><a href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#abc67bb9fb290354dca9c09c4ca5ff43d">MaxOS::filesystem::format::ext2::Ext2Volume::inodes_per_block</a></div><div class="ttdeci">uint32_t inodes_per_block</div><div class="ttdef"><b>Definition</b> <a href="ext2_8h_source.html#l00252">ext2.h:252</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_html_ac5a90acfd7dd067a9fa54e4a1ea0e707"><div class="ttname"><a href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#ac5a90acfd7dd067a9fa54e4a1ea0e707">MaxOS::filesystem::format::ext2::Ext2Volume::total_block_groups</a></div><div class="ttdeci">uint32_t total_block_groups</div><div class="ttdef"><b>Definition</b> <a href="ext2_8h_source.html#l00250">ext2.h:250</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_html_af92c050fd33ce1edb06897b9c5fe0862"><div class="ttname"><a href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#af92c050fd33ce1edb06897b9c5fe0862">MaxOS::filesystem::format::ext2::Ext2Volume::disk</a></div><div class="ttdeci">drivers::disk::Disk * disk</div><div class="ttdef"><b>Definition</b> <a href="ext2_8h_source.html#l00241">ext2.h:241</a></div></div>
<div class="ttc" id="alogger_8h_html_adf7b5d69e4c25995b3211b91b27f33b6"><div class="ttname"><a href="logger_8h.html#adf7b5d69e4c25995b3211b91b27f33b6">ASSERT</a></div><div class="ttdeci">#define ASSERT(condition, format,...)</div><div class="ttdoc">If the specified condition is not met then the kernel will crash with the specified message.</div><div class="ttdef"><b>Definition</b> <a href="logger_8h_source.html#l00089">logger.h:89</a></div></div>
<div class="ttc" id="amemoryIO_8h_html_a5d860365491e432b125606a6f8e464bc"><div class="ttname"><a href="memoryIO_8h.html#a5d860365491e432b125606a6f8e464bc">memcpy</a></div><div class="ttdeci">void * memcpy(void *destination, const void *source, uint64_t num)</div><div class="ttdoc">Copies a block of memory from one location to another.</div><div class="ttdef"><b>Definition</b> <a href="memoryIO_8cpp_source.html#l00136">memoryIO.cpp:136</a></div></div>
<div class="ttc" id="anamespaceMaxOS_1_1drivers_1_1peripherals_html_a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741"><div class="ttname"><a href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741">MaxOS::drivers::peripherals::KeyCode::i</a></div><div class="ttdeci">@ i</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="logger_8h_source.html#l00089">ASSERT</a>, <a class="el" href="ext2_8h_source.html#l00248">block_group_descriptor_table_block</a>, <a class="el" href="ext2_8h_source.html#l00249">block_group_descriptor_table_size</a>, <a class="el" href="ext2_8h_source.html#l00245">block_groups</a>, <a class="el" href="ext2_8h_source.html#l00247">block_size</a>, <a class="el" href="ext2_8h_source.html#l00255">blocks_per_inode_table</a>, <a class="el" href="ext2_8h_source.html#l00241">disk</a>, <a class="el" href="ext2_8h_source.html#l00252">inodes_per_block</a>, <a class="el" href="memoryIO_8cpp_source.html#l00136">memcpy()</a>, <a class="el" href="ext2_8h_source.html#l00242">partition_offset</a>, <a class="el" href="ext2_8h_source.html#l00251">pointers_per_block</a>, <a class="el" href="disk_8cpp_source.html#l00022">MaxOS::drivers::disk::Disk::read()</a>, <a class="el" href="ext2_8h_source.html#l00253">sectors_per_block</a>, <a class="el" href="ext2_8h_source.html#l00256">sectors_per_inode_table</a>, <a class="el" href="ext2_8h_source.html#l00244">superblock</a>, and <a class="el" href="ext2_8h_source.html#l00250">total_block_groups</a>.</p>

</div>
</div>
<a id="a85af61d689225472c2c26f8a330f2f6c" name="a85af61d689225472c2c26f8a330f2f6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85af61d689225472c2c26f8a330f2f6c">&#9670;&#160;</a></span>~Ext2Volume()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Ext2Volume::~Ext2Volume </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae2440f7c00021606ee91f68983abf206" name="ae2440f7c00021606ee91f68983abf206"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2440f7c00021606ee91f68983abf206">&#9670;&#160;</a></span>allocate_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> Ext2Volume::allocate_block </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates a single block to be used by an inode. </p>
<dl class="section return"><dt>Returns</dt><dd>The new block number or 0 if the allocation failed </dd></dl>

<p class="definition">Definition at line <a class="el" href="ext2_8cpp_source.html#l00164">164</a> of file <a class="el" href="ext2_8cpp_source.html">ext2.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  164</span>                                    {</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#acf68810ccb0f9cdb2b9491c077710205">allocate_blocks</a>(1)[0];</div>
<div class="line"><span class="lineno">  167</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_html_acf68810ccb0f9cdb2b9491c077710205"><div class="ttname"><a href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#acf68810ccb0f9cdb2b9491c077710205">MaxOS::filesystem::format::ext2::Ext2Volume::allocate_blocks</a></div><div class="ttdeci">common::Vector&lt; uint32_t &gt; allocate_blocks(uint32_t amount)</div><div class="ttdoc">Allocates a set of blocks to be used by an inode.</div><div class="ttdef"><b>Definition</b> <a href="ext2_8cpp_source.html#l00175">ext2.cpp:175</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ext2_8cpp_source.html#l00175">allocate_blocks()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00357">create_inode()</a>.</p>

</div>
</div>
<a id="acf68810ccb0f9cdb2b9491c077710205" name="acf68810ccb0f9cdb2b9491c077710205"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf68810ccb0f9cdb2b9491c077710205">&#9670;&#160;</a></span>allocate_blocks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Vector.html">Vector</a>&lt; <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> &gt; Ext2Volume::allocate_blocks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a>&#160;</td>
          <td class="paramname"><em>amount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates a set of blocks to be used by an inode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">amount</td><td>The amount of blocks to allocate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list of the allocated blocks or [0] if the allocation failed </dd></dl>

<p class="definition">Definition at line <a class="el" href="ext2_8cpp_source.html#l00175">175</a> of file <a class="el" href="ext2_8cpp_source.html">ext2.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  175</span>                                                            {</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>    <span class="comment">// No blocks to allocate</span></div>
<div class="line"><span class="lineno">  178</span>    <span class="keywordflow">if</span> (!<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">amount</a>)</div>
<div class="line"><span class="lineno">  179</span>        <span class="keywordflow">return</span> {1, 0};</div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span>    <span class="comment">// Find the block group with enough free blocks</span></div>
<div class="line"><span class="lineno">  182</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group_descriptor_t</a> *<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group</a> = <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a28e53f409de30340066785e5a0d94993">block_groups</a>[0];</div>
<div class="line"><span class="lineno">  183</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_index</a> = 0; <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_index</a> &lt; <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#ac5a90acfd7dd067a9fa54e4a1ea0e707">total_block_groups</a>; <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group</a> = <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a28e53f409de30340066785e5a0d94993">block_groups</a>[++<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_index</a>])</div>
<div class="line"><span class="lineno">  184</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group</a>-&gt;free_blocks &gt;= <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">amount</a>)</div>
<div class="line"><span class="lineno">  185</span>            <span class="keywordflow">return</span> allocate_group_blocks(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_index</a>, <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">amount</a>);</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>    <span class="comment">// No block group can contain the block so split across multiple</span></div>
<div class="line"><span class="lineno">  188</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">Vector&lt;uint32_t&gt;</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">result</a>{};</div>
<div class="line"><span class="lineno">  189</span>    <span class="keywordflow">while</span> (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">amount</a> &gt; 0) {</div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>        <span class="comment">// Find the block group with most free blocks</span></div>
<div class="line"><span class="lineno">  192</span>        <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group</a> = <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a28e53f409de30340066785e5a0d94993">block_groups</a>[0];</div>
<div class="line"><span class="lineno">  193</span>        <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_index</a> = 0;</div>
<div class="line"><span class="lineno">  194</span>        <span class="keywordflow">for</span> (; <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_index</a> &lt; <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#ac5a90acfd7dd067a9fa54e4a1ea0e707">total_block_groups</a>; ++<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_index</a>)</div>
<div class="line"><span class="lineno">  195</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a28e53f409de30340066785e5a0d94993">block_groups</a>[<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_index</a>]-&gt;<a class="code hl_variable" href="ext2_8h.html#a46b8adeeefed1d348a063313271a3699">free_blocks</a> &gt; <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group</a>-&gt;free_blocks)</div>
<div class="line"><span class="lineno">  196</span>                <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group</a> = <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a28e53f409de30340066785e5a0d94993">block_groups</a>[<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_index</a>];</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>        <span class="comment">// No space</span></div>
<div class="line"><span class="lineno">  199</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group</a>-&gt;free_blocks == 0)</div>
<div class="line"><span class="lineno">  200</span>            <span class="keywordflow">return</span> {1, 0};</div>
<div class="line"><span class="lineno">  201</span> </div>
<div class="line"><span class="lineno">  202</span>        <span class="comment">// Allocate the remaining blocks</span></div>
<div class="line"><span class="lineno">  203</span>        <span class="keyword">auto</span> allocated = allocate_group_blocks(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_index</a>, 1);</div>
<div class="line"><span class="lineno">  204</span>        <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">amount</a> -= allocated.size();</div>
<div class="line"><span class="lineno">  205</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block</a>: allocated)</div>
<div class="line"><span class="lineno">  206</span>            <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">result</a>.push_back(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block</a>);</div>
<div class="line"><span class="lineno">  207</span>    }</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">result</a>;</div>
<div class="line"><span class="lineno">  210</span>}</div>
<div class="ttc" id="aext2_8h_html_a46b8adeeefed1d348a063313271a3699"><div class="ttname"><a href="ext2_8h.html#a46b8adeeefed1d348a063313271a3699">free_blocks</a></div><div class="ttdeci">uint16_t free_blocks</div><div class="ttdef"><b>Definition</b> <a href="ext2_8h_source.html#l00003">ext2.h:3</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ext2_8h_source.html#l00245">block_groups</a>, <a class="el" href="ext2_8h_source.html#l00003">free_blocks</a>, and <a class="el" href="ext2_8h_source.html#l00250">total_block_groups</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00164">allocate_block()</a>, and <a class="el" href="ext2_8cpp_source.html#l00655">MaxOS::filesystem::format::ext2::InodeHandler::grow()</a>.</p>

</div>
</div>
<a id="af9769f68d14aa0c2c44b9313c151eafc" name="af9769f68d14aa0c2c44b9313c151eafc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9769f68d14aa0c2c44b9313c151eafc">&#9670;&#160;</a></span>bytes_to_blocks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> Ext2Volume::bytes_to_blocks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">size_t</a>&#160;</td>
          <td class="paramname"><em>bytes</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>How many blocks are needed to contain a set amount of bytes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bytes</td><td>Bytes needed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The blocks required </dd></dl>

<p class="definition">Definition at line <a class="el" href="ext2_8cpp_source.html#l00347">347</a> of file <a class="el" href="ext2_8cpp_source.html">ext2.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  347</span>                                                       {</div>
<div class="line"><span class="lineno">  348</span>    <span class="keywordflow">return</span> (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bytes</a> + <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a10014d7b0ae0cc94ea281d0e6ca56500">block_size</a> - 1) / <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a10014d7b0ae0cc94ea281d0e6ca56500">block_size</a>;</div>
<div class="line"><span class="lineno">  349</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ext2_8h_source.html#l00247">block_size</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00655">MaxOS::filesystem::format::ext2::InodeHandler::grow()</a>.</p>

</div>
</div>
<a id="a657c2f9cd60960648f1e1cec6d95a144" name="a657c2f9cd60960648f1e1cec6d95a144"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a657c2f9cd60960648f1e1cec6d95a144">&#9670;&#160;</a></span>create_inode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> Ext2Volume::create_inode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">bool</a>&#160;</td>
          <td class="paramname"><em>is_directory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates a new inode and sets the base metadata. Also allocates block 0 of the inode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">is_directory</td><td>is the inode to be used for a directory </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new inode </dd></dl>

<p class="definition">Definition at line <a class="el" href="ext2_8cpp_source.html#l00357">357</a> of file <a class="el" href="ext2_8cpp_source.html">ext2.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  357</span>                                                   {</div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>    <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a07e488e15a650d14870a5d9654b23193">ext2_lock</a>.<a class="code hl_function" href="classMaxOS_1_1common_1_1Spinlock.html#a27a03c3d6b4cdd677e7d16e59689e38e">lock</a>();</div>
<div class="line"><span class="lineno">  360</span> </div>
<div class="line"><span class="lineno">  361</span>    <span class="comment">// Find the block group with enough free inodes</span></div>
<div class="line"><span class="lineno">  362</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group_descriptor_t</a> *<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group</a> = <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a28e53f409de30340066785e5a0d94993">block_groups</a>[0];</div>
<div class="line"><span class="lineno">  363</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_index</a> = 0;</div>
<div class="line"><span class="lineno">  364</span>    <span class="keywordflow">for</span> (; <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_index</a> &lt; <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#ac5a90acfd7dd067a9fa54e4a1ea0e707">total_block_groups</a>; <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group</a> = <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a28e53f409de30340066785e5a0d94993">block_groups</a>[++<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_index</a>])</div>
<div class="line"><span class="lineno">  365</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group</a>-&gt;free_inodes &gt;= 1)</div>
<div class="line"><span class="lineno">  366</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  367</span> </div>
<div class="line"><span class="lineno">  368</span>    <span class="comment">// Read bitmap</span></div>
<div class="line"><span class="lineno">  369</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Buffer.html">buffer_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bitmap</a>(<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a10014d7b0ae0cc94ea281d0e6ca56500">block_size</a>);</div>
<div class="line"><span class="lineno">  370</span>    <a class="code hl_function" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#ae4dc8f1dc35d79da9a4a577cf66792f3">read_block</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group</a>-&gt;block_inode_bitmap, &amp;<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bitmap</a>);</div>
<div class="line"><span class="lineno">  371</span> </div>
<div class="line"><span class="lineno">  372</span>    <span class="comment">// First group contains reserved inodes</span></div>
<div class="line"><span class="lineno">  373</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_index</a> = 0;</div>
<div class="line"><span class="lineno">  374</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_index</a> == 0 &amp;&amp; <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.first_inode &gt; 1)</div>
<div class="line"><span class="lineno">  375</span>        <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_index</a> = <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.first_inode - 1;</div>
<div class="line"><span class="lineno">  376</span> </div>
<div class="line"><span class="lineno">  377</span>    <span class="comment">// Find a free inode</span></div>
<div class="line"><span class="lineno">  378</span>    <span class="keywordflow">for</span> (; <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_index</a> &lt; <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.inodes_per_group; ++<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_index</a>) {</div>
<div class="line"><span class="lineno">  379</span> </div>
<div class="line"><span class="lineno">  380</span>        <span class="comment">// Block is already used</span></div>
<div class="line"><span class="lineno">  381</span>        <span class="keywordflow">if</span> ((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bitmap</a>.raw()[<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_index</a> / 8] &amp; (1u &lt;&lt; (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_index</a> % 8))) != 0)</div>
<div class="line"><span class="lineno">  382</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  383</span> </div>
<div class="line"><span class="lineno">  384</span>        <span class="comment">// Mark as used</span></div>
<div class="line"><span class="lineno">  385</span>        <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group</a>-&gt;free_inodes--;</div>
<div class="line"><span class="lineno">  386</span>        <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.unallocated_inodes--;</div>
<div class="line"><span class="lineno">  387</span>        <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bitmap</a>.raw()[<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_index</a> / 8] |= (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a>) (1u &lt;&lt; (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_index</a> % 8));</div>
<div class="line"><span class="lineno">  388</span> </div>
<div class="line"><span class="lineno">  389</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  390</span>    }</div>
<div class="line"><span class="lineno">  391</span> </div>
<div class="line"><span class="lineno">  392</span>    <span class="comment">// Convert into the 1-based inode index in the group</span></div>
<div class="line"><span class="lineno">  393</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_index</a> += <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_index</a> * <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.inodes_per_group + 1;</div>
<div class="line"><span class="lineno">  394</span> </div>
<div class="line"><span class="lineno">  395</span>    <span class="comment">// Save the changed metadata</span></div>
<div class="line"><span class="lineno">  396</span>    <a class="code hl_function" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#aab2449336fe290292f64260781a4871b">write_block</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group</a>-&gt;block_inode_bitmap, &amp;<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bitmap</a>);</div>
<div class="line"><span class="lineno">  397</span>    write_back_block_groups();</div>
<div class="line"><span class="lineno">  398</span>    write_back_superblock();</div>
<div class="line"><span class="lineno">  399</span> </div>
<div class="line"><span class="lineno">  400</span>    <span class="comment">// Create the inode</span></div>
<div class="line"><span class="lineno">  401</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_t</a> <a class="code hl_variable" href="ext2_8h.html#a84dc3916ea975b79482a6d01f78c3d9f">inode</a>{};</div>
<div class="line"><span class="lineno">  402</span>    <a class="code hl_variable" href="ext2_8h.html#a84dc3916ea975b79482a6d01f78c3d9f">inode</a>.creation_time = time_to_epoch(<a class="code hl_function" href="classMaxOS_1_1drivers_1_1clock_1_1Clock.html#af6e633c389f02276b3c76ee4ff2c65bb">Clock::active_clock</a>()-&gt;get_time());</div>
<div class="line"><span class="lineno">  403</span>    <a class="code hl_variable" href="ext2_8h.html#a84dc3916ea975b79482a6d01f78c3d9f">inode</a>.last_modification_time = time_to_epoch(<a class="code hl_function" href="classMaxOS_1_1drivers_1_1clock_1_1Clock.html#af6e633c389f02276b3c76ee4ff2c65bb">Clock::active_clock</a>()-&gt;get_time());</div>
<div class="line"><span class="lineno">  404</span>    <a class="code hl_variable" href="ext2_8h.html#a84dc3916ea975b79482a6d01f78c3d9f">inode</a>.block_pointers[0] = <a class="code hl_function" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#ae2440f7c00021606ee91f68983abf206">allocate_block</a>();</div>
<div class="line"><span class="lineno">  405</span>    <a class="code hl_variable" href="ext2_8h.html#a84dc3916ea975b79482a6d01f78c3d9f">inode</a>.hard_links = <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">is_directory</a> ? 2 : 1;</div>
<div class="line"><span class="lineno">  406</span>    <a class="code hl_variable" href="ext2_8h.html#a84dc3916ea975b79482a6d01f78c3d9f">inode</a>.type = ((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">is_directory</a> ? <a class="code hl_enumvalue" href="namespaceMaxOS_1_1filesystem_1_1format_1_1ext2.html#a1cb56516e5efe8eb3332d6a1d64e007ba28766b4be065d0c806c2e9c9d914af48">InodeType::DIRECTORY</a> : <a class="code hl_enumeration" href="namespaceMaxOS_1_1filesystem_1_1format_1_1ext2.html#a1cb56516e5efe8eb3332d6a1d64e007b">InodeType</a>::<a class="code hl_enumvalue" href="namespaceMaxOS_1_1filesystem_1_1format_1_1ext2.html#a1cb56516e5efe8eb3332d6a1d64e007ba9fc5887c030f7a3e19821ebec457e719">FILE</a>) &gt;&gt; 12) &amp; 0xF;</div>
<div class="line"><span class="lineno">  407</span>    <a class="code hl_variable" href="ext2_8h.html#a84dc3916ea975b79482a6d01f78c3d9f">inode</a>.permissions =</div>
<div class="line"><span class="lineno">  408</span>            (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">is_directory</a> ? <a class="code hl_enumvalue" href="namespaceMaxOS_1_1filesystem_1_1format_1_1ext2.html#a3e6abe2885e285bee96b1708ba14bac1a28766b4be065d0c806c2e9c9d914af48">InodePermissionsDefaults::DIRECTORY</a> : <a class="code hl_enumeration" href="namespaceMaxOS_1_1filesystem_1_1format_1_1ext2.html#a3e6abe2885e285bee96b1708ba14bac1">InodePermissionsDefaults</a>::<a class="code hl_enumvalue" href="namespaceMaxOS_1_1filesystem_1_1format_1_1ext2.html#a1cb56516e5efe8eb3332d6a1d64e007ba9fc5887c030f7a3e19821ebec457e719">FILE</a>) &amp; 0x0FFF;</div>
<div class="line"><span class="lineno">  409</span>    <a class="code hl_function" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a2c24524148772b3666f9b8e1858a16f2">write_inode</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_index</a>, &amp;<a class="code hl_variable" href="ext2_8h.html#a84dc3916ea975b79482a6d01f78c3d9f">inode</a>);</div>
<div class="line"><span class="lineno">  410</span> </div>
<div class="line"><span class="lineno">  411</span>    <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a07e488e15a650d14870a5d9654b23193">ext2_lock</a>.<a class="code hl_function" href="classMaxOS_1_1common_1_1Spinlock.html#a7c26334ccfa43ef932ef3c73e2c11492">unlock</a>();</div>
<div class="line"><span class="lineno">  412</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_index</a>;</div>
<div class="line"><span class="lineno">  413</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1common_1_1Spinlock_html_a27a03c3d6b4cdd677e7d16e59689e38e"><div class="ttname"><a href="classMaxOS_1_1common_1_1Spinlock.html#a27a03c3d6b4cdd677e7d16e59689e38e">MaxOS::common::Spinlock::lock</a></div><div class="ttdeci">void lock()</div><div class="ttdoc">Lock the spinlock once it is available.</div><div class="ttdef"><b>Definition</b> <a href="spinlock_8cpp_source.html#l00022">spinlock.cpp:22</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1common_1_1Spinlock_html_a7c26334ccfa43ef932ef3c73e2c11492"><div class="ttname"><a href="classMaxOS_1_1common_1_1Spinlock.html#a7c26334ccfa43ef932ef3c73e2c11492">MaxOS::common::Spinlock::unlock</a></div><div class="ttdeci">void unlock()</div><div class="ttdoc">Unlock the spinlock.</div><div class="ttdef"><b>Definition</b> <a href="spinlock_8cpp_source.html#l00031">spinlock.cpp:31</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1clock_1_1Clock_html_af6e633c389f02276b3c76ee4ff2c65bb"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1clock_1_1Clock.html#af6e633c389f02276b3c76ee4ff2c65bb">MaxOS::drivers::clock::Clock::active_clock</a></div><div class="ttdeci">static Clock * active_clock()</div><div class="ttdef"><b>Definition</b> <a href="clock_8cpp_source.html#l00223">clock.cpp:223</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_html_a07e488e15a650d14870a5d9654b23193"><div class="ttname"><a href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a07e488e15a650d14870a5d9654b23193">MaxOS::filesystem::format::ext2::Ext2Volume::ext2_lock</a></div><div class="ttdeci">common::Spinlock ext2_lock</div><div class="ttdef"><b>Definition</b> <a href="ext2_8h_source.html#l00258">ext2.h:258</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_html_a2c24524148772b3666f9b8e1858a16f2"><div class="ttname"><a href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a2c24524148772b3666f9b8e1858a16f2">MaxOS::filesystem::format::ext2::Ext2Volume::write_inode</a></div><div class="ttdeci">void write_inode(uint32_t inode_num, inode_t *inode)</div><div class="ttdoc">Write an inode to the filesystem.</div><div class="ttdef"><b>Definition</b> <a href="ext2_8cpp_source.html#l00090">ext2.cpp:90</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_html_aab2449336fe290292f64260781a4871b"><div class="ttname"><a href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#aab2449336fe290292f64260781a4871b">MaxOS::filesystem::format::ext2::Ext2Volume::write_block</a></div><div class="ttdeci">void write_block(uint32_t block_num, common::buffer_t *buffer)</div><div class="ttdef"><b>Definition</b> <a href="ext2_8cpp_source.html#l00068">ext2.cpp:68</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_html_ae2440f7c00021606ee91f68983abf206"><div class="ttname"><a href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#ae2440f7c00021606ee91f68983abf206">MaxOS::filesystem::format::ext2::Ext2Volume::allocate_block</a></div><div class="ttdeci">uint32_t allocate_block()</div><div class="ttdoc">Allocates a single block to be used by an inode.</div><div class="ttdef"><b>Definition</b> <a href="ext2_8cpp_source.html#l00164">ext2.cpp:164</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume_html_ae4dc8f1dc35d79da9a4a577cf66792f3"><div class="ttname"><a href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#ae4dc8f1dc35d79da9a4a577cf66792f3">MaxOS::filesystem::format::ext2::Ext2Volume::read_block</a></div><div class="ttdeci">void read_block(uint32_t block_num, common::buffer_t *buffer) const</div><div class="ttdef"><b>Definition</b> <a href="ext2_8cpp_source.html#l00117">ext2.cpp:117</a></div></div>
<div class="ttc" id="aext2_8h_html_a84dc3916ea975b79482a6d01f78c3d9f"><div class="ttname"><a href="ext2_8h.html#a84dc3916ea975b79482a6d01f78c3d9f">inode</a></div><div class="ttdeci">uint32_t inode</div><div class="ttdef"><b>Definition</b> <a href="ext2_8h_source.html#l00000">ext2.h:0</a></div></div>
<div class="ttc" id="anamespaceMaxOS_1_1filesystem_1_1format_1_1ext2_html_a1cb56516e5efe8eb3332d6a1d64e007b"><div class="ttname"><a href="namespaceMaxOS_1_1filesystem_1_1format_1_1ext2.html#a1cb56516e5efe8eb3332d6a1d64e007b">MaxOS::filesystem::format::ext2::InodeType</a></div><div class="ttdeci">InodeType</div><div class="ttdef"><b>Definition</b> <a href="ext2_8h_source.html#l00152">ext2.h:152</a></div></div>
<div class="ttc" id="anamespaceMaxOS_1_1filesystem_1_1format_1_1ext2_html_a1cb56516e5efe8eb3332d6a1d64e007ba28766b4be065d0c806c2e9c9d914af48"><div class="ttname"><a href="namespaceMaxOS_1_1filesystem_1_1format_1_1ext2.html#a1cb56516e5efe8eb3332d6a1d64e007ba28766b4be065d0c806c2e9c9d914af48">MaxOS::filesystem::format::ext2::InodeType::DIRECTORY</a></div><div class="ttdeci">@ DIRECTORY</div></div>
<div class="ttc" id="anamespaceMaxOS_1_1filesystem_1_1format_1_1ext2_html_a1cb56516e5efe8eb3332d6a1d64e007ba9fc5887c030f7a3e19821ebec457e719"><div class="ttname"><a href="namespaceMaxOS_1_1filesystem_1_1format_1_1ext2.html#a1cb56516e5efe8eb3332d6a1d64e007ba9fc5887c030f7a3e19821ebec457e719">MaxOS::filesystem::format::ext2::InodeType::FILE</a></div><div class="ttdeci">@ FILE</div></div>
<div class="ttc" id="anamespaceMaxOS_1_1filesystem_1_1format_1_1ext2_html_a3e6abe2885e285bee96b1708ba14bac1"><div class="ttname"><a href="namespaceMaxOS_1_1filesystem_1_1format_1_1ext2.html#a3e6abe2885e285bee96b1708ba14bac1">MaxOS::filesystem::format::ext2::InodePermissionsDefaults</a></div><div class="ttdeci">InodePermissionsDefaults</div><div class="ttdef"><b>Definition</b> <a href="ext2_8h_source.html#l00178">ext2.h:178</a></div></div>
<div class="ttc" id="anamespaceMaxOS_1_1filesystem_1_1format_1_1ext2_html_a3e6abe2885e285bee96b1708ba14bac1a28766b4be065d0c806c2e9c9d914af48"><div class="ttname"><a href="namespaceMaxOS_1_1filesystem_1_1format_1_1ext2.html#a3e6abe2885e285bee96b1708ba14bac1a28766b4be065d0c806c2e9c9d914af48">MaxOS::filesystem::format::ext2::InodePermissionsDefaults::DIRECTORY</a></div><div class="ttdeci">@ DIRECTORY</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="clock_8cpp_source.html#l00223">MaxOS::drivers::clock::Clock::active_clock()</a>, <a class="el" href="ext2_8cpp_source.html#l00164">allocate_block()</a>, <a class="el" href="ext2_8h_source.html#l00245">block_groups</a>, <a class="el" href="ext2_8h_source.html#l00247">block_size</a>, <a class="el" href="namespaceMaxOS_1_1filesystem_1_1format_1_1ext2.html#a1cb56516e5efe8eb3332d6a1d64e007ba28766b4be065d0c806c2e9c9d914af48">MaxOS::filesystem::format::ext2::DIRECTORY</a>, <a class="el" href="ext2_8h_source.html#l00258">ext2_lock</a>, <a class="el" href="namespaceMaxOS_1_1filesystem_1_1format_1_1ext2.html#a1cb56516e5efe8eb3332d6a1d64e007ba9fc5887c030f7a3e19821ebec457e719">MaxOS::filesystem::format::ext2::FILE</a>, <a class="el" href="ext2_8h_source.html#l00000">inode</a>, <a class="el" href="spinlock_8cpp_source.html#l00022">MaxOS::common::Spinlock::lock()</a>, <a class="el" href="ext2_8cpp_source.html#l00117">read_block()</a>, <a class="el" href="ext2_8h_source.html#l00244">superblock</a>, <a class="el" href="ext2_8h_source.html#l00250">total_block_groups</a>, <a class="el" href="spinlock_8cpp_source.html#l00031">MaxOS::common::Spinlock::unlock()</a>, <a class="el" href="ext2_8cpp_source.html#l00068">write_block()</a>, and <a class="el" href="ext2_8cpp_source.html#l00090">write_inode()</a>.</p>

</div>
</div>
<a id="afee2108a1f09f919a3cafff60f3bc5dd" name="afee2108a1f09f919a3cafff60f3bc5dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afee2108a1f09f919a3cafff60f3bc5dd">&#9670;&#160;</a></span>free_blocks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a> Ext2Volume::free_blocks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">const</a> <a class="el" href="classMaxOS_1_1common_1_1Vector.html">common::Vector</a>&lt; <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>blocks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees a group of blocks. Preferably with adjacent blocks apearing next to each other but not enforced. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">blocks</td><td>The blocks to free </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ext2_8cpp_source.html#l00451">451</a> of file <a class="el" href="ext2_8cpp_source.html">ext2.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  451</span>                                                                 {</div>
<div class="line"><span class="lineno">  452</span> </div>
<div class="line"><span class="lineno">  453</span>    <span class="comment">// No blocks to free</span></div>
<div class="line"><span class="lineno">  454</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">blocks</a>.empty())</div>
<div class="line"><span class="lineno">  455</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  456</span> </div>
<div class="line"><span class="lineno">  457</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">start</a> = <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">blocks</a>[0];</div>
<div class="line"><span class="lineno">  458</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">previous</a> = <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">start</a>;</div>
<div class="line"><span class="lineno">  459</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">amount</a> = 1;</div>
<div class="line"><span class="lineno">  460</span> </div>
<div class="line"><span class="lineno">  461</span>    <span class="comment">// Free each adjacent set of blocks</span></div>
<div class="line"><span class="lineno">  462</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block</a>: <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">blocks</a>) {</div>
<div class="line"><span class="lineno">  463</span> </div>
<div class="line"><span class="lineno">  464</span>        <span class="comment">// First is already accounted for</span></div>
<div class="line"><span class="lineno">  465</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block</a> == <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">start</a>)</div>
<div class="line"><span class="lineno">  466</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  467</span> </div>
<div class="line"><span class="lineno">  468</span>        <span class="comment">// Is this block adjacent</span></div>
<div class="line"><span class="lineno">  469</span>        <span class="keywordflow">if</span> ((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">previous</a> + 1) == <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block</a>) {</div>
<div class="line"><span class="lineno">  470</span>            <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">previous</a> = <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block</a>;</div>
<div class="line"><span class="lineno">  471</span>            <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">amount</a> += 1;</div>
<div class="line"><span class="lineno">  472</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  473</span>        }</div>
<div class="line"><span class="lineno">  474</span> </div>
<div class="line"><span class="lineno">  475</span>        <span class="comment">// Adjacent set has ended</span></div>
<div class="line"><span class="lineno">  476</span>        <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">group</a> = (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">start</a> - <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.starting_block) / <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.blocks_per_group;</div>
<div class="line"><span class="lineno">  477</span>        free_group_blocks(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">group</a>, <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">amount</a>, <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">start</a>);</div>
<div class="line"><span class="lineno">  478</span> </div>
<div class="line"><span class="lineno">  479</span>        <span class="comment">// Reset</span></div>
<div class="line"><span class="lineno">  480</span>        <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">start</a> = <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block</a>;</div>
<div class="line"><span class="lineno">  481</span>        <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">previous</a> = <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">start</a>;</div>
<div class="line"><span class="lineno">  482</span>        <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">amount</a> = 1;</div>
<div class="line"><span class="lineno">  483</span>    }</div>
<div class="line"><span class="lineno">  484</span> </div>
<div class="line"><span class="lineno">  485</span>    <span class="comment">// Account for the last set of blocks in the loop</span></div>
<div class="line"><span class="lineno">  486</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">group</a> = (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">start</a> - <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.starting_block) / <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.blocks_per_group;</div>
<div class="line"><span class="lineno">  487</span>    free_group_blocks(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">group</a>, <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">amount</a>, <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">start</a>);</div>
<div class="line"><span class="lineno">  488</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ext2_8h_source.html#l00244">superblock</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00685">MaxOS::filesystem::format::ext2::InodeHandler::free()</a>.</p>

</div>
</div>
<a id="a4acd208a882871ef4ce89ab5e297e31c" name="a4acd208a882871ef4ce89ab5e297e31c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4acd208a882871ef4ce89ab5e297e31c">&#9670;&#160;</a></span>free_inode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a> Ext2Volume::free_inode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a>&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark an inode as free. Note: does NOT unallocated the inodes blocks, use free_group_blocks(). </p>
<dl class="section see"><dt>See also</dt><dd>free_group_blocks</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inode</td><td>The inode number to mark as free </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ext2_8cpp_source.html#l00421">421</a> of file <a class="el" href="ext2_8cpp_source.html">ext2.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  421</span>                                          {</div>
<div class="line"><span class="lineno">  422</span> </div>
<div class="line"><span class="lineno">  423</span>    <span class="comment">// Find the block group containing the inode</span></div>
<div class="line"><span class="lineno">  424</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_index</a> = (<a class="code hl_variable" href="ext2_8h.html#a84dc3916ea975b79482a6d01f78c3d9f">inode</a> - 1) / <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.inodes_per_group;</div>
<div class="line"><span class="lineno">  425</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group_descriptor_t</a> *<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group</a> = <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a28e53f409de30340066785e5a0d94993">block_groups</a>[<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_index</a>];</div>
<div class="line"><span class="lineno">  426</span> </div>
<div class="line"><span class="lineno">  427</span>    <span class="comment">// Read bitmap</span></div>
<div class="line"><span class="lineno">  428</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Buffer.html">buffer_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bitmap</a>(<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a10014d7b0ae0cc94ea281d0e6ca56500">block_size</a>);</div>
<div class="line"><span class="lineno">  429</span>    <a class="code hl_function" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#ae4dc8f1dc35d79da9a4a577cf66792f3">read_block</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group</a>-&gt;block_inode_bitmap, &amp;<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bitmap</a>);</div>
<div class="line"><span class="lineno">  430</span> </div>
<div class="line"><span class="lineno">  431</span>    <span class="comment">// First group contains reserved inodes</span></div>
<div class="line"><span class="lineno">  432</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_index</a> = (<a class="code hl_variable" href="ext2_8h.html#a84dc3916ea975b79482a6d01f78c3d9f">inode</a> - 1) % <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.inodes_per_group;</div>
<div class="line"><span class="lineno">  433</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bg_index</a> == 0 &amp;&amp; (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_index</a> &lt; (<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.first_inode - 1)))</div>
<div class="line"><span class="lineno">  434</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  435</span> </div>
<div class="line"><span class="lineno">  436</span>    <span class="comment">// Mark as used</span></div>
<div class="line"><span class="lineno">  437</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group</a>-&gt;free_inodes++;</div>
<div class="line"><span class="lineno">  438</span>    <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.unallocated_inodes++;</div>
<div class="line"><span class="lineno">  439</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bitmap</a>.raw()[<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_index</a> / 8] &amp;= (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a>) ~(1u &lt;&lt; (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_index</a> % 8));</div>
<div class="line"><span class="lineno">  440</span> </div>
<div class="line"><span class="lineno">  441</span>    <span class="comment">// Save the changed metadata</span></div>
<div class="line"><span class="lineno">  442</span>    <a class="code hl_function" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#aab2449336fe290292f64260781a4871b">write_block</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_group</a>-&gt;block_inode_bitmap, &amp;<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">bitmap</a>);</div>
<div class="line"><span class="lineno">  443</span>    write_back_block_groups();</div>
<div class="line"><span class="lineno">  444</span>    write_back_superblock();</div>
<div class="line"><span class="lineno">  445</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ext2_8h_source.html#l00245">block_groups</a>, <a class="el" href="ext2_8h_source.html#l00247">block_size</a>, <a class="el" href="ext2_8h_source.html#l00000">inode</a>, <a class="el" href="ext2_8cpp_source.html#l00117">read_block()</a>, <a class="el" href="ext2_8h_source.html#l00244">superblock</a>, and <a class="el" href="ext2_8cpp_source.html#l00068">write_block()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00685">MaxOS::filesystem::format::ext2::InodeHandler::free()</a>.</p>

</div>
</div>
<a id="ae4dc8f1dc35d79da9a4a577cf66792f3" name="ae4dc8f1dc35d79da9a4a577cf66792f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4dc8f1dc35d79da9a4a577cf66792f3">&#9670;&#160;</a></span>read_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a> Ext2Volume::read_block </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a>&#160;</td>
          <td class="paramname"><em>block_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceMaxOS_1_1common.html#ae34c2f95637029a49836360ddf075b3d">common::buffer_t</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>@breif Reads a single block from the disk into a buffer</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">block_num</td><td>The block to read </td></tr>
    <tr><td class="paramname">buffer</td><td>The buffer to read into </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ext2_8cpp_source.html#l00117">117</a> of file <a class="el" href="ext2_8cpp_source.html">ext2.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  117</span>                                                                      {</div>
<div class="line"><span class="lineno">  118</span> </div>
<div class="line"><span class="lineno">  119</span>    <span class="comment">// Ensure the buffer is in the right format</span></div>
<div class="line"><span class="lineno">  120</span>    buffer-&gt;<a class="code hl_function" href="classMaxOS_1_1common_1_1Buffer.html#a70eb6792fdd3cf6a5bf5812ec2caa07a">set_offset</a>(0);</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>    <span class="comment">// Read each sector of the block</span></div>
<div class="line"><span class="lineno">  123</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; <a class="code hl_enumvalue" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741">i</a> &lt; <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#aa2fb31420bd869e0f42e672e6ede97b2">sectors_per_block</a>; ++<a class="code hl_enumvalue" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741">i</a>)</div>
<div class="line"><span class="lineno">  124</span>        <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#af92c050fd33ce1edb06897b9c5fe0862">disk</a>-&gt;<a class="code hl_function" href="classMaxOS_1_1drivers_1_1disk_1_1Disk.html#a9fa1c1952cece4f322ba0f2552f16c24">read</a>(<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a7436ecf891301b9a4c9edb52212151db">partition_offset</a> + <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_num</a> * <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#aa2fb31420bd869e0f42e672e6ede97b2">sectors_per_block</a> + i, buffer, 512);</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>    <span class="comment">// Reset buffer</span></div>
<div class="line"><span class="lineno">  127</span>    buffer-&gt;<a class="code hl_function" href="classMaxOS_1_1common_1_1Buffer.html#a70eb6792fdd3cf6a5bf5812ec2caa07a">set_offset</a>(0);</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1common_1_1Buffer_html_a70eb6792fdd3cf6a5bf5812ec2caa07a"><div class="ttname"><a href="classMaxOS_1_1common_1_1Buffer.html#a70eb6792fdd3cf6a5bf5812ec2caa07a">MaxOS::common::Buffer::set_offset</a></div><div class="ttdeci">void set_offset(size_t offset)</div><div class="ttdoc">Set the offset for where operations should begin from.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8cpp_source.html#l00121">buffer.cpp:121</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ext2_8h_source.html#l00241">disk</a>, <a class="el" href="ext2_8h_source.html#l00242">partition_offset</a>, <a class="el" href="disk_8cpp_source.html#l00022">MaxOS::drivers::disk::Disk::read()</a>, <a class="el" href="ext2_8h_source.html#l00253">sectors_per_block</a>, and <a class="el" href="buffer_8cpp_source.html#l00121">MaxOS::common::Buffer::set_offset()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00357">create_inode()</a>, <a class="el" href="ext2_8cpp_source.html#l00421">free_inode()</a>, <a class="el" href="ext2_8cpp_source.html#l00769">MaxOS::filesystem::format::ext2::Ext2File::read()</a>, <a class="el" href="ext2_8cpp_source.html#l00927">MaxOS::filesystem::format::ext2::Ext2Directory::read_from_disk()</a>, <a class="el" href="ext2_8cpp_source.html#l00136">read_inode()</a>, <a class="el" href="ext2_8cpp_source.html#l00715">MaxOS::filesystem::format::ext2::Ext2File::write()</a>, and <a class="el" href="ext2_8cpp_source.html#l00090">write_inode()</a>.</p>

</div>
</div>
<a id="a3ea16aa4dc886e18b353c1f4a3076100" name="a3ea16aa4dc886e18b353c1f4a3076100"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ea16aa4dc886e18b353c1f4a3076100">&#9670;&#160;</a></span>read_inode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">inode_t</a> Ext2Volume::read_inode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a>&#160;</td>
          <td class="paramname"><em>inode_num</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read an inode from the filesystem. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inode_num</td><td>The inode index </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ext2_8cpp_source.html#l00136">136</a> of file <a class="el" href="ext2_8cpp_source.html">ext2.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  136</span>                                                       {</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_t</a> <a class="code hl_variable" href="ext2_8h.html#a84dc3916ea975b79482a6d01f78c3d9f">inode</a>;</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>    <span class="comment">// Locate the inode</span></div>
<div class="line"><span class="lineno">  141</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">group</a> = (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_num</a> - 1) / <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.inodes_per_group;</div>
<div class="line"><span class="lineno">  142</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> index = (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_num</a> - 1) % <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.inodes_per_group;</div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>    <span class="comment">// Locate the block</span></div>
<div class="line"><span class="lineno">  145</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_table</a> = <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a28e53f409de30340066785e5a0d94993">block_groups</a>[<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">group</a>]-&gt;inode_table_address;</div>
<div class="line"><span class="lineno">  146</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> offset = index * <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.inode_size;</div>
<div class="line"><span class="lineno">  147</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block</a> = offset / <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a10014d7b0ae0cc94ea281d0e6ca56500">block_size</a>;</div>
<div class="line"><span class="lineno">  148</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">in_block_offset</a> = offset % <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a10014d7b0ae0cc94ea281d0e6ca56500">block_size</a>;</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>    <span class="comment">// Read the block</span></div>
<div class="line"><span class="lineno">  151</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Buffer.html">buffer_t</a> buffer(<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a10014d7b0ae0cc94ea281d0e6ca56500">block_size</a>);</div>
<div class="line"><span class="lineno">  152</span>    <a class="code hl_function" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#ae4dc8f1dc35d79da9a4a577cf66792f3">read_block</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_table</a> + <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block</a>, &amp;buffer);</div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span>    <span class="comment">// Read the inode from the block</span></div>
<div class="line"><span class="lineno">  155</span>    buffer.copy_to(&amp;<a class="code hl_variable" href="ext2_8h.html#a84dc3916ea975b79482a6d01f78c3d9f">inode</a>, <span class="keyword">sizeof</span>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_t</a>), <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">in_block_offset</a>);</div>
<div class="line"><span class="lineno">  156</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="ext2_8h.html#a84dc3916ea975b79482a6d01f78c3d9f">inode</a>;</div>
<div class="line"><span class="lineno">  157</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ext2_8h_source.html#l00245">block_groups</a>, <a class="el" href="ext2_8h_source.html#l00247">block_size</a>, <a class="el" href="buffer_8cpp_source.html#l00273">MaxOS::common::Buffer::copy_to()</a>, <a class="el" href="ext2_8h_source.html#l00000">inode</a>, <a class="el" href="ext2_8cpp_source.html#l00117">read_block()</a>, and <a class="el" href="ext2_8h_source.html#l00244">superblock</a>.</p>

</div>
</div>
<a id="aab2449336fe290292f64260781a4871b" name="aab2449336fe290292f64260781a4871b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab2449336fe290292f64260781a4871b">&#9670;&#160;</a></span>write_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a> Ext2Volume::write_block </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a>&#160;</td>
          <td class="paramname"><em>block_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceMaxOS_1_1common.html#ae34c2f95637029a49836360ddf075b3d">common::buffer_t</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>@breif Write a single block from a buffer into onto the disk</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">block_num</td><td>The block to update </td></tr>
    <tr><td class="paramname">buffer</td><td>The buffer to read from </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ext2_8cpp_source.html#l00068">68</a> of file <a class="el" href="ext2_8cpp_source.html">ext2.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   68</span>                                                                 {</div>
<div class="line"><span class="lineno">   69</span> </div>
<div class="line"><span class="lineno">   70</span>    <span class="comment">// Ensure the buffer is in the right format</span></div>
<div class="line"><span class="lineno">   71</span>    buffer-&gt;<a class="code hl_function" href="classMaxOS_1_1common_1_1Buffer.html#a70eb6792fdd3cf6a5bf5812ec2caa07a">set_offset</a>(0);</div>
<div class="line"><span class="lineno">   72</span>    <span class="keywordtype">bool</span> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">old</a> = buffer-&gt;<a class="code hl_variable" href="classMaxOS_1_1common_1_1Buffer.html#a9faaca69a359d618544231d95ad5ae5a">update_offset</a>;</div>
<div class="line"><span class="lineno">   73</span>    buffer-&gt;<a class="code hl_variable" href="classMaxOS_1_1common_1_1Buffer.html#a9faaca69a359d618544231d95ad5ae5a">update_offset</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   74</span> </div>
<div class="line"><span class="lineno">   75</span>    <span class="comment">// Read each sector of the block</span></div>
<div class="line"><span class="lineno">   76</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; <a class="code hl_enumvalue" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741">i</a> &lt; <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#aa2fb31420bd869e0f42e672e6ede97b2">sectors_per_block</a>; ++<a class="code hl_enumvalue" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebca865c0c0b4ab0e063e5caa3387c1a8741">i</a>)</div>
<div class="line"><span class="lineno">   77</span>        <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#af92c050fd33ce1edb06897b9c5fe0862">disk</a>-&gt;<a class="code hl_function" href="classMaxOS_1_1drivers_1_1disk_1_1Disk.html#a307fc8dc97cc4c8f3668a18a1e0257de">write</a>(<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a7436ecf891301b9a4c9edb52212151db">partition_offset</a> + <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block_num</a> * <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#aa2fb31420bd869e0f42e672e6ede97b2">sectors_per_block</a> + i, buffer, 512);</div>
<div class="line"><span class="lineno">   78</span> </div>
<div class="line"><span class="lineno">   79</span>    <span class="comment">// Reset buffer</span></div>
<div class="line"><span class="lineno">   80</span>    buffer-&gt;<a class="code hl_function" href="classMaxOS_1_1common_1_1Buffer.html#a70eb6792fdd3cf6a5bf5812ec2caa07a">set_offset</a>(0);</div>
<div class="line"><span class="lineno">   81</span>    buffer-&gt;<a class="code hl_variable" href="classMaxOS_1_1common_1_1Buffer.html#a9faaca69a359d618544231d95ad5ae5a">update_offset</a> = <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">old</a>;</div>
<div class="line"><span class="lineno">   82</span>};</div>
<div class="ttc" id="aclassMaxOS_1_1common_1_1Buffer_html_a9faaca69a359d618544231d95ad5ae5a"><div class="ttname"><a href="classMaxOS_1_1common_1_1Buffer.html#a9faaca69a359d618544231d95ad5ae5a">MaxOS::common::Buffer::update_offset</a></div><div class="ttdeci">bool update_offset</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00041">buffer.h:41</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1disk_1_1Disk_html_a307fc8dc97cc4c8f3668a18a1e0257de"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1disk_1_1Disk.html#a307fc8dc97cc4c8f3668a18a1e0257de">MaxOS::drivers::disk::Disk::write</a></div><div class="ttdeci">void write(uint32_t sector, const common::buffer_t *data)</div><div class="ttdef"><b>Definition</b> <a href="disk_8cpp_source.html#l00040">disk.cpp:40</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ext2_8h_source.html#l00241">disk</a>, <a class="el" href="ext2_8h_source.html#l00242">partition_offset</a>, <a class="el" href="ext2_8h_source.html#l00253">sectors_per_block</a>, <a class="el" href="buffer_8cpp_source.html#l00121">MaxOS::common::Buffer::set_offset()</a>, <a class="el" href="buffer_8h_source.html#l00041">MaxOS::common::Buffer::update_offset</a>, and <a class="el" href="disk_8cpp_source.html#l00040">MaxOS::drivers::disk::Disk::write()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00357">create_inode()</a>, <a class="el" href="ext2_8cpp_source.html#l00421">free_inode()</a>, <a class="el" href="ext2_8cpp_source.html#l00715">MaxOS::filesystem::format::ext2::Ext2File::write()</a>, and <a class="el" href="ext2_8cpp_source.html#l00090">write_inode()</a>.</p>

</div>
</div>
<a id="a2c24524148772b3666f9b8e1858a16f2" name="a2c24524148772b3666f9b8e1858a16f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c24524148772b3666f9b8e1858a16f2">&#9670;&#160;</a></span>write_inode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a> Ext2Volume::write_inode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a>&#160;</td>
          <td class="paramname"><em>inode_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">inode_t</a> *&#160;</td>
          <td class="paramname"><em>inode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write an inode to the filesystem. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inode_num</td><td>The inode index </td></tr>
    <tr><td class="paramname">inode</td><td>The inode to read from </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ext2_8cpp_source.html#l00090">90</a> of file <a class="el" href="ext2_8cpp_source.html">ext2.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   90</span>                                                               {</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>    <span class="comment">// Locate the inode</span></div>
<div class="line"><span class="lineno">   93</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">group</a> = (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_num</a> - 1) / <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.inodes_per_group;</div>
<div class="line"><span class="lineno">   94</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> index = (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_num</a> - 1) % <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.inodes_per_group;</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>    <span class="comment">// Locate the block</span></div>
<div class="line"><span class="lineno">   97</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_table</a> = <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a28e53f409de30340066785e5a0d94993">block_groups</a>[<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">group</a>]-&gt;inode_table_address;</div>
<div class="line"><span class="lineno">   98</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> offset = index * <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a95e333eca8856f08ba4bc1724541a4b7">superblock</a>.inode_size;</div>
<div class="line"><span class="lineno">   99</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block</a> = offset / <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a10014d7b0ae0cc94ea281d0e6ca56500">block_size</a>;</div>
<div class="line"><span class="lineno">  100</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">in_block_offset</a> = offset % <a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a10014d7b0ae0cc94ea281d0e6ca56500">block_size</a>;</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>    <span class="comment">// Read the inode</span></div>
<div class="line"><span class="lineno">  103</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Buffer.html">buffer_t</a> buffer(<a class="code hl_variable" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#a10014d7b0ae0cc94ea281d0e6ca56500">block_size</a>);</div>
<div class="line"><span class="lineno">  104</span>    <a class="code hl_function" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#ae4dc8f1dc35d79da9a4a577cf66792f3">read_block</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_table</a> + <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block</a>, &amp;buffer);</div>
<div class="line"><span class="lineno">  105</span>    buffer.copy_from(<a class="code hl_variable" href="ext2_8h.html#a84dc3916ea975b79482a6d01f78c3d9f">inode</a>, <span class="keyword">sizeof</span>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_t</a>), <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">in_block_offset</a>);</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>    <span class="comment">// Modify the block</span></div>
<div class="line"><span class="lineno">  108</span>    <a class="code hl_function" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html#aab2449336fe290292f64260781a4871b">write_block</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">inode_table</a> + <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">block</a>, &amp;buffer);</div>
<div class="line"><span class="lineno">  109</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ext2_8h_source.html#l00245">block_groups</a>, <a class="el" href="ext2_8h_source.html#l00247">block_size</a>, <a class="el" href="buffer_8cpp_source.html#l00186">MaxOS::common::Buffer::copy_from()</a>, <a class="el" href="ext2_8h_source.html#l00000">inode</a>, <a class="el" href="ext2_8cpp_source.html#l00117">read_block()</a>, <a class="el" href="ext2_8h_source.html#l00244">superblock</a>, and <a class="el" href="ext2_8cpp_source.html#l00068">write_block()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00357">create_inode()</a>, and <a class="el" href="ext2_8cpp_source.html#l00677">MaxOS::filesystem::format::ext2::InodeHandler::save()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a568c077e33ab4a474c65cfcaf934b215" name="a568c077e33ab4a474c65cfcaf934b215"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a568c077e33ab4a474c65cfcaf934b215">&#9670;&#160;</a></span>block_group_descriptor_table_block</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t MaxOS::filesystem::format::ext2::Ext2Volume::block_group_descriptor_table_block</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ext2_8h_source.html#l00248">248</a> of file <a class="el" href="ext2_8h_source.html">ext2.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00015">Ext2Volume()</a>.</p>

</div>
</div>
<a id="a7e8c97da6e5a645d3c69ec277b9f9a2e" name="a7e8c97da6e5a645d3c69ec277b9f9a2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e8c97da6e5a645d3c69ec277b9f9a2e">&#9670;&#160;</a></span>block_group_descriptor_table_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t MaxOS::filesystem::format::ext2::Ext2Volume::block_group_descriptor_table_size</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ext2_8h_source.html#l00249">249</a> of file <a class="el" href="ext2_8h_source.html">ext2.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00015">Ext2Volume()</a>.</p>

</div>
</div>
<a id="a28e53f409de30340066785e5a0d94993" name="a28e53f409de30340066785e5a0d94993"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28e53f409de30340066785e5a0d94993">&#9670;&#160;</a></span>block_groups</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">block_group_descriptor_t** MaxOS::filesystem::format::ext2::Ext2Volume::block_groups</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ext2_8h_source.html#l00245">245</a> of file <a class="el" href="ext2_8h_source.html">ext2.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00175">allocate_blocks()</a>, <a class="el" href="ext2_8cpp_source.html#l00357">create_inode()</a>, <a class="el" href="ext2_8cpp_source.html#l00015">Ext2Volume()</a>, <a class="el" href="ext2_8cpp_source.html#l00421">free_inode()</a>, <a class="el" href="ext2_8cpp_source.html#l00136">read_inode()</a>, and <a class="el" href="ext2_8cpp_source.html#l00090">write_inode()</a>.</p>

</div>
</div>
<a id="a10014d7b0ae0cc94ea281d0e6ca56500" name="a10014d7b0ae0cc94ea281d0e6ca56500"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10014d7b0ae0cc94ea281d0e6ca56500">&#9670;&#160;</a></span>block_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t MaxOS::filesystem::format::ext2::Ext2Volume::block_size</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ext2_8h_source.html#l00247">247</a> of file <a class="el" href="ext2_8h_source.html">ext2.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00347">bytes_to_blocks()</a>, <a class="el" href="ext2_8cpp_source.html#l00357">create_inode()</a>, <a class="el" href="ext2_8cpp_source.html#l00015">Ext2Volume()</a>, <a class="el" href="ext2_8cpp_source.html#l00421">free_inode()</a>, <a class="el" href="ext2_8cpp_source.html#l00491">MaxOS::filesystem::format::ext2::InodeHandler::InodeHandler()</a>, <a class="el" href="ext2_8cpp_source.html#l00769">MaxOS::filesystem::format::ext2::Ext2File::read()</a>, <a class="el" href="ext2_8cpp_source.html#l00927">MaxOS::filesystem::format::ext2::Ext2Directory::read_from_disk()</a>, <a class="el" href="ext2_8cpp_source.html#l00136">read_inode()</a>, <a class="el" href="ext2_8cpp_source.html#l00715">MaxOS::filesystem::format::ext2::Ext2File::write()</a>, and <a class="el" href="ext2_8cpp_source.html#l00090">write_inode()</a>.</p>

</div>
</div>
<a id="a7ddfbe5a0d61831f3ee40ebb6c5f2cde" name="a7ddfbe5a0d61831f3ee40ebb6c5f2cde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ddfbe5a0d61831f3ee40ebb6c5f2cde">&#9670;&#160;</a></span>blocks_per_inode_table</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t MaxOS::filesystem::format::ext2::Ext2Volume::blocks_per_inode_table</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ext2_8h_source.html#l00255">255</a> of file <a class="el" href="ext2_8h_source.html">ext2.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00015">Ext2Volume()</a>.</p>

</div>
</div>
<a id="af92c050fd33ce1edb06897b9c5fe0862" name="af92c050fd33ce1edb06897b9c5fe0862"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af92c050fd33ce1edb06897b9c5fe0862">&#9670;&#160;</a></span>disk</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1drivers_1_1disk_1_1Disk.html">drivers::disk::Disk</a>* MaxOS::filesystem::format::ext2::Ext2Volume::disk</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ext2_8h_source.html#l00241">241</a> of file <a class="el" href="ext2_8h_source.html">ext2.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00015">Ext2Volume()</a>, <a class="el" href="ext2_8cpp_source.html#l00117">read_block()</a>, and <a class="el" href="ext2_8cpp_source.html#l00068">write_block()</a>.</p>

</div>
</div>
<a id="a07e488e15a650d14870a5d9654b23193" name="a07e488e15a650d14870a5d9654b23193"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07e488e15a650d14870a5d9654b23193">&#9670;&#160;</a></span>ext2_lock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Spinlock.html">common::Spinlock</a> MaxOS::filesystem::format::ext2::Ext2Volume::ext2_lock</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ext2_8h_source.html#l00258">258</a> of file <a class="el" href="ext2_8h_source.html">ext2.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00357">create_inode()</a>, <a class="el" href="ext2_8cpp_source.html#l00685">MaxOS::filesystem::format::ext2::InodeHandler::free()</a>, <a class="el" href="ext2_8cpp_source.html#l00769">MaxOS::filesystem::format::ext2::Ext2File::read()</a>, <a class="el" href="ext2_8cpp_source.html#l00927">MaxOS::filesystem::format::ext2::Ext2Directory::read_from_disk()</a>, and <a class="el" href="ext2_8cpp_source.html#l00715">MaxOS::filesystem::format::ext2::Ext2File::write()</a>.</p>

</div>
</div>
<a id="abc67bb9fb290354dca9c09c4ca5ff43d" name="abc67bb9fb290354dca9c09c4ca5ff43d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc67bb9fb290354dca9c09c4ca5ff43d">&#9670;&#160;</a></span>inodes_per_block</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t MaxOS::filesystem::format::ext2::Ext2Volume::inodes_per_block</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ext2_8h_source.html#l00252">252</a> of file <a class="el" href="ext2_8h_source.html">ext2.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00015">Ext2Volume()</a>.</p>

</div>
</div>
<a id="a7436ecf891301b9a4c9edb52212151db" name="a7436ecf891301b9a4c9edb52212151db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7436ecf891301b9a4c9edb52212151db">&#9670;&#160;</a></span>partition_offset</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceMaxOS_1_1filesystem.html#af466a9d32fd2bf17acb2efa91031ded0">lba_t</a> MaxOS::filesystem::format::ext2::Ext2Volume::partition_offset</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ext2_8h_source.html#l00242">242</a> of file <a class="el" href="ext2_8h_source.html">ext2.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00015">Ext2Volume()</a>, <a class="el" href="ext2_8cpp_source.html#l00117">read_block()</a>, and <a class="el" href="ext2_8cpp_source.html#l00068">write_block()</a>.</p>

</div>
</div>
<a id="a6a06e6d63e1762b1921e67931e6bd3c7" name="a6a06e6d63e1762b1921e67931e6bd3c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a06e6d63e1762b1921e67931e6bd3c7">&#9670;&#160;</a></span>pointers_per_block</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t MaxOS::filesystem::format::ext2::Ext2Volume::pointers_per_block</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ext2_8h_source.html#l00251">251</a> of file <a class="el" href="ext2_8h_source.html">ext2.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00015">Ext2Volume()</a>.</p>

</div>
</div>
<a id="aa2fb31420bd869e0f42e672e6ede97b2" name="aa2fb31420bd869e0f42e672e6ede97b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2fb31420bd869e0f42e672e6ede97b2">&#9670;&#160;</a></span>sectors_per_block</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t MaxOS::filesystem::format::ext2::Ext2Volume::sectors_per_block</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ext2_8h_source.html#l00253">253</a> of file <a class="el" href="ext2_8h_source.html">ext2.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00015">Ext2Volume()</a>, <a class="el" href="ext2_8cpp_source.html#l00117">read_block()</a>, and <a class="el" href="ext2_8cpp_source.html#l00068">write_block()</a>.</p>

</div>
</div>
<a id="a27730d8b9c0f817d5b08531121e393eb" name="a27730d8b9c0f817d5b08531121e393eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27730d8b9c0f817d5b08531121e393eb">&#9670;&#160;</a></span>sectors_per_inode_table</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t MaxOS::filesystem::format::ext2::Ext2Volume::sectors_per_inode_table</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ext2_8h_source.html#l00256">256</a> of file <a class="el" href="ext2_8h_source.html">ext2.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00015">Ext2Volume()</a>.</p>

</div>
</div>
<a id="a95e333eca8856f08ba4bc1724541a4b7" name="a95e333eca8856f08ba4bc1724541a4b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95e333eca8856f08ba4bc1724541a4b7">&#9670;&#160;</a></span>superblock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">superblock_t MaxOS::filesystem::format::ext2::Ext2Volume::superblock</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ext2_8h_source.html#l00244">244</a> of file <a class="el" href="ext2_8h_source.html">ext2.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00357">create_inode()</a>, <a class="el" href="ext2_8cpp_source.html#l00015">Ext2Volume()</a>, <a class="el" href="ext2_8cpp_source.html#l00451">free_blocks()</a>, <a class="el" href="ext2_8cpp_source.html#l00421">free_inode()</a>, <a class="el" href="ext2_8cpp_source.html#l00136">read_inode()</a>, and <a class="el" href="ext2_8cpp_source.html#l00090">write_inode()</a>.</p>

</div>
</div>
<a id="ac5a90acfd7dd067a9fa54e4a1ea0e707" name="ac5a90acfd7dd067a9fa54e4a1ea0e707"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5a90acfd7dd067a9fa54e4a1ea0e707">&#9670;&#160;</a></span>total_block_groups</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t MaxOS::filesystem::format::ext2::Ext2Volume::total_block_groups</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ext2_8h_source.html#l00250">250</a> of file <a class="el" href="ext2_8h_source.html">ext2.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8cpp_source.html#l00175">allocate_blocks()</a>, <a class="el" href="ext2_8cpp_source.html#l00357">create_inode()</a>, and <a class="el" href="ext2_8cpp_source.html#l00015">Ext2Volume()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/runner/work/MaxOS/MaxOS/kernel/include/filesystem/format/<a class="el" href="ext2_8h_source.html">ext2.h</a></li>
<li>/home/runner/work/MaxOS/MaxOS/kernel/src/filesystem/format/<a class="el" href="ext2_8cpp_source.html">ext2.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceMaxOS.html">MaxOS</a></li><li class="navelem"><a class="el" href="namespaceMaxOS_1_1filesystem.html">filesystem</a></li><li class="navelem"><a class="el" href="namespaceMaxOS_1_1filesystem_1_1format.html">format</a></li><li class="navelem"><a class="el" href="namespaceMaxOS_1_1filesystem_1_1format_1_1ext2.html">ext2</a></li><li class="navelem"><a class="el" href="classMaxOS_1_1filesystem_1_1format_1_1ext2_1_1Ext2Volume.html">Ext2Volume</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
