<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Max OS: /home/runner/work/MaxOS/MaxOS/kernel/src/drivers/ethernet/amd_am79c973.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Max OS<span id="projectnumber">&#160;0.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('amd__am79c973_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">amd_am79c973.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="amd__am79c973_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span> </div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &lt;<a class="code" href="amd__am79c973_8h.html">drivers/ethernet/amd_am79c973.h</a>&gt;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span> </div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="keyword">using namespace </span>MaxOS;</div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="keyword">using namespace </span>MaxOS::common;</div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="keyword">using namespace </span>MaxOS::memory;</div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="keyword">using namespace </span>MaxOS::drivers;</div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="keyword">using namespace </span>MaxOS::drivers::ethernet;</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="keyword">using namespace </span>MaxOS::hardwarecommunication;</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span> </div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="foldopen" id="foldopen00026" data-start="{" data-end="}">
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno"><a class="line" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a600f7e035ce585e05d89084856201240">   26</a></span><a class="code hl_function" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a600f7e035ce585e05d89084856201240">AMD_AM79C973::AMD_AM79C973</a>(<a class="code hl_class" href="classMaxOS_1_1hardwarecommunication_1_1PCIDeviceDescriptor.html">PCIDeviceDescriptor</a>* <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dev</a>)</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>: <a class="code hl_class" href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html">InterruptHandler</a>(0x20 + <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dev</a>-&gt;interrupt),</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>mac_address_0_port(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dev</a>-&gt;port_base),</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>mac_address_2_port(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dev</a>-&gt;port_base + 0x02),</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>mac_address_4_port(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dev</a>-&gt;port_base + 0x04),</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>register_data_port(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dev</a>-&gt;port_base + 0x10),</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>register_address_port(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dev</a>-&gt;port_base + 0x12),</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>bus_control_register_data_port(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dev</a>-&gt;port_base + 0x16),</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>reset_port(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dev</a>-&gt;port_base + 0x14),</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>init_block(),</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>send_buffers(),</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>recv_buffers() {</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>    <span class="comment">// No active buffer at the start</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>    current_send_buffer = 0;</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>    current_recv_buffer = 0;</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span> </div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>    <span class="comment">//Not active or initialised</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>    active = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    init_done = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span> </div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span> </div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>    <span class="comment">// Get the MAC addresses (split up in little endian order)</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_0</a> = mac_address_0_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a5147c7c28ca813536015969ae6ba6bb6">read</a>() % 256;</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_1</a> = mac_address_0_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a5147c7c28ca813536015969ae6ba6bb6">read</a>() / 256;</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_2</a> = mac_address_2_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a5147c7c28ca813536015969ae6ba6bb6">read</a>() % 256;</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_3</a> = mac_address_2_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a5147c7c28ca813536015969ae6ba6bb6">read</a>() / 256;</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_4</a> = mac_address_4_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a5147c7c28ca813536015969ae6ba6bb6">read</a>() % 256;</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_5</a> = mac_address_4_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a5147c7c28ca813536015969ae6ba6bb6">read</a>() / 256;</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span> </div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    <span class="comment">// Combine MAC addresses into one 48 bit number</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    own_mac = <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_5</a> &lt;&lt; 40</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>              | <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_4</a> &lt;&lt; 32</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>              | <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_3</a> &lt;&lt; 24</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>              | <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_2</a> &lt;&lt; 16</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>              | <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_1</a> &lt;&lt; 8</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>              | <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">mac_0</a>;</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span> </div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    <span class="comment">// Set the device to 32 bit mode</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(20);              <span class="comment">// Tell device to write to register 20</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    bus_control_register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(0x102);    <span class="comment">// write desired data</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span> </div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    <span class="comment">// Reset the stop bit (tell device it&#39;s not supposed to be reset now)</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(0);               <span class="comment">// Tell device to write to register 0</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(0x04);               <span class="comment">// write desired data</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span> </div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    <span class="comment">// Set the initialization block</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    init_block.mode = 0x0000;                         <span class="comment">// Promiscuous mode = false   ( promiscuous mode tells it to receive all packets, not just broadcasts and those for its own MAC address)</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    init_block.reserved1 = 0;                         <span class="comment">// Reserved</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    init_block.num_send_buffers = 3;                    <span class="comment">// Means 8 because 2^8 (number of bits used)</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    init_block.reserved2 = 0;                         <span class="comment">// Reserved</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    init_block.num_recv_buffers = 3;                    <span class="comment">// Means 8 because 2^8 (number of bits used)</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    init_block.physical_address = own_mac;              <span class="comment">// Set the physical address to the MAC address</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    init_block.reserved3 = 0;                         <span class="comment">// Reserved</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    init_block.logical_address = 0;                    <span class="comment">// None for now</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span> </div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    <span class="comment">// Set Buffer descriptors memory</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    send_buffer_descr = (<a class="code hl_struct" href="structMaxOS_1_1drivers_1_1ethernet_1_1BufferDescriptor.html">BufferDescriptor</a>*) (<a class="code hl_function" href="classMaxOS_1_1memory_1_1MemoryManager.html#a983c849ff604367f7c8a0e70172bb331">MemoryManager::kmalloc</a>((<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structMaxOS_1_1drivers_1_1ethernet_1_1BufferDescriptor.html">BufferDescriptor</a>) * 8) + 15));  <span class="comment">// Allocate memory for 8 buffer descriptors</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>    init_block.send_buffer_descr_address = (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a>) send_buffer_descr;</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span> </div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    recv_buffer_descr = (<a class="code hl_struct" href="structMaxOS_1_1drivers_1_1ethernet_1_1BufferDescriptor.html">BufferDescriptor</a>*) (<a class="code hl_function" href="classMaxOS_1_1memory_1_1MemoryManager.html#a983c849ff604367f7c8a0e70172bb331">MemoryManager::kmalloc</a>((<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structMaxOS_1_1drivers_1_1ethernet_1_1BufferDescriptor.html">BufferDescriptor</a>) * 8) + 15));  <span class="comment">// Allocate memory for 8 buffer descriptors</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    init_block.recv_buffer_descr_address = (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a>) recv_buffer_descr;</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span> </div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    <span class="keywordflow">for</span>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a> i = 0; i &lt; 8; i++) {</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span> </div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>        <span class="comment">// Send buffer descriptors</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>        send_buffer_descr[i].address = (((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a>) &amp;send_buffers[i]) + 15) &amp; ~(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a>) 0xF;       <span class="comment">// Same as above</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>        send_buffer_descr[i].flags =</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>        0x7FF                                                         <span class="comment">// Length of descriptor</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>        | 0xF000;                                                     <span class="comment">// Set it to send buffer</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>        send_buffer_descr[i].flags2 = 0;                                                           <span class="comment">// &quot;Flags2&quot; shows whether an error occurred while sending and should therefore be set to 0 by the drive</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>        send_buffer_descr[i].avail = 0;                                                            <span class="comment">// IF it is in use</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span> </div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>        <span class="comment">// Receive</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>        recv_buffer_descr[i].address = (((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a>) &amp;recv_buffers[i]) + 15) &amp; ~(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a>) 0xF;   <span class="comment">// Same as above</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>        recv_buffer_descr[i].flags =</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>        0xF7FF                                                        <span class="comment">// Length of descriptor        (This 0xF7FF is what was causing the problem, it used to be 0x7FF)</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>        | 0x80000000;                                                 <span class="comment">// Set it to receive buffer</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>        recv_buffer_descr[i].flags2 = 0;                                                           <span class="comment">// &quot;Flags2&quot; shows whether an error occurred while sending and should therefore be set to 0 by the drive</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>        recv_buffer_descr[i].avail = 0;                                                            <span class="comment">// IF it is in use</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    }</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span> </div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    <span class="comment">// Move initialization block into device</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(1);                                     <span class="comment">// Tell device to write to register 1</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a>) (&amp;init_block) &amp;</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>                             0xFFFF);             <span class="comment">// write address data</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(2);                                     <span class="comment">// Tell device to write to register 2</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a>) (&amp;init_block) &gt;&gt; 16) &amp;</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>                             0xFFFF);     <span class="comment">// write shifted address data</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span> </div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>}</div>
</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span> </div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>AMD_AM79C973::~AMD_AM79C973() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span> </div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span> </div>
<div class="foldopen" id="foldopen00127" data-start="{" data-end="}">
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno"><a class="line" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a53c3ac082e5eab68d8543b9b90cc21bd">  127</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a53c3ac082e5eab68d8543b9b90cc21bd">AMD_AM79C973::activate</a>() {</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span> </div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span> </div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    init_done = <span class="keyword">false</span>;                                            <span class="comment">// Set initDone to false</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(0);                           <span class="comment">// Tell device to write to register 0</span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(0x41);                           <span class="comment">// Enable Interrupts and start the device</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    <span class="keywordflow">while</span>(!init_done);                                            <span class="comment">// Wait for initDone to be set to true</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span> </div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(4);                           <span class="comment">// Tell device to read from register 4</span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a> = register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a5147c7c28ca813536015969ae6ba6bb6">read</a>();                     <span class="comment">// Get current data</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(4);                           <span class="comment">// Tell device to write to register 4</span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a> |</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>                             0xC00);                   <span class="comment">// Bitwise OR function on data (This automatically enlarges packets smaller than 64 bytes to that size and removes some relatively superfluous information from received packets.)</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span> </div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(0);                           <span class="comment">// Tell device to write to register 0</span></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>    register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    0x42);                           <span class="comment">// Tell device that it is initialised and can begin operating</span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span> </div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>    active = <span class="keyword">true</span>;                                               <span class="comment">// Set active to true</span></div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>}</div>
</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span> </div>
<div class="foldopen" id="foldopen00155" data-start="{" data-end="}">
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno"><a class="line" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a1f92c35763581a0454dac5783d693c33">  155</a></span><a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_function" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a1f92c35763581a0454dac5783d693c33">AMD_AM79C973::reset</a>() {</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span> </div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>    reset_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a5147c7c28ca813536015969ae6ba6bb6">read</a>();</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>    reset_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(0);</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>    <span class="keywordflow">return</span> 10;                      <span class="comment">// 10 means wait for 10ms</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span> </div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>}</div>
</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span> </div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span> </div>
<div class="foldopen" id="foldopen00168" data-start="{" data-end="}">
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno"><a class="line" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a8edad1ca75667f1e4d407178b5493f7a">  168</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a8edad1ca75667f1e4d407178b5493f7a">AMD_AM79C973::handle_interrupt</a>() {</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span> </div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    <span class="comment">// Similar to PIC, data needs to be read when an interrupt is sent, or it hangs</span></div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(0);                           <span class="comment">// Tell device to read from register 0</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a> = register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a5147c7c28ca813536015969ae6ba6bb6">read</a>();                     <span class="comment">// Get current data</span></div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span> </div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <span class="comment">// Note: Cant be switch case as multiple errors can occur at the same time</span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span> </div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    <span class="comment">// Errors</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    <span class="keywordflow">if</span>((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a> &amp; 0x8000) == 0x8000)</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>        <a class="code hl_function" href="classMaxOS_1_1Logger.html#a4cc5871bd96523f5c50a2ac8ccbf44f3">Logger::WARNING</a>() &lt;&lt; <span class="stringliteral">&quot;AMD am79c973 ERROR: &quot;</span>;</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    <span class="keywordflow">if</span>((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a> &amp; 0x2000) == 0x2000)</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>        <a class="code hl_function" href="classMaxOS_1_1Logger.html#a4cc5871bd96523f5c50a2ac8ccbf44f3">Logger::WARNING</a>() &lt;&lt; <span class="stringliteral">&quot;COLLISION ERROR\n&quot;</span>;</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    <span class="keywordflow">if</span>((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a> &amp; 0x1000) == 0x1000)</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>        <a class="code hl_function" href="classMaxOS_1_1Logger.html#a4cc5871bd96523f5c50a2ac8ccbf44f3">Logger::WARNING</a>() &lt;&lt; <span class="stringliteral">&quot;MISSED FRAME\n&quot;</span>;</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    <span class="keywordflow">if</span>((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a> &amp; 0x0800) == 0x0800)</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>        <a class="code hl_function" href="classMaxOS_1_1Logger.html#a4cc5871bd96523f5c50a2ac8ccbf44f3">Logger::WARNING</a>() &lt;&lt; <span class="stringliteral">&quot;MEMORY ERROR\n&quot;</span>;</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span> </div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    <span class="comment">// Responses</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <span class="keywordflow">if</span>((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a> &amp; 0x0400) == 0x0400) fetch_data_received();</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    <span class="keywordflow">if</span>((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a> &amp; 0x0200) == 0x0200) fetch_data_sent();</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    <span class="keywordflow">if</span>((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a> &amp; 0x0100) == 0x0100) init_done = <span class="keyword">true</span>;<span class="comment">//</span></div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span> </div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    <span class="comment">// Reply that it was received</span></div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(0);                           <span class="comment">// Tell device to write to register 0</span></div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">temp</a>);                           <span class="comment">// Tell device that the interrupt was received</span></div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>}</div>
</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span> </div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span> </div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span> </div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span><span class="comment">// Sending a package :</span></div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span><span class="comment">// &quot;Flags2&quot; shows whether an error occurred while sending and should therefore be set to 0 by the driver.</span></div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span><span class="comment">//  The OWN bit must now be set in the “flags” field (0x80000000) in order to “transfer” the descriptor to the card.</span></div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span><span class="comment">//  Furthermore, STP (Start of Packet, 0x02000000) and ENP (End of Packet, 0x01000000) should be set - this indicates that the data is not split up, but that it is a single Ethernet packet.</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span><span class="comment">//  Furthermore, bits 12-15 must be set (0x0000F000, are probably reserved) and bits 0-11 are negative Size of the package.</span></div>
<div class="foldopen" id="foldopen00210" data-start="{" data-end="}">
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno"><a class="line" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#ae298c2fab9186c4b36f1e0f3ec9bad64">  210</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#ae298c2fab9186c4b36f1e0f3ec9bad64">AMD_AM79C973::do_send</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a>* buffer, <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> size) {</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span> </div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>    <span class="keywordflow">while</span>(!active);</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span> </div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>    <span class="keywordtype">int</span> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">send_descriptor</a> = current_send_buffer;              <span class="comment">// Get where data has been written to</span></div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    current_send_buffer = (current_send_buffer + 1) %</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>                          8;    <span class="comment">// Move send buffer to next send buffer (div by 8 so that it is cycled) (this allows for data to be sent from different m_tasks in parallel)</span></div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span> </div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>    <span class="keywordflow">if</span>(size &gt;</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>       1518) {                                    <span class="comment">// If attempt to send more than 1518 bytes at once it will be too large</span></div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>        size = 1518;                                    <span class="comment">// Discard all data after that  (Generally if data is bigger than that at driver level then a higher up network layer must have made a mistake)</span></div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span> </div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>    }</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span> </div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>    <span class="comment">// What this loop does is copy the information passed as the parameter buffer (src) to the send buffer in the ram (dst) which the card will then use to send the data</span></div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    <span class="keywordflow">for</span>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a>* <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">src</a> = buffer + size -</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>                       1,                                                   <span class="comment">// Set src pointer to the end of the data that is being sent</span></div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>        * <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dst</a> = (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a>*) (send_buffer_descr[<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">send_descriptor</a>].address + size -</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>                            1);       <span class="comment">// Take the buffer that has been selected</span></div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>        <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">src</a> &gt;=</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>        buffer;                                                             <span class="comment">// While there is still information in the buffer that hasn&#39;t been written to src</span></div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>        <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">src</a>--, <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dst</a>--                                                                <span class="comment">// Move 2 pointers to the end of the buffers</span></div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>    ) {</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>        *<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">dst</a> = *<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">src</a>;                                                                        <span class="comment">// Copy data from source buffer to destination buffer</span></div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>    }</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span> </div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span> </div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>    send_buffer_descr[<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">send_descriptor</a>].avail = 0;                               <span class="comment">// Set that this buffer is in use</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>    send_buffer_descr[<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">send_descriptor</a>].flags2 = 0;                              <span class="comment">// Clear any previous error messages</span></div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>    send_buffer_descr[<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">send_descriptor</a>].flags = 0x8300F000                       <span class="comment">// Encode the size of what is being sent</span></div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>                                               | ((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) ((-size) &amp; 0xFFF));</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span> </div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>    register_address_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(0);                           <span class="comment">// Tell device to write to register 0</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>    register_data_port.<a class="code hl_function" href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">write</a>(</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>    0x48);                           <span class="comment">// Tell device to send the data currently in the buffer</span></div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>}</div>
</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span> </div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span><span class="keywordtype">void</span> AMD_AM79C973::fetch_data_received() {</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span> </div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>    <span class="keywordflow">for</span>(; (recv_buffer_descr[current_recv_buffer].flags &amp; 0x80000000) == 0; current_recv_buffer =</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>                                                                            (current_recv_buffer + 1) %</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>                                                                            8)         <span class="comment">//Loop through all the buffers</span></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>    {</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>        <span class="keywordflow">if</span>(!(recv_buffer_descr[current_recv_buffer].flags &amp; 0x40000000)                   <span class="comment">//Check if there is an error</span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>           &amp;&amp; (recv_buffer_descr[current_recv_buffer].flags &amp; 0x03000000) ==</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>              0x03000000)    <span class="comment">//Check start and end bits of the packet</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>        {</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>            <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> size = recv_buffer_descr[current_recv_buffer].flags2 &amp; 0xFFF;          <span class="comment">//Get the size of the packet</span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>            <span class="keywordflow">if</span>(size &gt;</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>               64)                                                              <span class="comment">//If the size is the size of ethernet 2 frame</span></div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>                size -= 4;                                                              <span class="comment">//remove the checksum</span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span> </div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>            <span class="keyword">auto</span>* buffer = (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a>*) (recv_buffer_descr[current_recv_buffer].address);   <span class="comment">//Get the buffer</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>            <a class="code hl_function" href="classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver.html#a788f4c5744af1a13a4dd0a09c82d8a1b">fire_data_received</a>(buffer, size);                                             <span class="comment">//Pass data to handler</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>        }</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span> </div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>        recv_buffer_descr[current_recv_buffer].flags2 = 0;                                  <span class="comment">//write that the data has been read and can now be used again</span></div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>        recv_buffer_descr[current_recv_buffer].flags = 0x8000F7FF;                          <span class="comment">//Clear the buffer</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>    }</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>}</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span> </div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span><span class="keywordtype">void</span> AMD_AM79C973::fetch_data_sent() {</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span> </div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    <span class="comment">/*</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span><span class="comment">    for(;(recvBufferDescr[currentRecvBuffer].flags &amp; 0x80000000) == 0; currentRecvBuffer = (currentRecvBuffer+1)%8)</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span><span class="comment">    {</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span><span class="comment">        if(!(recvBufferDescr[currentRecvBuffer].flags    &amp; 0x40000000)</span></div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span><span class="comment">           &amp;&amp; (recvBufferDescr[currentRecvBuffer].flags &amp; 0x03000000) == 0x03000000)</span></div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span><span class="comment">        {</span></div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span><span class="comment">            uint32_t size = recvBufferDescr[currentRecvBuffer].flags2 &amp; 0xFFF;</span></div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span><span class="comment">            if (size &gt; 64)</span></div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span><span class="comment">                size -= 4;</span></div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span><span class="comment"></span> </div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span><span class="comment">            uint8_t* buffer = (uint8_t*)(recvBufferDescr[currentRecvBuffer].address);</span></div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span><span class="comment">            FireDataSent(buffer, size);</span></div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span><span class="comment">        }</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span><span class="comment"></span> </div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span><span class="comment">        recvBufferDescr[currentRecvBuffer].flags2 = 0;</span></div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span><span class="comment">        recvBufferDescr[currentRecvBuffer].flags = 0x8000F7FF;</span></div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span><span class="comment">    }</span></div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span><span class="comment">    */</span></div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span> </div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>}</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span> </div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span> </div>
<div class="foldopen" id="foldopen00300" data-start="{" data-end="}">
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno"><a class="line" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#aca8230bce11a76894d893998c52204cb">  300</a></span><a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a> <a class="code hl_function" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#aca8230bce11a76894d893998c52204cb">AMD_AM79C973::get_media_access_control_address</a>() {</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>    <span class="keywordflow">while</span>(own_mac == 0);</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>    <span class="keywordflow">return</span> own_mac;</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>}</div>
</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span> </div>
<div class="foldopen" id="foldopen00305" data-start="{" data-end="}">
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno"><a class="line" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#af71695cfd40bf9bc49ac865521264fd9">  305</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#af71695cfd40bf9bc49ac865521264fd9">AMD_AM79C973::deactivate</a>() {</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span> </div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>}</div>
</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span> </div>
<div class="foldopen" id="foldopen00309" data-start="{" data-end="}">
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno"><a class="line" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a287dbe7304c0b56850b9b339c1299618">  309</a></span><span class="keywordtype">string</span> <a class="code hl_function" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a287dbe7304c0b56850b9b339c1299618">AMD_AM79C973::vendor_name</a>() {</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>    <span class="keywordflow">return</span> <span class="stringliteral">&quot;AMD&quot;</span>;</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>}</div>
</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span> </div>
<div class="foldopen" id="foldopen00313" data-start="{" data-end="}">
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno"><a class="line" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a426beb375fff8d28dbc4aee45a0c71b5">  313</a></span><span class="keywordtype">string</span> <a class="code hl_function" href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a426beb375fff8d28dbc4aee45a0c71b5">AMD_AM79C973::device_name</a>() {</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>    <span class="keywordflow">return</span> <span class="stringliteral">&quot;PCnet-Fast III (Am79C973)&quot;</span>;</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>}</div>
</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span> </div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span> </div>
<div class="ttc" id="aamd__am79c973_8h_html"><div class="ttname"><a href="amd__am79c973_8h.html">amd_am79c973.h</a></div><div class="ttdoc">Driver for the AMD AM79C973 Ethernet Controller.</div></div>
<div class="ttc" id="aclassMaxOS_1_1Logger_html_a4cc5871bd96523f5c50a2ac8ccbf44f3"><div class="ttname"><a href="classMaxOS_1_1Logger.html#a4cc5871bd96523f5c50a2ac8ccbf44f3">MaxOS::Logger::WARNING</a></div><div class="ttdeci">static Logger WARNING()</div><div class="ttdoc">Gets active logger set to WARNING level.</div><div class="ttdef"><b>Definition</b> <a href="logger_8cpp_source.html#l00205">logger.cpp:205</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1common_1_1Rectangle_html"><div class="ttname"><a href="classMaxOS_1_1common_1_1Rectangle.html">MaxOS::common::Rectangle</a></div><div class="ttdoc">Stores the left, top, width and height of a rectangle.</div><div class="ttdef"><b>Definition</b> <a href="rectangle_8h_source.html#l00022">rectangle.h:22</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_html_a1f92c35763581a0454dac5783d693c33"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a1f92c35763581a0454dac5783d693c33">MaxOS::drivers::ethernet::AMD_AM79C973::reset</a></div><div class="ttdeci">uint32_t reset() final</div><div class="ttdoc">This function resets the device.</div><div class="ttdef"><b>Definition</b> <a href="amd__am79c973_8cpp_source.html#l00155">amd_am79c973.cpp:155</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_html_a287dbe7304c0b56850b9b339c1299618"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a287dbe7304c0b56850b9b339c1299618">MaxOS::drivers::ethernet::AMD_AM79C973::vendor_name</a></div><div class="ttdeci">string vendor_name() final</div><div class="ttdoc">Get who created the device.</div><div class="ttdef"><b>Definition</b> <a href="amd__am79c973_8cpp_source.html#l00309">amd_am79c973.cpp:309</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_html_a426beb375fff8d28dbc4aee45a0c71b5"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a426beb375fff8d28dbc4aee45a0c71b5">MaxOS::drivers::ethernet::AMD_AM79C973::device_name</a></div><div class="ttdeci">string device_name() final</div><div class="ttdoc">Get the device name of the driver.</div><div class="ttdef"><b>Definition</b> <a href="amd__am79c973_8cpp_source.html#l00313">amd_am79c973.cpp:313</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_html_a53c3ac082e5eab68d8543b9b90cc21bd"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a53c3ac082e5eab68d8543b9b90cc21bd">MaxOS::drivers::ethernet::AMD_AM79C973::activate</a></div><div class="ttdeci">void activate() final</div><div class="ttdoc">This function activates the device and starts it (Runs when the driver-manger calls activateAll())</div><div class="ttdef"><b>Definition</b> <a href="amd__am79c973_8cpp_source.html#l00127">amd_am79c973.cpp:127</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_html_a600f7e035ce585e05d89084856201240"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a600f7e035ce585e05d89084856201240">MaxOS::drivers::ethernet::AMD_AM79C973::AMD_AM79C973</a></div><div class="ttdeci">AMD_AM79C973(hardwarecommunication::PCIDeviceDescriptor *dev)</div><div class="ttdoc">Constructs a new AMD_AM79C973 Ethernet driver, reads the MAC address and sets up the initialisation b...</div><div class="ttdef"><b>Definition</b> <a href="amd__am79c973_8cpp_source.html#l00026">amd_am79c973.cpp:26</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_html_a8edad1ca75667f1e4d407178b5493f7a"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#a8edad1ca75667f1e4d407178b5493f7a">MaxOS::drivers::ethernet::AMD_AM79C973::handle_interrupt</a></div><div class="ttdeci">void handle_interrupt() final</div><div class="ttdoc">This function handles the interrupt for the device.</div><div class="ttdef"><b>Definition</b> <a href="amd__am79c973_8cpp_source.html#l00168">amd_am79c973.cpp:168</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_html_aca8230bce11a76894d893998c52204cb"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#aca8230bce11a76894d893998c52204cb">MaxOS::drivers::ethernet::AMD_AM79C973::get_media_access_control_address</a></div><div class="ttdeci">uint64_t get_media_access_control_address() final</div><div class="ttdoc">This function gets the MAC address.</div><div class="ttdef"><b>Definition</b> <a href="amd__am79c973_8cpp_source.html#l00300">amd_am79c973.cpp:300</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_html_ae298c2fab9186c4b36f1e0f3ec9bad64"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#ae298c2fab9186c4b36f1e0f3ec9bad64">MaxOS::drivers::ethernet::AMD_AM79C973::do_send</a></div><div class="ttdeci">void do_send(uint8_t *buffer, uint32_t size) final</div><div class="ttdoc">This function sends a package.</div><div class="ttdef"><b>Definition</b> <a href="amd__am79c973_8cpp_source.html#l00210">amd_am79c973.cpp:210</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973_html_af71695cfd40bf9bc49ac865521264fd9"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1AMD__AM79C973.html#af71695cfd40bf9bc49ac865521264fd9">MaxOS::drivers::ethernet::AMD_AM79C973::deactivate</a></div><div class="ttdeci">void deactivate() final</div><div class="ttdoc">Deactivate the driver.</div><div class="ttdef"><b>Definition</b> <a href="amd__am79c973_8cpp_source.html#l00305">amd_am79c973.cpp:305</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver_html_a788f4c5744af1a13a4dd0a09c82d8a1b"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver.html#a788f4c5744af1a13a4dd0a09c82d8a1b">MaxOS::drivers::ethernet::EthernetDriver::fire_data_received</a></div><div class="ttdeci">void fire_data_received(uint8_t *buffer, uint32_t size)</div><div class="ttdoc">Handle the recieved data.</div><div class="ttdef"><b>Definition</b> <a href="ethernet_8cpp_source.html#l00122">ethernet.cpp:122</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1hardwarecommunication_1_1InterruptHandler_html"><div class="ttname"><a href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html">MaxOS::hardwarecommunication::InterruptHandler</a></div><div class="ttdoc">Handles a certain interrupt number.</div><div class="ttdef"><b>Definition</b> <a href="interrupts_8h_source.html#l00030">interrupts.h:30</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1hardwarecommunication_1_1PCIDeviceDescriptor_html"><div class="ttname"><a href="classMaxOS_1_1hardwarecommunication_1_1PCIDeviceDescriptor.html">MaxOS::hardwarecommunication::PCIDeviceDescriptor</a></div><div class="ttdoc">Stores information about a PCI device.</div><div class="ttdef"><b>Definition</b> <a href="pci_8h_source.html#l00054">pci.h:54</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1hardwarecommunication_1_1Port16Bit_html_a24f6a288e57d4c01634926ca3580324d"><div class="ttname"><a href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a24f6a288e57d4c01634926ca3580324d">MaxOS::hardwarecommunication::Port16Bit::write</a></div><div class="ttdeci">virtual void write(uint16_t data)</div><div class="ttdoc">write a word to the port</div><div class="ttdef"><b>Definition</b> <a href="port_8cpp_source.html#l00095">port.cpp:95</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1hardwarecommunication_1_1Port16Bit_html_a5147c7c28ca813536015969ae6ba6bb6"><div class="ttname"><a href="classMaxOS_1_1hardwarecommunication_1_1Port16Bit.html#a5147c7c28ca813536015969ae6ba6bb6">MaxOS::hardwarecommunication::Port16Bit::read</a></div><div class="ttdeci">virtual uint16_t read()</div><div class="ttdoc">read a word from the port</div><div class="ttdef"><b>Definition</b> <a href="port_8cpp_source.html#l00105">port.cpp:105</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1memory_1_1MemoryManager_html_a983c849ff604367f7c8a0e70172bb331"><div class="ttname"><a href="classMaxOS_1_1memory_1_1MemoryManager.html#a983c849ff604367f7c8a0e70172bb331">MaxOS::memory::MemoryManager::kmalloc</a></div><div class="ttdeci">static void * kmalloc(size_t size)</div><div class="ttdoc">Allocates a block of memory in the KERNEL space.</div><div class="ttdef"><b>Definition</b> <a href="memorymanagement_8cpp_source.html#l00085">memorymanagement.cpp:85</a></div></div>
<div class="ttc" id="astructMaxOS_1_1drivers_1_1ethernet_1_1BufferDescriptor_html"><div class="ttname"><a href="structMaxOS_1_1drivers_1_1ethernet_1_1BufferDescriptor.html">MaxOS::drivers::ethernet::BufferDescriptor</a></div><div class="ttdoc">Defines the layout of a buffer descriptor for the AMD AM79C973 Ethernet Controller.</div><div class="ttdef"><b>Definition</b> <a href="amd__am79c973_8h_source.html#l00051">amd_am79c973.h:51</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_dc43877d82dd332f9fb2071fcca799d6.html">kernel</a></li><li class="navelem"><a class="el" href="dir_3dd30a497388ee684638f120a124721c.html">src</a></li><li class="navelem"><a class="el" href="dir_79cdf04718782f286da113044bf76c98.html">drivers</a></li><li class="navelem"><a class="el" href="dir_efcb6c0e12d9cee5df1accc0ecb8fd49.html">ethernet</a></li><li class="navelem"><a class="el" href="amd__am79c973_8cpp.html">amd_am79c973.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
