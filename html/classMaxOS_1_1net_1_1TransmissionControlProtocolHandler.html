<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Max OS: MaxOS::net::TransmissionControlProtocolHandler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Max OS<span id="projectnumber">&#160;0.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">MaxOS::net::TransmissionControlProtocolHandler Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Handles TCP packets and manages TCP sockets.  
 <a href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="tcp_8h_source.html">tcp.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for MaxOS::net::TransmissionControlProtocolHandler:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.png" usemap="#MaxOS::net::TransmissionControlProtocolHandler_map" alt=""/>
  <map id="MaxOS::net::TransmissionControlProtocolHandler_map" name="MaxOS::net::TransmissionControlProtocolHandler_map">
<area href="classMaxOS_1_1net_1_1IPV4PayloadHandler.html" title="Handles the payload of a specific IP protocol." alt="MaxOS::net::IPV4PayloadHandler" shape="rect" coords="0,0,289,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a85a4ccbb96d87987c65da4a6d69fd123" id="r_a85a4ccbb96d87987c65da4a6d69fd123"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#a85a4ccbb96d87987c65da4a6d69fd123">TransmissionControlProtocolHandler</a> (<a class="el" href="classMaxOS_1_1net_1_1InternetProtocolHandler.html">InternetProtocolHandler</a> *<a class="el" href="classMaxOS_1_1net_1_1IPV4PayloadHandler.html#a8f837ba5e88224d46e5653239ffed050">internet_protocol_handler</a>, <a class="el" href="classMaxOS_1_1common_1_1OutputStream.html">common::OutputStream</a> *<a class="el" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#a43f0d010c804b9d6f4e2b3f554710542">error_messages</a>)</td></tr>
<tr class="memdesc:a85a4ccbb96d87987c65da4a6d69fd123"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new Transmission Control Protocol Handler object.  <br /></td></tr>
<tr class="separator:a85a4ccbb96d87987c65da4a6d69fd123"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa77ef10c38219f461db44ebbd91285e8" id="r_aa77ef10c38219f461db44ebbd91285e8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#aa77ef10c38219f461db44ebbd91285e8">handle_internet_protocol_payload</a> (<a class="el" href="ipv4_8h.html#af037c025feb88b952b167f4dfa2709a0">net::InternetProtocolAddress</a> source_ip, <a class="el" href="ipv4_8h.html#af037c025feb88b952b167f4dfa2709a0">net::InternetProtocolAddress</a> destination_ip, <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a> *<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">payload_data</a>, <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> size) <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">override</a></td></tr>
<tr class="memdesc:aa77ef10c38219f461db44ebbd91285e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle the TCP message (provider end)  <br /></td></tr>
<tr class="separator:aa77ef10c38219f461db44ebbd91285e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b91dffeedce9bd029d12c7c2f178eb7" id="r_a7b91dffeedce9bd029d12c7c2f178eb7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#a7b91dffeedce9bd029d12c7c2f178eb7">connect</a> (<a class="el" href="ipv4_8h.html#af037c025feb88b952b167f4dfa2709a0">InternetProtocolAddress</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">ip</a>, <a class="el" href="tcp_8h.html#a8e668c17241c6c0ed8e9f6df338b2307">TransmissionControlProtocolPort</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">port</a>)</td></tr>
<tr class="memdesc:a7b91dffeedce9bd029d12c7c2f178eb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">connect to a remote host through the TCP protocol  <br /></td></tr>
<tr class="separator:a7b91dffeedce9bd029d12c7c2f178eb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05e8270d3bd4760d9ea7a376d4df2c2e" id="r_a05e8270d3bd4760d9ea7a376d4df2c2e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#a05e8270d3bd4760d9ea7a376d4df2c2e">disconnect</a> (<a class="el" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a> *socket)</td></tr>
<tr class="memdesc:a05e8270d3bd4760d9ea7a376d4df2c2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Begin the disconnect process.  <br /></td></tr>
<tr class="separator:a05e8270d3bd4760d9ea7a376d4df2c2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab25c60d5a4f734584c2dc22e178c9629" id="r_ab25c60d5a4f734584c2dc22e178c9629"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">virtual</a> <a class="el" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#ab25c60d5a4f734584c2dc22e178c9629">listen</a> (<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">port</a>)</td></tr>
<tr class="memdesc:ab25c60d5a4f734584c2dc22e178c9629"><td class="mdescLeft">&#160;</td><td class="mdescRight">Begin listening on a port.  <br /></td></tr>
<tr class="separator:ab25c60d5a4f734584c2dc22e178c9629"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1787ad7709de53869039233e0a6fd41" id="r_ab1787ad7709de53869039233e0a6fd41"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">virtual</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#ab1787ad7709de53869039233e0a6fd41">bind</a> (<a class="el" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a> *socket, <a class="el" href="classMaxOS_1_1net_1_1TCPPayloadHandler.html">TCPPayloadHandler</a> *<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">handler</a>)</td></tr>
<tr class="memdesc:ab1787ad7709de53869039233e0a6fd41"><td class="mdescLeft">&#160;</td><td class="mdescRight">bind a data handler to this socket  <br /></td></tr>
<tr class="separator:ab1787ad7709de53869039233e0a6fd41"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aebe074c47db9f1f131700993d644ce3a" id="r_aebe074c47db9f1f131700993d644ce3a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">static</a> <a class="el" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#aebe074c47db9f1f131700993d644ce3a">connect</a> (<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">const</a> <a class="el" href="string_8h.html#a4a6e5834af96b66d8015f5a24c09e1b3">string</a> &amp;address)</td></tr>
<tr class="memdesc:aebe074c47db9f1f131700993d644ce3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">connect to a remote host through the TCP protocol  <br /></td></tr>
<tr class="separator:aebe074c47db9f1f131700993d644ce3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aa36ce39675e78cfdb78af499fd0f199c" id="r_aa36ce39675e78cfdb78af499fd0f199c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#aa36ce39675e78cfdb78af499fd0f199c">send_transmission_control_protocol_packet</a> (<a class="el" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a> *socket, <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">const</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a> *data, <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a> size, <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a> flags=0)</td></tr>
<tr class="memdesc:aa36ce39675e78cfdb78af499fd0f199c"><td class="mdescLeft">&#160;</td><td class="mdescRight">send a packet (Throught the provider)  <br /></td></tr>
<tr class="separator:aa36ce39675e78cfdb78af499fd0f199c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a43f0d010c804b9d6f4e2b3f554710542" id="r_a43f0d010c804b9d6f4e2b3f554710542"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1OutputStream.html">common::OutputStream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#a43f0d010c804b9d6f4e2b3f554710542">error_messages</a></td></tr>
<tr class="memdesc:a43f0d010c804b9d6f4e2b3f554710542"><td class="mdescLeft">&#160;</td><td class="mdescRight">Where to write error messages.  <br /></td></tr>
<tr class="separator:a43f0d010c804b9d6f4e2b3f554710542"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaadd6c0738e70542d1a64ce9671a67c3" id="r_aaadd6c0738e70542d1a64ce9671a67c3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Vector.html">common::Vector</a>&lt; <a class="el" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#aaadd6c0738e70542d1a64ce9671a67c3">sockets</a></td></tr>
<tr class="memdesc:aaadd6c0738e70542d1a64ce9671a67c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">The list of connected sockets.  <br /></td></tr>
<tr class="separator:aaadd6c0738e70542d1a64ce9671a67c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-attribs" name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:a4dbb242dec2eac37b093d23054b2d21a" id="r_a4dbb242dec2eac37b093d23054b2d21a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="tcp_8h.html#a8e668c17241c6c0ed8e9f6df338b2307">TransmissionControlProtocolPort</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#a4dbb242dec2eac37b093d23054b2d21a">free_ports</a> = 0x8000</td></tr>
<tr class="memdesc:a4dbb242dec2eac37b093d23054b2d21a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The next free port to use for new sockets.  <br /></td></tr>
<tr class="separator:a4dbb242dec2eac37b093d23054b2d21a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:ae392721345f444f04761959f689c8ecb" id="r_ae392721345f444f04761959f689c8ecb"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#ae392721345f444f04761959f689c8ecb">TCPSocket</a></td></tr>
<tr class="separator:ae392721345f444f04761959f689c8ecb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Handles TCP packets and manages TCP sockets. </p>

<p class="definition">Definition at line <a class="el" href="tcp_8h_source.html#l00206">206</a> of file <a class="el" href="tcp_8h_source.html">tcp.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a85a4ccbb96d87987c65da4a6d69fd123" name="a85a4ccbb96d87987c65da4a6d69fd123"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85a4ccbb96d87987c65da4a6d69fd123">&#9670;&#160;</a></span>TransmissionControlProtocolHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TransmissionControlProtocolHandler::TransmissionControlProtocolHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1net_1_1InternetProtocolHandler.html">InternetProtocolHandler</a> *&#160;</td>
          <td class="paramname"><em>internet_protocol_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1common_1_1OutputStream.html">common::OutputStream</a> *&#160;</td>
          <td class="paramname"><em>error_messages</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new Transmission Control Protocol Handler object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">internet_protocol_handler</td><td>The Internet protocol handler </td></tr>
    <tr><td class="paramname">error_messages</td><td>Where to write error messages </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="tcp_8cpp_source.html#l00160">160</a> of file <a class="el" href="tcp_8cpp_source.html">tcp.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  161</span>        : <a class="code hl_class" href="classMaxOS_1_1net_1_1IPV4PayloadHandler.html">IPV4PayloadHandler</a>(<a class="code hl_variable" href="classMaxOS_1_1net_1_1IPV4PayloadHandler.html#a8f837ba5e88224d46e5653239ffed050">internet_protocol_handler</a>, 0x06) {</div>
<div class="line"><span class="lineno">  162</span>    this-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#a43f0d010c804b9d6f4e2b3f554710542">error_messages</a> = <a class="code hl_variable" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#a43f0d010c804b9d6f4e2b3f554710542">error_messages</a>;</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1net_1_1IPV4PayloadHandler_html"><div class="ttname"><a href="classMaxOS_1_1net_1_1IPV4PayloadHandler.html">MaxOS::net::IPV4PayloadHandler</a></div><div class="ttdoc">Handles the payload of a specific IP protocol.</div><div class="ttdef"><b>Definition</b> <a href="ipv4_8h_source.html#l00066">ipv4.h:66</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1net_1_1IPV4PayloadHandler_html_a8f837ba5e88224d46e5653239ffed050"><div class="ttname"><a href="classMaxOS_1_1net_1_1IPV4PayloadHandler.html#a8f837ba5e88224d46e5653239ffed050">MaxOS::net::IPV4PayloadHandler::internet_protocol_handler</a></div><div class="ttdeci">InternetProtocolHandler * internet_protocol_handler</div><div class="ttdoc">The Internet protocol handler this payload handler is connected to.</div><div class="ttdef"><b>Definition</b> <a href="ipv4_8h_source.html#l00070">ipv4.h:70</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1net_1_1TransmissionControlProtocolHandler_html_a43f0d010c804b9d6f4e2b3f554710542"><div class="ttname"><a href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#a43f0d010c804b9d6f4e2b3f554710542">MaxOS::net::TransmissionControlProtocolHandler::error_messages</a></div><div class="ttdeci">common::OutputStream * error_messages</div><div class="ttdoc">Where to write error messages.</div><div class="ttdef"><b>Definition</b> <a href="tcp_8h_source.html#l00210">tcp.h:210</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tcp_8h_source.html#l00210">error_messages</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab1787ad7709de53869039233e0a6fd41" name="ab1787ad7709de53869039233e0a6fd41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1787ad7709de53869039233e0a6fd41">&#9670;&#160;</a></span>bind()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a> TransmissionControlProtocolHandler::bind </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a> *&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1net_1_1TCPPayloadHandler.html">TCPPayloadHandler</a> *&#160;</td>
          <td class="paramname"><em>handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>bind a data handler to this socket </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>The socket to bind the handler to </td></tr>
    <tr><td class="paramname">handler</td><td>The handler to bind </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="tcp_8cpp_source.html#l00581">581</a> of file <a class="el" href="tcp_8cpp_source.html">tcp.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  581</span>                                                                                           {</div>
<div class="line"><span class="lineno">  582</span>    socket-&gt;<a class="code hl_function" href="classMaxOS_1_1common_1_1EventManager.html#ab8e353bbb4b256d394968a02cc1447ca">connect_event_handler</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">handler</a>);</div>
<div class="line"><span class="lineno">  583</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1common_1_1EventManager_html_ab8e353bbb4b256d394968a02cc1447ca"><div class="ttname"><a href="classMaxOS_1_1common_1_1EventManager.html#ab8e353bbb4b256d394968a02cc1447ca">MaxOS::common::EventManager::connect_event_handler</a></div><div class="ttdeci">void connect_event_handler(EventHandler&lt; EventType &gt; *handler)</div><div class="ttdoc">connect an event handler to the event manager if it is not already connected</div><div class="ttdef"><b>Definition</b> <a href="eventHandler_8h_source.html#l00121">eventHandler.h:121</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1common_1_1Rectangle_html"><div class="ttname"><a href="classMaxOS_1_1common_1_1Rectangle.html">MaxOS::common::Rectangle</a></div><div class="ttdoc">Stores the left, top, width and height of a rectangle.</div><div class="ttdef"><b>Definition</b> <a href="rectangle_8h_source.html#l00022">rectangle.h:22</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="eventHandler_8h_source.html#l00121">MaxOS::common::EventManager&lt; EventType &gt;::connect_event_handler()</a>.</p>

</div>
</div>
<a id="aebe074c47db9f1f131700993d644ce3a" name="aebe074c47db9f1f131700993d644ce3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebe074c47db9f1f131700993d644ce3a">&#9670;&#160;</a></span>connect() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a> * TransmissionControlProtocolHandler::connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">const</a> <a class="el" href="string_8h.html#a4a6e5834af96b66d8015f5a24c09e1b3">string</a> &amp;&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>connect to a remote host through the TCP protocol </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>The address to connect to in the form "IP:PORT"</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The socket that is connected to the remote host, nullptr if it failed</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000074">Todo:</a></b></dt><dd>Implement string parsing for address </dd></dl>

<p class="definition">Definition at line <a class="el" href="tcp_8cpp_source.html#l00527">527</a> of file <a class="el" href="tcp_8cpp_source.html">tcp.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  527</span>                                                                            {</div>
<div class="line"><span class="lineno">  528</span> </div>
<div class="line"><span class="lineno">  529</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  530</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7b91dffeedce9bd029d12c7c2f178eb7" name="a7b91dffeedce9bd029d12c7c2f178eb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b91dffeedce9bd029d12c7c2f178eb7">&#9670;&#160;</a></span>connect() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a> * TransmissionControlProtocolHandler::connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ipv4_8h.html#af037c025feb88b952b167f4dfa2709a0">InternetProtocolAddress</a>&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tcp_8h.html#a8e668c17241c6c0ed8e9f6df338b2307">TransmissionControlProtocolPort</a>&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>connect to a remote host through the TCP protocol </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ip</td><td>The IP of the remote host </td></tr>
    <tr><td class="paramname">port</td><td>The port of the remote host </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The socket that is connected to the remote host, 0 if it failed </dd></dl>

<p class="definition">Definition at line <a class="el" href="tcp_8cpp_source.html#l00484">484</a> of file <a class="el" href="tcp_8cpp_source.html">tcp.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  484</span>                                                                                                                       {</div>
<div class="line"><span class="lineno">  485</span>    <span class="comment">//Create a new socket</span></div>
<div class="line"><span class="lineno">  486</span>    <span class="keyword">auto</span>* socket = (<a class="code hl_class" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a>*) <a class="code hl_function" href="classMaxOS_1_1memory_1_1MemoryManager.html#a983c849ff604367f7c8a0e70172bb331">MemoryManager::kmalloc</a>(</div>
<div class="line"><span class="lineno">  487</span>            <span class="keyword">sizeof</span>(<a class="code hl_class" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a>));</div>
<div class="line"><span class="lineno">  488</span> </div>
<div class="line"><span class="lineno">  489</span>    <span class="comment">//If there is space for the socket</span></div>
<div class="line"><span class="lineno">  490</span>    <span class="keywordflow">if</span>(socket != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  491</span>        <span class="comment">//Set the socket</span></div>
<div class="line"><span class="lineno">  492</span>        <span class="keyword">new</span>(socket) <a class="code hl_class" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  493</span> </div>
<div class="line"><span class="lineno">  494</span>        <span class="comment">//Set local and remote addresses</span></div>
<div class="line"><span class="lineno">  495</span>        socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#adeb2aa58fa3d47d883e266317610c855">remotePort</a> = <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">port</a>;</div>
<div class="line"><span class="lineno">  496</span>        socket-&gt;remote_ip = <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">ip</a>;</div>
<div class="line"><span class="lineno">  497</span>        socket-&gt;local_port = <a class="code hl_variable" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#a4dbb242dec2eac37b093d23054b2d21a">free_ports</a>++;</div>
<div class="line"><span class="lineno">  498</span>        socket-&gt;local_ip = <a class="code hl_variable" href="classMaxOS_1_1net_1_1IPV4PayloadHandler.html#a8f837ba5e88224d46e5653239ffed050">internet_protocol_handler</a>-&gt;<a class="code hl_function" href="classMaxOS_1_1net_1_1InternetProtocolHandler.html#a1c7b476a4ff9f946407a44be120871da">get_internet_protocol_address</a>();</div>
<div class="line"><span class="lineno">  499</span> </div>
<div class="line"><span class="lineno">  500</span>        <span class="comment">//Convert into big endian</span></div>
<div class="line"><span class="lineno">  501</span>        socket-&gt;remotePort = ((socket-&gt;remotePort &amp; 0xFF00) &gt;&gt; 8) | ((socket-&gt;remotePort &amp; 0x00FF) &lt;&lt; 8);</div>
<div class="line"><span class="lineno">  502</span>        socket-&gt;local_port = ((socket-&gt;local_port &amp; 0xFF00) &gt;&gt; 8) | ((socket-&gt;local_port &amp; 0x00FF) &lt;&lt; 8);</div>
<div class="line"><span class="lineno">  503</span> </div>
<div class="line"><span class="lineno">  504</span>        <span class="comment">//Set the socket into the socket array and then set its state</span></div>
<div class="line"><span class="lineno">  505</span>        <a class="code hl_variable" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#aaadd6c0738e70542d1a64ce9671a67c3">sockets</a>.push_back(socket);</div>
<div class="line"><span class="lineno">  506</span>        socket-&gt;state = TCPSocketState::SYN_SENT;</div>
<div class="line"><span class="lineno">  507</span> </div>
<div class="line"><span class="lineno">  508</span>        <span class="comment">//Dummy sequence number</span></div>
<div class="line"><span class="lineno">  509</span>        socket-&gt;sequence_number = 0xbeefcafe;</div>
<div class="line"><span class="lineno">  510</span> </div>
<div class="line"><span class="lineno">  511</span>        <span class="comment">//Send a sync packet</span></div>
<div class="line"><span class="lineno">  512</span>        <a class="code hl_function" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#aa36ce39675e78cfdb78af499fd0f199c">send_transmission_control_protocol_packet</a>(socket, <span class="keyword">nullptr</span>, 0, (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::SYN);</div>
<div class="line"><span class="lineno">  513</span>    }</div>
<div class="line"><span class="lineno">  514</span> </div>
<div class="line"><span class="lineno">  515</span>    <span class="keywordflow">return</span> socket;</div>
<div class="line"><span class="lineno">  516</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1memory_1_1MemoryManager_html_a983c849ff604367f7c8a0e70172bb331"><div class="ttname"><a href="classMaxOS_1_1memory_1_1MemoryManager.html#a983c849ff604367f7c8a0e70172bb331">MaxOS::memory::MemoryManager::kmalloc</a></div><div class="ttdeci">static void * kmalloc(size_t size)</div><div class="ttdoc">Allocates a block of memory in the KERNEL space.</div><div class="ttdef"><b>Definition</b> <a href="memorymanagement_8cpp_source.html#l00085">memorymanagement.cpp:85</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1net_1_1InternetProtocolHandler_html_a1c7b476a4ff9f946407a44be120871da"><div class="ttname"><a href="classMaxOS_1_1net_1_1InternetProtocolHandler.html#a1c7b476a4ff9f946407a44be120871da">MaxOS::net::InternetProtocolHandler::get_internet_protocol_address</a></div><div class="ttdeci">InternetProtocolAddress get_internet_protocol_address() const</div><div class="ttdoc">Gets the IP address of this device.</div><div class="ttdef"><b>Definition</b> <a href="ipv4_8cpp_source.html#l00345">ipv4.cpp:345</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1net_1_1TCPSocket_html"><div class="ttname"><a href="classMaxOS_1_1net_1_1TCPSocket.html">MaxOS::net::TCPSocket</a></div><div class="ttdoc">A TCP socket. Allows for sending and receiving data over TCP at a port.</div><div class="ttdef"><b>Definition</b> <a href="tcp_8h_source.html#l00174">tcp.h:174</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1net_1_1TCPSocket_html_adeb2aa58fa3d47d883e266317610c855"><div class="ttname"><a href="classMaxOS_1_1net_1_1TCPSocket.html#adeb2aa58fa3d47d883e266317610c855">MaxOS::net::TCPSocket::remotePort</a></div><div class="ttdeci">uint16_t remotePort</div><div class="ttdoc">The port on the external device.</div><div class="ttdef"><b>Definition</b> <a href="tcp_8h_source.html#l00180">tcp.h:180</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1net_1_1TransmissionControlProtocolHandler_html_a4dbb242dec2eac37b093d23054b2d21a"><div class="ttname"><a href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#a4dbb242dec2eac37b093d23054b2d21a">MaxOS::net::TransmissionControlProtocolHandler::free_ports</a></div><div class="ttdeci">static TransmissionControlProtocolPort free_ports</div><div class="ttdoc">The next free port to use for new sockets.</div><div class="ttdef"><b>Definition</b> <a href="tcp_8h_source.html#l00213">tcp.h:213</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1net_1_1TransmissionControlProtocolHandler_html_aa36ce39675e78cfdb78af499fd0f199c"><div class="ttname"><a href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#aa36ce39675e78cfdb78af499fd0f199c">MaxOS::net::TransmissionControlProtocolHandler::send_transmission_control_protocol_packet</a></div><div class="ttdeci">void send_transmission_control_protocol_packet(TCPSocket *socket, const uint8_t *data, uint16_t size, uint16_t flags=0)</div><div class="ttdoc">send a packet (Throught the provider)</div><div class="ttdef"><b>Definition</b> <a href="tcp_8cpp_source.html#l00420">tcp.cpp:420</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1net_1_1TransmissionControlProtocolHandler_html_aaadd6c0738e70542d1a64ce9671a67c3"><div class="ttname"><a href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#aaadd6c0738e70542d1a64ce9671a67c3">MaxOS::net::TransmissionControlProtocolHandler::sockets</a></div><div class="ttdeci">common::Vector&lt; TCPSocket * &gt; sockets</div><div class="ttdoc">The list of connected sockets.</div><div class="ttdef"><b>Definition</b> <a href="tcp_8h_source.html#l00211">tcp.h:211</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tcp_8h_source.html#l00213">free_ports</a>, <a class="el" href="ipv4_8cpp_source.html#l00345">MaxOS::net::InternetProtocolHandler::get_internet_protocol_address()</a>, <a class="el" href="ipv4_8h_source.html#l00070">MaxOS::net::IPV4PayloadHandler::internet_protocol_handler</a>, <a class="el" href="memorymanagement_8cpp_source.html#l00085">MaxOS::memory::MemoryManager::kmalloc()</a>, <a class="el" href="tcp_8h_source.html#l00180">MaxOS::net::TCPSocket::remotePort</a>, <a class="el" href="tcp_8cpp_source.html#l00420">send_transmission_control_protocol_packet()</a>, and <a class="el" href="tcp_8h_source.html#l00211">sockets</a>.</p>

</div>
</div>
<a id="a05e8270d3bd4760d9ea7a376d4df2c2e" name="a05e8270d3bd4760d9ea7a376d4df2c2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05e8270d3bd4760d9ea7a376d4df2c2e">&#9670;&#160;</a></span>disconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a> TransmissionControlProtocolHandler::disconnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a> *&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Begin the disconnect process. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>The socket to disconnect </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="tcp_8cpp_source.html#l00537">537</a> of file <a class="el" href="tcp_8cpp_source.html">tcp.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  537</span>                                                                     {</div>
<div class="line"><span class="lineno">  538</span> </div>
<div class="line"><span class="lineno">  539</span>    socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">state</a> = TCPSocketState::FIN_WAIT1;                            <span class="comment">//Begin fin wait sequence</span></div>
<div class="line"><span class="lineno">  540</span>    <a class="code hl_function" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#aa36ce39675e78cfdb78af499fd0f199c">send_transmission_control_protocol_packet</a>(socket, <span class="keyword">nullptr</span>, 0, (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::FIN +</div>
<div class="line"><span class="lineno">  541</span>                                                                  (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::ACK);            <span class="comment">//Send FIN|ACK packet</span></div>
<div class="line"><span class="lineno">  542</span>    socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9a1f2021e126ced4b67b154e8799c2f">sequence_number</a>++;                             <span class="comment">//Increase the sequence number</span></div>
<div class="line"><span class="lineno">  543</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1net_1_1TCPSocket_html_af9a1f2021e126ced4b67b154e8799c2f"><div class="ttname"><a href="classMaxOS_1_1net_1_1TCPSocket.html#af9a1f2021e126ced4b67b154e8799c2f">MaxOS::net::TCPSocket::sequence_number</a></div><div class="ttdeci">uint32_t sequence_number</div><div class="ttdoc">The current order number of the data being sent.</div><div class="ttdef"><b>Definition</b> <a href="tcp_8h_source.html#l00184">tcp.h:184</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1net_1_1TCPSocket_html_af9dacfd09129cfbe56bc609b360c6a49"><div class="ttname"><a href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">MaxOS::net::TCPSocket::state</a></div><div class="ttdeci">TCPSocketState state</div><div class="ttdoc">The state of the socket.</div><div class="ttdef"><b>Definition</b> <a href="tcp_8h_source.html#l00188">tcp.h:188</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tcp_8cpp_source.html#l00420">send_transmission_control_protocol_packet()</a>, <a class="el" href="tcp_8h_source.html#l00184">MaxOS::net::TCPSocket::sequence_number</a>, and <a class="el" href="tcp_8h_source.html#l00188">MaxOS::net::TCPSocket::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="tcp_8cpp_source.html#l00126">MaxOS::net::TCPSocket::disconnect()</a>.</p>

</div>
</div>
<a id="aa77ef10c38219f461db44ebbd91285e8" name="aa77ef10c38219f461db44ebbd91285e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa77ef10c38219f461db44ebbd91285e8">&#9670;&#160;</a></span>handle_internet_protocol_payload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">bool</a> TransmissionControlProtocolHandler::handle_internet_protocol_payload </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ipv4_8h.html#af037c025feb88b952b167f4dfa2709a0">net::InternetProtocolAddress</a>&#160;</td>
          <td class="paramname"><em>source_ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ipv4_8h.html#af037c025feb88b952b167f4dfa2709a0">net::InternetProtocolAddress</a>&#160;</td>
          <td class="paramname"><em>destination_ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>payload_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle the TCP message (provider end) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source_ip</td><td>The source IP address </td></tr>
    <tr><td class="paramname">destination_ip</td><td>The destination IP address </td></tr>
    <tr><td class="paramname">payload_data</td><td>The payload </td></tr>
    <tr><td class="paramname">size</td><td>The size of the payload </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if data is to be sent back or false if not </dd></dl>

<p>Reimplemented from <a class="el" href="classMaxOS_1_1net_1_1IPV4PayloadHandler.html#a0a77f0da7508cabc239b0f7830ef03dc">MaxOS::net::IPV4PayloadHandler</a>.</p>

<p class="definition">Definition at line <a class="el" href="tcp_8cpp_source.html#l00201">201</a> of file <a class="el" href="tcp_8cpp_source.html">tcp.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  201</span>                                                                                                                                                                                               {</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>    <a class="code hl_variable" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#a43f0d010c804b9d6f4e2b3f554710542">error_messages</a>-&gt;<a class="code hl_function" href="classMaxOS_1_1common_1_1OutputStream.html#acd9ebbe1729dded0d4156f32ae77da95">write</a>(<span class="stringliteral">&quot;TCP: Handling TCP message\n&quot;</span>);</div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span>    <span class="comment">//Check if the size is too small</span></div>
<div class="line"><span class="lineno">  206</span>    <span class="keywordflow">if</span>(size &lt; 13) {</div>
<div class="line"><span class="lineno">  207</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  208</span>    }</div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span>    <span class="comment">// If it&#39;s smaller than the header, return</span></div>
<div class="line"><span class="lineno">  211</span>    <span class="keywordflow">if</span>(size &lt; 4 * <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">payload_data</a>[12] / 16)             <span class="comment">// The lower 4 bits of the 13th byte is the header length</span></div>
<div class="line"><span class="lineno">  212</span>    {</div>
<div class="line"><span class="lineno">  213</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  214</span>    }</div>
<div class="line"><span class="lineno">  215</span> </div>
<div class="line"><span class="lineno">  216</span>    <span class="comment">//Get the header</span></div>
<div class="line"><span class="lineno">  217</span>    <span class="keyword">auto</span>* <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a> = (<a class="code hl_struct" href="structMaxOS_1_1net_1_1TCPHeader.html">TCPHeader</a>*) <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">payload_data</a>;</div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span>    <span class="comment">//Get the connection values (convert to host endian)</span></div>
<div class="line"><span class="lineno">  220</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a> local_port = <a class="code hl_function" href="tcp_8cpp.html#a339e1cc9d99849738d58f03652283406">big_endian_16</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;dst_port);</div>
<div class="line"><span class="lineno">  221</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a> remote_port = <a class="code hl_function" href="tcp_8cpp.html#a339e1cc9d99849738d58f03652283406">big_endian_16</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;src_port);</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>    <span class="comment">//Create the socket</span></div>
<div class="line"><span class="lineno">  224</span>    <a class="code hl_class" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a>* socket = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>    <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">current_socket</a> : <a class="code hl_variable" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#aaadd6c0738e70542d1a64ce9671a67c3">sockets</a>) {</div>
<div class="line"><span class="lineno">  227</span>        <span class="keywordflow">if</span>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">current_socket</a>-&gt;local_port ==</div>
<div class="line"><span class="lineno">  228</span>           local_port                               <span class="comment">//Check if the local port is the same as the destination port</span></div>
<div class="line"><span class="lineno">  229</span>           &amp;&amp; <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">current_socket</a>-&gt;local_ip ==</div>
<div class="line"><span class="lineno">  230</span>              destination_ip                                  <span class="comment">//Check if the local IP is the same as the destination IP</span></div>
<div class="line"><span class="lineno">  231</span>           &amp;&amp; <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">current_socket</a>-&gt;state ==</div>
<div class="line"><span class="lineno">  232</span>              TCPSocketState::LISTEN                                           <span class="comment">//Check if the socket is in the LISTEN state</span></div>
<div class="line"><span class="lineno">  233</span>           &amp;&amp; (((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;flags) &amp; ((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::SYN | (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::ACK)) ==</div>
<div class="line"><span class="lineno">  234</span>               (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::SYN))                                       <span class="comment">//Check if the SYN flag is set (allow for acknoweldgement)</span></div>
<div class="line"><span class="lineno">  235</span>        {</div>
<div class="line"><span class="lineno">  236</span>            socket = <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">current_socket</a>;</div>
<div class="line"><span class="lineno">  237</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">current_socket</a>-&gt;local_port ==</div>
<div class="line"><span class="lineno">  238</span>                  local_port                          <span class="comment">//Check if the local port is the same as the destination port</span></div>
<div class="line"><span class="lineno">  239</span>                  &amp;&amp; <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">current_socket</a>-&gt;local_ip ==</div>
<div class="line"><span class="lineno">  240</span>                     destination_ip                             <span class="comment">//Check if the local IP is the same as the destination IP</span></div>
<div class="line"><span class="lineno">  241</span>                  &amp;&amp; <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">current_socket</a>-&gt;remotePort ==</div>
<div class="line"><span class="lineno">  242</span>                     remote_port                         <span class="comment">//Check if the remote port is the same as the source port</span></div>
<div class="line"><span class="lineno">  243</span>                  &amp;&amp; <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">current_socket</a>-&gt;remote_ip ==</div>
<div class="line"><span class="lineno">  244</span>                     destination_ip)                           <span class="comment">//Check if the remote IP is the same as the source IP</span></div>
<div class="line"><span class="lineno">  245</span>        {</div>
<div class="line"><span class="lineno">  246</span>            socket = <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">current_socket</a>;</div>
<div class="line"><span class="lineno">  247</span>        }</div>
<div class="line"><span class="lineno">  248</span>    }</div>
<div class="line"><span class="lineno">  249</span> </div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>    <span class="keywordtype">bool</span> reset = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  252</span> </div>
<div class="line"><span class="lineno">  253</span>    <span class="comment">//Check if the socket is found and if the socket wants to reset</span></div>
<div class="line"><span class="lineno">  254</span>    <span class="keywordflow">if</span>(socket != <span class="keyword">nullptr</span> &amp;&amp; <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;flags &amp; (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::RST) {</div>
<div class="line"><span class="lineno">  255</span>        socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">state</a> = TCPSocketState::CLOSED;</div>
<div class="line"><span class="lineno">  256</span>        socket-&gt;<a class="code hl_function" href="classMaxOS_1_1net_1_1TCPSocket.html#a6b59f8dc3f1b9b7f7b0fc3bbab2d9612">disconnected</a>();</div>
<div class="line"><span class="lineno">  257</span>    }</div>
<div class="line"><span class="lineno">  258</span> </div>
<div class="line"><span class="lineno">  259</span>    <span class="comment">//Check if the socket is found and if the socket is not closed</span></div>
<div class="line"><span class="lineno">  260</span>    <span class="keywordflow">if</span>(socket != <span class="keyword">nullptr</span> &amp;&amp; socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">state</a> != TCPSocketState::CLOSED) {</div>
<div class="line"><span class="lineno">  261</span>        <span class="keywordflow">switch</span>((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;flags) &amp; ((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::SYN | (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::ACK | (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::FIN)) {</div>
<div class="line"><span class="lineno">  262</span>            <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  263</span><span class="comment">             * Example for explanation:</span></div>
<div class="line"><span class="lineno">  264</span><span class="comment">             * socket -&gt; state = SYN_RECEIVED;                                                  //The state of the socket, e.g. recieved, or established. This is used to know how to handle the socket</span></div>
<div class="line"><span class="lineno">  265</span><span class="comment">             * socket -&gt; remotePort = msg -&gt; srcPort;                                           //The remote port, e.g. the port of the server</span></div>
<div class="line"><span class="lineno">  266</span><span class="comment">             * socket -&gt; remoteIP = srcIP_BE;                                                   //The remote IP, e.g. the IP of the server</span></div>
<div class="line"><span class="lineno">  267</span><span class="comment">             * socket -&gt; acknowledgementNumber = bigEndian32( msg -&gt; sequenceNumber ) + 1;      //The acknowledgement number, the number used to keep track of what has been received, this is just incremented by 1 each time</span></div>
<div class="line"><span class="lineno">  268</span><span class="comment">             * socket -&gt; sequenceNumber = 0xbeefcafe;                                           //The sequence number, the number of the next set that is to be sent but in this case sequence isn&#39;t enabled so just set it to anything</span></div>
<div class="line"><span class="lineno">  269</span><span class="comment">             * Send(socket, 0,0, SYN|ACK);                                                      //The response command, genneraly has to have the acknoledgement flag set</span></div>
<div class="line"><span class="lineno">  270</span><span class="comment">             * socket -&gt; sequenceNumber++;                                                      //Increment the sequence number</span></div>
<div class="line"><span class="lineno">  271</span><span class="comment">             *</span></div>
<div class="line"><span class="lineno">  272</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span>            <span class="keywordflow">case</span> (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::SYN:</div>
<div class="line"><span class="lineno">  275</span>                <span class="keywordflow">if</span>(socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">state</a> == TCPSocketState::LISTEN) {</div>
<div class="line"><span class="lineno">  276</span>                    socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">state</a> = TCPSocketState::SYN_RECEIVED;</div>
<div class="line"><span class="lineno">  277</span>                    socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#adeb2aa58fa3d47d883e266317610c855">remotePort</a> = <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;src_port;</div>
<div class="line"><span class="lineno">  278</span>                    socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#afb4e9799f59d0e16cd966d4ce6493e0d">remote_ip</a> = source_ip;</div>
<div class="line"><span class="lineno">  279</span>                    socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#a1ab7adf6a7479d7550aaea4a573df281">acknowledgement_number</a> = <a class="code hl_function" href="tcp_8cpp.html#a0203af2bf712e94d26f4eaa9bd39afa8">big_endian_32</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;sequence_number) + 1;</div>
<div class="line"><span class="lineno">  280</span>                    socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9a1f2021e126ced4b67b154e8799c2f">sequence_number</a> = 0xbeefcafe;</div>
<div class="line"><span class="lineno">  281</span>                    <a class="code hl_function" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#aa36ce39675e78cfdb78af499fd0f199c">send_transmission_control_protocol_packet</a>(socket, <span class="keyword">nullptr</span>, 0,</div>
<div class="line"><span class="lineno">  282</span>                                                              (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::SYN | (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::ACK);</div>
<div class="line"><span class="lineno">  283</span>                    socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9a1f2021e126ced4b67b154e8799c2f">sequence_number</a>++;</div>
<div class="line"><span class="lineno">  284</span>                } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  285</span>                    reset = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  286</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  287</span> </div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  289</span>            <span class="keywordflow">case</span> (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::SYN | (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::ACK:</div>
<div class="line"><span class="lineno">  290</span>                <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">if</a>(socket-&gt;state == <a class="code hl_enumeration" href="tcp_8h.html#aef1bb382dd5d6cdaecb7ffe20b234a44">TCPSocketState</a>::SYN_SENT) {</div>
<div class="line"><span class="lineno">  291</span>                    socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">state</a> = TCPSocketState::ESTABLISHED;</div>
<div class="line"><span class="lineno">  292</span>                    socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#a1ab7adf6a7479d7550aaea4a573df281">acknowledgement_number</a> = <a class="code hl_function" href="tcp_8cpp.html#a0203af2bf712e94d26f4eaa9bd39afa8">big_endian_32</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;sequence_number) + 1;</div>
<div class="line"><span class="lineno">  293</span>                    socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9a1f2021e126ced4b67b154e8799c2f">sequence_number</a>++;</div>
<div class="line"><span class="lineno">  294</span>                    <a class="code hl_function" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#aa36ce39675e78cfdb78af499fd0f199c">send_transmission_control_protocol_packet</a>(socket, <span class="keyword">nullptr</span>, 0, (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::ACK);</div>
<div class="line"><span class="lineno">  295</span>                } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  296</span>                    reset = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  297</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  298</span> </div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>            <span class="keywordflow">case</span> (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::SYN | (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::FIN:</div>
<div class="line"><span class="lineno">  301</span>            <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">case</a> (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) <a class="code hl_enumeration" href="tcp_8h.html#ab016e1ccae4de3d81a67e8eeef0ba1f5">TCPFlag</a>::SYN | (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) <a class="code hl_enumeration" href="tcp_8h.html#ab016e1ccae4de3d81a67e8eeef0ba1f5">TCPFlag</a>::FIN | (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) <a class="code hl_enumeration" href="tcp_8h.html#ab016e1ccae4de3d81a67e8eeef0ba1f5">TCPFlag</a>::ACK:</div>
<div class="line"><span class="lineno">  302</span>                reset = <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">true</a>;</div>
<div class="line"><span class="lineno">  303</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span>            <span class="keywordflow">case</span> (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::FIN:</div>
<div class="line"><span class="lineno">  307</span>            <span class="keywordflow">case</span> (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::FIN | (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::ACK:</div>
<div class="line"><span class="lineno">  308</span>                <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">if</a>(socket-&gt;state == <a class="code hl_enumeration" href="tcp_8h.html#aef1bb382dd5d6cdaecb7ffe20b234a44">TCPSocketState</a>::ESTABLISHED) {</div>
<div class="line"><span class="lineno">  309</span>                    socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">state</a> = TCPSocketState::CLOSE_WAIT;</div>
<div class="line"><span class="lineno">  310</span>                    socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#a1ab7adf6a7479d7550aaea4a573df281">acknowledgement_number</a>++;</div>
<div class="line"><span class="lineno">  311</span>                    <a class="code hl_function" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#aa36ce39675e78cfdb78af499fd0f199c">send_transmission_control_protocol_packet</a>(socket, <span class="keyword">nullptr</span>, 0, (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::ACK);</div>
<div class="line"><span class="lineno">  312</span>                    <a class="code hl_function" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#aa36ce39675e78cfdb78af499fd0f199c">send_transmission_control_protocol_packet</a>(socket, <span class="keyword">nullptr</span>, 0,</div>
<div class="line"><span class="lineno">  313</span>                                                              (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::FIN | (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::ACK);</div>
<div class="line"><span class="lineno">  314</span>                    socket-&gt;<a class="code hl_function" href="classMaxOS_1_1net_1_1TCPSocket.html#a6b59f8dc3f1b9b7f7b0fc3bbab2d9612">disconnected</a>();</div>
<div class="line"><span class="lineno">  315</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">state</a> == TCPSocketState::CLOSE_WAIT) {</div>
<div class="line"><span class="lineno">  316</span>                    socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">state</a> = TCPSocketState::CLOSED;</div>
<div class="line"><span class="lineno">  317</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">state</a> == TCPSocketState::FIN_WAIT1 || socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">state</a> == TCPSocketState::FIN_WAIT2) {</div>
<div class="line"><span class="lineno">  318</span>                    socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">state</a> = TCPSocketState::CLOSED;</div>
<div class="line"><span class="lineno">  319</span>                    socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#a1ab7adf6a7479d7550aaea4a573df281">acknowledgement_number</a>++;</div>
<div class="line"><span class="lineno">  320</span>                    <a class="code hl_function" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#aa36ce39675e78cfdb78af499fd0f199c">send_transmission_control_protocol_packet</a>(socket, <span class="keyword">nullptr</span>, 0, (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::ACK);</div>
<div class="line"><span class="lineno">  321</span>                    socket-&gt;<a class="code hl_function" href="classMaxOS_1_1net_1_1TCPSocket.html#a6b59f8dc3f1b9b7f7b0fc3bbab2d9612">disconnected</a>();</div>
<div class="line"><span class="lineno">  322</span>                } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  323</span>                    reset = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  324</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  325</span> </div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>            <span class="keywordflow">case</span> (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::ACK:</div>
<div class="line"><span class="lineno">  328</span>                <span class="keywordflow">if</span>(socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">state</a> == TCPSocketState::SYN_RECEIVED) {</div>
<div class="line"><span class="lineno">  329</span>                    socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">state</a> = TCPSocketState::ESTABLISHED;</div>
<div class="line"><span class="lineno">  330</span>                    socket-&gt;<a class="code hl_function" href="classMaxOS_1_1net_1_1TCPSocket.html#aaab5cde27d47885bd7f0579ca6bc8f52">connected</a>();</div>
<div class="line"><span class="lineno">  331</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  332</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">state</a> == TCPSocketState::FIN_WAIT1) {</div>
<div class="line"><span class="lineno">  333</span>                    socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">state</a> = TCPSocketState::FIN_WAIT2;</div>
<div class="line"><span class="lineno">  334</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  335</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">state</a> == TCPSocketState::CLOSE_WAIT) {</div>
<div class="line"><span class="lineno">  336</span>                    socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">state</a> = TCPSocketState::CLOSED;</div>
<div class="line"><span class="lineno">  337</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  338</span>                }</div>
<div class="line"><span class="lineno">  339</span> </div>
<div class="line"><span class="lineno">  340</span>                <span class="keywordflow">if</span>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;flags == (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::ACK)</div>
<div class="line"><span class="lineno">  341</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  342</span> </div>
<div class="line"><span class="lineno">  343</span>                <span class="comment">// no break, because of piggybacking</span></div>
<div class="line"><span class="lineno">  344</span>                [[<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">fallthrough</a>]];</div>
<div class="line"><span class="lineno">  345</span> </div>
<div class="line"><span class="lineno">  346</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  347</span> </div>
<div class="line"><span class="lineno">  348</span>                <span class="comment">// By default, handle the data</span></div>
<div class="line"><span class="lineno">  349</span> </div>
<div class="line"><span class="lineno">  350</span>                <span class="keywordflow">if</span>(<a class="code hl_function" href="tcp_8cpp.html#a0203af2bf712e94d26f4eaa9bd39afa8">big_endian_32</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;sequence_number) == socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#a1ab7adf6a7479d7550aaea4a573df281">acknowledgement_number</a>) {</div>
<div class="line"><span class="lineno">  351</span> </div>
<div class="line"><span class="lineno">  352</span>                    reset = !(socket-&gt;<a class="code hl_function" href="classMaxOS_1_1net_1_1TCPSocket.html#aa41244f91235ac322e493b468c1a5bc9">handle_transmission_control_protocol_payload</a>(</div>
<div class="line"><span class="lineno">  353</span>                            <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">payload_data</a> + <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;header_size_32 * 4,</div>
<div class="line"><span class="lineno">  354</span>                            size - <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;header_size_32 * 4));</div>
<div class="line"><span class="lineno">  355</span>                    <span class="keywordflow">if</span>(!reset) {</div>
<div class="line"><span class="lineno">  356</span>                        <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> x = 0;                                                                      <span class="comment">//The number of bytes to send back</span></div>
<div class="line"><span class="lineno">  357</span>                        <span class="keywordflow">for</span>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint32_t</a> i = <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;header_size_32 * 4;</div>
<div class="line"><span class="lineno">  358</span>                            i &lt; size; i++)                          <span class="comment">//Loop through the data</span></div>
<div class="line"><span class="lineno">  359</span>                            <span class="keywordflow">if</span>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">payload_data</a>[i] !=</div>
<div class="line"><span class="lineno">  360</span>                               0)                                                     <span class="comment">//Check if the data is not 0</span></div>
<div class="line"><span class="lineno">  361</span>                                x = i;                                                                  <span class="comment">//Set the number of bytes to send back to the current index</span></div>
<div class="line"><span class="lineno">  362</span>                        socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#a1ab7adf6a7479d7550aaea4a573df281">acknowledgement_number</a> += x - <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;header_size_32 * 4 +</div>
<div class="line"><span class="lineno">  363</span>                                                          1;               <span class="comment">//Increment the acknowledgement number by the number of bytes to send back</span></div>
<div class="line"><span class="lineno">  364</span>                        <a class="code hl_function" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#aa36ce39675e78cfdb78af499fd0f199c">send_transmission_control_protocol_packet</a>(socket, <span class="keyword">nullptr</span>, 0,</div>
<div class="line"><span class="lineno">  365</span>                                                                  (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::ACK);                                          <span class="comment">//Send the acknowledgement</span></div>
<div class="line"><span class="lineno">  366</span>                    }</div>
<div class="line"><span class="lineno">  367</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  368</span>                    <span class="comment">// data in wrong order</span></div>
<div class="line"><span class="lineno">  369</span>                    reset = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  370</span>                }</div>
<div class="line"><span class="lineno">  371</span> </div>
<div class="line"><span class="lineno">  372</span>        }</div>
<div class="line"><span class="lineno">  373</span>    }</div>
<div class="line"><span class="lineno">  374</span> </div>
<div class="line"><span class="lineno">  375</span> </div>
<div class="line"><span class="lineno">  376</span>    <span class="keywordflow">if</span>(reset)                                                                       <span class="comment">//If the socket is to be reset</span></div>
<div class="line"><span class="lineno">  377</span>    {</div>
<div class="line"><span class="lineno">  378</span>        <span class="keywordflow">if</span>(socket !=</div>
<div class="line"><span class="lineno">  379</span>           <span class="keyword">nullptr</span>)                                                             <span class="comment">//If the socket exists then send a reset flag</span></div>
<div class="line"><span class="lineno">  380</span>        {</div>
<div class="line"><span class="lineno">  381</span>            <a class="code hl_function" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#aa36ce39675e78cfdb78af499fd0f199c">send_transmission_control_protocol_packet</a>(socket, <span class="keyword">nullptr</span>, 0, (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::RST);</div>
<div class="line"><span class="lineno">  382</span>        } <span class="keywordflow">else</span>                                                                        <span class="comment">//If it doesn&#39;t exist then create a new socket and send a reset flag</span></div>
<div class="line"><span class="lineno">  383</span>        {</div>
<div class="line"><span class="lineno">  384</span>            <a class="code hl_class" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">new_socket</a>(<span class="keyword">this</span>);                     <span class="comment">//Create a new socket</span></div>
<div class="line"><span class="lineno">  385</span>            <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">new_socket</a>.remotePort = <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;src_port;                                         <span class="comment">//Set the remote port</span></div>
<div class="line"><span class="lineno">  386</span>            <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">new_socket</a>.remote_ip = source_ip;                                                 <span class="comment">//Set the remote IP</span></div>
<div class="line"><span class="lineno">  387</span>            <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">new_socket</a>.local_port = <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;dst_port;                                                  <span class="comment">//Set the local port</span></div>
<div class="line"><span class="lineno">  388</span>            <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">new_socket</a>.local_ip = destination_ip;                                                     <span class="comment">//Set the local IP</span></div>
<div class="line"><span class="lineno">  389</span>            <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">new_socket</a>.sequence_number = <a class="code hl_function" href="tcp_8cpp.html#a0203af2bf712e94d26f4eaa9bd39afa8">big_endian_32</a>(</div>
<div class="line"><span class="lineno">  390</span>                    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;acknowledgement_number);              <span class="comment">//Set the sequence number</span></div>
<div class="line"><span class="lineno">  391</span>            <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">new_socket</a>.acknowledgement_number =</div>
<div class="line"><span class="lineno">  392</span>                    <a class="code hl_function" href="tcp_8cpp.html#a0203af2bf712e94d26f4eaa9bd39afa8">big_endian_32</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;sequence_number) + 1;          <span class="comment">//Set the acknowledgement number</span></div>
<div class="line"><span class="lineno">  393</span>            <a class="code hl_function" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#aa36ce39675e78cfdb78af499fd0f199c">send_transmission_control_protocol_packet</a>(&amp;<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">new_socket</a>, <span class="keyword">nullptr</span>, 0,</div>
<div class="line"><span class="lineno">  394</span>                                                      (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::RST);          <span class="comment">//Send the reset flag</span></div>
<div class="line"><span class="lineno">  395</span>        }</div>
<div class="line"><span class="lineno">  396</span>    }</div>
<div class="line"><span class="lineno">  397</span> </div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>    <a class="code hl_variable" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#a43f0d010c804b9d6f4e2b3f554710542">error_messages</a>-&gt;<a class="code hl_function" href="classMaxOS_1_1common_1_1OutputStream.html#acd9ebbe1729dded0d4156f32ae77da95">write</a>(<span class="stringliteral">&quot;TCP: Handled packet\n&quot;</span>);</div>
<div class="line"><span class="lineno">  400</span> </div>
<div class="line"><span class="lineno">  401</span>    <span class="keywordflow">if</span>(socket != <span class="keyword">nullptr</span> &amp;&amp; socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">state</a> ==</div>
<div class="line"><span class="lineno">  402</span>                            TCPSocketState::CLOSED)                                        <span class="comment">//If the socket is closed then remove it from the list</span></div>
<div class="line"><span class="lineno">  403</span>    {</div>
<div class="line"><span class="lineno">  404</span>        <a class="code hl_variable" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#aaadd6c0738e70542d1a64ce9671a67c3">sockets</a>.erase(socket);</div>
<div class="line"><span class="lineno">  405</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  406</span>    }</div>
<div class="line"><span class="lineno">  407</span> </div>
<div class="line"><span class="lineno">  408</span> </div>
<div class="line"><span class="lineno">  409</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  410</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1common_1_1OutputStream_html_acd9ebbe1729dded0d4156f32ae77da95"><div class="ttname"><a href="classMaxOS_1_1common_1_1OutputStream.html#acd9ebbe1729dded0d4156f32ae77da95">MaxOS::common::OutputStream::write</a></div><div class="ttdeci">void write(string string_to_write) override</div><div class="ttdoc">Writes a string to the output stream.</div><div class="ttdef"><b>Definition</b> <a href="outputStream_8cpp_source.html#l00056">outputStream.cpp:56</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1net_1_1TCPSocket_html_a1ab7adf6a7479d7550aaea4a573df281"><div class="ttname"><a href="classMaxOS_1_1net_1_1TCPSocket.html#a1ab7adf6a7479d7550aaea4a573df281">MaxOS::net::TCPSocket::acknowledgement_number</a></div><div class="ttdeci">uint32_t acknowledgement_number</div><div class="ttdoc">The number used to keep track of what has been received, incremented by 1 each time.</div><div class="ttdef"><b>Definition</b> <a href="tcp_8h_source.html#l00185">tcp.h:185</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1net_1_1TCPSocket_html_a6b59f8dc3f1b9b7f7b0fc3bbab2d9612"><div class="ttname"><a href="classMaxOS_1_1net_1_1TCPSocket.html#a6b59f8dc3f1b9b7f7b0fc3bbab2d9612">MaxOS::net::TCPSocket::disconnected</a></div><div class="ttdeci">void disconnected()</div><div class="ttdoc">Raise the disconnected event.</div><div class="ttdef"><b>Definition</b> <a href="tcp_8cpp_source.html#l00133">tcp.cpp:133</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1net_1_1TCPSocket_html_aa41244f91235ac322e493b468c1a5bc9"><div class="ttname"><a href="classMaxOS_1_1net_1_1TCPSocket.html#aa41244f91235ac322e493b468c1a5bc9">MaxOS::net::TCPSocket::handle_transmission_control_protocol_payload</a></div><div class="ttdeci">bool handle_transmission_control_protocol_payload(uint8_t *data, uint16_t size)</div><div class="ttdoc">Handle the TCP message (socket end)</div><div class="ttdef"><b>Definition</b> <a href="tcp_8cpp_source.html#l00100">tcp.cpp:100</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1net_1_1TCPSocket_html_aaab5cde27d47885bd7f0579ca6bc8f52"><div class="ttname"><a href="classMaxOS_1_1net_1_1TCPSocket.html#aaab5cde27d47885bd7f0579ca6bc8f52">MaxOS::net::TCPSocket::connected</a></div><div class="ttdeci">void connected()</div><div class="ttdoc">Raise the connected event.</div><div class="ttdef"><b>Definition</b> <a href="tcp_8cpp_source.html#l00143">tcp.cpp:143</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1net_1_1TCPSocket_html_afb4e9799f59d0e16cd966d4ce6493e0d"><div class="ttname"><a href="classMaxOS_1_1net_1_1TCPSocket.html#afb4e9799f59d0e16cd966d4ce6493e0d">MaxOS::net::TCPSocket::remote_ip</a></div><div class="ttdeci">uint32_t remote_ip</div><div class="ttdoc">The IP address of the external device.</div><div class="ttdef"><b>Definition</b> <a href="tcp_8h_source.html#l00181">tcp.h:181</a></div></div>
<div class="ttc" id="astructMaxOS_1_1net_1_1TCPHeader_html"><div class="ttname"><a href="structMaxOS_1_1net_1_1TCPHeader.html">MaxOS::net::TCPHeader</a></div><div class="ttdoc">The header of a TCP packet.</div><div class="ttdef"><b>Definition</b> <a href="tcp_8h_source.html#l00065">tcp.h:65</a></div></div>
<div class="ttc" id="atcp_8cpp_html_a0203af2bf712e94d26f4eaa9bd39afa8"><div class="ttname"><a href="tcp_8cpp.html#a0203af2bf712e94d26f4eaa9bd39afa8">big_endian_32</a></div><div class="ttdeci">uint32_t big_endian_32(uint32_t x)</div><div class="ttdoc">Convert a 32-bit integer to big-endian format.</div><div class="ttdef"><b>Definition</b> <a href="tcp_8cpp_source.html#l00174">tcp.cpp:174</a></div></div>
<div class="ttc" id="atcp_8cpp_html_a339e1cc9d99849738d58f03652283406"><div class="ttname"><a href="tcp_8cpp.html#a339e1cc9d99849738d58f03652283406">big_endian_16</a></div><div class="ttdeci">uint32_t big_endian_16(uint16_t x)</div><div class="ttdoc">Convert a 16-bit integer to big-endian format.</div><div class="ttdef"><b>Definition</b> <a href="tcp_8cpp_source.html#l00187">tcp.cpp:187</a></div></div>
<div class="ttc" id="atcp_8h_html_ab016e1ccae4de3d81a67e8eeef0ba1f5"><div class="ttname"><a href="tcp_8h.html#ab016e1ccae4de3d81a67e8eeef0ba1f5">MaxOS::net::TCPFlag</a></div><div class="ttdeci">TCPFlag</div><div class="ttdoc">The flags in a TCP header.</div><div class="ttdef"><b>Definition</b> <a href="tcp_8h_source.html#l00046">tcp.h:46</a></div></div>
<div class="ttc" id="atcp_8h_html_aef1bb382dd5d6cdaecb7ffe20b234a44"><div class="ttname"><a href="tcp_8h.html#aef1bb382dd5d6cdaecb7ffe20b234a44">MaxOS::net::TCPSocketState</a></div><div class="ttdeci">TCPSocketState</div><div class="ttdoc">The state of a TCP socket.</div><div class="ttdef"><b>Definition</b> <a href="tcp_8h_source.html#l00025">tcp.h:25</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tcp_8h_source.html#l00185">MaxOS::net::TCPSocket::acknowledgement_number</a>, <a class="el" href="tcp_8cpp_source.html#l00187">big_endian_16()</a>, <a class="el" href="tcp_8cpp_source.html#l00174">big_endian_32()</a>, <a class="el" href="tcp_8cpp_source.html#l00143">MaxOS::net::TCPSocket::connected()</a>, <a class="el" href="tcp_8cpp_source.html#l00133">MaxOS::net::TCPSocket::disconnected()</a>, <a class="el" href="tcp_8h_source.html#l00210">error_messages</a>, <a class="el" href="tcp_8cpp_source.html#l00100">MaxOS::net::TCPSocket::handle_transmission_control_protocol_payload()</a>, <a class="el" href="tcp_8h_source.html#l00181">MaxOS::net::TCPSocket::remote_ip</a>, <a class="el" href="tcp_8h_source.html#l00180">MaxOS::net::TCPSocket::remotePort</a>, <a class="el" href="tcp_8cpp_source.html#l00420">send_transmission_control_protocol_packet()</a>, <a class="el" href="tcp_8h_source.html#l00184">MaxOS::net::TCPSocket::sequence_number</a>, <a class="el" href="tcp_8h_source.html#l00211">sockets</a>, <a class="el" href="tcp_8h_source.html#l00188">MaxOS::net::TCPSocket::state</a>, and <a class="el" href="outputStream_8cpp_source.html#l00056">MaxOS::common::OutputStream::write()</a>.</p>

</div>
</div>
<a id="ab25c60d5a4f734584c2dc22e178c9629" name="ab25c60d5a4f734584c2dc22e178c9629"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab25c60d5a4f734584c2dc22e178c9629">&#9670;&#160;</a></span>listen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a> * TransmissionControlProtocolHandler::listen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Begin listening on a port. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>The port to listen on </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The socket that will handle the connection </dd></dl>

<p class="definition">Definition at line <a class="el" href="tcp_8cpp_source.html#l00551">551</a> of file <a class="el" href="tcp_8cpp_source.html">tcp.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  551</span>                                                                   {</div>
<div class="line"><span class="lineno">  552</span>    <span class="comment">//Create a new socket</span></div>
<div class="line"><span class="lineno">  553</span>    <span class="keyword">auto</span>* socket = (<a class="code hl_class" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a>*) <a class="code hl_function" href="classMaxOS_1_1memory_1_1MemoryManager.html#a983c849ff604367f7c8a0e70172bb331">MemoryManager::kmalloc</a>(</div>
<div class="line"><span class="lineno">  554</span>            <span class="keyword">sizeof</span>(<a class="code hl_class" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a>));</div>
<div class="line"><span class="lineno">  555</span> </div>
<div class="line"><span class="lineno">  556</span>    <span class="comment">//If there is space for the socket</span></div>
<div class="line"><span class="lineno">  557</span>    <span class="keywordflow">if</span>(socket != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  558</span>        <span class="comment">//Set the socket</span></div>
<div class="line"><span class="lineno">  559</span>        <span class="keyword">new</span>(socket) <a class="code hl_class" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  560</span> </div>
<div class="line"><span class="lineno">  561</span>        <span class="comment">//Configure the socket</span></div>
<div class="line"><span class="lineno">  562</span>        socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9dacfd09129cfbe56bc609b360c6a49">state</a> = TCPSocketState::LISTEN;</div>
<div class="line"><span class="lineno">  563</span>        socket-&gt;local_ip = <a class="code hl_variable" href="classMaxOS_1_1net_1_1IPV4PayloadHandler.html#a8f837ba5e88224d46e5653239ffed050">internet_protocol_handler</a>-&gt;<a class="code hl_function" href="classMaxOS_1_1net_1_1InternetProtocolHandler.html#a1c7b476a4ff9f946407a44be120871da">get_internet_protocol_address</a>();</div>
<div class="line"><span class="lineno">  564</span>        socket-&gt;local_port = ((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">port</a> &amp; 0xFF00) &gt;&gt; 8) | ((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">port</a> &amp; 0x00FF) &lt;&lt; 8);</div>
<div class="line"><span class="lineno">  565</span> </div>
<div class="line"><span class="lineno">  566</span>        <span class="comment">//Add the socket to the socket array</span></div>
<div class="line"><span class="lineno">  567</span>        <a class="code hl_variable" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html#aaadd6c0738e70542d1a64ce9671a67c3">sockets</a>.push_back(socket);</div>
<div class="line"><span class="lineno">  568</span>    }</div>
<div class="line"><span class="lineno">  569</span> </div>
<div class="line"><span class="lineno">  570</span>    <span class="comment">//Return the socket</span></div>
<div class="line"><span class="lineno">  571</span>    <span class="keywordflow">return</span> socket;</div>
<div class="line"><span class="lineno">  572</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ipv4_8cpp_source.html#l00345">MaxOS::net::InternetProtocolHandler::get_internet_protocol_address()</a>, <a class="el" href="ipv4_8h_source.html#l00070">MaxOS::net::IPV4PayloadHandler::internet_protocol_handler</a>, <a class="el" href="memorymanagement_8cpp_source.html#l00085">MaxOS::memory::MemoryManager::kmalloc()</a>, <a class="el" href="tcp_8h_source.html#l00211">sockets</a>, and <a class="el" href="tcp_8h_source.html#l00188">MaxOS::net::TCPSocket::state</a>.</p>

</div>
</div>
<a id="aa36ce39675e78cfdb78af499fd0f199c" name="aa36ce39675e78cfdb78af499fd0f199c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa36ce39675e78cfdb78af499fd0f199c">&#9670;&#160;</a></span>send_transmission_control_protocol_packet()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a> TransmissionControlProtocolHandler::send_transmission_control_protocol_packet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a> *&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">const</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>&#160;</td>
          <td class="paramname"><em>flags</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>send a packet (Throught the provider) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>The socket to send the packet from </td></tr>
    <tr><td class="paramname">data</td><td>The data to send </td></tr>
    <tr><td class="paramname">size</td><td>The size of the data </td></tr>
    <tr><td class="paramname">flags</td><td>The flags to send </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="tcp_8cpp_source.html#l00420">420</a> of file <a class="el" href="tcp_8cpp_source.html">tcp.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  420</span>                                                                                                                                                        {</div>
<div class="line"><span class="lineno">  421</span>    <span class="comment">//Get the total size of the packet and the packet with the pseudo header</span></div>
<div class="line"><span class="lineno">  422</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a> total_length = size + <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structMaxOS_1_1net_1_1TCPHeader.html">TCPHeader</a>);</div>
<div class="line"><span class="lineno">  423</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a> <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">length_incl_p_hdr</a> = total_length + <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structMaxOS_1_1net_1_1TCPPseudoHeader.html">TCPPseudoHeader</a>);</div>
<div class="line"><span class="lineno">  424</span> </div>
<div class="line"><span class="lineno">  425</span>    <span class="comment">//Create a buffer for the packet</span></div>
<div class="line"><span class="lineno">  426</span>    <span class="keyword">auto</span>* buffer = (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a>*) <a class="code hl_function" href="classMaxOS_1_1memory_1_1MemoryManager.html#a983c849ff604367f7c8a0e70172bb331">MemoryManager::kmalloc</a>(<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">length_incl_p_hdr</a>);</div>
<div class="line"><span class="lineno">  427</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a>* <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">buffer2</a> =</div>
<div class="line"><span class="lineno">  428</span>            buffer + <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structMaxOS_1_1net_1_1TCPHeader.html">TCPHeader</a>) + <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structMaxOS_1_1net_1_1TCPPseudoHeader.html">TCPPseudoHeader</a>);</div>
<div class="line"><span class="lineno">  429</span> </div>
<div class="line"><span class="lineno">  430</span>    <span class="comment">//Create the headers</span></div>
<div class="line"><span class="lineno">  431</span>    <span class="keyword">auto</span>* <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">phdr</a> = (<a class="code hl_struct" href="structMaxOS_1_1net_1_1TCPPseudoHeader.html">TCPPseudoHeader</a>*) buffer;</div>
<div class="line"><span class="lineno">  432</span>    <span class="keyword">auto</span>* <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a> = (<a class="code hl_struct" href="structMaxOS_1_1net_1_1TCPHeader.html">TCPHeader</a>*) (buffer + <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structMaxOS_1_1net_1_1TCPPseudoHeader.html">TCPPseudoHeader</a>));</div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span>    <span class="comment">//Size is translated into 32bit</span></div>
<div class="line"><span class="lineno">  435</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;header_size_32 = <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structMaxOS_1_1net_1_1TCPHeader.html">TCPHeader</a>) / 4;</div>
<div class="line"><span class="lineno">  436</span> </div>
<div class="line"><span class="lineno">  437</span>    <span class="comment">//Set the ports</span></div>
<div class="line"><span class="lineno">  438</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;src_port = <a class="code hl_function" href="tcp_8cpp.html#a339e1cc9d99849738d58f03652283406">big_endian_16</a>(socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#a60eccc7dc4794ac2b04113d7fd650315">local_port</a>);</div>
<div class="line"><span class="lineno">  439</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;dst_port = <a class="code hl_function" href="tcp_8cpp.html#a339e1cc9d99849738d58f03652283406">big_endian_16</a>(socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#adeb2aa58fa3d47d883e266317610c855">remotePort</a>);</div>
<div class="line"><span class="lineno">  440</span> </div>
<div class="line"><span class="lineno">  441</span>    <span class="comment">//Set TCP related data</span></div>
<div class="line"><span class="lineno">  442</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;acknowledgement_number = <a class="code hl_function" href="tcp_8cpp.html#a0203af2bf712e94d26f4eaa9bd39afa8">big_endian_32</a>(socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#a1ab7adf6a7479d7550aaea4a573df281">acknowledgement_number</a>);</div>
<div class="line"><span class="lineno">  443</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;sequence_number = <a class="code hl_function" href="tcp_8cpp.html#a0203af2bf712e94d26f4eaa9bd39afa8">big_endian_32</a>(socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9a1f2021e126ced4b67b154e8799c2f">sequence_number</a>);</div>
<div class="line"><span class="lineno">  444</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;reserved = 0;</div>
<div class="line"><span class="lineno">  445</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;flags = flags;</div>
<div class="line"><span class="lineno">  446</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;window_size = 0xFFFF;</div>
<div class="line"><span class="lineno">  447</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;urgent_ptr = 0;</div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span>    <span class="comment">//Through the options allow for the MSS to be set</span></div>
<div class="line"><span class="lineno">  450</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;options = ((flags &amp; (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>) TCPFlag::SYN) != 0) ? 0xB4050402 : 0;</div>
<div class="line"><span class="lineno">  451</span> </div>
<div class="line"><span class="lineno">  452</span>    <span class="comment">//Increase the sequence number</span></div>
<div class="line"><span class="lineno">  453</span>    socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#af9a1f2021e126ced4b67b154e8799c2f">sequence_number</a> += size;</div>
<div class="line"><span class="lineno">  454</span> </div>
<div class="line"><span class="lineno">  455</span>    <span class="comment">// Check if the data is not null</span></div>
<div class="line"><span class="lineno">  456</span>    <span class="keywordflow">if</span>(data != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  457</span>        <span class="comment">//Copy the data into the buffer</span></div>
<div class="line"><span class="lineno">  458</span>        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; size; i++)</div>
<div class="line"><span class="lineno">  459</span>            <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">buffer2</a>[i] = data[i];</div>
<div class="line"><span class="lineno">  460</span>    }</div>
<div class="line"><span class="lineno">  461</span> </div>
<div class="line"><span class="lineno">  462</span>    <span class="comment">//Set the pseudo header</span></div>
<div class="line"><span class="lineno">  463</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">phdr</a>-&gt;src_ip = socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#a731dd488713dca8b6a3199494e2526c5">local_ip</a>;</div>
<div class="line"><span class="lineno">  464</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">phdr</a>-&gt;dst_ip = socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#afb4e9799f59d0e16cd966d4ce6493e0d">remote_ip</a>;</div>
<div class="line"><span class="lineno">  465</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">phdr</a>-&gt;protocol = 0x0600;</div>
<div class="line"><span class="lineno">  466</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">phdr</a>-&gt;total_length = ((total_length &amp; 0x00FF) &lt;&lt; 8) | ((total_length &amp; 0xFF00) &gt;&gt; 8);</div>
<div class="line"><span class="lineno">  467</span> </div>
<div class="line"><span class="lineno">  468</span>    <span class="comment">//Calculate the checksum</span></div>
<div class="line"><span class="lineno">  469</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;checksum = 0;</div>
<div class="line"><span class="lineno">  470</span>    <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>-&gt;checksum = <a class="code hl_function" href="classMaxOS_1_1net_1_1InternetProtocolHandler.html#aa31fa08acedfffa9bffac7b2ed7eb2ac">InternetProtocolHandler::checksum</a>((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint16_t</a>*) buffer, <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">length_incl_p_hdr</a>);</div>
<div class="line"><span class="lineno">  471</span> </div>
<div class="line"><span class="lineno">  472</span> </div>
<div class="line"><span class="lineno">  473</span>    <span class="comment">//Send and then free the data</span></div>
<div class="line"><span class="lineno">  474</span>    <a class="code hl_function" href="classMaxOS_1_1net_1_1IPV4PayloadHandler.html#a2bb888c9e34031fe53b58add430d604e">send</a>(socket-&gt;<a class="code hl_variable" href="classMaxOS_1_1net_1_1TCPSocket.html#afb4e9799f59d0e16cd966d4ce6493e0d">remote_ip</a>, (<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a>*) <a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">msg</a>, total_length);</div>
<div class="line"><span class="lineno">  475</span>    <a class="code hl_function" href="classMaxOS_1_1memory_1_1MemoryManager.html#abaa5e54c1428654efa1c81b69e12eb20">MemoryManager::kfree</a>(buffer);</div>
<div class="line"><span class="lineno">  476</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1memory_1_1MemoryManager_html_abaa5e54c1428654efa1c81b69e12eb20"><div class="ttname"><a href="classMaxOS_1_1memory_1_1MemoryManager.html#abaa5e54c1428654efa1c81b69e12eb20">MaxOS::memory::MemoryManager::kfree</a></div><div class="ttdeci">static void kfree(void *pointer)</div><div class="ttdoc">Frees a block of memory using the kernel memory manager.</div><div class="ttdef"><b>Definition</b> <a href="memorymanagement_8cpp_source.html#l00172">memorymanagement.cpp:172</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1net_1_1IPV4PayloadHandler_html_a2bb888c9e34031fe53b58add430d604e"><div class="ttname"><a href="classMaxOS_1_1net_1_1IPV4PayloadHandler.html#a2bb888c9e34031fe53b58add430d604e">MaxOS::net::IPV4PayloadHandler::send</a></div><div class="ttdeci">void send(InternetProtocolAddress destination_ip, uint8_t *payload_data, uint32_t size)</div><div class="ttdoc">Sends an IP packet.</div><div class="ttdef"><b>Definition</b> <a href="ipv4_8cpp_source.html#l00093">ipv4.cpp:93</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1net_1_1InternetProtocolHandler_html_aa31fa08acedfffa9bffac7b2ed7eb2ac"><div class="ttname"><a href="classMaxOS_1_1net_1_1InternetProtocolHandler.html#aa31fa08acedfffa9bffac7b2ed7eb2ac">MaxOS::net::InternetProtocolHandler::checksum</a></div><div class="ttdeci">static uint16_t checksum(const uint16_t *data, uint32_t length_in_bytes)</div><div class="ttdoc">Creates a checksum for the given data.</div><div class="ttdef"><b>Definition</b> <a href="ipv4_8cpp_source.html#l00249">ipv4.cpp:249</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1net_1_1TCPSocket_html_a60eccc7dc4794ac2b04113d7fd650315"><div class="ttname"><a href="classMaxOS_1_1net_1_1TCPSocket.html#a60eccc7dc4794ac2b04113d7fd650315">MaxOS::net::TCPSocket::local_port</a></div><div class="ttdeci">uint16_t local_port</div><div class="ttdoc">The port on this device.</div><div class="ttdef"><b>Definition</b> <a href="tcp_8h_source.html#l00182">tcp.h:182</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1net_1_1TCPSocket_html_a731dd488713dca8b6a3199494e2526c5"><div class="ttname"><a href="classMaxOS_1_1net_1_1TCPSocket.html#a731dd488713dca8b6a3199494e2526c5">MaxOS::net::TCPSocket::local_ip</a></div><div class="ttdeci">uint32_t local_ip</div><div class="ttdoc">The IP address of this device.</div><div class="ttdef"><b>Definition</b> <a href="tcp_8h_source.html#l00183">tcp.h:183</a></div></div>
<div class="ttc" id="astructMaxOS_1_1net_1_1TCPPseudoHeader_html"><div class="ttname"><a href="structMaxOS_1_1net_1_1TCPPseudoHeader.html">MaxOS::net::TCPPseudoHeader</a></div><div class="ttdoc">The pseudo header used for TCP checksum calculation.</div><div class="ttdef"><b>Definition</b> <a href="tcp_8h_source.html#l00094">tcp.h:94</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tcp_8h_source.html#l00185">MaxOS::net::TCPSocket::acknowledgement_number</a>, <a class="el" href="tcp_8cpp_source.html#l00187">big_endian_16()</a>, <a class="el" href="tcp_8cpp_source.html#l00174">big_endian_32()</a>, <a class="el" href="ipv4_8cpp_source.html#l00249">MaxOS::net::InternetProtocolHandler::checksum()</a>, <a class="el" href="memorymanagement_8cpp_source.html#l00172">MaxOS::memory::MemoryManager::kfree()</a>, <a class="el" href="memorymanagement_8cpp_source.html#l00085">MaxOS::memory::MemoryManager::kmalloc()</a>, <a class="el" href="tcp_8h_source.html#l00183">MaxOS::net::TCPSocket::local_ip</a>, <a class="el" href="tcp_8h_source.html#l00182">MaxOS::net::TCPSocket::local_port</a>, <a class="el" href="tcp_8h_source.html#l00181">MaxOS::net::TCPSocket::remote_ip</a>, <a class="el" href="tcp_8h_source.html#l00180">MaxOS::net::TCPSocket::remotePort</a>, <a class="el" href="ipv4_8cpp_source.html#l00093">MaxOS::net::IPV4PayloadHandler::send()</a>, and <a class="el" href="tcp_8h_source.html#l00184">MaxOS::net::TCPSocket::sequence_number</a>.</p>

<p class="reference">Referenced by <a class="el" href="tcp_8cpp_source.html#l00484">connect()</a>, <a class="el" href="tcp_8cpp_source.html#l00537">disconnect()</a>, <a class="el" href="tcp_8cpp_source.html#l00201">handle_internet_protocol_payload()</a>, and <a class="el" href="tcp_8cpp_source.html#l00113">MaxOS::net::TCPSocket::send()</a>.</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Symbol Documentation</h2>
<a id="ae392721345f444f04761959f689c8ecb" name="ae392721345f444f04761959f689c8ecb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae392721345f444f04761959f689c8ecb">&#9670;&#160;</a></span>TCPSocket</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tcp_8h_source.html#l00207">207</a> of file <a class="el" href="tcp_8h_source.html">tcp.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a43f0d010c804b9d6f4e2b3f554710542" name="a43f0d010c804b9d6f4e2b3f554710542"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43f0d010c804b9d6f4e2b3f554710542">&#9670;&#160;</a></span>error_messages</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1OutputStream.html">common::OutputStream</a>* MaxOS::net::TransmissionControlProtocolHandler::error_messages</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Where to write error messages. </p>

<p class="definition">Definition at line <a class="el" href="tcp_8h_source.html#l00210">210</a> of file <a class="el" href="tcp_8h_source.html">tcp.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tcp_8cpp_source.html#l00201">handle_internet_protocol_payload()</a>, and <a class="el" href="tcp_8cpp_source.html#l00160">TransmissionControlProtocolHandler()</a>.</p>

</div>
</div>
<a id="a4dbb242dec2eac37b093d23054b2d21a" name="a4dbb242dec2eac37b093d23054b2d21a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dbb242dec2eac37b093d23054b2d21a">&#9670;&#160;</a></span>free_ports</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="tcp_8h.html#a8e668c17241c6c0ed8e9f6df338b2307">TransmissionControlProtocolPort</a> TransmissionControlProtocolHandler::free_ports = 0x8000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The next free port to use for new sockets. </p>
<p><b>Handler</b>/// </p>

<p class="definition">Definition at line <a class="el" href="tcp_8h_source.html#l00213">213</a> of file <a class="el" href="tcp_8h_source.html">tcp.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tcp_8cpp_source.html#l00484">connect()</a>.</p>

</div>
</div>
<a id="aaadd6c0738e70542d1a64ce9671a67c3" name="aaadd6c0738e70542d1a64ce9671a67c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaadd6c0738e70542d1a64ce9671a67c3">&#9670;&#160;</a></span>sockets</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1common_1_1Vector.html">common::Vector</a>&lt;<a class="el" href="classMaxOS_1_1net_1_1TCPSocket.html">TCPSocket</a>*&gt; MaxOS::net::TransmissionControlProtocolHandler::sockets</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The list of connected sockets. </p>

<p class="definition">Definition at line <a class="el" href="tcp_8h_source.html#l00211">211</a> of file <a class="el" href="tcp_8h_source.html">tcp.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tcp_8cpp_source.html#l00484">connect()</a>, <a class="el" href="tcp_8cpp_source.html#l00201">handle_internet_protocol_payload()</a>, and <a class="el" href="tcp_8cpp_source.html#l00551">listen()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/runner/work/MaxOS/MaxOS/kernel/include/net/<a class="el" href="tcp_8h_source.html">tcp.h</a></li>
<li>/home/runner/work/MaxOS/MaxOS/kernel/src/net/<a class="el" href="tcp_8cpp_source.html">tcp.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>MaxOS</b></li><li class="navelem"><b>net</b></li><li class="navelem"><a class="el" href="classMaxOS_1_1net_1_1TransmissionControlProtocolHandler.html">TransmissionControlProtocolHandler</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
