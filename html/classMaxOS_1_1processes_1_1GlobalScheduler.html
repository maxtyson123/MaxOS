<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Max OS: MaxOS::processes::GlobalScheduler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Max OS<span id="projectnumber">&#160;0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classMaxOS_1_1processes_1_1GlobalScheduler.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classMaxOS_1_1processes_1_1GlobalScheduler-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">MaxOS::processes::GlobalScheduler Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>The global scheduler that manages all processes and threads across all cores.  
 <a href="classMaxOS_1_1processes_1_1GlobalScheduler.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="scheduler_8h_source.html">scheduler.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for MaxOS::processes::GlobalScheduler:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classMaxOS_1_1processes_1_1GlobalScheduler.png" usemap="#MaxOS::processes::GlobalScheduler_map" alt=""/>
  <map id="MaxOS::processes::GlobalScheduler_map" name="MaxOS::processes::GlobalScheduler_map">
<area href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html" title="Handles a certain interrupt number." alt="MaxOS::hardwarecommunication::InterruptHandler" shape="rect" coords="0,0,295,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abf6c2a336a89df03f41c695f1a757969" id="r_abf6c2a336a89df03f41c695f1a757969"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#abf6c2a336a89df03f41c695f1a757969">GlobalScheduler</a> (<a class="el" href="classMaxOS_1_1system_1_1Multiboot.html">system::Multiboot</a> &amp;multiboot)</td></tr>
<tr class="memdesc:abf6c2a336a89df03f41c695f1a757969"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a new Global <a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html" title="Schedules processes to run on the core via their threads.">Scheduler</a> object. Registers as the interrupt handler for interrupt 0x20 and setups the shared resource registries. Loads any ELF files from the multiboot structure.  <br /></td></tr>
<tr class="separator:abf6c2a336a89df03f41c695f1a757969"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26277c64caeab8b00a68de942dfd2fa7" id="r_a26277c64caeab8b00a68de942dfd2fa7"><td class="memItemLeft" align="right" valign="top">system::cpu_status_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a26277c64caeab8b00a68de942dfd2fa7">handle_interrupt</a> (system::cpu_status_t *status) final</td></tr>
<tr class="memdesc:a26277c64caeab8b00a68de942dfd2fa7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the interrupt 0x20.  <br /></td></tr>
<tr class="separator:a26277c64caeab8b00a68de942dfd2fa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5da3a5d5310edcb9afae94db4852794" id="r_ad5da3a5d5310edcb9afae94db4852794"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#ad5da3a5d5310edcb9afae94db4852794">balance</a> ()</td></tr>
<tr class="memdesc:ad5da3a5d5310edcb9afae94db4852794"><td class="mdescLeft">&#160;</td><td class="mdescRight">Moves processes and threads between cores to balance the load so that each core has a similar amount of threads and processes.  <br /></td></tr>
<tr class="separator:ad5da3a5d5310edcb9afae94db4852794"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb0782a16515ac2e9268fccce8cd2112" id="r_adb0782a16515ac2e9268fccce8cd2112"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#adb0782a16515ac2e9268fccce8cd2112">add_process</a> (<a class="el" href="classMaxOS_1_1processes_1_1Process.html">Process</a> *process)</td></tr>
<tr class="memdesc:adb0782a16515ac2e9268fccce8cd2112"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a process to the least busy core.  <br /></td></tr>
<tr class="separator:adb0782a16515ac2e9268fccce8cd2112"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add8dade082c0f3357c94f1abb79be249" id="r_add8dade082c0f3357c94f1abb79be249"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#add8dade082c0f3357c94f1abb79be249">add_thread</a> (<a class="el" href="classMaxOS_1_1processes_1_1Thread.html">Thread</a> *thread)</td></tr>
<tr class="memdesc:add8dade082c0f3357c94f1abb79be249"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a thread to the least busy core.  <br /></td></tr>
<tr class="separator:add8dade082c0f3357c94f1abb79be249"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21b5962ea20b3ef69978bdd60320e098" id="r_a21b5962ea20b3ef69978bdd60320e098"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a21b5962ea20b3ef69978bdd60320e098">remove_process</a> (<a class="el" href="classMaxOS_1_1processes_1_1Process.html">Process</a> *process)</td></tr>
<tr class="memdesc:a21b5962ea20b3ef69978bdd60320e098"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a process from the scheduler if the process has no threads, if it does then the threads are stopped but the process is not removed (this will be done automatically when all threads are stopped)  <br /></td></tr>
<tr class="separator:a21b5962ea20b3ef69978bdd60320e098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8f0feccb59c37c41b25e32e6f3cac4a" id="r_af8f0feccb59c37c41b25e32e6f3cac4a"><td class="memItemLeft" align="right" valign="top">system::cpu_status_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#af8f0feccb59c37c41b25e32e6f3cac4a">force_remove_process</a> (<a class="el" href="classMaxOS_1_1processes_1_1Process.html">Process</a> *process)</td></tr>
<tr class="memdesc:af8f0feccb59c37c41b25e32e6f3cac4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a process from the scheduler and deletes all threads, begins running the next process.  <br /></td></tr>
<tr class="separator:af8f0feccb59c37c41b25e32e6f3cac4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html">MaxOS::hardwarecommunication::InterruptHandler</a></td></tr>
<tr class="memitem:abd792bc53ec7dd1b70c8386853cc3c33 inherit pub_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler" id="r_abd792bc53ec7dd1b70c8386853cc3c33"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">virtual</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html#abd792bc53ec7dd1b70c8386853cc3c33">handle_interrupt</a> ()</td></tr>
<tr class="memdesc:abd792bc53ec7dd1b70c8386853cc3c33 inherit pub_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles an interrupt.  <br /></td></tr>
<tr class="separator:abd792bc53ec7dd1b70c8386853cc3c33 inherit pub_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a92932d6664340c61e8174c93168d7932" id="r_a92932d6664340c61e8174c93168d7932"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html">GlobalScheduler</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a92932d6664340c61e8174c93168d7932">system_scheduler</a> ()</td></tr>
<tr class="memdesc:a92932d6664340c61e8174c93168d7932"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the system scheduler.  <br /></td></tr>
<tr class="separator:a92932d6664340c61e8174c93168d7932"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0eb017023c57324c9f92bce011aaf3c9" id="r_a0eb017023c57324c9f92bce011aaf3c9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html">Scheduler</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a0eb017023c57324c9f92bce011aaf3c9">core_scheduler</a> ()</td></tr>
<tr class="memdesc:a0eb017023c57324c9f92bce011aaf3c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the scheduler for the currently executing core.  <br /></td></tr>
<tr class="separator:a0eb017023c57324c9f92bce011aaf3c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d2377ff36a2a416b949ac6774475398" id="r_a3d2377ff36a2a416b949ac6774475398"><td class="memItemLeft" align="right" valign="top">static system::cpu_status_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a3d2377ff36a2a416b949ac6774475398">yield</a> (system::cpu_status_t *current)</td></tr>
<tr class="memdesc:a3d2377ff36a2a416b949ac6774475398"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pass execution to the next thread.  <br /></td></tr>
<tr class="separator:a3d2377ff36a2a416b949ac6774475398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac257db7eb13dd4daca113e43a4623900" id="r_ac257db7eb13dd4daca113e43a4623900"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#ac257db7eb13dd4daca113e43a4623900">activate</a> ()</td></tr>
<tr class="memdesc:ac257db7eb13dd4daca113e43a4623900"><td class="mdescLeft">&#160;</td><td class="mdescRight">Activates each core's scheduler.  <br /></td></tr>
<tr class="separator:ac257db7eb13dd4daca113e43a4623900"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac32ed71ca0571c1cf2125b3360549757" id="r_ac32ed71ca0571c1cf2125b3360549757"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#ac32ed71ca0571c1cf2125b3360549757">deactivate</a> ()</td></tr>
<tr class="memdesc:ac32ed71ca0571c1cf2125b3360549757"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deactivates each core's scheduler.  <br /></td></tr>
<tr class="separator:ac32ed71ca0571c1cf2125b3360549757"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac97d198ab1a455b25baa53693f8b0af9" id="r_ac97d198ab1a455b25baa53693f8b0af9"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#ac97d198ab1a455b25baa53693f8b0af9">is_active</a> ()</td></tr>
<tr class="memdesc:ac97d198ab1a455b25baa53693f8b0af9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the global scheduler is active.  <br /></td></tr>
<tr class="separator:ac97d198ab1a455b25baa53693f8b0af9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae22220b83f109ca31a40e99a8758db15" id="r_ae22220b83f109ca31a40e99a8758db15"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#ae22220b83f109ca31a40e99a8758db15">load_multiboot_elfs</a> (<a class="el" href="classMaxOS_1_1system_1_1Multiboot.html">system::Multiboot</a> *multiboot)</td></tr>
<tr class="memdesc:ae22220b83f109ca31a40e99a8758db15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads any valid ELF files from the multiboot structure.  <br /></td></tr>
<tr class="separator:ae22220b83f109ca31a40e99a8758db15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f462a1b05f9bf785a903bd0f3e495a0" id="r_a4f462a1b05f9bf785a903bd0f3e495a0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a4f462a1b05f9bf785a903bd0f3e495a0">print_running_header</a> ()</td></tr>
<tr class="memdesc:a4f462a1b05f9bf785a903bd0f3e495a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the header for the running processes in the form ({name}:t{tid}c{core})  <br /></td></tr>
<tr class="separator:a4f462a1b05f9bf785a903bd0f3e495a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa070d442d88c4e6adee1c57772c5be34" id="r_aa070d442d88c4e6adee1c57772c5be34"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classMaxOS_1_1processes_1_1Process.html">Process</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#aa070d442d88c4e6adee1c57772c5be34">current_process</a> ()</td></tr>
<tr class="memdesc:aa070d442d88c4e6adee1c57772c5be34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the process on the currently executing core.  <br /></td></tr>
<tr class="separator:aa070d442d88c4e6adee1c57772c5be34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a199f03c298a8f58e743db34830327a58" id="r_a199f03c298a8f58e743db34830327a58"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classMaxOS_1_1processes_1_1Process.html">Process</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a199f03c298a8f58e743db34830327a58">get_process</a> (uint64_t pid)</td></tr>
<tr class="memdesc:a199f03c298a8f58e743db34830327a58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a process on the currently executing core by its PID.  <br /></td></tr>
<tr class="separator:a199f03c298a8f58e743db34830327a58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06e979b83c4cd3db3eed8b333188d037" id="r_a06e979b83c4cd3db3eed8b333188d037"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a06e979b83c4cd3db3eed8b333188d037">next_pid</a> ()</td></tr>
<tr class="memdesc:a06e979b83c4cd3db3eed8b333188d037"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the next usable global PID.  <br /></td></tr>
<tr class="separator:a06e979b83c4cd3db3eed8b333188d037"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad70d085e581a761a809a575ad3626922" id="r_ad70d085e581a761a809a575ad3626922"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classMaxOS_1_1processes_1_1Thread.html">Thread</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#ad70d085e581a761a809a575ad3626922">current_thread</a> ()</td></tr>
<tr class="memdesc:ad70d085e581a761a809a575ad3626922"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the thread on the currently executing core.  <br /></td></tr>
<tr class="separator:ad70d085e581a761a809a575ad3626922"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3891508a6e69d835b30c5ee81ba8fb0" id="r_ab3891508a6e69d835b30c5ee81ba8fb0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classMaxOS_1_1processes_1_1Thread.html">Thread</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#ab3891508a6e69d835b30c5ee81ba8fb0">get_thread</a> (uint64_t tid)</td></tr>
<tr class="memdesc:ab3891508a6e69d835b30c5ee81ba8fb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a thread on the currently executing core by its TID.  <br /></td></tr>
<tr class="separator:ab3891508a6e69d835b30c5ee81ba8fb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6197a324f9a16fdf1b3990df4eb7ddd3" id="r_a6197a324f9a16fdf1b3990df4eb7ddd3"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a6197a324f9a16fdf1b3990df4eb7ddd3">next_tid</a> ()</td></tr>
<tr class="memdesc:a6197a324f9a16fdf1b3990df4eb7ddd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the next usable global TID.  <br /></td></tr>
<tr class="separator:a6197a324f9a16fdf1b3990df4eb7ddd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html">MaxOS::hardwarecommunication::InterruptHandler</a></td></tr>
<tr class="memitem:a79b1054c04bbcc2c72a6d6938212909c inherit pro_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler" id="r_a79b1054c04bbcc2c72a6d6938212909c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html#a79b1054c04bbcc2c72a6d6938212909c">InterruptHandler</a> (<a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint8_t</a> interrupt_number, <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">int64_t</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">redirect</a>=-1, <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">uint64_t</a> <a class="el" href="classMaxOS_1_1common_1_1Rectangle.html">redirect_index</a>=0)</td></tr>
<tr class="memdesc:a79b1054c04bbcc2c72a6d6938212909c inherit pro_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new interrupt handler and registers it with the interrupt manager.  <br /></td></tr>
<tr class="separator:a79b1054c04bbcc2c72a6d6938212909c inherit pro_methods_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html">MaxOS::hardwarecommunication::InterruptHandler</a></td></tr>
<tr class="memitem:aac2ba4da525d342fc83fe344780c1850 inherit pro_attribs_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler" id="r_aac2ba4da525d342fc83fe344780c1850"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html#aac2ba4da525d342fc83fe344780c1850">m_interrupt_number</a></td></tr>
<tr class="memdesc:aac2ba4da525d342fc83fe344780c1850 inherit pro_attribs_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler"><td class="mdescLeft">&#160;</td><td class="mdescRight">The interrupt number this handler handles.  <br /></td></tr>
<tr class="separator:aac2ba4da525d342fc83fe344780c1850 inherit pro_attribs_classMaxOS_1_1hardwarecommunication_1_1InterruptHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The global scheduler that manages all processes and threads across all cores. </p>

<p class="definition">Definition at line <a class="el" href="scheduler_8h_source.html#l00026">26</a> of file <a class="el" href="scheduler_8h_source.html">scheduler.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="abf6c2a336a89df03f41c695f1a757969" name="abf6c2a336a89df03f41c695f1a757969"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf6c2a336a89df03f41c695f1a757969">&#9670;&#160;</a></span>GlobalScheduler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GlobalScheduler::GlobalScheduler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1system_1_1Multiboot.html">system::Multiboot</a> &amp;&#160;</td>
          <td class="paramname"><em>multiboot</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs a new Global <a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html" title="Schedules processes to run on the core via their threads.">Scheduler</a> object. Registers as the interrupt handler for interrupt 0x20 and setups the shared resource registries. Loads any ELF files from the multiboot structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">multiboot</td><td>The multiboot structure that may contain ELF files to load </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00024">24</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   25</span>: <a class="code hl_class" href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html">InterruptHandler</a>(0x20),</div>
<div class="line"><span class="lineno">   26</span>  m_shared_memory_registry(resource_type_t::SHARED_MEMORY),</div>
<div class="line"><span class="lineno">   27</span>  m_shared_messages_registry(resource_type_t::MESSAGE_ENDPOINT),</div>
<div class="line"><span class="lineno">   28</span>  m_next_pid(-1),</div>
<div class="line"><span class="lineno">   29</span>  m_next_tid(-1)</div>
<div class="line"><span class="lineno">   30</span>{</div>
<div class="line"><span class="lineno">   31</span> </div>
<div class="line"><span class="lineno">   32</span>    <span class="comment">// Set up the global scheduler</span></div>
<div class="line"><span class="lineno">   33</span>    <a class="code hl_function" href="classLogger.html#a6fa276d92dbf0dd22dcab146f5c99da6">Logger::INFO</a>() &lt;&lt; <span class="stringliteral">&quot;Setting up global Scheduler\n&quot;</span>;</div>
<div class="line"><span class="lineno">   34</span>    s_instance = <span class="keyword">this</span>;</div>
<div class="line"><span class="lineno">   35</span> </div>
<div class="line"><span class="lineno">   36</span>    <span class="comment">// Set up the per core scheduler</span></div>
<div class="line"><span class="lineno">   37</span>    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; core : <a class="code hl_class" href="classMaxOS_1_1system_1_1CPU.html">CPU</a>::cores)</div>
<div class="line"><span class="lineno">   38</span>        core -&gt; scheduler = new <a class="code hl_class" href="classMaxOS_1_1processes_1_1Scheduler.html">Scheduler</a>();</div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span>    <span class="comment">// Load the elfs</span></div>
<div class="line"><span class="lineno">   41</span>    <a class="code hl_function" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#ae22220b83f109ca31a40e99a8758db15">load_multiboot_elfs</a>(&amp;multiboot);</div>
<div class="line"><span class="lineno">   42</span> </div>
<div class="line"><span class="lineno">   43</span>}</div>
<div class="ttc" id="aclassLogger_html_a6fa276d92dbf0dd22dcab146f5c99da6"><div class="ttname"><a href="classLogger.html#a6fa276d92dbf0dd22dcab146f5c99da6">Logger::INFO</a></div><div class="ttdeci">static Logger INFO()</div><div class="ttdoc">Gets active logger set to info level.</div><div class="ttdef"><b>Definition</b> <a href="logger_8cpp_source.html#l00167">logger.cpp:167</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1hardwarecommunication_1_1InterruptHandler_html"><div class="ttname"><a href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html">MaxOS::hardwarecommunication::InterruptHandler</a></div><div class="ttdoc">Handles a certain interrupt number.</div><div class="ttdef"><b>Definition</b> <a href="interrupts_8h_source.html#l00032">interrupts.h:32</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1GlobalScheduler_html_ae22220b83f109ca31a40e99a8758db15"><div class="ttname"><a href="classMaxOS_1_1processes_1_1GlobalScheduler.html#ae22220b83f109ca31a40e99a8758db15">MaxOS::processes::GlobalScheduler::load_multiboot_elfs</a></div><div class="ttdeci">static void load_multiboot_elfs(system::Multiboot *multiboot)</div><div class="ttdoc">Loads any valid ELF files from the multiboot structure.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00135">scheduler.cpp:135</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Scheduler_html"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Scheduler.html">MaxOS::processes::Scheduler</a></div><div class="ttdoc">Schedules processes to run on the core via their threads.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8h_source.html#l00085">scheduler.h:85</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1system_1_1CPU_html"><div class="ttname"><a href="classMaxOS_1_1system_1_1CPU.html">MaxOS::system::CPU</a></div><div class="ttdoc">Manages the CPU and its cores.</div><div class="ttdef"><b>Definition</b> <a href="cpu_8h_source.html#l00228">cpu.h:228</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cpu_8h_source.html#l00245">MaxOS::system::CPU::cores</a>, <a class="el" href="logger_8cpp_source.html#l00167">Logger::INFO()</a>, and <a class="el" href="scheduler_8cpp_source.html#l00135">load_multiboot_elfs()</a>.</p>

</div>
</div>
<a id="a817a0407139e437686c29ee3367cab09" name="a817a0407139e437686c29ee3367cab09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a817a0407139e437686c29ee3367cab09">&#9670;&#160;</a></span>~GlobalScheduler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GlobalScheduler::~GlobalScheduler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00084">84</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   84</span>                                 {</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>    <span class="comment">// No longer the global instance</span></div>
<div class="line"><span class="lineno">   87</span>    s_instance = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>    <span class="comment">// Free the per core scheduler</span></div>
<div class="line"><span class="lineno">   90</span>    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; core : <a class="code hl_class" href="classMaxOS_1_1system_1_1CPU.html">CPU</a>::cores)</div>
<div class="line"><span class="lineno">   91</span>        delete core-&gt;scheduler;</div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ac257db7eb13dd4daca113e43a4623900" name="ac257db7eb13dd4daca113e43a4623900"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac257db7eb13dd4daca113e43a4623900">&#9670;&#160;</a></span>activate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GlobalScheduler::activate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Activates each core's scheduler. </p>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00098">98</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   98</span>                               {</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>    s_instance -&gt; m_active = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  101</span>    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; core : <a class="code hl_class" href="classMaxOS_1_1system_1_1CPU.html">CPU</a>::cores)</div>
<div class="line"><span class="lineno">  102</span>        core-&gt;scheduler-&gt;<a class="code hl_function" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#ac257db7eb13dd4daca113e43a4623900">activate</a>();</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  104</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1GlobalScheduler_html_ac257db7eb13dd4daca113e43a4623900"><div class="ttname"><a href="classMaxOS_1_1processes_1_1GlobalScheduler.html#ac257db7eb13dd4daca113e43a4623900">MaxOS::processes::GlobalScheduler::activate</a></div><div class="ttdeci">static void activate()</div><div class="ttdoc">Activates each core's scheduler.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00098">scheduler.cpp:98</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cpu_8h_source.html#l00245">MaxOS::system::CPU::cores</a>.</p>

<p class="reference">Referenced by <a class="el" href="kernel_8cpp_source.html#l00071">kernel_main()</a>.</p>

</div>
</div>
<a id="adb0782a16515ac2e9268fccce8cd2112" name="adb0782a16515ac2e9268fccce8cd2112"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb0782a16515ac2e9268fccce8cd2112">&#9670;&#160;</a></span>add_process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t GlobalScheduler::add_process </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1processes_1_1Process.html">Process</a> *&#160;</td>
          <td class="paramname"><em>process</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a process to the least busy core. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">process</td><td>The process to add </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The pid of the new process </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00183">183</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  183</span>                                                      {</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>    <span class="comment">// No cores?</span></div>
<div class="line"><span class="lineno">  186</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="classMaxOS_1_1system_1_1CPU.html#acbed3e383ef08559099051d9c7e9d57b">CPU::cores</a>.empty())</div>
<div class="line"><span class="lineno">  187</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>    <span class="comment">// Find the core with the least processes</span></div>
<div class="line"><span class="lineno">  190</span>    uint64_t core_id = 0;</div>
<div class="line"><span class="lineno">  191</span>    <a class="code hl_class" href="classMaxOS_1_1processes_1_1Scheduler.html">Scheduler</a>* scheduler = <a class="code hl_variable" href="classMaxOS_1_1system_1_1CPU.html#acbed3e383ef08559099051d9c7e9d57b">CPU::cores</a>[core_id]-&gt;scheduler;</div>
<div class="line"><span class="lineno">  192</span>    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; core : <a class="code hl_class" href="classMaxOS_1_1system_1_1CPU.html">CPU</a>::cores){</div>
<div class="line"><span class="lineno">  193</span>        <span class="keyword">auto</span> <a class="code hl_function" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a0eb017023c57324c9f92bce011aaf3c9">core_scheduler</a> = core-&gt;scheduler;</div>
<div class="line"><span class="lineno">  194</span>        <span class="keywordflow">if</span>(<a class="code hl_function" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a0eb017023c57324c9f92bce011aaf3c9">core_scheduler</a>-&gt;<a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#ab16bfaa6ff6992298aa292a22ebe8397">process_amount</a>() &lt; scheduler-&gt;<a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#ab16bfaa6ff6992298aa292a22ebe8397">process_amount</a>()){</div>
<div class="line"><span class="lineno">  195</span>            core_id = core-&gt;id;</div>
<div class="line"><span class="lineno">  196</span>            scheduler = <a class="code hl_function" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a0eb017023c57324c9f92bce011aaf3c9">core_scheduler</a>;</div>
<div class="line"><span class="lineno">  197</span>        }</div>
<div class="line"><span class="lineno">  198</span>    }</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>    <span class="comment">// Save the pid</span></div>
<div class="line"><span class="lineno">  201</span>    <span class="keyword">auto</span> pid = scheduler-&gt;<a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a57f5f5eecb3fbbc693b6462c880129b0">add_process</a>(process);</div>
<div class="line"><span class="lineno">  202</span>    m_core_pids.<a class="code hl_function" href="classMaxOS_1_1common_1_1Map.html#a81607647ee83176c5cf53462f99583e0">insert</a>(pid,core_id);</div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span>    <a class="code hl_function" href="classLogger.html#a1df434c9cd82457b6830c0500731a601">Logger::DEBUG</a>() &lt;&lt; <span class="stringliteral">&quot;Adding process &quot;</span> &lt;&lt; pid &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; process-&gt;<a class="code hl_variable" href="classMaxOS_1_1processes_1_1Process.html#a56404d627bd310d8de08fba3d8d2792f">name</a> &lt;&lt; <span class="stringliteral">&quot; to core &quot;</span> &lt;&lt; core_id &lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">  205</span>    <span class="keywordflow">return</span> pid;</div>
<div class="line"><span class="lineno">  206</span>}</div>
<div class="ttc" id="aclassLogger_html_a1df434c9cd82457b6830c0500731a601"><div class="ttname"><a href="classLogger.html#a1df434c9cd82457b6830c0500731a601">Logger::DEBUG</a></div><div class="ttdeci">static Logger DEBUG()</div><div class="ttdoc">Gets active logger set to DEBUG level.</div><div class="ttdef"><b>Definition</b> <a href="logger_8cpp_source.html#l00178">logger.cpp:178</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1common_1_1Map_html_a81607647ee83176c5cf53462f99583e0"><div class="ttname"><a href="classMaxOS_1_1common_1_1Map.html#a81607647ee83176c5cf53462f99583e0">MaxOS::common::Map::insert</a></div><div class="ttdeci">void insert(Key, Value)</div><div class="ttdoc">Updates the value of an element, or adds a new element if it does not exist.</div><div class="ttdef"><b>Definition</b> <a href="map_8h_source.html#l00257">map.h:257</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1GlobalScheduler_html_a0eb017023c57324c9f92bce011aaf3c9"><div class="ttname"><a href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a0eb017023c57324c9f92bce011aaf3c9">MaxOS::processes::GlobalScheduler::core_scheduler</a></div><div class="ttdeci">static Scheduler * core_scheduler()</div><div class="ttdoc">Gets the scheduler for the currently executing core.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00346">scheduler.cpp:346</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Process_html_a56404d627bd310d8de08fba3d8d2792f"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Process.html#a56404d627bd310d8de08fba3d8d2792f">MaxOS::processes::Process::name</a></div><div class="ttdeci">string name</div><div class="ttdoc">The name of the process.</div><div class="ttdef"><b>Definition</b> <a href="process_8h_source.html#l00108">process.h:108</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Scheduler_html_a57f5f5eecb3fbbc693b6462c880129b0"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Scheduler.html#a57f5f5eecb3fbbc693b6462c880129b0">MaxOS::processes::Scheduler::add_process</a></div><div class="ttdeci">uint64_t add_process(Process *process)</div><div class="ttdoc">Adds a process to the scheduler.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00502">scheduler.cpp:502</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Scheduler_html_ab16bfaa6ff6992298aa292a22ebe8397"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Scheduler.html#ab16bfaa6ff6992298aa292a22ebe8397">MaxOS::processes::Scheduler::process_amount</a></div><div class="ttdeci">uint64_t process_amount()</div><div class="ttdoc">Gets how processes are running on this scheduler.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00677">scheduler.cpp:677</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1system_1_1CPU_html_acbed3e383ef08559099051d9c7e9d57b"><div class="ttname"><a href="classMaxOS_1_1system_1_1CPU.html#acbed3e383ef08559099051d9c7e9d57b">MaxOS::system::CPU::cores</a></div><div class="ttdeci">static common::Vector&lt; Core * &gt; cores</div><div class="ttdoc">The list of CPU cores in the system (populated during initialization, includes the BSP and cores that...</div><div class="ttdef"><b>Definition</b> <a href="cpu_8h_source.html#l00245">cpu.h:245</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="scheduler_8cpp_source.html#l00502">MaxOS::processes::Scheduler::add_process()</a>, <a class="el" href="scheduler_8cpp_source.html#l00346">core_scheduler()</a>, <a class="el" href="cpu_8h_source.html#l00245">MaxOS::system::CPU::cores</a>, <a class="el" href="logger_8cpp_source.html#l00178">Logger::DEBUG()</a>, <a class="el" href="map_8h_source.html#l00257">MaxOS::common::Map&lt; Key, Value &gt;::insert()</a>, <a class="el" href="process_8h_source.html#l00108">MaxOS::processes::Process::name</a>, and <a class="el" href="scheduler_8cpp_source.html#l00677">MaxOS::processes::Scheduler::process_amount()</a>.</p>

<p class="reference">Referenced by <a class="el" href="scheduler_8cpp_source.html#l00135">load_multiboot_elfs()</a>.</p>

</div>
</div>
<a id="add8dade082c0f3357c94f1abb79be249" name="add8dade082c0f3357c94f1abb79be249"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add8dade082c0f3357c94f1abb79be249">&#9670;&#160;</a></span>add_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t GlobalScheduler::add_thread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1processes_1_1Thread.html">Thread</a> *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a thread to the least busy core. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thread</td><td>The thread to add </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The tid of the new thread </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00214">214</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  214</span>                                                   {</div>
<div class="line"><span class="lineno">  215</span> </div>
<div class="line"><span class="lineno">  216</span>    <span class="comment">// No cores?</span></div>
<div class="line"><span class="lineno">  217</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="classMaxOS_1_1system_1_1CPU.html#acbed3e383ef08559099051d9c7e9d57b">CPU::cores</a>.empty())</div>
<div class="line"><span class="lineno">  218</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  219</span> </div>
<div class="line"><span class="lineno">  220</span>    <span class="comment">// Find the core with the least threads</span></div>
<div class="line"><span class="lineno">  221</span>    uint64_t core_id = 0;</div>
<div class="line"><span class="lineno">  222</span>    <a class="code hl_class" href="classMaxOS_1_1processes_1_1Scheduler.html">Scheduler</a>* scheduler = <a class="code hl_variable" href="classMaxOS_1_1system_1_1CPU.html#acbed3e383ef08559099051d9c7e9d57b">CPU::cores</a>[core_id]-&gt;scheduler;</div>
<div class="line"><span class="lineno">  223</span>    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; core : <a class="code hl_class" href="classMaxOS_1_1system_1_1CPU.html">CPU</a>::cores){</div>
<div class="line"><span class="lineno">  224</span>        <span class="keyword">auto</span> <a class="code hl_function" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a0eb017023c57324c9f92bce011aaf3c9">core_scheduler</a> = core-&gt;scheduler;</div>
<div class="line"><span class="lineno">  225</span>        <span class="keywordflow">if</span>(<a class="code hl_function" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a0eb017023c57324c9f92bce011aaf3c9">core_scheduler</a>-&gt;<a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a3ce2093679daf9acde62bbabc020728e">thread_amount</a>() &lt; scheduler-&gt;<a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a3ce2093679daf9acde62bbabc020728e">thread_amount</a>()){</div>
<div class="line"><span class="lineno">  226</span>            core_id = core-&gt;id;</div>
<div class="line"><span class="lineno">  227</span>            scheduler = <a class="code hl_function" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a0eb017023c57324c9f92bce011aaf3c9">core_scheduler</a>;</div>
<div class="line"><span class="lineno">  228</span>        }</div>
<div class="line"><span class="lineno">  229</span>    }</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>    <span class="comment">// Save the tid</span></div>
<div class="line"><span class="lineno">  232</span>    <span class="keyword">auto</span> tid = scheduler-&gt;<a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a85c088e0e4d5e5d6fb646c842127c36c">add_thread</a>(thread);</div>
<div class="line"><span class="lineno">  233</span>    m_core_tids.<a class="code hl_function" href="classMaxOS_1_1common_1_1Map.html#a81607647ee83176c5cf53462f99583e0">insert</a>(tid,core_id);</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>    <a class="code hl_function" href="classLogger.html#a1df434c9cd82457b6830c0500731a601">Logger::DEBUG</a>() &lt;&lt; <span class="stringliteral">&quot;Adding thread &quot;</span> &lt;&lt; tid &lt;&lt; <span class="stringliteral">&quot; to core &quot;</span> &lt;&lt; core_id &lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">  236</span>    <span class="keywordflow">return</span> tid;</div>
<div class="line"><span class="lineno">  237</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Scheduler_html_a3ce2093679daf9acde62bbabc020728e"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Scheduler.html#a3ce2093679daf9acde62bbabc020728e">MaxOS::processes::Scheduler::thread_amount</a></div><div class="ttdeci">uint64_t thread_amount()</div><div class="ttdoc">Gets how many threads are running on this scheduler.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00695">scheduler.cpp:695</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Scheduler_html_a85c088e0e4d5e5d6fb646c842127c36c"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Scheduler.html#a85c088e0e4d5e5d6fb646c842127c36c">MaxOS::processes::Scheduler::add_thread</a></div><div class="ttdeci">uint64_t add_thread(Thread *thread)</div><div class="ttdoc">Adds a thread to the scheduler.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00524">scheduler.cpp:524</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="scheduler_8cpp_source.html#l00524">MaxOS::processes::Scheduler::add_thread()</a>, <a class="el" href="scheduler_8cpp_source.html#l00346">core_scheduler()</a>, <a class="el" href="cpu_8h_source.html#l00245">MaxOS::system::CPU::cores</a>, <a class="el" href="logger_8cpp_source.html#l00178">Logger::DEBUG()</a>, <a class="el" href="map_8h_source.html#l00257">MaxOS::common::Map&lt; Key, Value &gt;::insert()</a>, and <a class="el" href="scheduler_8cpp_source.html#l00695">MaxOS::processes::Scheduler::thread_amount()</a>.</p>

</div>
</div>
<a id="ad5da3a5d5310edcb9afae94db4852794" name="ad5da3a5d5310edcb9afae94db4852794"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5da3a5d5310edcb9afae94db4852794">&#9670;&#160;</a></span>balance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GlobalScheduler::balance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Moves processes and threads between cores to balance the load so that each core has a similar amount of threads and processes. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000072">Todo:</a></b></dt><dd>Implement </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00123">123</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  123</span>                              {</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0eb017023c57324c9f92bce011aaf3c9" name="a0eb017023c57324c9f92bce011aaf3c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0eb017023c57324c9f92bce011aaf3c9">&#9670;&#160;</a></span>core_scheduler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1processes_1_1Scheduler.html">Scheduler</a> * GlobalScheduler::core_scheduler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the scheduler for the currently executing core. </p>
<dl class="section return"><dt>Returns</dt><dd>The scheduler for this core </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00346">346</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  346</span>                                           {</div>
<div class="line"><span class="lineno">  347</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classMaxOS_1_1system_1_1CPU.html#adf91af6b880b57ae580a0a91ed4b71f7">CPU::executing_core</a>()-&gt;<a class="code hl_variable" href="classMaxOS_1_1system_1_1Core.html#ab5f2cccadb50ecefe94cbb95eebea371">scheduler</a>;</div>
<div class="line"><span class="lineno">  348</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1system_1_1CPU_html_adf91af6b880b57ae580a0a91ed4b71f7"><div class="ttname"><a href="classMaxOS_1_1system_1_1CPU.html#adf91af6b880b57ae580a0a91ed4b71f7">MaxOS::system::CPU::executing_core</a></div><div class="ttdeci">static Core * executing_core()</div><div class="ttdoc">Gets the core that is currently executing.</div><div class="ttdef"><b>Definition</b> <a href="cpu_8cpp_source.html#l00620">cpu.cpp:620</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1system_1_1Core_html_ab5f2cccadb50ecefe94cbb95eebea371"><div class="ttname"><a href="classMaxOS_1_1system_1_1Core.html#ab5f2cccadb50ecefe94cbb95eebea371">MaxOS::system::Core::scheduler</a></div><div class="ttdeci">processes::Scheduler * scheduler</div><div class="ttdoc">The scheduler for this core.</div><div class="ttdef"><b>Definition</b> <a href="cpu_8h_source.html#l00221">cpu.h:221</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cpu_8cpp_source.html#l00620">MaxOS::system::CPU::executing_core()</a>, and <a class="el" href="cpu_8h_source.html#l00221">MaxOS::system::Core::scheduler</a>.</p>

<p class="reference">Referenced by <a class="el" href="spinlock_8cpp_source.html#l00101">MaxOS::common::BlockingLock::acquire()</a>, <a class="el" href="scheduler_8cpp_source.html#l00183">add_process()</a>, <a class="el" href="scheduler_8cpp_source.html#l00214">add_thread()</a>, <a class="el" href="scheduler_8cpp_source.html#l00277">current_process()</a>, <a class="el" href="scheduler_8cpp_source.html#l00313">current_thread()</a>, <a class="el" href="scheduler_8cpp_source.html#l00062">handle_interrupt()</a>, <a class="el" href="cpu_8cpp_source.html#l00436">MaxOS::system::CPU::PANIC()</a>, <a class="el" href="syscalls_8cpp_source.html#l00115">MaxOS::system::SyscallManager::syscall_close_process()</a>, <a class="el" href="syscalls_8cpp_source.html#l00335">MaxOS::system::SyscallManager::syscall_thread_close()</a>, and <a class="el" href="scheduler_8cpp_source.html#l00078">yield()</a>.</p>

</div>
</div>
<a id="aa070d442d88c4e6adee1c57772c5be34" name="aa070d442d88c4e6adee1c57772c5be34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa070d442d88c4e6adee1c57772c5be34">&#9670;&#160;</a></span>current_process()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1processes_1_1Process.html">Process</a> * GlobalScheduler::current_process </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the process on the currently executing core. </p>
<dl class="section return"><dt>Returns</dt><dd>The current process, or nullptr if not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00277">277</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  277</span>                                          {</div>
<div class="line"><span class="lineno">  278</span>    <span class="keywordflow">if</span>(!s_instance || !s_instance -&gt;m_active)</div>
<div class="line"><span class="lineno">  279</span>        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a0eb017023c57324c9f92bce011aaf3c9">core_scheduler</a>()-&gt;<a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#ae6984a0be65698916c382ed9abd9fc79">current_process</a>();</div>
<div class="line"><span class="lineno">  282</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Scheduler_html_ae6984a0be65698916c382ed9abd9fc79"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Scheduler.html#ae6984a0be65698916c382ed9abd9fc79">MaxOS::processes::Scheduler::current_process</a></div><div class="ttdeci">Process * current_process()</div><div class="ttdoc">Gets the current process.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00642">scheduler.cpp:642</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="scheduler_8cpp_source.html#l00346">core_scheduler()</a>, and <a class="el" href="scheduler_8cpp_source.html#l00642">MaxOS::processes::Scheduler::current_process()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vfsresource_8cpp_source.html#l00394">MaxOS::filesystem::VFSResourceRegistry::create_resource()</a>, <a class="el" href="virtual_8cpp_source.html#l00249">MaxOS::memory::VirtualMemoryManager::free()</a>, <a class="el" href="vfsresource_8cpp_source.html#l00376">MaxOS::filesystem::VFSResourceRegistry::get_resource()</a>, <a class="el" href="virtual_8cpp_source.html#l00414">MaxOS::memory::VirtualMemoryManager::load_shared_memory()</a>, <a class="el" href="ipc_8cpp_source.html#l00082">MaxOS::processes::SharedMemory::open()</a>, <a class="el" href="cpu_8cpp_source.html#l00436">MaxOS::system::CPU::PANIC()</a>, <a class="el" href="cpu_8cpp_source.html#l00492">MaxOS::system::CPU::prepare_for_panic()</a>, <a class="el" href="scheduler_8cpp_source.html#l00165">print_running_header()</a>, <a class="el" href="ipc_8cpp_source.html#l00047">MaxOS::processes::SharedMemory::read()</a>, <a class="el" href="syscalls_8cpp_source.html#l00115">MaxOS::system::SyscallManager::syscall_close_process()</a>, <a class="el" href="syscalls_8cpp_source.html#l00233">MaxOS::system::SyscallManager::syscall_resource_close()</a>, <a class="el" href="syscalls_8cpp_source.html#l00215">MaxOS::system::SyscallManager::syscall_resource_open()</a>, <a class="el" href="syscalls_8cpp_source.html#l00276">MaxOS::system::SyscallManager::syscall_resource_read()</a>, and <a class="el" href="syscalls_8cpp_source.html#l00250">MaxOS::system::SyscallManager::syscall_resource_write()</a>.</p>

</div>
</div>
<a id="ad70d085e581a761a809a575ad3626922" name="ad70d085e581a761a809a575ad3626922"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad70d085e581a761a809a575ad3626922">&#9670;&#160;</a></span>current_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1processes_1_1Thread.html">Thread</a> * GlobalScheduler::current_thread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the thread on the currently executing core. </p>
<dl class="section return"><dt>Returns</dt><dd>The currently executing thread </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00313">313</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  313</span>                                        {</div>
<div class="line"><span class="lineno">  314</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a0eb017023c57324c9f92bce011aaf3c9">core_scheduler</a>()-&gt;<a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">current_thread</a>();</div>
<div class="line"><span class="lineno">  315</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Scheduler_html_a4b29a981d21849fa08d64a51a5111932"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Scheduler.html#a4b29a981d21849fa08d64a51a5111932">MaxOS::processes::Scheduler::current_thread</a></div><div class="ttdeci">Thread * current_thread()</div><div class="ttdoc">Gets the currently executing thread.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00686">scheduler.cpp:686</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="scheduler_8cpp_source.html#l00346">core_scheduler()</a>, and <a class="el" href="scheduler_8cpp_source.html#l00686">MaxOS::processes::Scheduler::current_thread()</a>.</p>

<p class="reference">Referenced by <a class="el" href="spinlock_8cpp_source.html#l00101">MaxOS::common::BlockingLock::acquire()</a>, <a class="el" href="scheduler_8cpp_source.html#l00165">print_running_header()</a>, <a class="el" href="syscalls_8cpp_source.html#l00335">MaxOS::system::SyscallManager::syscall_thread_close()</a>, <a class="el" href="syscalls_8cpp_source.html#l00316">MaxOS::system::SyscallManager::syscall_thread_sleep()</a>, and <a class="el" href="scheduler_8cpp_source.html#l00078">yield()</a>.</p>

</div>
</div>
<a id="ac32ed71ca0571c1cf2125b3360549757" name="ac32ed71ca0571c1cf2125b3360549757"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac32ed71ca0571c1cf2125b3360549757">&#9670;&#160;</a></span>deactivate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GlobalScheduler::deactivate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deactivates each core's scheduler. </p>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00109">109</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  109</span>                                 {</div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>    s_instance -&gt; m_active = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  112</span>    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; core : <a class="code hl_class" href="classMaxOS_1_1system_1_1CPU.html">CPU</a>::cores)</div>
<div class="line"><span class="lineno">  113</span>        core-&gt;scheduler-&gt;<a class="code hl_function" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#ac32ed71ca0571c1cf2125b3360549757">deactivate</a>();</div>
<div class="line"><span class="lineno">  114</span> </div>
<div class="line"><span class="lineno">  115</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1GlobalScheduler_html_ac32ed71ca0571c1cf2125b3360549757"><div class="ttname"><a href="classMaxOS_1_1processes_1_1GlobalScheduler.html#ac32ed71ca0571c1cf2125b3360549757">MaxOS::processes::GlobalScheduler::deactivate</a></div><div class="ttdeci">static void deactivate()</div><div class="ttdoc">Deactivates each core's scheduler.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00109">scheduler.cpp:109</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cpu_8h_source.html#l00245">MaxOS::system::CPU::cores</a>.</p>

</div>
</div>
<a id="af8f0feccb59c37c41b25e32e6f3cac4a" name="af8f0feccb59c37c41b25e32e6f3cac4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8f0feccb59c37c41b25e32e6f3cac4a">&#9670;&#160;</a></span>force_remove_process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">system::cpu_status_t * GlobalScheduler::force_remove_process </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1processes_1_1Process.html">Process</a> *&#160;</td>
          <td class="paramname"><em>process</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a process from the scheduler and deletes all threads, begins running the next process. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">process</td><td>The process to remove </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the CPU for the next process to run or nullptr if the process was not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00261">261</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  261</span>                                                                          {</div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>    <span class="comment">// Get the core running the process</span></div>
<div class="line"><span class="lineno">  264</span>    <span class="keywordflow">if</span>(!s_instance)</div>
<div class="line"><span class="lineno">  265</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>    <span class="keyword">auto</span> core = s_instance -&gt; m_core_pids[process-&gt;<a class="code hl_function" href="classMaxOS_1_1processes_1_1Process.html#a37c8fb7d8f9467dd6194ba0b6514e13e">pid</a>()];</div>
<div class="line"><span class="lineno">  268</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classMaxOS_1_1system_1_1CPU.html#acbed3e383ef08559099051d9c7e9d57b">CPU::cores</a>[core]-&gt;scheduler-&gt;force_remove_process(process);</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Process_html_a37c8fb7d8f9467dd6194ba0b6514e13e"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Process.html#a37c8fb7d8f9467dd6194ba0b6514e13e">MaxOS::processes::Process::pid</a></div><div class="ttdeci">uint64_t pid() const</div><div class="ttdoc">Gets the pid of the process.</div><div class="ttdef"><b>Definition</b> <a href="process_8cpp_source.html#l00319">process.cpp:319</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cpu_8h_source.html#l00245">MaxOS::system::CPU::cores</a>, and <a class="el" href="process_8cpp_source.html#l00319">MaxOS::processes::Process::pid()</a>.</p>

</div>
</div>
<a id="a199f03c298a8f58e743db34830327a58" name="a199f03c298a8f58e743db34830327a58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a199f03c298a8f58e743db34830327a58">&#9670;&#160;</a></span>get_process()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1processes_1_1Process.html">Process</a> * GlobalScheduler::get_process </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>pid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a process on the currently executing core by its PID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>The process ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The process or nullptr if not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00290">290</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  290</span>                                                  {</div>
<div class="line"><span class="lineno">  291</span> </div>
<div class="line"><span class="lineno">  292</span>    <span class="comment">// Get the core running the pid</span></div>
<div class="line"><span class="lineno">  293</span>    <span class="keywordflow">if</span>(!s_instance)</div>
<div class="line"><span class="lineno">  294</span>        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  295</span> </div>
<div class="line"><span class="lineno">  296</span>    <span class="keyword">auto</span> core = s_instance -&gt; m_core_pids[pid];</div>
<div class="line"><span class="lineno">  297</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classMaxOS_1_1system_1_1CPU.html#acbed3e383ef08559099051d9c7e9d57b">CPU::cores</a>[core]-&gt;scheduler-&gt;get_process(pid);</div>
<div class="line"><span class="lineno">  298</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cpu_8h_source.html#l00245">MaxOS::system::CPU::cores</a>.</p>

<p class="reference">Referenced by <a class="el" href="syscalls_8cpp_source.html#l00115">MaxOS::system::SyscallManager::syscall_close_process()</a>.</p>

</div>
</div>
<a id="ab3891508a6e69d835b30c5ee81ba8fb0" name="ab3891508a6e69d835b30c5ee81ba8fb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3891508a6e69d835b30c5ee81ba8fb0">&#9670;&#160;</a></span>get_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1processes_1_1Thread.html">Thread</a> * GlobalScheduler::get_thread </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>tid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a thread on the currently executing core by its TID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>The thread ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The thread or nullptr if not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00323">323</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  323</span>                                                {</div>
<div class="line"><span class="lineno">  324</span> </div>
<div class="line"><span class="lineno">  325</span>    <span class="comment">// Get the core running the tid</span></div>
<div class="line"><span class="lineno">  326</span>    <span class="keywordflow">if</span>(!s_instance)</div>
<div class="line"><span class="lineno">  327</span>        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span>    <span class="keyword">auto</span> core = s_instance -&gt; m_core_tids[tid];</div>
<div class="line"><span class="lineno">  330</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classMaxOS_1_1system_1_1CPU.html#acbed3e383ef08559099051d9c7e9d57b">CPU::cores</a>[core]-&gt;scheduler-&gt;get_thread(tid);</div>
<div class="line"><span class="lineno">  331</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cpu_8h_source.html#l00245">MaxOS::system::CPU::cores</a>.</p>

<p class="reference">Referenced by <a class="el" href="spinlock_8cpp_source.html#l00129">MaxOS::common::BlockingLock::release()</a>, and <a class="el" href="syscalls_8cpp_source.html#l00335">MaxOS::system::SyscallManager::syscall_thread_close()</a>.</p>

</div>
</div>
<a id="a26277c64caeab8b00a68de942dfd2fa7" name="a26277c64caeab8b00a68de942dfd2fa7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26277c64caeab8b00a68de942dfd2fa7">&#9670;&#160;</a></span>handle_interrupt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">system::cpu_status_t * GlobalScheduler::handle_interrupt </td>
          <td>(</td>
          <td class="paramtype">system::cpu_status_t *&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the interrupt 0x20. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">status</td><td>The current CPU status </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new CPU status </dd></dl>

<p>Reimplemented from <a class="el" href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html#a3f4303652151fbba92aa7b4513ae0875">MaxOS::hardwarecommunication::InterruptHandler</a>.</p>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00062">62</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   62</span>                                                                                {</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>    <span class="comment">// Scheduler not active</span></div>
<div class="line"><span class="lineno">   65</span>    <span class="keywordflow">if</span>(!s_instance || !s_instance-&gt;m_active)</div>
<div class="line"><span class="lineno">   66</span>        <span class="keywordflow">return</span> status;</div>
<div class="line"><span class="lineno">   67</span> </div>
<div class="line"><span class="lineno">   68</span>    <span class="keyword">auto</span> s = <a class="code hl_function" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a0eb017023c57324c9f92bce011aaf3c9">core_scheduler</a>()-&gt;<a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a85c82e3f0b71fd6e7d570594ea7be397">schedule</a>(status);</div>
<div class="line"><span class="lineno">   69</span>    <a class="code hl_define" href="logger_8h.html#adf7b5d69e4c25995b3211b91b27f33b6">ASSERT</a>(s-&gt;rip != 0, <span class="stringliteral">&quot;Cant run a empty state\n&quot;</span>);</div>
<div class="line"><span class="lineno">   70</span>    <span class="keywordflow">return</span> s;</div>
<div class="line"><span class="lineno">   71</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Scheduler_html_a85c82e3f0b71fd6e7d570594ea7be397"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Scheduler.html#a85c82e3f0b71fd6e7d570594ea7be397">MaxOS::processes::Scheduler::schedule</a></div><div class="ttdeci">system::cpu_status_t * schedule(system::cpu_status_t *cpu_state)</div><div class="ttdoc">Schedules the next thread to run.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00384">scheduler.cpp:384</a></div></div>
<div class="ttc" id="alogger_8h_html_adf7b5d69e4c25995b3211b91b27f33b6"><div class="ttname"><a href="logger_8h.html#adf7b5d69e4c25995b3211b91b27f33b6">ASSERT</a></div><div class="ttdeci">#define ASSERT(condition, format,...)</div><div class="ttdoc">If the specified condition is not met then the kernel will crash with the specified message.</div><div class="ttdef"><b>Definition</b> <a href="logger_8h_source.html#l00095">logger.h:95</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="logger_8h_source.html#l00095">ASSERT</a>, <a class="el" href="scheduler_8cpp_source.html#l00346">core_scheduler()</a>, and <a class="el" href="scheduler_8cpp_source.html#l00384">MaxOS::processes::Scheduler::schedule()</a>.</p>

</div>
</div>
<a id="ac97d198ab1a455b25baa53693f8b0af9" name="ac97d198ab1a455b25baa53693f8b0af9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac97d198ab1a455b25baa53693f8b0af9">&#9670;&#160;</a></span>is_active()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool GlobalScheduler::is_active </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if the global scheduler is active. </p>
<dl class="section return"><dt>Returns</dt><dd>True if the scheduler is active, false otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00355">355</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  355</span>                                {</div>
<div class="line"><span class="lineno">  356</span>    <span class="keywordflow">return</span> s_instance-&gt;m_active;</div>
<div class="line"><span class="lineno">  357</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae22220b83f109ca31a40e99a8758db15" name="ae22220b83f109ca31a40e99a8758db15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae22220b83f109ca31a40e99a8758db15">&#9670;&#160;</a></span>load_multiboot_elfs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GlobalScheduler::load_multiboot_elfs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1system_1_1Multiboot.html">system::Multiboot</a> *&#160;</td>
          <td class="paramname"><em>multiboot</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Loads any valid ELF files from the multiboot structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">multiboot</td><td>The multiboot structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000073">Todo:</a></b></dt><dd>Handle passing multiple args to the process </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00135">135</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  135</span>                                                              {</div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>    <span class="keywordflow">for</span> (<a class="code hl_struct" href="structmultiboot__tag.html">multiboot_tag</a>* tag = multiboot-&gt;<a class="code hl_function" href="classMaxOS_1_1system_1_1Multiboot.html#a30987e6538d9e0aa663a7d5663cb452b">start_tag</a>(); tag-&gt;type != MULTIBOOT_TAG_TYPE_END; tag = (<span class="keyword">struct </span><a class="code hl_struct" href="structmultiboot__tag.html">multiboot_tag</a>*) ((<a class="code hl_class" href="classMaxOS_1_1common_1_1Rectangle.html">multiboot_uint8_t</a>*) tag + ((tag-&gt;size + 7) &amp; ~7))) {</div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>        <span class="comment">// Tag is not an ELF</span></div>
<div class="line"><span class="lineno">  140</span>        <span class="keywordflow">if</span> (tag-&gt;type != MULTIBOOT_TAG_TYPE_MODULE)</div>
<div class="line"><span class="lineno">  141</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>        <span class="comment">// Try to create the elf from the module</span></div>
<div class="line"><span class="lineno">  144</span>        <span class="keyword">auto</span>* <span class="keyword">module</span> = (struct multiboot_tag_module*) tag;</div>
<div class="line"><span class="lineno">  145</span>        <a class="code hl_class" href="classMaxOS_1_1processes_1_1ELF64.html">ELF64</a> elf((uintptr_t) <a class="code hl_function" href="classMaxOS_1_1memory_1_1PhysicalMemoryManager.html#a061e07bff657447294f4005f550d87ac">PhysicalMemoryManager::to_dm_region</a>(module-&gt;mod_start));</div>
<div class="line"><span class="lineno">  146</span>        <span class="keywordflow">if</span> (!elf.is_valid())</div>
<div class="line"><span class="lineno">  147</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>        <a class="code hl_function" href="classLogger.html#a1df434c9cd82457b6830c0500731a601">Logger::DEBUG</a>() &lt;&lt; <span class="stringliteral">&quot;Creating process from multiboot module for &quot;</span> &lt;&lt; <span class="keyword">module</span>-&gt;cmdline &lt;&lt; &quot; (at 0x&quot; &lt;&lt; (uint64_t) module-&gt;mod_start &lt;&lt; &quot;)\n&quot;;</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>        <span class="comment">// Create an array of args for the process</span></div>
<div class="line"><span class="lineno">  152</span>        <span class="keywordtype">char</span>* args[1] = {<span class="keyword">module</span>-&gt;cmdline};</div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span>        <span class="comment">// Create the process</span></div>
<div class="line"><span class="lineno">  155</span>        <span class="keyword">auto</span>* process = <span class="keyword">new</span> <a class="code hl_class" href="classMaxOS_1_1processes_1_1Process.html">Process</a>(module-&gt;cmdline, args, 1, &amp;elf);</div>
<div class="line"><span class="lineno">  156</span>        <a class="code hl_function" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a92932d6664340c61e8174c93168d7932">GlobalScheduler::system_scheduler</a>() -&gt; <a class="code hl_function" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#adb0782a16515ac2e9268fccce8cd2112">add_process</a>(process);</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>        <a class="code hl_function" href="classLogger.html#a1df434c9cd82457b6830c0500731a601">Logger::DEBUG</a>() &lt;&lt; <span class="stringliteral">&quot;ELF loaded to pid &quot;</span> &lt;&lt; process-&gt;pid() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">  159</span>    }</div>
<div class="line"><span class="lineno">  160</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1common_1_1Rectangle_html"><div class="ttname"><a href="classMaxOS_1_1common_1_1Rectangle.html">MaxOS::common::Rectangle</a></div><div class="ttdoc">Stores the left, top, width and height of a rectangle.</div><div class="ttdef"><b>Definition</b> <a href="rectangle_8h_source.html#l00024">rectangle.h:24</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1memory_1_1PhysicalMemoryManager_html_a061e07bff657447294f4005f550d87ac"><div class="ttname"><a href="classMaxOS_1_1memory_1_1PhysicalMemoryManager.html#a061e07bff657447294f4005f550d87ac">MaxOS::memory::PhysicalMemoryManager::to_dm_region</a></div><div class="ttdeci">static void * to_dm_region(uintptr_t physical_address)</div><div class="ttdoc">Converts a physical address to a direct map region address if it is in the lower region using the hig...</div><div class="ttdef"><b>Definition</b> <a href="physical_8cpp_source.html#l00908">physical.cpp:908</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1ELF64_html"><div class="ttname"><a href="classMaxOS_1_1processes_1_1ELF64.html">MaxOS::processes::ELF64</a></div><div class="ttdoc">Handles the loading and parsing of 64-bit ELF files.</div><div class="ttdef"><b>Definition</b> <a href="elf_8h_source.html#l00202">elf.h:202</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1GlobalScheduler_html_a92932d6664340c61e8174c93168d7932"><div class="ttname"><a href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a92932d6664340c61e8174c93168d7932">MaxOS::processes::GlobalScheduler::system_scheduler</a></div><div class="ttdeci">static GlobalScheduler * system_scheduler()</div><div class="ttdoc">Gets the system scheduler.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00050">scheduler.cpp:50</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1GlobalScheduler_html_adb0782a16515ac2e9268fccce8cd2112"><div class="ttname"><a href="classMaxOS_1_1processes_1_1GlobalScheduler.html#adb0782a16515ac2e9268fccce8cd2112">MaxOS::processes::GlobalScheduler::add_process</a></div><div class="ttdeci">uint64_t add_process(Process *process)</div><div class="ttdoc">Adds a process to the least busy core.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00183">scheduler.cpp:183</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Process_html"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Process.html">MaxOS::processes::Process</a></div><div class="ttdoc">A process that can be scheduled by the Scheduler, wraps &amp; manages threads as well as its own address ...</div><div class="ttdef"><b>Definition</b> <a href="process_8h_source.html#l00083">process.h:84</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1system_1_1Multiboot_html_a30987e6538d9e0aa663a7d5663cb452b"><div class="ttname"><a href="classMaxOS_1_1system_1_1Multiboot.html#a30987e6538d9e0aa663a7d5663cb452b">MaxOS::system::Multiboot::start_tag</a></div><div class="ttdeci">multiboot_tag * start_tag() const</div><div class="ttdef"><b>Definition</b> <a href="multiboot_8cpp_source.html#l00182">multiboot.cpp:182</a></div></div>
<div class="ttc" id="astructmultiboot__tag_html"><div class="ttname"><a href="structmultiboot__tag.html">multiboot_tag</a></div><div class="ttdoc">Common header for all multiboot info tags.</div><div class="ttdef"><b>Definition</b> <a href="multiboot_8h_source.html#l00234">multiboot.h:234</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="scheduler_8cpp_source.html#l00183">add_process()</a>, <a class="el" href="logger_8cpp_source.html#l00178">Logger::DEBUG()</a>, <a class="el" href="elf_8cpp_source.html#l00098">MaxOS::processes::ELF64::is_valid()</a>, <a class="el" href="multiboot_8cpp_source.html#l00182">MaxOS::system::Multiboot::start_tag()</a>, <a class="el" href="scheduler_8cpp_source.html#l00050">system_scheduler()</a>, and <a class="el" href="physical_8cpp_source.html#l00908">MaxOS::memory::PhysicalMemoryManager::to_dm_region()</a>.</p>

<p class="reference">Referenced by <a class="el" href="scheduler_8cpp_source.html#l00024">GlobalScheduler()</a>.</p>

</div>
</div>
<a id="a06e979b83c4cd3db3eed8b333188d037" name="a06e979b83c4cd3db3eed8b333188d037"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06e979b83c4cd3db3eed8b333188d037">&#9670;&#160;</a></span>next_pid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t GlobalScheduler::next_pid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the next usable global PID. </p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00304">304</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  304</span>                                   {</div>
<div class="line"><span class="lineno">  305</span>    <span class="keywordflow">return</span> s_instance -&gt; m_next_pid++;</div>
<div class="line"><span class="lineno">  306</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="scheduler_8cpp_source.html#l00502">MaxOS::processes::Scheduler::add_process()</a>.</p>

</div>
</div>
<a id="a6197a324f9a16fdf1b3990df4eb7ddd3" name="a6197a324f9a16fdf1b3990df4eb7ddd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6197a324f9a16fdf1b3990df4eb7ddd3">&#9670;&#160;</a></span>next_tid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t GlobalScheduler::next_tid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the next usable global TID. </p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00337">337</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  337</span>                                   {</div>
<div class="line"><span class="lineno">  338</span>    <span class="keywordflow">return</span> s_instance-&gt;m_next_tid++;</div>
<div class="line"><span class="lineno">  339</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="scheduler_8cpp_source.html#l00524">MaxOS::processes::Scheduler::add_thread()</a>.</p>

</div>
</div>
<a id="a4f462a1b05f9bf785a903bd0f3e495a0" name="a4f462a1b05f9bf785a903bd0f3e495a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f462a1b05f9bf785a903bd0f3e495a0">&#9670;&#160;</a></span>print_running_header()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GlobalScheduler::print_running_header </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Print the header for the running processes in the form ({name}:t{tid}c{core}) </p>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00165">165</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  165</span>                                           {</div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>    <span class="comment">// No threads or processes to get</span></div>
<div class="line"><span class="lineno">  168</span>    <span class="keywordflow">if</span>(!s_instance || !s_instance-&gt;m_active)</div>
<div class="line"><span class="lineno">  169</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>    <span class="keyword">auto</span> process = <a class="code hl_function" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#aa070d442d88c4e6adee1c57772c5be34">current_process</a>();</div>
<div class="line"><span class="lineno">  172</span>    <span class="keyword">auto</span> thread   = <a class="code hl_function" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#ad70d085e581a761a809a575ad3626922">current_thread</a>();</div>
<div class="line"><span class="lineno">  173</span> </div>
<div class="line"><span class="lineno">  174</span>    <a class="code hl_function" href="classLogger.html#a2240fadc00ba8731c0117c019d800644">Logger::Out</a>() &lt;&lt; <span class="stringliteral">&quot;(&quot;</span> &lt;&lt; process-&gt;name &lt;&lt; <span class="stringliteral">&quot;:t&quot;</span> &lt;&lt; thread-&gt;tid  &lt;&lt; <span class="stringliteral">&quot;c&quot;</span> &lt;&lt; <a class="code hl_function" href="classMaxOS_1_1system_1_1CPU.html#adf91af6b880b57ae580a0a91ed4b71f7">CPU::executing_core</a>()-&gt;<a class="code hl_variable" href="classMaxOS_1_1system_1_1Core.html#a9ec1cb7099f0a687903e05b7f50c25f8">id</a> &lt;&lt; <span class="stringliteral">&quot;) &quot;</span>;</div>
<div class="line"><span class="lineno">  175</span>}</div>
<div class="ttc" id="aclassLogger_html_a2240fadc00ba8731c0117c019d800644"><div class="ttname"><a href="classLogger.html#a2240fadc00ba8731c0117c019d800644">Logger::Out</a></div><div class="ttdeci">static Logger &amp; Out()</div><div class="ttdoc">Gets the active logger.</div><div class="ttdef"><b>Definition</b> <a href="logger_8cpp_source.html#l00145">logger.cpp:145</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1GlobalScheduler_html_aa070d442d88c4e6adee1c57772c5be34"><div class="ttname"><a href="classMaxOS_1_1processes_1_1GlobalScheduler.html#aa070d442d88c4e6adee1c57772c5be34">MaxOS::processes::GlobalScheduler::current_process</a></div><div class="ttdeci">static Process * current_process()</div><div class="ttdoc">Gets the process on the currently executing core.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00277">scheduler.cpp:277</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1GlobalScheduler_html_ad70d085e581a761a809a575ad3626922"><div class="ttname"><a href="classMaxOS_1_1processes_1_1GlobalScheduler.html#ad70d085e581a761a809a575ad3626922">MaxOS::processes::GlobalScheduler::current_thread</a></div><div class="ttdeci">static Thread * current_thread()</div><div class="ttdoc">Gets the thread on the currently executing core.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00313">scheduler.cpp:313</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1system_1_1Core_html_a9ec1cb7099f0a687903e05b7f50c25f8"><div class="ttname"><a href="classMaxOS_1_1system_1_1Core.html#a9ec1cb7099f0a687903e05b7f50c25f8">MaxOS::system::Core::id</a></div><div class="ttdeci">uint8_t id</div><div class="ttdoc">The ID of this core.</div><div class="ttdef"><b>Definition</b> <a href="cpu_8h_source.html#l00215">cpu.h:215</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="scheduler_8cpp_source.html#l00277">current_process()</a>, <a class="el" href="scheduler_8cpp_source.html#l00313">current_thread()</a>, <a class="el" href="cpu_8cpp_source.html#l00620">MaxOS::system::CPU::executing_core()</a>, <a class="el" href="cpu_8h_source.html#l00215">MaxOS::system::Core::id</a>, and <a class="el" href="logger_8cpp_source.html#l00145">Logger::Out()</a>.</p>

<p class="reference">Referenced by <a class="el" href="logger_8cpp_source.html#l00083">Logger::set_log_level()</a>.</p>

</div>
</div>
<a id="a21b5962ea20b3ef69978bdd60320e098" name="a21b5962ea20b3ef69978bdd60320e098"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21b5962ea20b3ef69978bdd60320e098">&#9670;&#160;</a></span>remove_process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t GlobalScheduler::remove_process </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaxOS_1_1processes_1_1Process.html">Process</a> *&#160;</td>
          <td class="paramname"><em>process</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a process from the scheduler if the process has no threads, if it does then the threads are stopped but the process is not removed (this will be done automatically when all threads are stopped) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">process</td><td>The process to remove </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 if the process has threads, 0 otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00245">245</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  245</span>                                                         {</div>
<div class="line"><span class="lineno">  246</span> </div>
<div class="line"><span class="lineno">  247</span>    <span class="comment">// Get the core running the process</span></div>
<div class="line"><span class="lineno">  248</span>    <span class="keywordflow">if</span>(!s_instance)</div>
<div class="line"><span class="lineno">  249</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>    <span class="keyword">auto</span> core = s_instance -&gt; m_core_pids[process-&gt;<a class="code hl_function" href="classMaxOS_1_1processes_1_1Process.html#a37c8fb7d8f9467dd6194ba0b6514e13e">pid</a>()];</div>
<div class="line"><span class="lineno">  252</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classMaxOS_1_1system_1_1CPU.html#acbed3e383ef08559099051d9c7e9d57b">CPU::cores</a>[core]-&gt;scheduler-&gt;remove_process(process);</div>
<div class="line"><span class="lineno">  253</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cpu_8h_source.html#l00245">MaxOS::system::CPU::cores</a>, and <a class="el" href="process_8cpp_source.html#l00319">MaxOS::processes::Process::pid()</a>.</p>

</div>
</div>
<a id="a92932d6664340c61e8174c93168d7932" name="a92932d6664340c61e8174c93168d7932"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92932d6664340c61e8174c93168d7932">&#9670;&#160;</a></span>system_scheduler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html">GlobalScheduler</a> * GlobalScheduler::system_scheduler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the system scheduler. </p>
<dl class="section return"><dt>Returns</dt><dd>The system scheduler or nullptr if not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00050">50</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   50</span>                                                   {</div>
<div class="line"><span class="lineno">   51</span> </div>
<div class="line"><span class="lineno">   52</span>    <span class="keywordflow">return</span> s_instance;</div>
<div class="line"><span class="lineno">   53</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="scheduler_8cpp_source.html#l00135">load_multiboot_elfs()</a>, <a class="el" href="cpu_8cpp_source.html#l00492">MaxOS::system::CPU::prepare_for_panic()</a>, and <a class="el" href="syscalls_8cpp_source.html#l00115">MaxOS::system::SyscallManager::syscall_close_process()</a>.</p>

</div>
</div>
<a id="a3d2377ff36a2a416b949ac6774475398" name="a3d2377ff36a2a416b949ac6774475398"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d2377ff36a2a416b949ac6774475398">&#9670;&#160;</a></span>yield()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">system::cpu_status_t * GlobalScheduler::yield </td>
          <td>(</td>
          <td class="paramtype">system::cpu_status_t *&#160;</td>
          <td class="paramname"><em>current</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pass execution to the next thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current</td><td>where to resume this thread to </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00078">78</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   78</span>                                                                {</div>
<div class="line"><span class="lineno">   79</span>    <a class="code hl_function" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#ad70d085e581a761a809a575ad3626922">current_thread</a>()-&gt;<a class="code hl_variable" href="classMaxOS_1_1processes_1_1Thread.html#a920e84f873b5ad33355fbde1fb2d8047">execution_state</a> = *current;</div>
<div class="line"><span class="lineno">   80</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classMaxOS_1_1processes_1_1GlobalScheduler.html#a0eb017023c57324c9f92bce011aaf3c9">core_scheduler</a>()-&gt;<a class="code hl_function" href="classMaxOS_1_1processes_1_1Scheduler.html#a4e3cb6c6cc95d62dc6149c0ec934c723">yield</a>();</div>
<div class="line"><span class="lineno">   81</span>}</div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Scheduler_html_a4e3cb6c6cc95d62dc6149c0ec934c723"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Scheduler.html#a4e3cb6c6cc95d62dc6149c0ec934c723">MaxOS::processes::Scheduler::yield</a></div><div class="ttdeci">system::cpu_status_t * yield()</div><div class="ttdoc">Pass execution to the next thread.</div><div class="ttdef"><b>Definition</b> <a href="scheduler_8cpp_source.html#l00550">scheduler.cpp:550</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1processes_1_1Thread_html_a920e84f873b5ad33355fbde1fb2d8047"><div class="ttname"><a href="classMaxOS_1_1processes_1_1Thread.html#a920e84f873b5ad33355fbde1fb2d8047">MaxOS::processes::Thread::execution_state</a></div><div class="ttdeci">system::cpu_status_t execution_state</div><div class="ttdoc">The CPU state of the thread.</div><div class="ttdef"><b>Definition</b> <a href="process_8h_source.html#l00065">process.h:65</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="scheduler_8cpp_source.html#l00346">core_scheduler()</a>, <a class="el" href="scheduler_8cpp_source.html#l00313">current_thread()</a>, <a class="el" href="process_8h_source.html#l00065">MaxOS::processes::Thread::execution_state</a>, and <a class="el" href="scheduler_8cpp_source.html#l00550">MaxOS::processes::Scheduler::yield()</a>.</p>

<p class="reference">Referenced by <a class="el" href="syscalls_8cpp_source.html#l00316">MaxOS::system::SyscallManager::syscall_thread_sleep()</a>, and <a class="el" href="syscalls_8cpp_source.html#l00302">MaxOS::system::SyscallManager::syscall_thread_yield()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/runner/work/MaxOS/MaxOS/kernel/include/processes/<a class="el" href="scheduler_8h_source.html">scheduler.h</a></li>
<li>/home/runner/work/MaxOS/MaxOS/kernel/src/processes/<a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>MaxOS</b></li><li class="navelem"><b>processes</b></li><li class="navelem"><a class="el" href="classMaxOS_1_1processes_1_1GlobalScheduler.html">GlobalScheduler</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
