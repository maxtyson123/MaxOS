<!-- HTML header for doxygen 1.8.17-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Max OS: /home/runner/work/MaxOS/MaxOS/kernel/src/drivers/ethernet/intel_i217.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Max OS
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('intel__i217_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">intel_i217.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="intel__i217_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Created by 98max on 11/29/2022.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160; </div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="intel__i217_8h.html">drivers/ethernet/intel_i217.h</a>&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160; </div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceMaxOS.html">MaxOS</a>;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceMaxOS_1_1common.html">MaxOS::common</a>;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceMaxOS_1_1drivers.html">MaxOS::drivers</a>;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceMaxOS_1_1drivers_1_1ethernet.html">MaxOS::drivers::ethernet</a>;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceMaxOS_1_1hardwarecommunication.html">MaxOS::hardwarecommunication</a>;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">using namespace </span>memory;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// Buffer Sizes</span></div>
<div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="intel__i217_8cpp.html#af544636aa35db7b07d622b7f1fd907f5">   15</a></span>&#160;<span class="preprocessor">#define buffer256                  (3 &lt;&lt; 16)</span></div>
<div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="intel__i217_8cpp.html#a76a673a503229f2d1d9765e208bd271b">   16</a></span>&#160;<span class="preprocessor">#define buffer512                  (2 &lt;&lt; 16)</span></div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="intel__i217_8cpp.html#aa9ea3c6f6015eb181cec65318c6de3ba">   17</a></span>&#160;<span class="preprocessor">#define buffer1024                 (1 &lt;&lt; 16)</span></div>
<div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="intel__i217_8cpp.html#a12891832ca60f516a501970fe8fbff44">   18</a></span>&#160;<span class="preprocessor">#define buffer2048                 (0 &lt;&lt; 16)</span></div>
<div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="intel__i217_8cpp.html#abde410cc05fbc572f64279e31221d370">   19</a></span>&#160;<span class="preprocessor">#define buffer4096                 ((3 &lt;&lt; 16) | (1 &lt;&lt; 25))</span></div>
<div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="intel__i217_8cpp.html#aa3ab55cb1937ef26708a01f9a2870909">   20</a></span>&#160;<span class="preprocessor">#define buffer8192                 ((2 &lt;&lt; 16) | (1 &lt;&lt; 25))</span></div>
<div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="intel__i217_8cpp.html#ac93a1aec990563b8970716dc94da3735">   21</a></span>&#160;<span class="preprocessor">#define buffer16384                ((1 &lt;&lt; 16) | (1 &lt;&lt; 25))</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#ae3816074854cdffb2e62d4c22c323485">   25</a></span>&#160;intel_i217::intel_i217(<a class="code" href="classMaxOS_1_1hardwarecommunication_1_1PeripheralComponentInterconnectDeviceDescriptor.html">PeripheralComponentInterconnectDeviceDescriptor</a> *deviceDescriptor, <a class="code" href="classMaxOS_1_1hardwarecommunication_1_1InterruptManager.html">InterruptManager</a> *interruptManager, <a class="code" href="classMaxOS_1_1common_1_1OutputStream.html">OutputStream</a>* intelNetMessageStream)</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;: <a class="code" href="classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver.html">EthernetDriver</a>(intelNetMessageStream),</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <a class="code" href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html">InterruptHandler</a>(deviceDescriptor-&gt;interrupt +</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;                           interruptManager-&gt;hardware_interrupt_offset(), interruptManager)</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;{</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="comment">//Set the registers</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    controlRegister = 0x0000;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    statusRegister = 0x0008;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    epromRegister = 0x0014;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    controlExtRegister = 0x0018;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    interruptMaskRegister = 0x00D0;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    receiveControlRegister = 0x0100;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    receiveDescriptorLowRegister = 0x2800;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    receiveDescriptorHighRegister = 0x2804;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    receiveDescriptorLengthRegister = 0x2808;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    receiveDescriptorHeadRegister = 0x2810;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    receiveDescriptorTailRegister = 0x2818;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    sendControlRegister = 0x0400;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    sendDescriptorLowRegister = 0x3800;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    sendDescriptorHighRegister = 0x3804;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    sendDescriptorLengthRegister = 0x3808;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    sendDescriptorHeadRegister = 0x3810;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    sendDescriptorTailRegister = 0x3818;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">// Get BAR0 type, io_base address and MMIO base address</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    bar_type = 1; <span class="comment">// deviceDescriptor -&gt; has_memory_base ? 0 : 1;  //TODO: Fix memory mapping from PCI as it is unable to get MAC from memory</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    portBase = deviceDescriptor -&gt;<a class="code" href="classMaxOS_1_1hardwarecommunication_1_1PeripheralComponentInterconnectDeviceDescriptor.html#af9db8d9903071f7cf8611efa3c7a1333">port_base</a>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="comment">//TODO: memBase = deviceDescriptor -&gt; memory_base;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    initDone = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    active = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment">//Clear eprom</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    epromPresent = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">//Detect eprom</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    detectEEProm ();</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">if</span> (readMACAddress()){</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        ownMAC = <a class="code" href="classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver.html#a6f9da09673454cba63cb38400443667c">CreateMediaAccessControlAddress</a>(macAddress[0], macAddress[1], macAddress[2], macAddress[3], macAddress[4], macAddress[5]);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      <a class="code" href="classMaxOS_1_1drivers_1_1Driver.html#aceaadfd977efff51ee4e851e362b993a">error_message</a>(<span class="stringliteral">&quot;ERROR, INIT FAILED, MAC ADDRESS NOT FOUND&quot;</span>);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="keywordflow">while</span> (<span class="keyword">true</span>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a> = 0; <a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a> &lt; 0x80; <a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a>++)               <span class="comment">//Loop through all the registers</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        Write(0x5200 + <a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a>*4, 0);     <span class="comment">//Clear the receive descriptor array</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#af1278e90474e7dd010cba46756ff97d0">   85</a></span>&#160;<a class="code" href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#af1278e90474e7dd010cba46756ff97d0">intel_i217::~intel_i217</a>() {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="keywordtype">void</span> intel_i217::Write(uint16_t <a class="code" href="amd__am79c973_8h.html#ac0d31ca829f934cccd89f8054e02773e">address</a>, uint32_t <a class="code" href="icmp_8h.html#a1e43bf7d608e87228b625cca2c04d641">data</a>) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment">//Note: These Ports/MemIO cant be init in the constructor like they normaly would as it depends wether the device is using IO or MemIO, and checking that in every function would be messy</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">if</span>(bar_type == 0) {                                             <span class="comment">// If the base address register is memory mapped</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        MemIO32Bit dataMem(memBase + <a class="code" href="amd__am79c973_8h.html#ac0d31ca829f934cccd89f8054e02773e">address</a>);              <span class="comment">// Create a 32 bit memory class at the address</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        dataMem.write(<a class="code" href="icmp_8h.html#a1e43bf7d608e87228b625cca2c04d641">data</a>);                                       <span class="comment">// write the data to the memory adress</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <a class="code" href="classMaxOS_1_1hardwarecommunication_1_1Port32Bit.html">Port32Bit</a> commandPort(portBase);            <span class="comment">// Create a 32 bit port at the address</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <a class="code" href="classMaxOS_1_1hardwarecommunication_1_1Port32Bit.html">Port32Bit</a> dataPort(portBase + 4);           <span class="comment">// Create a 32 bit port at the address + 4</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        commandPort.write(<a class="code" href="amd__am79c973_8h.html#ac0d31ca829f934cccd89f8054e02773e">address</a>);                     <span class="comment">// write the address to the command port</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        dataPort.write(<a class="code" href="icmp_8h.html#a1e43bf7d608e87228b625cca2c04d641">data</a>);                                <span class="comment">// write the data to the data port</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    }</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;}</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;uint32_t intel_i217::Read(uint16_t <a class="code" href="amd__am79c973_8h.html#ac0d31ca829f934cccd89f8054e02773e">address</a>) {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment">//Note: These Ports/MemIO cant be init in the constructor like they normaly would as it depends wether the device is using IO or MemIO, and checking that in every function would be messy</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">if</span>(bar_type == 0) {                                             <span class="comment">// If the base address register is memory mapped</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        MemIO32Bit dataMem(memBase + <a class="code" href="amd__am79c973_8h.html#ac0d31ca829f934cccd89f8054e02773e">address</a>);               <span class="comment">// Create a 32 bit memory class at the address</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">return</span> dataMem.read();                                      <span class="comment">// read the data from the memory adress</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    } <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <a class="code" href="classMaxOS_1_1hardwarecommunication_1_1Port32Bit.html">Port32Bit</a> commandPort(portBase);            <span class="comment">// Create a 32 bit port at the address</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <a class="code" href="classMaxOS_1_1hardwarecommunication_1_1Port32Bit.html">Port32Bit</a> dataPort(portBase + 4);           <span class="comment">// Create a 32 bit port at the address + 4</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        commandPort.write(<a class="code" href="amd__am79c973_8h.html#ac0d31ca829f934cccd89f8054e02773e">address</a>);                     <span class="comment">// write the address to the command port</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">return</span> dataPort.read();                              <span class="comment">// read the data from the data port</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;}</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="keywordtype">bool</span> intel_i217::detectEEProm() {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    uint32_t val = 0;                                   <span class="comment">// The value to be returned</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    Write(epromRegister, 0x1);              <span class="comment">// Set the register to read the EEProm</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a> = 0; <a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a> &lt; 1000 &amp;&amp; ! epromPresent; <a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a>++)     <span class="comment">//Loop 1000 times or until the EEProm is detected</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        val = Read( 0x0014);                    <span class="comment">// read the register</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keywordflow">if</span>(val &amp; 0x10)                                 <span class="comment">// If the EEProm is detected</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            epromPresent = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">else</span>                                           <span class="comment">// If the EEProm is not detected</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            epromPresent = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">return</span> epromPresent;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;uint32_t intel_i217::eepromRead( uint8_t addr)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;{</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    uint16_t <a class="code" href="icmp_8h.html#a1e43bf7d608e87228b625cca2c04d641">data</a> = 0;                                                              <span class="comment">// The data to be returned</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    uint32_t tmp = 0;                                                               <span class="comment">// A temporary variable</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span> ( epromPresent)                                                              <span class="comment">// If the EEProm is detected</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        Write( epromRegister, (1) | ((uint32_t)(addr) &lt;&lt; 8) );         <span class="comment">// write the address to the register</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">while</span>( !((tmp = Read(epromRegister)) &amp; (1 &lt;&lt; 4)) );                 <span class="comment">// Wait for the EEProm to be ready</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        Write( epromRegister, (1) | ((uint32_t)(addr) &lt;&lt; 2) );        <span class="comment">// write the address to the register</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">while</span>( !((tmp = Read(epromRegister)) &amp; (1 &lt;&lt; 1)) );                <span class="comment">// Wait for the EEProm to be ready</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="icmp_8h.html#a1e43bf7d608e87228b625cca2c04d641">data</a> = (uint16_t)((tmp &gt;&gt; 16) &amp; 0xFFFF);                                      <span class="comment">// Get the data from the register</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="icmp_8h.html#a1e43bf7d608e87228b625cca2c04d641">data</a>;                                                                  <span class="comment">// Return the data</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="keywordtype">bool</span> intel_i217::readMACAddress() {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">if</span> ( epromPresent)                                                                <span class="comment">//If the EPROM exists</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        uint32_t temp;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        temp = eepromRead(0);                                                   <span class="comment">//read the m_first_memory_chunk 16 bits of the MAC address</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        macAddress[0] = temp &amp;0xff;                                                  <span class="comment">//Get the m_first_memory_chunk 8 bits of the MAC address</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        macAddress[1] = temp &gt;&gt; 8;                                                   <span class="comment">//Get the second 8 bits of the MAC address</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        temp = eepromRead( 1);                                                  <span class="comment">//read the second 16 bits of the MAC address</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        macAddress[2] = temp &amp;0xff;                                                  <span class="comment">//Get the third 8 bits of the MAC address</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        macAddress[3] = temp &gt;&gt; 8;                                                   <span class="comment">//Get the fourth 8 bits of the MAC address</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        temp = eepromRead( 2);                                                  <span class="comment">//read the third 16 bits of the MAC address</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        macAddress[4] = temp &amp;0xff;                                                  <span class="comment">//Get the fifth 8 bits of the MAC address</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        macAddress[5] = temp &gt;&gt; 8;                                                   <span class="comment">//Get the sixth 8 bits of the MAC address</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">else</span>    <span class="comment">//If there is no eprom then read from memory</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        uint8_t * mem_base_mac_8 = (uint8_t *) (memBase+0x5400);                   <span class="comment">//Get the base address of the MAC address</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        uint32_t * mem_base_mac_32 = (uint32_t *) (memBase+0x5400);                <span class="comment">//Get the base address of the MAC address</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">if</span> ( mem_base_mac_32[0] != 0 )</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a> = 0; <a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a> &lt; 6; <a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a>++)                                            <span class="comment">//Loop through the MAC address</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                macAddress[<a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a>] = mem_base_mac_8[<a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a>];                                <span class="comment">//Get the MAC address</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="keywordtype">void</span> intel_i217::receiveInit() {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    uint8_t * ptr;                                                                                                          <span class="comment">//A pointer to the memory</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keyword">struct </span>receiveDescriptor *descs;                                                                                        <span class="comment">//A pointer to the receive descriptors</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    ptr = (uint8_t *)(MemoryManager::s_active_memory_manager-&gt;malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> receiveDescriptor)*32 + 16));           <span class="comment">//Allocate memory for the receive descriptors</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    descs = (<span class="keyword">struct </span>receiveDescriptor *)ptr;                                                                                <span class="comment">//Set the pointer to the receive descriptors</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a> = 0; <a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a> &lt; 32; <a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a>++)</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        receiveDsrctrs[<a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a>] = (<span class="keyword">struct </span>receiveDescriptor *)((uint8_t *)descs + <a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a>*16);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        receiveDsrctrs[<a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a>] -&gt; <a class="code" href="intel__i217_8h.html#a1eabb40700e8ed04c40ed0bf1e1568dd">bufferAddress</a> = (uint64_t)(uint8_t *)(MemoryManager::s_active_memory_manager</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                                      -&gt;malloc(8192 + 16));</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        receiveDsrctrs[<a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a>] -&gt; <a class="code" href="intel__i217_8h.html#ade818037fd6c985038ff29656089758d">status</a> = 0;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">//write the send descriptor list address to the register</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <a class="code" href="namespaceMaxOS_1_1memory.html#ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151">Write</a>(sendDescriptorLowRegister, (uint32_t)((uint64_t)ptr &gt;&gt; 32) );</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="namespaceMaxOS_1_1memory.html#ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151">Write</a>(sendDescriptorHighRegister, (uint32_t)((uint64_t)ptr &amp; 0xFFFFFFFF));</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="comment">//write the recieve descriptor list address to the register</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="namespaceMaxOS_1_1memory.html#ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151">Write</a>(receiveDescriptorLowRegister, (uint64_t)ptr);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="namespaceMaxOS_1_1memory.html#ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151">Write</a>(receiveDescriptorHighRegister, 0);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">//Set the recieve descriptor list length</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <a class="code" href="namespaceMaxOS_1_1memory.html#ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151">Write</a>(receiveDescriptorLengthRegister, 32 * 16);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <a class="code" href="namespaceMaxOS_1_1memory.html#ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151">Write</a>(receiveDescriptorHeadRegister, 0);                                                                       <span class="comment">//Set the head to 0</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="namespaceMaxOS_1_1memory.html#ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151">Write</a>(receiveDescriptorTailRegister, 32-1);                                                                    <span class="comment">//Set the tail to 32-1</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    currentReceiveBuffer = 0;                                                                                                   <span class="comment">//Set the current receive buffer to 0</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="namespaceMaxOS_1_1memory.html#ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151">Write</a>(receiveControlRegister, (1 &lt;&lt; 1)    <span class="comment">// Receiver Enable</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                                       | (1 &lt;&lt; 2)         <span class="comment">// Store Bad Packets</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                                       | (1 &lt;&lt; 3)         <span class="comment">// Uni cast Promiscuous Enabled</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                                       |  (1 &lt;&lt; 4)        <span class="comment">// Multicast Promiscuous Enabled</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                                       |  (0 &lt;&lt; 6)        <span class="comment">// No Loop back</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                                       |  (0 &lt;&lt; 8)        <span class="comment">// Free Buffer Threshold is 1/2 of RDLEN</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                                       |  (1 &lt;&lt; 15)       <span class="comment">// Broadcast Accept Mode</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                                       |  (1 &lt;&lt; 26)       <span class="comment">// Strip Ethernet CRC</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                                       | <a class="code" href="intel__i217_8cpp.html#aa3ab55cb1937ef26708a01f9a2870909">buffer8192</a></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                                       );</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="keywordtype">void</span> intel_i217::sendInit() {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    uint8_t * ptr;                                                                                                          <span class="comment">//A pointer to the memory</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keyword">struct </span>sendDescriptor *descs;                                                                                           <span class="comment">//A pointer to the send descriptors</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    ptr = (uint8_t *)(MemoryManager::s_active_memory_manager-&gt;malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> sendDescriptor)*8 + 16));                <span class="comment">//Allocate memory for the send descriptors</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    descs = (<span class="keyword">struct </span>sendDescriptor *)ptr;                                                                                   <span class="comment">//Set the pointer to the send descriptors</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a> = 0; <a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a> &lt; 8; <a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a>++)</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        sendDsrctrs[<a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a>] = (<span class="keyword">struct </span>sendDescriptor *)((uint8_t*)descs + <a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a>*16);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        sendDsrctrs[<a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a>] -&gt; <a class="code" href="intel__i217_8h.html#a1eabb40700e8ed04c40ed0bf1e1568dd">bufferAddress</a> = 0;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        sendDsrctrs[<a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a>] -&gt; <a class="code" href="intel__i217_8h.html#a4d43e8212bdc9dbee866506f04effcea">cmd</a> = 0;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        sendDsrctrs[<a class="code" href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">i</a>] -&gt; <a class="code" href="intel__i217_8h.html#ade818037fd6c985038ff29656089758d">status</a> = (1 &lt;&lt; 0);    <span class="comment">// Descriptor Done</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="comment">//write the send descriptor list address to the register</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="namespaceMaxOS_1_1memory.html#ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151">Write</a>(sendDescriptorHighRegister, (uint32_t)((uint64_t)ptr &gt;&gt; 32) );</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <a class="code" href="namespaceMaxOS_1_1memory.html#ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151">Write</a>(sendDescriptorLowRegister, (uint32_t)((uint64_t)ptr &amp; 0xFFFFFFFF));</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">//now setup total length of descriptors</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <a class="code" href="namespaceMaxOS_1_1memory.html#ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151">Write</a>(sendDescriptorLengthRegister, 8 * 16);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="comment">//setup numbers</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <a class="code" href="namespaceMaxOS_1_1memory.html#ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151">Write</a>( sendDescriptorHeadRegister, 0);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="namespaceMaxOS_1_1memory.html#ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151">Write</a>( sendDescriptorTailRegister, 0);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    currentSendBuffer = 0;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="namespaceMaxOS_1_1memory.html#ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151">Write</a>(sendControlRegister,  (1 &lt;&lt; 1)    <span class="comment">// Transmit Enable</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                             | (1 &lt;&lt; 3)                 <span class="comment">// Pad Short Packets</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                             | (15 &lt;&lt; 4)                <span class="comment">// Collision Threshold</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                             | (64 &lt;&lt;  12)              <span class="comment">// Collision Distance</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                             | (1 &lt;&lt; 24)                <span class="comment">// Re-transmit on Late Collision</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                             );</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">// In the case of I217 (id = 0x0410) and 82577LM (id = 0x10EA) packets will not be sent if the TCTRL is not configured using the following bits.</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">// write(sendControlRegister,  0b0110000000000111111000011111010);</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">//write(0x0410,  0x0060200A);</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;}</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#a9c76d9dd174c514869594dfd36498afa">  292</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#a9c76d9dd174c514869594dfd36498afa">intel_i217::activate</a>() {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <a class="code" href="classMaxOS_1_1drivers_1_1Driver.html#ac6b2604f26f9dc56c6e4cddb4e699a26">m_driver_message_stream</a>-&gt; <a class="code" href="physical_8h.html#af3329fc9f76244f46dedda8e02ba8066">write</a>(<span class="stringliteral">&quot;Activating Intel i217\n&quot;</span>);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="comment">//Enable interrupts</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="namespaceMaxOS_1_1memory.html#ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151">Write</a>(interruptMaskRegister ,0x1F6DC);                     <span class="comment">//Enable all interrupts</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="namespaceMaxOS_1_1memory.html#ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151">Write</a>(interruptMaskRegister ,0xff &amp; ~4);                   <span class="comment">//Enable all interrupts except link status change</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    Read(0xc0);                                                     <span class="comment">//Clear all interrupts</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">//while (!initDone);                                           //Wait for the init to be done</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="comment">//Initialise the send and receive descriptors</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    receiveInit();</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    sendInit();</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    active = <span class="keyword">true</span>;                                               <span class="comment">// Set active to true</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <a class="code" href="classMaxOS_1_1drivers_1_1Driver.html#ac6b2604f26f9dc56c6e4cddb4e699a26">m_driver_message_stream</a>-&gt; <a class="code" href="physical_8h.html#af3329fc9f76244f46dedda8e02ba8066">write</a>(<span class="stringliteral">&quot;Intel i217 INIT DONE\n&quot;</span>);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#a432b07bc903ddaa5f23790837ecce81d">  312</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#a432b07bc903ddaa5f23790837ecce81d">intel_i217::handle_interrupt</a>() {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="namespaceMaxOS_1_1memory.html#ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151">Write</a>(interruptMaskRegister, 0x1);      <span class="comment">//Clear the interrupt or it will hang</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    uint32_t temp = Read(0xc0);                <span class="comment">//read the interrupt status register</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <a class="code" href="classMaxOS_1_1drivers_1_1Driver.html#ac6b2604f26f9dc56c6e4cddb4e699a26">m_driver_message_stream</a>-&gt; <a class="code" href="physical_8h.html#af3329fc9f76244f46dedda8e02ba8066">write</a>(<span class="stringliteral">&quot;Interrupt from INTEL i217&quot;</span>);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">if</span>(temp &amp; 0x04)</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <a class="code" href="classMaxOS_1_1drivers_1_1Driver.html#ac6b2604f26f9dc56c6e4cddb4e699a26">m_driver_message_stream</a>-&gt; <a class="code" href="physical_8h.html#af3329fc9f76244f46dedda8e02ba8066">write</a>(<span class="stringliteral">&quot;INTEL i217 START LINK&quot;</span>);<span class="comment">//initDone = true;</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">if</span>(temp &amp; 0x10)</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <a class="code" href="classMaxOS_1_1drivers_1_1Driver.html#ac6b2604f26f9dc56c6e4cddb4e699a26">m_driver_message_stream</a>-&gt; <a class="code" href="physical_8h.html#af3329fc9f76244f46dedda8e02ba8066">write</a>(<span class="stringliteral">&quot;INTEL i217 GOOD THRESHOLD&quot;</span>);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">if</span>(temp &amp; 0x80) FetchDataReceived();</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;}</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="keywordtype">void</span> intel_i217::FetchDataReceived() {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <a class="code" href="classMaxOS_1_1drivers_1_1Driver.html#ac6b2604f26f9dc56c6e4cddb4e699a26">m_driver_message_stream</a>-&gt; <a class="code" href="physical_8h.html#af3329fc9f76244f46dedda8e02ba8066">write</a>(<span class="stringliteral">&quot;Fetching data... &quot;</span>);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    uint16_t old_cur;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">while</span>((receiveDsrctrs[currentReceiveBuffer] -&gt; <a class="code" href="intel__i217_8h.html#ade818037fd6c985038ff29656089758d">status</a> &amp; 0x1))</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        uint8_t *buffer = (uint8_t *)receiveDsrctrs[currentReceiveBuffer] -&gt; <a class="code" href="intel__i217_8h.html#a1eabb40700e8ed04c40ed0bf1e1568dd">bufferAddress</a>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        uint16_t <a class="code" href="fat32_8h.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a> = receiveDsrctrs[currentReceiveBuffer] -&gt; <a class="code" href="intel__i217_8h.html#aebb70c2aab3407a9f05334c47131a43b">length</a>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="fat32_8h.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a> &gt; 64){          <span class="comment">// If the size is the size of ethernet 2 frame</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            <a class="code" href="fat32_8h.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a> -= 4;          <span class="comment">// remove the checksum</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <a class="code" href="classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver.html#ac859773753c9aa3b3cc53836bf9f2410">FireDataReceived</a>(buffer, <a class="code" href="fat32_8h.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a>);  <span class="comment">//Pass data to handler</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        receiveDsrctrs[currentReceiveBuffer]-&gt;status = 0;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        old_cur = currentReceiveBuffer;                         <span class="comment">//Save the current receive buffer</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        currentReceiveBuffer = (currentReceiveBuffer + 1) % 32; <span class="comment">//Increment the current receive buffer</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <a class="code" href="namespaceMaxOS_1_1memory.html#ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151">Write</a>(receiveDescriptorTailRegister, old_cur ); <span class="comment">//write the old current receive buffer to the tail register</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;}</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#a2d18379440fb78ad7abdf042274cc4f0">  354</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#a2d18379440fb78ad7abdf042274cc4f0">intel_i217::DoSend</a>(uint8_t* buffer, uint32_t <a class="code" href="fat32_8h.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a>) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <a class="code" href="classMaxOS_1_1drivers_1_1Driver.html#ac6b2604f26f9dc56c6e4cddb4e699a26">m_driver_message_stream</a>-&gt; <a class="code" href="physical_8h.html#af3329fc9f76244f46dedda8e02ba8066">write</a>(<span class="stringliteral">&quot;Sending package... &quot;</span>);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">while</span>(!active);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="comment">//Put params into send buffer</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    sendDsrctrs[currentSendBuffer] -&gt; <a class="code" href="intel__i217_8h.html#a1eabb40700e8ed04c40ed0bf1e1568dd">bufferAddress</a> = (uint64_t)buffer;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    sendDsrctrs[currentSendBuffer] -&gt; <a class="code" href="intel__i217_8h.html#aebb70c2aab3407a9f05334c47131a43b">length</a> = <a class="code" href="fat32_8h.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="comment">//Set the commands</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    sendDsrctrs[currentSendBuffer] -&gt; <a class="code" href="intel__i217_8h.html#a4d43e8212bdc9dbee866506f04effcea">cmd</a> = (1 &lt;&lt; 0)    <span class="comment">// End of Packet</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                                          | (1 &lt;&lt; 1)    <span class="comment">// Insert FCS</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                                          | (1 &lt;&lt; 3)    <span class="comment">// Report Status</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                                          ;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    sendDsrctrs[currentSendBuffer] -&gt; <a class="code" href="intel__i217_8h.html#ade818037fd6c985038ff29656089758d">status</a> = 0;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    uint8_t old_cur = currentSendBuffer;                                    <span class="comment">//Save the current send buffer</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    currentSendBuffer = (currentSendBuffer + 1) % 8;                        <span class="comment">//Increment the current send buffer</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <a class="code" href="namespaceMaxOS_1_1memory.html#ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151">Write</a>(sendDescriptorTailRegister, currentSendBuffer);       <span class="comment">//write the current send buffer to the tail register</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="comment">//Wait for the packet to be sent</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">while</span>(!(sendDsrctrs[old_cur]-&gt;<a class="code" href="intel__i217_8h.html#ade818037fd6c985038ff29656089758d">status</a> &amp; 0xff));</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <a class="code" href="classMaxOS_1_1drivers_1_1Driver.html#ac6b2604f26f9dc56c6e4cddb4e699a26">m_driver_message_stream</a>-&gt; <a class="code" href="physical_8h.html#af3329fc9f76244f46dedda8e02ba8066">write</a>(<span class="stringliteral">&quot; Done\n&quot;</span>);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;}</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno"><a class="line" href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#ad5243ed1da8d782814cb6e4c305e4948">  381</a></span>&#160;uint64_t <a class="code" href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#ad5243ed1da8d782814cb6e4c305e4948">intel_i217::GetMediaAccessControlAddress</a>() {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <a class="code" href="classMaxOS_1_1drivers_1_1Driver.html#ac6b2604f26f9dc56c6e4cddb4e699a26">m_driver_message_stream</a>-&gt; <a class="code" href="physical_8h.html#af3329fc9f76244f46dedda8e02ba8066">write</a>(<span class="stringliteral">&quot;Getting MAC address... &quot;</span>);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">while</span>(ownMAC == 0);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">return</span> ownMAC;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;}</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno"><a class="line" href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#af162f9657133754327ef7d99c01daf33">  388</a></span>&#160;uint32_t <a class="code" href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#af162f9657133754327ef7d99c01daf33">intel_i217::reset</a>() {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classMaxOS_1_1drivers_1_1Driver.html#a2371d6b69c1bf351e9c80bde265ac8be">Driver::reset</a>();</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;}</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#ab9f53ec463a3521ee666548bef56c3aa">  392</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#ab9f53ec463a3521ee666548bef56c3aa">intel_i217::deactivate</a>() {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <a class="code" href="classMaxOS_1_1drivers_1_1Driver.html#aa8d91fd440659b56c4ecf5c877925210">Driver::deactivate</a>();</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;}</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno"><a class="line" href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#a72e1272a51087c93ed11b641cb490545">  396</a></span>&#160;<span class="keywordtype">string</span> <a class="code" href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#a72e1272a51087c93ed11b641cb490545">intel_i217::get_vendor_name</a>() {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Intel&quot;</span>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;}</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#aa49bfc18ef8f79090f2cb6b2f3f5d23b">  400</a></span>&#160;<span class="keywordtype">string</span> <a class="code" href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#aa49bfc18ef8f79090f2cb6b2f3f5d23b">intel_i217::get_device_name</a>() {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;E1000 (i217)&quot;</span>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;}</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="anamespaceMaxOS_1_1drivers_1_1ethernet_html"><div class="ttname"><a href="namespaceMaxOS_1_1drivers_1_1ethernet.html">MaxOS::drivers::ethernet</a></div><div class="ttdef"><b>Definition:</b> <a href="amd__am79c973_8h_source.html#l00020">amd_am79c973.h:20</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1Driver_html_ac6b2604f26f9dc56c6e4cddb4e699a26"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1Driver.html#ac6b2604f26f9dc56c6e4cddb4e699a26">MaxOS::drivers::Driver::m_driver_message_stream</a></div><div class="ttdeci">common::OutputStream * m_driver_message_stream</div><div class="ttdef"><b>Definition:</b> <a href="driver_8h_source.html#l00028">driver.h:28</a></div></div>
<div class="ttc" id="afat32_8h_html_ab2c6b258f02add8fdf4cfc7c371dd772"><div class="ttname"><a href="fat32_8h.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdef"><b>Definition:</b> <a href="fat32_8h_source.html#l00020">fat32.h:20</a></div></div>
<div class="ttc" id="anamespaceMaxOS_1_1drivers_html"><div class="ttname"><a href="namespaceMaxOS_1_1drivers.html">MaxOS::drivers</a></div><div class="ttdef"><b>Definition:</b> <a href="clock_8h_source.html#l00018">clock.h:18</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1intel__i217_html_a72e1272a51087c93ed11b641cb490545"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#a72e1272a51087c93ed11b641cb490545">MaxOS::drivers::ethernet::intel_i217::get_vendor_name</a></div><div class="ttdeci">string get_vendor_name()</div><div class="ttdoc">Get the vendor name of the driver.</div><div class="ttdef"><b>Definition:</b> <a href="intel__i217_8cpp_source.html#l00396">intel_i217.cpp:396</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver_html"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver.html">MaxOS::drivers::ethernet::EthernetDriver</a></div><div class="ttdoc">Driver for the Ethernet Controller, manages the sending and receiving of data, the mac address,...</div><div class="ttdef"><b>Definition:</b> <a href="ethernet_8h_source.html#l00085">ethernet.h:85</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1hardwarecommunication_1_1InterruptManager_html"><div class="ttname"><a href="classMaxOS_1_1hardwarecommunication_1_1InterruptManager.html">MaxOS::hardwarecommunication::InterruptManager</a></div><div class="ttdoc">Handles all interrupts and passes them to the correct handler.</div><div class="ttdef"><b>Definition:</b> <a href="interrupts_8h_source.html#l00065">interrupts.h:65</a></div></div>
<div class="ttc" id="anamespaceMaxOS_1_1memory_html_ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151"><div class="ttname"><a href="namespaceMaxOS_1_1memory.html#ae0e83b5743a37b4d0d2a93bb3bbe84ebabc3cb78aef6a50841121fd08c2a49151">MaxOS::memory::Write</a></div><div class="ttdeci">@ Write</div><div class="ttdef"><b>Definition:</b> <a href="physical_8h_source.html#l00031">physical.h:31</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1intel__i217_html_af162f9657133754327ef7d99c01daf33"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#af162f9657133754327ef7d99c01daf33">MaxOS::drivers::ethernet::intel_i217::reset</a></div><div class="ttdeci">uint32_t reset()</div><div class="ttdoc">Reset the driver.</div><div class="ttdef"><b>Definition:</b> <a href="intel__i217_8cpp_source.html#l00388">intel_i217.cpp:388</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1intel__i217_html_ab9f53ec463a3521ee666548bef56c3aa"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#ab9f53ec463a3521ee666548bef56c3aa">MaxOS::drivers::ethernet::intel_i217::deactivate</a></div><div class="ttdeci">void deactivate()</div><div class="ttdoc">deactivate the driver</div><div class="ttdef"><b>Definition:</b> <a href="intel__i217_8cpp_source.html#l00392">intel_i217.cpp:392</a></div></div>
<div class="ttc" id="anamespaceMaxOS_1_1drivers_1_1peripherals_html_a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff"><div class="ttname"><a href="namespaceMaxOS_1_1drivers_1_1peripherals.html#a891861cdf457ecedb7e3a5fa56515ebcaf552e09750e0ce71af8fc4fa0b32b8ff">MaxOS::drivers::peripherals::i</a></div><div class="ttdeci">@ i</div><div class="ttdef"><b>Definition:</b> <a href="keyboard_8h_source.html#l00035">keyboard.h:35</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1intel__i217_html_aa49bfc18ef8f79090f2cb6b2f3f5d23b"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#aa49bfc18ef8f79090f2cb6b2f3f5d23b">MaxOS::drivers::ethernet::intel_i217::get_device_name</a></div><div class="ttdeci">string get_device_name()</div><div class="ttdoc">Get the device name of the driver.</div><div class="ttdef"><b>Definition:</b> <a href="intel__i217_8cpp_source.html#l00400">intel_i217.cpp:400</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1intel__i217_html_a2d18379440fb78ad7abdf042274cc4f0"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#a2d18379440fb78ad7abdf042274cc4f0">MaxOS::drivers::ethernet::intel_i217::DoSend</a></div><div class="ttdeci">void DoSend(uint8_t *buffer, uint32_t size)</div><div class="ttdoc">(Device Side) Send the data</div><div class="ttdef"><b>Definition:</b> <a href="intel__i217_8cpp_source.html#l00354">intel_i217.cpp:354</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1hardwarecommunication_1_1InterruptHandler_html"><div class="ttname"><a href="classMaxOS_1_1hardwarecommunication_1_1InterruptHandler.html">MaxOS::hardwarecommunication::InterruptHandler</a></div><div class="ttdoc">Handles a certain interrupt number.</div><div class="ttdef"><b>Definition:</b> <a href="interrupts_8h_source.html#l00029">interrupts.h:29</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1Driver_html_aa8d91fd440659b56c4ecf5c877925210"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1Driver.html#aa8d91fd440659b56c4ecf5c877925210">MaxOS::drivers::Driver::deactivate</a></div><div class="ttdeci">virtual void deactivate()</div><div class="ttdoc">deactivate the driver</div><div class="ttdef"><b>Definition:</b> <a href="driver_8cpp_source.html#l00030">driver.cpp:30</a></div></div>
<div class="ttc" id="aicmp_8h_html_a1e43bf7d608e87228b625cca2c04d641"><div class="ttname"><a href="icmp_8h.html#a1e43bf7d608e87228b625cca2c04d641">data</a></div><div class="ttdeci">uint32_t data</div><div class="ttdef"><b>Definition:</b> <a href="icmp_8h_source.html#l00006">icmp.h:6</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1Driver_html_aceaadfd977efff51ee4e851e362b993a"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1Driver.html#aceaadfd977efff51ee4e851e362b993a">MaxOS::drivers::Driver::error_message</a></div><div class="ttdeci">void error_message(string message)</div><div class="ttdoc">write a message to the driver message stream if it is not null</div><div class="ttdef"><b>Definition:</b> <a href="driver_8cpp_source.html#l00055">driver.cpp:55</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver_html_ac859773753c9aa3b3cc53836bf9f2410"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver.html#ac859773753c9aa3b3cc53836bf9f2410">MaxOS::drivers::ethernet::EthernetDriver::FireDataReceived</a></div><div class="ttdeci">void FireDataReceived(uint8_t *buffer, uint32_t size)</div><div class="ttdoc">Handle the recieved data.</div><div class="ttdef"><b>Definition:</b> <a href="ethernet_8cpp_source.html#l00120">ethernet.cpp:120</a></div></div>
<div class="ttc" id="aintel__i217_8h_html_a4d43e8212bdc9dbee866506f04effcea"><div class="ttname"><a href="intel__i217_8h.html#a4d43e8212bdc9dbee866506f04effcea">cmd</a></div><div class="ttdeci">uint8_t cmd</div><div class="ttdef"><b>Definition:</b> <a href="intel__i217_8h_source.html#l00005">intel_i217.h:5</a></div></div>
<div class="ttc" id="anamespaceMaxOS_1_1hardwarecommunication_html"><div class="ttname"><a href="namespaceMaxOS_1_1hardwarecommunication.html">MaxOS::hardwarecommunication</a></div><div class="ttdef"><b>Definition:</b> <a href="acpi_8h_source.html#l00016">acpi.h:16</a></div></div>
<div class="ttc" id="aamd__am79c973_8h_html_ac0d31ca829f934cccd89f8054e02773e"><div class="ttname"><a href="amd__am79c973_8h.html#ac0d31ca829f934cccd89f8054e02773e">address</a></div><div class="ttdeci">uint32_t address</div><div class="ttdef"><b>Definition:</b> <a href="amd__am79c973_8h_source.html#l00003">amd_am79c973.h:3</a></div></div>
<div class="ttc" id="aintel__i217_8h_html_ade818037fd6c985038ff29656089758d"><div class="ttname"><a href="intel__i217_8h.html#ade818037fd6c985038ff29656089758d">status</a></div><div class="ttdeci">uint8_t status</div><div class="ttdef"><b>Definition:</b> <a href="intel__i217_8h_source.html#l00005">intel_i217.h:5</a></div></div>
<div class="ttc" id="anamespaceMaxOS_1_1common_html"><div class="ttname"><a href="namespaceMaxOS_1_1common.html">MaxOS::common</a></div><div class="ttdef"><b>Definition:</b> <a href="colour_8h_source.html#l00013">colour.h:13</a></div></div>
<div class="ttc" id="aintel__i217_8h_html_a1eabb40700e8ed04c40ed0bf1e1568dd"><div class="ttname"><a href="intel__i217_8h.html#a1eabb40700e8ed04c40ed0bf1e1568dd">bufferAddress</a></div><div class="ttdeci">uint64_t bufferAddress</div><div class="ttdef"><b>Definition:</b> <a href="intel__i217_8h_source.html#l00002">intel_i217.h:2</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1hardwarecommunication_1_1PeripheralComponentInterconnectDeviceDescriptor_html_af9db8d9903071f7cf8611efa3c7a1333"><div class="ttname"><a href="classMaxOS_1_1hardwarecommunication_1_1PeripheralComponentInterconnectDeviceDescriptor.html#af9db8d9903071f7cf8611efa3c7a1333">MaxOS::hardwarecommunication::PeripheralComponentInterconnectDeviceDescriptor::port_base</a></div><div class="ttdeci">uint32_t port_base</div><div class="ttdef"><b>Definition:</b> <a href="pci_8h_source.html#l00046">pci.h:46</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1common_1_1OutputStream_html"><div class="ttname"><a href="classMaxOS_1_1common_1_1OutputStream.html">MaxOS::common::OutputStream</a></div><div class="ttdoc">A stream that strings can be written to.</div><div class="ttdef"><b>Definition:</b> <a href="outputStream_8h_source.html#l00041">outputStream.h:41</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1intel__i217_html_ad5243ed1da8d782814cb6e4c305e4948"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#ad5243ed1da8d782814cb6e4c305e4948">MaxOS::drivers::ethernet::intel_i217::GetMediaAccessControlAddress</a></div><div class="ttdeci">uint64_t GetMediaAccessControlAddress()</div><div class="ttdoc">Get the MAC address.</div><div class="ttdef"><b>Definition:</b> <a href="intel__i217_8cpp_source.html#l00381">intel_i217.cpp:381</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1hardwarecommunication_1_1PeripheralComponentInterconnectDeviceDescriptor_html"><div class="ttname"><a href="classMaxOS_1_1hardwarecommunication_1_1PeripheralComponentInterconnectDeviceDescriptor.html">MaxOS::hardwarecommunication::PeripheralComponentInterconnectDeviceDescriptor</a></div><div class="ttdoc">Stores information about a PCI device.</div><div class="ttdef"><b>Definition:</b> <a href="pci_8h_source.html#l00043">pci.h:43</a></div></div>
<div class="ttc" id="aintel__i217_8h_html"><div class="ttname"><a href="intel__i217_8h.html">intel_i217.h</a></div></div>
<div class="ttc" id="anamespaceMaxOS_html"><div class="ttname"><a href="namespaceMaxOS.html">MaxOS</a></div><div class="ttdef"><b>Definition:</b> <a href="colour_8h_source.html#l00011">colour.h:11</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver_html_a6f9da09673454cba63cb38400443667c"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1EthernetDriver.html#a6f9da09673454cba63cb38400443667c">MaxOS::drivers::ethernet::EthernetDriver::CreateMediaAccessControlAddress</a></div><div class="ttdeci">static MediaAccessControlAddress CreateMediaAccessControlAddress(uint8_t digit1, uint8_t digit2, uint8_t digit3, uint8_t digit4, uint8_t digit5, uint8_t digit6)</div><div class="ttdoc">Create a Media Access Control Address.</div><div class="ttdef"><b>Definition:</b> <a href="ethernet_8cpp_source.html#l00177">ethernet.cpp:177</a></div></div>
<div class="ttc" id="aphysical_8h_html_af3329fc9f76244f46dedda8e02ba8066"><div class="ttname"><a href="physical_8h.html#af3329fc9f76244f46dedda8e02ba8066">write</a></div><div class="ttdeci">uint64_t write</div><div class="ttdef"><b>Definition:</b> <a href="physical_8h_source.html#l00028">physical.h:28</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1intel__i217_html_a9c76d9dd174c514869594dfd36498afa"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#a9c76d9dd174c514869594dfd36498afa">MaxOS::drivers::ethernet::intel_i217::activate</a></div><div class="ttdeci">void activate()</div><div class="ttdoc">activate the driver</div><div class="ttdef"><b>Definition:</b> <a href="intel__i217_8cpp_source.html#l00292">intel_i217.cpp:292</a></div></div>
<div class="ttc" id="aintel__i217_8h_html_aebb70c2aab3407a9f05334c47131a43b"><div class="ttname"><a href="intel__i217_8h.html#aebb70c2aab3407a9f05334c47131a43b">length</a></div><div class="ttdeci">uint16_t length</div><div class="ttdef"><b>Definition:</b> <a href="intel__i217_8h_source.html#l00003">intel_i217.h:3</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1hardwarecommunication_1_1Port32Bit_html"><div class="ttname"><a href="classMaxOS_1_1hardwarecommunication_1_1Port32Bit.html">MaxOS::hardwarecommunication::Port32Bit</a></div><div class="ttdoc">Handles 32 bit ports.</div><div class="ttdef"><b>Definition:</b> <a href="port_8h_source.html#l00066">port.h:66</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1intel__i217_html_af1278e90474e7dd010cba46756ff97d0"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#af1278e90474e7dd010cba46756ff97d0">MaxOS::drivers::ethernet::intel_i217::~intel_i217</a></div><div class="ttdeci">~intel_i217()</div><div class="ttdef"><b>Definition:</b> <a href="intel__i217_8cpp_source.html#l00085">intel_i217.cpp:85</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1Driver_html_a2371d6b69c1bf351e9c80bde265ac8be"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1Driver.html#a2371d6b69c1bf351e9c80bde265ac8be">MaxOS::drivers::Driver::reset</a></div><div class="ttdeci">virtual uint32_t reset()</div><div class="ttdoc">Reset the driver.</div><div class="ttdef"><b>Definition:</b> <a href="driver_8cpp_source.html#l00046">driver.cpp:46</a></div></div>
<div class="ttc" id="aclassMaxOS_1_1drivers_1_1ethernet_1_1intel__i217_html_a432b07bc903ddaa5f23790837ecce81d"><div class="ttname"><a href="classMaxOS_1_1drivers_1_1ethernet_1_1intel__i217.html#a432b07bc903ddaa5f23790837ecce81d">MaxOS::drivers::ethernet::intel_i217::handle_interrupt</a></div><div class="ttdeci">void handle_interrupt()</div><div class="ttdef"><b>Definition:</b> <a href="intel__i217_8cpp_source.html#l00312">intel_i217.cpp:312</a></div></div>
<div class="ttc" id="aintel__i217_8cpp_html_aa3ab55cb1937ef26708a01f9a2870909"><div class="ttname"><a href="intel__i217_8cpp.html#aa3ab55cb1937ef26708a01f9a2870909">buffer8192</a></div><div class="ttdeci">#define buffer8192</div><div class="ttdef"><b>Definition:</b> <a href="intel__i217_8cpp_source.html#l00020">intel_i217.cpp:20</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_dc43877d82dd332f9fb2071fcca799d6.html">kernel</a></li><li class="navelem"><a class="el" href="dir_3dd30a497388ee684638f120a124721c.html">src</a></li><li class="navelem"><a class="el" href="dir_79cdf04718782f286da113044bf76c98.html">drivers</a></li><li class="navelem"><a class="el" href="dir_efcb6c0e12d9cee5df1accc0ecb8fd49.html">ethernet</a></li><li class="navelem"><a class="el" href="intel__i217_8cpp.html">intel_i217.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
