.TH "MaxOS::filesystem::FileResource" 3 "Version 0.1" "Max OS" \" -*- nroff -*-
.ad l
.nh
.SH NAME
MaxOS::filesystem::FileResource
.SH SYNOPSIS
.br
.PP
.PP
\fC#include <vfsresource\&.h>\fP
.PP
Inherits \fBMaxOS::processes::Resource\fP\&.
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "\fBFileResource\fP (\fBconst\fP \fBstring\fP &\fBname\fP, \fBsize_t\fP \fBflags\fP, \fBprocesses::resource_type_t\fP \fBtype\fP)"
.br
.ti -1c
.RI "\fB~FileResource\fP () final"
.br
.ti -1c
.RI "\fBint\fP \fBread\fP (\fBvoid\fP *buffer, \fBsize_t\fP \fBsize\fP, \fBsize_t\fP \fBflags\fP) \fBfinal\fP"
.br
.RI "Read from a file resource\&. "
.ti -1c
.RI "\fBint\fP \fBwrite\fP (\fBconst\fP \fBvoid\fP *buffer, \fBsize_t\fP \fBsize\fP, \fBsize_t\fP \fBflags\fP) \fBfinal\fP"
.br
.RI "Write to a file resource\&. "
.in -1c

Public Member Functions inherited from \fBMaxOS::processes::Resource\fP
.in +1c
.ti -1c
.RI "\fBResource\fP (const \fBstring\fP &\fBname\fP, size_t \fBflags\fP, \fBresource_type_t\fP \fBtype\fP)"
.br
.ti -1c
.RI "virtual \fB~Resource\fP ()"
.br
.ti -1c
.RI "\fBstring\fP \fBname\fP ()"
.br
.RI "Gets the name of this resource\&. "
.ti -1c
.RI "\fBresource_type_t\fP \fBtype\fP ()"
.br
.RI "Gets the type of this resource\&. "
.ti -1c
.RI "virtual void \fBopen\fP (size_t \fBflags\fP)"
.br
.RI "Opens the resource\&. "
.ti -1c
.RI "virtual void \fBclose\fP (size_t \fBflags\fP)"
.br
.RI "Closes the resource\&. "
.in -1c
.SS "Public Attributes"

.in +1c
.ti -1c
.RI "\fBFile\fP * \fBfile\fP"
.br
.in -1c
.SH "Detailed Description"
.PP 
Definition at line \fB19\fP of file \fBvfsresource\&.h\fP\&.
.SH "Constructor & Destructor Documentation"
.PP 
.SS "FileResource::FileResource (\fBconst\fP \fBstring\fP & name, \fBsize_t\fP flags, \fBprocesses::resource_type_t\fP type)"

.PP
Definition at line \fB12\fP of file \fBvfsresource\&.cpp\fP\&..PP
.nf
13 : Resource(name, flags, type),
14   file(nullptr) // Initialised by the registry
15 {
16 
17 }
.fi

.SS "FileResource::~FileResource ()\fC [final]\fP, \fC [default]\fP"

.SH "Member Function Documentation"
.PP 
.SS "\fBint\fP FileResource::read (\fBvoid\fP * buffer, \fBsize_t\fP size, \fBsize_t\fP flags)\fC [final]\fP, \fC [virtual]\fP"

.PP
Read from a file resource\&. 
.PP
\fBParameters\fP
.RS 4
\fIbuffer\fP The buffer to read into 
.br
\fIsize\fP The number of bytes to read 
.br
\fIflags\fP The flags to pass to the reading 
.RE
.PP
\fBReturns\fP
.RS 4
The number of bytes successfully read or -1 on error 
.RE
.PP

.PP
Reimplemented from \fBMaxOS::processes::Resource\fP\&.
.PP
Definition at line \fB29\fP of file \fBvfsresource\&.cpp\fP\&..PP
.nf
29                                                               {
30 
31     // File not found
32     if(!file)
33         return \-1;
34 
35     // Handle the operation
36     switch ((FileFlags)flags) {
37 
38         case FileFlags::DEFAULT:{
39 
40             buffer_t file_buffer(buffer, size);
41             file\->read(&file_buffer, size);
42             break;
43         }
44 
45         case FileFlags::READ_SIZE:{
46             return file\->size();
47         }
48 
49         case FileFlags::READ_OFFSET:{
50 
51             return file\->position();
52         }
53 
54         default:
55             return \-1;
56     }
57     return size;
58 }
.fi

.PP
References \fBfile\fP, \fBflags\fP, \fBMaxOS::filesystem::File::position()\fP, \fBMaxOS::filesystem::File::read()\fP, \fBMaxOS::filesystem::File::size()\fP, and \fBsize\fP\&.
.SS "\fBint\fP FileResource::write (\fBconst\fP \fBvoid\fP * buffer, \fBsize_t\fP size, \fBsize_t\fP flags)\fC [final]\fP, \fC [virtual]\fP"

.PP
Write to a file resource\&. 
.PP
\fBParameters\fP
.RS 4
\fIbuffer\fP The buffer to write from 
.br
\fIsize\fP The number of bytes to write 
.br
\fIflags\fP The flags to pass to the writing 
.RE
.PP
\fBReturns\fP
.RS 4
The number of bytes successfully written or -1 on error 
.RE
.PP

.PP
Reimplemented from \fBMaxOS::processes::Resource\fP\&.
.PP
Definition at line \fB68\fP of file \fBvfsresource\&.cpp\fP\&..PP
.nf
68                                                                      {
69 
70     // File not found
71     if(!file)
72         return \-1;
73 
74     // Handle the operation
75     switch ((FileFlags)flags) {
76         case FileFlags::DEFAULT:{
77 
78             buffer_t file_buffer((void*)buffer, size);
79             file\->write(&file_buffer, size);
80             break;
81         }
82 
83         case FileFlags::WRITE_SEEK_SET:
84             file\->seek(SeekType::SET, size);
85             break;
86 
87         case FileFlags::WRITE_SEEK_CUR:
88             file\->seek(SeekType::CURRENT, size);
89             break;
90 
91         case FileFlags::WRITE_SEEK_END:
92             file\->seek(SeekType::END, size);
93             break;
94 
95         case FileFlags::WRITE_NAME:{
96 
97             // Open the parent
98             Resource* parent = GlobalResourceRegistry::get_registry(resource_type_t::FILESYSTEM)\->get_resource(Path::parent_directory(name()));
99             auto parent_directory = ((DirectoryResource*)parent)\->directory;
100 
101             // Rename
102             string new_name = string((uint8_t*)buffer, size);
103             parent_directory\->rename_file(file, new_name);
104             break;
105         }
106 
107         default:
108             return \-1;
109 
110     }
111 
112     return size;
113 }
.fi

.PP
References \fBfile\fP, \fBflags\fP, \fBMaxOS::processes::GlobalResourceRegistry::get_registry()\fP, \fBMaxOS::processes::Resource::name()\fP, \fBMaxOS::filesystem::Path::parent_directory()\fP, \fBMaxOS::filesystem::File::seek()\fP, \fBsize\fP, and \fBMaxOS::filesystem::File::write()\fP\&.
.SH "Member Data Documentation"
.PP 
.SS "\fBFile\fP* MaxOS::filesystem::FileResource::file"

.PP
Definition at line \fB25\fP of file \fBvfsresource\&.h\fP\&.
.PP
Referenced by \fBread()\fP, and \fBwrite()\fP\&.

.SH "Author"
.PP 
Generated automatically by Doxygen for Max OS from the source code\&.
