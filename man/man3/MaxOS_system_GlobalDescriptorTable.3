.TH "MaxOS::system::GlobalDescriptorTable" 3 "Sat Mar 29 2025" "Version 0.1" "Max OS" \" -*- nroff -*-
.ad l
.nh
.SH NAME
MaxOS::system::GlobalDescriptorTable \- Sets up the GDT in the \fBCPU\fP\&.  

.SH SYNOPSIS
.br
.PP
.PP
\fC#include <gdt\&.h>\fP
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "\fBGlobalDescriptorTable\fP ()"
.br
.ti -1c
.RI "\fB~GlobalDescriptorTable\fP ()"
.br
.in -1c
.SH "Detailed Description"
.PP 
Sets up the GDT in the \fBCPU\fP\&. 
.PP
Definition at line 28 of file gdt\&.h\&.
.SH "Constructor & Destructor Documentation"
.PP 
.SS "GlobalDescriptorTable::GlobalDescriptorTable ()"

.PP
Definition at line 11 of file gdt\&.cpp\&.
.PP
.nf
12 {
13 
14    // Null descriptor
15     m_gdt[0] = 0;
16 
17     // Kernel code segment descriptor
18     uint64_t kernel_code_segment_descriptor = 0;
19     kernel_code_segment_descriptor |= 0b1011 << 8; // Type of selector
20     kernel_code_segment_descriptor |= 1 << 12;     // Not a system descriptor
21     kernel_code_segment_descriptor |= 0 << 13;     // Privilege level 0
22     kernel_code_segment_descriptor |= 1 << 15;     // Present
23     kernel_code_segment_descriptor |= 1 << 21;     // Long mode
24     m_gdt[1] = kernel_code_segment_descriptor << 32;
25 
26     // Kernel data segment descriptor
27     uint64_t kernel_data_segment_descriptor = 0;
28     kernel_data_segment_descriptor |= 0b0011 << 8; // Type of selector
29     kernel_data_segment_descriptor |= 1 << 12;     // Not a system descriptor
30     kernel_data_segment_descriptor |= 0 << 13;     // Privilege level 0
31     kernel_data_segment_descriptor |= 1 << 15;     // Present
32     kernel_data_segment_descriptor |= 1 << 21;     // Long mode
33     m_gdt[2] = kernel_data_segment_descriptor << 32;
34 
35     // User code segment descriptor (Change the privilege level to 3)
36     uint64_t user_code_segment_descriptor = kernel_code_segment_descriptor | (3 << 13);
37     m_gdt[3] = user_code_segment_descriptor;
38 
39     // User data segment descriptor (Change the privilege level to 3)
40     uint64_t user_data_segment_descriptor = kernel_data_segment_descriptor | (3 << 13);
41     m_gdt[4] = user_data_segment_descriptor;
42 
43     _kprintf("Created GDT entries\n");
44 
45 
46     // TODO: This is done in assembly but would be nice to do here
47 
48 
49     _kprintf("Reloaded segment registers\n");
50 
51 }
.fi
.PP
References _kprintf\&.
.SS "GlobalDescriptorTable::~GlobalDescriptorTable ()"

.PP
Definition at line 53 of file gdt\&.cpp\&.
.PP
.nf
54 {
55 }
.fi


.SH "Author"
.PP 
Generated automatically by Doxygen for Max OS from the source code\&.
