.TH "MaxOS::filesystem::VFSResourceRegistry" 3 "Version 0.1" "Max OS" \" -*- nroff -*-
.ad l
.nh
.SH NAME
MaxOS::filesystem::VFSResourceRegistry \- A resource registry for both Files & Directories\&.  

.SH SYNOPSIS
.br
.PP
.PP
\fC#include <vfsresource\&.h>\fP
.PP
Inherits \fBMaxOS::processes::BaseResourceRegistry\fP\&.
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "\fBVFSResourceRegistry\fP (\fBVirtualFileSystem\fP *\fBvfs\fP)"
.br
.RI "Construct a new VFS Resource Registry object\&. "
.ti -1c
.RI "\fBprocesses::Resource\fP * \fBget_resource\fP (\fBconst\fP \fBstring\fP &\fBname\fP) \fBfinal\fP"
.br
.RI "Gets a resource from the registry by name\&. "
.ti -1c
.RI "\fBprocesses::Resource\fP * \fBcreate_resource\fP (\fBconst\fP \fBstring\fP &\fBname\fP, \fBsize_t\fP \fBflags\fP) \fBfinal\fP"
.br
.RI "Try to create a new resource with the specified name, will fail if the name is in use\&. "
.in -1c
.SH "Detailed Description"
.PP 
A resource registry for both Files & Directories\&. 
.PP
Definition at line \fB72\fP of file \fBvfsresource\&.h\fP\&.
.SH "Constructor & Destructor Documentation"
.PP 
.SS "VFSResourceRegistry::VFSResourceRegistry (\fBVirtualFileSystem\fP * vfs)\fC [explicit]\fP"

.PP
Construct a new VFS Resource Registry object\&. 
.PP
\fBParameters\fP
.RS 4
\fIvfs\fP The virtual file system to use 
.RE
.PP

.PP
Definition at line \fB324\fP of file \fBvfsresource\&.cpp\fP\&..PP
.nf
325 : BaseResourceRegistry(resource_type_t::FILESYSTEM),
326   m_vfs(vfs)
327 {
328 
329 }
.fi

.SH "Member Function Documentation"
.PP 
.SS "\fBResource\fP * VFSResourceRegistry::create_resource (\fBconst\fP \fBstring\fP & name, \fBsize_t\fP flags)\fC [final]\fP, \fC [virtual]\fP"

.PP
Try to create a new resource with the specified name, will fail if the name is in use\&. 
.PP
\fBParameters\fP
.RS 4
\fIname\fP The name of the resource to create 
.br
\fIflags\fP Optional flags to pass (unused by default but registry type specific) 
.RE
.PP
\fBReturns\fP
.RS 4
The resource created or nullptr if failed to create the resource 
.RE
.PP

.PP
Reimplemented from \fBMaxOS::processes::BaseResourceRegistry\fP\&.
.PP
Definition at line \fB394\fP of file \fBvfsresource\&.cpp\fP\&..PP
.nf
394                                                                                {
395 
396     string path = Path::absolute_path(name);
397     path = Path::join_path(GlobalScheduler::current_process()\->working_directory, path);
398 
399     // Resource already opened
400     auto resource = BaseResourceRegistry::get_resource(path);
401     if(resource != nullptr)
402         return resource;
403 
404     // Open the resource
405     bool is_file = Path::is_file(path);
406     if(is_file)
407         return open_as_resource(path, m_vfs\->create_file(path));
408     else
409         return open_as_resource(path, m_vfs\->create_directory(path));
410 
411 }
.fi

.PP
References \fBMaxOS::filesystem::Path::absolute_path()\fP, \fBMaxOS::filesystem::VirtualFileSystem::create_directory()\fP, \fBMaxOS::filesystem::VirtualFileSystem::create_file()\fP, \fBMaxOS::processes::GlobalScheduler::current_process()\fP, \fBMaxOS::processes::BaseResourceRegistry::get_resource()\fP, \fBMaxOS::filesystem::Path::is_file()\fP, \fBMaxOS::filesystem::Path::join_path()\fP, and \fBname\fP\&.
.SS "\fBResource\fP * VFSResourceRegistry::get_resource (\fBconst\fP \fBstring\fP & name)\fC [final]\fP, \fC [virtual]\fP"

.PP
Gets a resource from the registry by name\&. 
.PP
\fBParameters\fP
.RS 4
\fIname\fP The name of the resource to find 
.RE
.PP
\fBReturns\fP
.RS 4
The resource or nullptr if the resource was not found 
.RE
.PP

.PP
Reimplemented from \fBMaxOS::processes::BaseResourceRegistry\fP\&.
.PP
Definition at line \fB376\fP of file \fBvfsresource\&.cpp\fP\&..PP
.nf
376                                                               {
377 
378     string path = Path::absolute_path(name);
379     path = Path::join_path(GlobalScheduler::current_process()\->working_directory, path);
380 
381     // Resource already opened
382     auto resource = BaseResourceRegistry::get_resource(path);
383     if(resource != nullptr)
384         return resource;
385 
386     // Open the resource
387     bool is_file = Path::is_file(path);
388     if(is_file)
389         return open_as_resource(path, m_vfs\->open_file(path));
390     else
391         return open_as_resource(path, m_vfs\->open_directory(path));
392 }
.fi

.PP
References \fBMaxOS::filesystem::Path::absolute_path()\fP, \fBMaxOS::processes::GlobalScheduler::current_process()\fP, \fBMaxOS::processes::BaseResourceRegistry::get_resource()\fP, \fBMaxOS::filesystem::Path::is_file()\fP, \fBMaxOS::filesystem::Path::join_path()\fP, \fBname\fP, \fBMaxOS::filesystem::VirtualFileSystem::open_directory()\fP, and \fBMaxOS::filesystem::VirtualFileSystem::open_file()\fP\&.

.SH "Author"
.PP 
Generated automatically by Doxygen for Max OS from the source code\&.
