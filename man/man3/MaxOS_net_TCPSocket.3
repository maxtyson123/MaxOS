.TH "MaxOS::net::TCPSocket" 3 "Version 0.3" "Max OS" \" -*- nroff -*-
.ad l
.nh
.SH NAME
MaxOS::net::TCPSocket \- A TCP socket\&. Allows for sending and receiving data over TCP at a port\&.  

.SH SYNOPSIS
.br
.PP
.PP
\fC#include <tcp\&.h>\fP
.PP
Inherits \fBMaxOS::common::EventManager< TCPPayloadHandlerEvents >\fP\&.
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "\fBTCPSocket\fP (\fBTransmissionControlProtocolHandler\fP *\fBtransmission_control_protocol_handler\fP)"
.br
.RI "Construct a new TCP Socket object\&. "
.ti -1c
.RI "\fBvirtual\fP \fBvoid\fP \fBsend\fP (\fBuint8_t\fP *data, \fBuint16_t\fP size)"
.br
.RI "send data over the socket "
.ti -1c
.RI "\fBvirtual\fP \fBvoid\fP \fBdisconnect\fP ()"
.br
.RI "disconnect the socket "
.ti -1c
.RI "\fBvoid\fP \fBdisconnected\fP ()"
.br
.RI "Raise the disconnected event\&. "
.ti -1c
.RI "\fBvoid\fP \fBconnected\fP ()"
.br
.RI "Raise the connected event\&. "
.ti -1c
.RI "\fBbool\fP \fBhandle_transmission_control_protocol_payload\fP (\fBuint8_t\fP *data, \fBuint16_t\fP size)"
.br
.RI "Handle the TCP message (socket end) "
.in -1c

Public Member Functions inherited from \fBMaxOS::common::EventManager< TCPPayloadHandlerEvents >\fP
.in +1c
.ti -1c
.RI "\fBvoid\fP \fBconnect_event_handler\fP (\fBEventHandler\fP< TCPPayloadHandlerEvents > *\fBhandler\fP)"
.br
.RI "connect an event handler to the event manager if it is not already connected "
.ti -1c
.RI "\fBvoid\fP \fBdisconnect_event_handler\fP (\fBEventHandler\fP< TCPPayloadHandlerEvents > *\fBhandler\fP)"
.br
.RI "disconnect an event handler from the event manager if it is connected "
.ti -1c
.RI "\fBVector\fP< \fBEvent\fP< TCPPayloadHandlerEvents > * > \fBraise_event\fP (\fBEvent\fP< TCPPayloadHandlerEvents > *\fBevent\fP)"
.br
.RI "Calls the on_event function of all the event m_handlers connected to the event manager and returns a list of the results\&. "
.in -1c
.SS "Protected Attributes"

.in +1c
.ti -1c
.RI "uint16_t \fBremotePort\fP = 0"
.br
.RI "The port on the external device\&. "
.ti -1c
.RI "uint32_t \fBremote_ip\fP = 0"
.br
.RI "The IP address of the external device\&. "
.ti -1c
.RI "uint16_t \fBlocal_port\fP = 0"
.br
.RI "The port on this device\&. "
.ti -1c
.RI "uint32_t \fBlocal_ip\fP = 0"
.br
.RI "The IP address of this device\&. "
.ti -1c
.RI "uint32_t \fBsequence_number\fP = 0"
.br
.RI "The current order number of the data being sent\&. "
.ti -1c
.RI "uint32_t \fBacknowledgement_number\fP = 0"
.br
.RI "The number used to keep track of what has been received, incremented by 1 each time\&. "
.ti -1c
.RI "\fBTransmissionControlProtocolHandler\fP * \fBtransmission_control_protocol_handler\fP"
.br
.RI "The TCP handler this socket is using\&. "
.ti -1c
.RI "\fBTCPSocketState\fP \fBstate\fP"
.br
.RI "The state of the socket\&. "
.in -1c

Protected Attributes inherited from \fBMaxOS::common::EventManager< TCPPayloadHandlerEvents >\fP
.in +1c
.ti -1c
.RI "\fBVector\fP< \fBEventHandler\fP< TCPPayloadHandlerEvents > * > \fBm_handlers\fP"
.br
.in -1c
.SS "Friends"

.in +1c
.ti -1c
.RI "class \fBTransmissionControlProtocolHandler\fP"
.br
.ti -1c
.RI "class \fBTransmissionControlProtocolPortListener\fP"
.br
.in -1c
.SH "Detailed Description"
.PP 
A TCP socket\&. Allows for sending and receiving data over TCP at a port\&. 
.PP
Definition at line \fB174\fP of file \fBtcp\&.h\fP\&.
.SH "Constructor & Destructor Documentation"
.PP 
.SS "TCPSocket::TCPSocket (\fBTransmissionControlProtocolHandler\fP * transmission_control_protocol_handler)\fC [explicit]\fP"

.PP
Construct a new TCP Socket object\&. 
.PP
\fBParameters\fP
.RS 4
\fItransmission_control_protocol_handler\fP the TCP handler the socket is associated with 
.RE
.PP

.PP
Definition at line \fB83\fP of file \fBtcp\&.cpp\fP\&..PP
.nf
83                                                                                               {
84     //Set the default values
85     this\->transmission_control_protocol_handler = transmission_control_protocol_handler;
86 
87     //Closed as default
88     state = TCPSocketState::CLOSED;
89 }
.fi

.PP
References \fBstate\fP, and \fBtransmission_control_protocol_handler\fP\&.
.SH "Member Function Documentation"
.PP 
.SS "\fBvoid\fP TCPSocket::connected ()"

.PP
Raise the connected event\&. 
.PP
Definition at line \fB143\fP of file \fBtcp\&.cpp\fP\&..PP
.nf
143                           {
144     auto* event = new ConnectedEvent(this);
145     raise_event(event);
146     MemoryManager::kfree(event);
147 
148 }
.fi

.PP
References \fBMaxOS::memory::MemoryManager::kfree()\fP, and \fBMaxOS::common::EventManager< TCPPayloadHandlerEvents >::raise_event()\fP\&.
.PP
Referenced by \fBMaxOS::net::TransmissionControlProtocolHandler::handle_internet_protocol_payload()\fP\&.
.SS "\fBvoid\fP TCPSocket::disconnect ()\fC [virtual]\fP"

.PP
disconnect the socket 
.PP
Definition at line \fB126\fP of file \fBtcp\&.cpp\fP\&..PP
.nf
126                            {
127     transmission_control_protocol_handler\->disconnect(this);
128 }
.fi

.PP
References \fBMaxOS::net::TransmissionControlProtocolHandler::disconnect()\fP, and \fBtransmission_control_protocol_handler\fP\&.
.SS "\fBvoid\fP TCPSocket::disconnected ()"

.PP
Raise the disconnected event\&. 
.PP
Definition at line \fB133\fP of file \fBtcp\&.cpp\fP\&..PP
.nf
133                              {
134     auto* event = new DisconnectedEvent(this);
135     raise_event(event);
136     MemoryManager::kfree(event);
137 
138 }
.fi

.PP
References \fBMaxOS::memory::MemoryManager::kfree()\fP, and \fBMaxOS::common::EventManager< TCPPayloadHandlerEvents >::raise_event()\fP\&.
.PP
Referenced by \fBMaxOS::net::TransmissionControlProtocolHandler::handle_internet_protocol_payload()\fP\&.
.SS "\fBbool\fP TCPSocket::handle_transmission_control_protocol_payload (\fBuint8_t\fP * data, \fBuint16_t\fP size)"

.PP
Handle the TCP message (socket end) 
.PP
\fBParameters\fP
.RS 4
\fIdata\fP The datah 
.br
\fIsize\fP The size of the data 
.RE
.PP
\fBReturns\fP
.RS 4
True if the connection is to be terminated after hadnling or false if not 
.RE
.PP

.PP
Definition at line \fB100\fP of file \fBtcp\&.cpp\fP\&..PP
.nf
100                                                                                          {
101     auto* event = new DataReceivedEvent(this, data, size);
102     raise_event(event);
103     MemoryManager::kfree(event);
104     return true;
105 }
.fi

.PP
References \fBMaxOS::memory::MemoryManager::kfree()\fP, and \fBMaxOS::common::EventManager< TCPPayloadHandlerEvents >::raise_event()\fP\&.
.PP
Referenced by \fBMaxOS::net::TransmissionControlProtocolHandler::handle_internet_protocol_payload()\fP\&.
.SS "\fBvoid\fP TCPSocket::send (\fBuint8_t\fP * data, \fBuint16_t\fP size)\fC [virtual]\fP"

.PP
send data over the socket 
.PP
\fBParameters\fP
.RS 4
\fIdata\fP The data to send 
.br
\fIsize\fP The size of the data 
.RE
.PP

.PP
Definition at line \fB113\fP of file \fBtcp\&.cpp\fP\&..PP
.nf
113                                                  {
114     //Wait for the socket to be connected
115     while(state != TCPSocketState::ESTABLISHED);
116 
117     //Pass the data to the backend
118     transmission_control_protocol_handler\->send_transmission_control_protocol_packet(this, data, size,
119                                                                                      (uint16_t) TCPFlag::PSH |
120                                                                                      (uint16_t) TCPFlag::ACK);
121 }
.fi

.PP
References \fBMaxOS::net::TransmissionControlProtocolHandler::send_transmission_control_protocol_packet()\fP, \fBstate\fP, and \fBtransmission_control_protocol_handler\fP\&.
.SH "Friends And Related Symbol Documentation"
.PP 
.SS "friend class \fBTransmissionControlProtocolHandler\fP\fC [friend]\fP"

.PP
Definition at line \fB175\fP of file \fBtcp\&.h\fP\&.
.SS "friend class TransmissionControlProtocolPortListener\fC [friend]\fP"

.PP
Definition at line \fB177\fP of file \fBtcp\&.h\fP\&.
.SH "Member Data Documentation"
.PP 
.SS "uint32_t MaxOS::net::TCPSocket::acknowledgement_number = 0\fC [protected]\fP"

.PP
The number used to keep track of what has been received, incremented by 1 each time\&. 
.PP
Definition at line \fB185\fP of file \fBtcp\&.h\fP\&.
.PP
Referenced by \fBMaxOS::net::TransmissionControlProtocolHandler::handle_internet_protocol_payload()\fP, and \fBMaxOS::net::TransmissionControlProtocolHandler::send_transmission_control_protocol_packet()\fP\&.
.SS "uint32_t MaxOS::net::TCPSocket::local_ip = 0\fC [protected]\fP"

.PP
The IP address of this device\&. 
.PP
Definition at line \fB183\fP of file \fBtcp\&.h\fP\&.
.PP
Referenced by \fBMaxOS::net::TransmissionControlProtocolHandler::send_transmission_control_protocol_packet()\fP\&.
.SS "uint16_t MaxOS::net::TCPSocket::local_port = 0\fC [protected]\fP"

.PP
The port on this device\&. 
.PP
Definition at line \fB182\fP of file \fBtcp\&.h\fP\&.
.PP
Referenced by \fBMaxOS::net::TransmissionControlProtocolHandler::send_transmission_control_protocol_packet()\fP\&.
.SS "uint32_t MaxOS::net::TCPSocket::remote_ip = 0\fC [protected]\fP"

.PP
The IP address of the external device\&. 
.PP
Definition at line \fB181\fP of file \fBtcp\&.h\fP\&.
.PP
Referenced by \fBMaxOS::net::TransmissionControlProtocolHandler::handle_internet_protocol_payload()\fP, and \fBMaxOS::net::TransmissionControlProtocolHandler::send_transmission_control_protocol_packet()\fP\&.
.SS "uint16_t MaxOS::net::TCPSocket::remotePort = 0\fC [protected]\fP"

.PP
The port on the external device\&. 
.PP
Definition at line \fB180\fP of file \fBtcp\&.h\fP\&.
.PP
Referenced by \fBMaxOS::net::TransmissionControlProtocolHandler::connect()\fP, \fBMaxOS::net::TransmissionControlProtocolHandler::handle_internet_protocol_payload()\fP, and \fBMaxOS::net::TransmissionControlProtocolHandler::send_transmission_control_protocol_packet()\fP\&.
.SS "uint32_t MaxOS::net::TCPSocket::sequence_number = 0\fC [protected]\fP"

.PP
The current order number of the data being sent\&. 
.PP
Definition at line \fB184\fP of file \fBtcp\&.h\fP\&.
.PP
Referenced by \fBMaxOS::net::TransmissionControlProtocolHandler::disconnect()\fP, \fBMaxOS::net::TransmissionControlProtocolHandler::handle_internet_protocol_payload()\fP, and \fBMaxOS::net::TransmissionControlProtocolHandler::send_transmission_control_protocol_packet()\fP\&.
.SS "\fBTCPSocketState\fP MaxOS::net::TCPSocket::state\fC [protected]\fP"

.PP
The state of the socket\&. 
.PP
Definition at line \fB188\fP of file \fBtcp\&.h\fP\&.
.PP
Referenced by \fBMaxOS::net::TransmissionControlProtocolHandler::disconnect()\fP, \fBMaxOS::net::TransmissionControlProtocolHandler::handle_internet_protocol_payload()\fP, \fBMaxOS::net::TransmissionControlProtocolHandler::listen()\fP, \fBsend()\fP, and \fBTCPSocket()\fP\&.
.SS "\fBTransmissionControlProtocolHandler\fP* MaxOS::net::TCPSocket::transmission_control_protocol_handler\fC [protected]\fP"

.PP
The TCP handler this socket is using\&. 
.PP
Definition at line \fB187\fP of file \fBtcp\&.h\fP\&.
.PP
Referenced by \fBdisconnect()\fP, \fBsend()\fP, and \fBTCPSocket()\fP\&.

.SH "Author"
.PP 
Generated automatically by Doxygen for Max OS from the source code\&.
