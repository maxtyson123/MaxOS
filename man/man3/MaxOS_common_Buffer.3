.TH "MaxOS::common::Buffer" 3 "Version 0.3" "Max OS" \" -*- nroff -*-
.ad l
.nh
.SH NAME
MaxOS::common::Buffer \- Wrapper class for a region of bytes in memor in an attempt to add some memory safety\&. Automatically allocates the size specified and frees it once done, adds boundary to I/O\&.  

.SH SYNOPSIS
.br
.PP
.PP
\fC#include <buffer\&.h>\fP
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "\fBBuffer\fP (\fBsize_t\fP size, \fBbool\fP \fBupdate_offset\fP=\fBtrue\fP)"
.br
.RI "Creates a buffer of the specified size\&. "
.ti -1c
.RI "\fBBuffer\fP (\fBvoid\fP *source, \fBsize_t\fP size, \fBbool\fP \fBupdate_offset\fP=\fBtrue\fP)"
.br
.RI "Creates a buffer pointing to a source\&. "
.ti -1c
.RI "\fB~Buffer\fP ()"
.br
.RI "Destroy the buffer, freeing the memory\&. "
.ti -1c
.RI "\fBuint8_t\fP * \fBraw\fP () \fBconst\fP"
.br
.RI "The raw pointer to the bytes stored in memory, use is not recommended\&. "
.ti -1c
.RI "\fBvoid\fP \fBclear\fP ()"
.br
.RI "Fulls the buffer with 0's and resets the offset\&. "
.ti -1c
.RI "\fBvoid\fP \fBfull\fP (\fBuint8_t\fP \fBbyte\fP, \fBsize_t\fP offset=0, \fBsize_t\fP \fBamount\fP=0)"
.br
.RI "Full the buffer with a specified byte at an offset\&. "
.ti -1c
.RI "\fBvoid\fP \fBset_offset\fP (\fBsize_t\fP offset)"
.br
.RI "Set the offset for where operations should begin from\&. "
.ti -1c
.RI "\fBsize_t\fP \fBcapacity\fP () \fBconst\fP"
.br
.RI "The max bytes the buffer can currently store\&. "
.ti -1c
.RI "\fBvoid\fP \fBresize\fP (\fBsize_t\fP size)"
.br
.RI "Grow the buffer to fit a new size\&. "
.ti -1c
.RI "\fBvoid\fP \fBwrite\fP (\fBuint8_t\fP \fBbyte\fP)"
.br
.RI "Safely writes a byte to the buffer at the current offset\&. "
.ti -1c
.RI "\fBvoid\fP \fBwrite\fP (\fBsize_t\fP offset, \fBuint8_t\fP \fBbyte\fP)"
.br
.RI "Safely writes a byte to the buffer at the specified offset\&. "
.ti -1c
.RI "\fBuint8_t\fP \fBread\fP ()"
.br
.RI "Safely reads a byte from the buffer at the current offset\&. "
.ti -1c
.RI "\fBuint8_t\fP \fBread\fP (\fBsize_t\fP offset)"
.br
.RI "Safely reads a byte from the buffer at the specified offset\&. "
.ti -1c
.RI "\fBvoid\fP \fBcopy_from\fP (\fBconst\fP \fBBuffer\fP *buffer)"
.br
.RI "Copies all the bytes from another buffer into this buffer\&. "
.ti -1c
.RI "\fBvoid\fP \fBcopy_from\fP (\fBconst\fP \fBBuffer\fP *buffer, \fBsize_t\fP length)"
.br
.RI "Copies a range of bytes from another buffer into this buffer\&. "
.ti -1c
.RI "\fBvoid\fP \fBcopy_from\fP (\fBconst\fP \fBBuffer\fP *buffer, \fBsize_t\fP length, \fBsize_t\fP offset)"
.br
.RI "Copies a range of bytes from another buffer into this buffer at a specified offset\&. "
.ti -1c
.RI "\fBvoid\fP \fBcopy_from\fP (\fBconst\fP \fBBuffer\fP *buffer, \fBsize_t\fP length, \fBsize_t\fP offset, \fBsize_t\fP \fBoffset_other\fP)"
.br
.RI "Copies a range of bytes from another buffer into this buffer at a specified offset for both\&. "
.ti -1c
.RI "\fBvoid\fP \fBcopy_from\fP (\fBconst\fP \fBvoid\fP *source, \fBsize_t\fP length)"
.br
.RI "Copies a range of bytes from a source into this buffer\&. "
.ti -1c
.RI "\fBvoid\fP \fBcopy_from\fP (\fBconst\fP \fBvoid\fP *source, \fBsize_t\fP length, \fBsize_t\fP offset)"
.br
.RI "Copies a range of bytes from a source into this buffer at a specified offset\&. "
.ti -1c
.RI "\fBvoid\fP \fBcopy_to\fP (\fBBuffer\fP *buffer)"
.br
.RI "Copies all the bytes from this buffer into another buffer\&. "
.ti -1c
.RI "\fBvoid\fP \fBcopy_to\fP (\fBBuffer\fP *buffer, \fBsize_t\fP length)"
.br
.RI "Writes a range of bytes from this buffer into another buffer\&. "
.ti -1c
.RI "\fBvoid\fP \fBcopy_to\fP (\fBBuffer\fP *buffer, \fBsize_t\fP length, \fBsize_t\fP offset)"
.br
.RI "Copies a range of bytes from this buffer into another buffer at a specified offset\&. "
.ti -1c
.RI "\fBvoid\fP \fBcopy_to\fP (\fBBuffer\fP *buffer, \fBsize_t\fP length, \fBsize_t\fP offset, \fBsize_t\fP \fBoffset_other\fP)"
.br
.RI "Copies a range of bytes from this buffer into another at an offset for each\&. "
.ti -1c
.RI "\fBvoid\fP \fBcopy_to\fP (\fBvoid\fP *destination, \fBsize_t\fP length)"
.br
.RI "Copies a range of bytes from this buffer into a source\&. "
.ti -1c
.RI "\fBvoid\fP \fBcopy_to\fP (\fBvoid\fP *destination, \fBsize_t\fP length, \fBsize_t\fP offset)"
.br
.RI "Copies a range of bytes from this buffer at an offset into a source\&. "
.in -1c
.SS "Public Attributes"

.in +1c
.ti -1c
.RI "\fBbool\fP \fBupdate_offset\fP = \fBtrue\fP"
.br
.RI "Should operations write/read/copy update the offset in the buffer? "
.in -1c
.SH "Detailed Description"
.PP 
Wrapper class for a region of bytes in memor in an attempt to add some memory safety\&. Automatically allocates the size specified and frees it once done, adds boundary to I/O\&. 
.PP
Definition at line \fB25\fP of file \fBbuffer\&.h\fP\&.
.SH "Constructor & Destructor Documentation"
.PP 
.SS "Buffer::Buffer (\fBsize_t\fP size, \fBbool\fP update_offset = \fC\fBtrue\fP\fP)\fC [explicit]\fP"

.PP
Creates a buffer of the specified size\&. 
.PP
\fBParameters\fP
.RS 4
\fIsize\fP The capacity of the buffer 
.br
\fIupdate_offset\fP Should operations update the offset of the buffer? 
.RE
.PP

.PP
Definition at line \fB20\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
21         : m_capacity(size),
22           update_offset(update_offset) {
23 
24     // Create the buffer
25     m_bytes = new uint8_t[size];
26 
27 }
.fi

.SS "Buffer::Buffer (\fBvoid\fP * source, \fBsize_t\fP size, \fBbool\fP update_offset = \fC\fBtrue\fP\fP)"

.PP
Creates a buffer pointing to a source\&. 
.PP
\fBParameters\fP
.RS 4
\fIsource\fP The source 
.br
\fIsize\fP The capacity of the source 
.br
\fIupdate_offset\fP Should buffer operations update the internal offset? 
.RE
.PP

.PP
Definition at line \fB36\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
37         : update_offset(update_offset) {
38 
39     m_bytes = (uint8_t*) source;
40     m_capacity = size;
41     m_dont_delete = true;
42 
43 }
.fi

.SS "Buffer::~Buffer ()"

.PP
Destroy the buffer, freeing the memory\&. 
.PP
Definition at line \fB48\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
48                 {
49     if (!m_dont_delete && m_bytes)
50         delete[] m_bytes;
51 }
.fi

.SH "Member Function Documentation"
.PP 
.SS "\fBsize_t\fP Buffer::capacity () const"

.PP
The max bytes the buffer can currently store\&. 
.PP
\fBSee also\fP
.RS 4
\fBBuffer\fP:grow(size_t size) to increase this\&. 
.RE
.PP
\fBReturns\fP
.RS 4
The length of the buffer storage array 
.RE
.PP

.PP
Definition at line \fB95\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
95                               {
96     return m_capacity;
97 }
.fi

.PP
Referenced by \fBcopy_from()\fP, \fBcopy_from()\fP, \fBcopy_from()\fP, \fBcopy_from()\fP, \fBcopy_to()\fP, \fBcopy_to()\fP, \fBcopy_to()\fP, \fBcopy_to()\fP, \fBread()\fP, \fBwrite()\fP, and \fBMaxOS::drivers::disk::Disk::write()\fP\&.
.SS "\fBvoid\fP Buffer::clear ()"

.PP
Fulls the buffer with 0's and resets the offset\&. 
.PP
Definition at line \fB65\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
65                    {
66 
67     m_offset = 0;
68     memset(m_bytes, 0, m_capacity);
69 }
.fi

.PP
References \fBmemset()\fP\&.
.PP
Referenced by \fBMaxOS::filesystem::format::Fat32File::read()\fP, and \fBMaxOS::filesystem::format::Fat32File::write()\fP\&.
.SS "\fBvoid\fP Buffer::copy_from (\fBconst\fP \fBBuffer\fP * buffer)"

.PP
Copies all the bytes from another buffer into this buffer\&. 
.PP
\fBParameters\fP
.RS 4
\fIbuffer\fP Where to read from 
.RE
.PP

.PP
Definition at line \fB195\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
195                                            {
196 
197     // Copy the buffer
198     ASSERT(buffer\->capacity() <= capacity(), "Copy exceeds buffer capacity");
199     copy_from(buffer\->raw(), buffer\->capacity());
200 
201 }
.fi

.PP
References \fBASSERT\fP, \fBcapacity()\fP, \fBcopy_from()\fP, and \fBraw()\fP\&.
.PP
Referenced by \fBcopy_from()\fP, \fBcopy_from()\fP, \fBcopy_from()\fP, \fBcopy_from()\fP, \fBMaxOS::filesystem::format::Fat32File::read()\fP, \fBMaxOS::filesystem::format::ext2::Ext2File::write()\fP, \fBMaxOS::filesystem::format::Fat32File::write()\fP, and \fBMaxOS::filesystem::format::ext2::Ext2Volume::write_inode()\fP\&.
.SS "\fBvoid\fP Buffer::copy_from (\fBconst\fP \fBBuffer\fP * buffer, \fBsize_t\fP length)"

.PP
Copies a range of bytes from another buffer into this buffer\&. 
.PP
\fBParameters\fP
.RS 4
\fIbuffer\fP Where to read from 
.br
\fIlength\fP How much to read 
.RE
.PP

.PP
Definition at line \fB209\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
209                                                           {
210 
211     // Copy the buffer
212     ASSERT(length <= buffer\->capacity(), "Copy exceeds external buffer capacity");
213     copy_from(buffer\->raw(), length);
214 
215 }
.fi

.PP
References \fBASSERT\fP, \fBcapacity()\fP, \fBcopy_from()\fP, and \fBraw()\fP\&.
.SS "\fBvoid\fP Buffer::copy_from (\fBconst\fP \fBBuffer\fP * buffer, \fBsize_t\fP length, \fBsize_t\fP offset)"

.PP
Copies a range of bytes from another buffer into this buffer at a specified offset\&. 
.PP
\fBParameters\fP
.RS 4
\fIbuffer\fP Where to read from 
.br
\fIlength\fP How much to read 
.br
\fIoffset\fP Where to start writing into this at 
.RE
.PP

.PP
Definition at line \fB223\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
223                                                                          {
224 
225     // Copy the buffer
226     ASSERT(length <= buffer\->capacity(), "Copy exceeds external buffer capacity");
227     copy_from(buffer\->raw(), length, offset);
228 
229 }
.fi

.PP
References \fBASSERT\fP, \fBcapacity()\fP, \fBcopy_from()\fP, and \fBraw()\fP\&.
.SS "\fBvoid\fP Buffer::copy_from (\fBconst\fP \fBBuffer\fP * buffer, \fBsize_t\fP length, \fBsize_t\fP offset, \fBsize_t\fP offset_other)"

.PP
Copies a range of bytes from another buffer into this buffer at a specified offset for both\&. 
.PP
\fBParameters\fP
.RS 4
\fIbuffer\fP Where to read from 
.br
\fIlength\fP How much to read 
.br
\fIoffset\fP Where to start writing into this at 
.br
\fIoffset_other\fP Where to start reading from the other buffer 
.RE
.PP

.PP
Definition at line \fB239\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
239                                                                                               {
240 
241     // Copy the buffer
242     ASSERT(length + offset_other <= buffer\->capacity(), "Copy exceeds external buffer capacity");
243     copy_from(buffer\->raw() + offset_other, length, offset);
244 
245 }
.fi

.PP
References \fBASSERT\fP, \fBcapacity()\fP, \fBcopy_from()\fP, and \fBraw()\fP\&.
.SS "\fBvoid\fP Buffer::copy_from (\fBconst\fP \fBvoid\fP * source, \fBsize_t\fP length)"

.PP
Copies a range of bytes from a source into this buffer\&. 
.PP
\fBParameters\fP
.RS 4
\fIsource\fP Where to read from 
.br
\fIlength\fP How much to read 
.RE
.PP

.PP
Definition at line \fB253\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
253                                                         {
254 
255     // Copy the bytes
256     ASSERT(length + m_offset <= m_capacity, "Copy exceeds buffer capacity");
257     memcpy(m_bytes + m_offset, source, length);
258     set_offset(m_offset + length);
259 }
.fi

.PP
References \fBASSERT\fP, \fBmemcpy()\fP, and \fBset_offset()\fP\&.
.SS "\fBvoid\fP Buffer::copy_from (\fBconst\fP \fBvoid\fP * source, \fBsize_t\fP length, \fBsize_t\fP offset)"

.PP
Copies a range of bytes from a source into this buffer at a specified offset\&. 
.PP
\fBParameters\fP
.RS 4
\fIsource\fP Where to read from 
.br
\fIlength\fP How much to read 
.br
\fIoffset\fP Where to start writing at 
.RE
.PP

.PP
Definition at line \fB268\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
268                                                                        {
269 
270     // Copy the bytes
271     ASSERT((length + offset + m_offset) <= m_capacity, "Copy exceeds buffer capacity");
272     memcpy(m_bytes + offset + m_offset, source, length);
273     set_offset(m_offset + length);
274 
275 }
.fi

.PP
References \fBASSERT\fP, \fBmemcpy()\fP, and \fBset_offset()\fP\&.
.SS "\fBvoid\fP Buffer::copy_to (\fBBuffer\fP * buffer)"

.PP
Copies all the bytes from this buffer into another buffer\&. 
.PP
\fBParameters\fP
.RS 4
\fIbuffer\fP Where to write to 
.RE
.PP

.PP
Definition at line \fB282\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
282                                    {
283 
284     // Copy the buffer
285     ASSERT(capacity() <= buffer\->capacity(), "Copy exceeds external buffer capacity");
286     copy_to(buffer\->raw(), capacity());
287 
288 }
.fi

.PP
References \fBASSERT\fP, \fBcapacity()\fP, \fBcopy_to()\fP, and \fBraw()\fP\&.
.PP
Referenced by \fBcopy_to()\fP, \fBcopy_to()\fP, \fBcopy_to()\fP, \fBcopy_to()\fP, \fBMaxOS::filesystem::format::ext2::Ext2File::read()\fP, and \fBMaxOS::filesystem::format::ext2::Ext2Volume::read_inode()\fP\&.
.SS "\fBvoid\fP Buffer::copy_to (\fBBuffer\fP * buffer, \fBsize_t\fP length)"

.PP
Writes a range of bytes from this buffer into another buffer\&. 
.PP
\fBParameters\fP
.RS 4
\fIbuffer\fP Where to write to 
.br
\fIlength\fP How much to write 
.RE
.PP

.PP
Definition at line \fB296\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
296                                                   {
297 
298     // Copy the buffer
299     ASSERT(length <= buffer\->capacity(), "Copy exceeds external buffer capacity");
300     copy_to(buffer\->raw(), length);
301 
302 }
.fi

.PP
References \fBASSERT\fP, \fBcapacity()\fP, \fBcopy_to()\fP, and \fBraw()\fP\&.
.SS "\fBvoid\fP Buffer::copy_to (\fBBuffer\fP * buffer, \fBsize_t\fP length, \fBsize_t\fP offset)"

.PP
Copies a range of bytes from this buffer into another buffer at a specified offset\&. 
.PP
\fBParameters\fP
.RS 4
\fIbuffer\fP Where to write to 
.br
\fIlength\fP How much to write 
.br
\fIoffset\fP Where to start reading at 
.RE
.PP

.PP
Definition at line \fB311\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
311                                                                  {
312 
313     // Copy the bytes
314     ASSERT((length + offset) <= buffer\->capacity(), "Copy exceeds external buffer capacity");
315     copy_to(buffer\->raw(), length, offset);
316 
317 }
.fi

.PP
References \fBASSERT\fP, \fBcapacity()\fP, \fBcopy_to()\fP, and \fBraw()\fP\&.
.SS "\fBvoid\fP Buffer::copy_to (\fBBuffer\fP * buffer, \fBsize_t\fP length, \fBsize_t\fP offset, \fBsize_t\fP offset_other)"

.PP
Copies a range of bytes from this buffer into another at an offset for each\&. 
.PP
\fBParameters\fP
.RS 4
\fIbuffer\fP Where to write to 
.br
\fIlength\fP How much to write 
.br
\fIoffset\fP Where to start reading from 
.br
\fIoffset_other\fP Where to start writing to 
.RE
.PP

.PP
Definition at line \fB327\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
327                                                                                       {
328 
329     // Copy the bytes
330     ASSERT((length + offset) <= buffer\->capacity(), "Copy exceeds external buffer capacity");
331     copy_to(buffer\->raw() + offset_other, length, offset);
332 
333 }
.fi

.PP
References \fBASSERT\fP, \fBcapacity()\fP, \fBcopy_to()\fP, and \fBraw()\fP\&.
.SS "\fBvoid\fP Buffer::copy_to (\fBvoid\fP * destination, \fBsize_t\fP length)"

.PP
Copies a range of bytes from this buffer into a source\&. 
.PP
\fBParameters\fP
.RS 4
\fIdestination\fP Where to write to 
.br
\fIlength\fP How much to write 
.RE
.PP

.PP
Definition at line \fB342\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
342                                                      {
343 
344     // Copy the bytes
345     ASSERT(length + m_offset <= (m_capacity), "Copy exceeds buffer capacity");
346     memcpy(destination, m_bytes + m_offset, length);
347     set_offset(m_offset + length);
348 
349 }
.fi

.PP
References \fBASSERT\fP, \fBmemcpy()\fP, and \fBset_offset()\fP\&.
.SS "\fBvoid\fP Buffer::copy_to (\fBvoid\fP * destination, \fBsize_t\fP length, \fBsize_t\fP offset)"

.PP
Copies a range of bytes from this buffer at an offset into a source\&. 
.PP
\fBParameters\fP
.RS 4
\fIdestination\fP Where to write to 
.br
\fIlength\fP How much to write 
.br
\fIoffset\fP Where to start reading from 
.RE
.PP

.PP
Definition at line \fB358\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
358                                                                     {
359 
360     // Copy the bytes
361     ASSERT((length + offset + m_offset) <= m_capacity, "Copy exceeds buffer capacity");
362     memcpy(destination, m_bytes + offset + m_offset, length);
363     set_offset(m_offset + length);
364 
365 }
.fi

.PP
References \fBASSERT\fP, \fBmemcpy()\fP, and \fBset_offset()\fP\&.
.SS "\fBvoid\fP Buffer::full (\fBuint8_t\fP byte, \fBsize_t\fP offset = \fC0\fP, \fBsize_t\fP amount = \fC0\fP)"

.PP
Full the buffer with a specified byte at an offset\&. 
.PP
\fBParameters\fP
.RS 4
\fIbyte\fP The byte to write 
.br
\fIoffset\fP Where to start writing (deafults to 0) 
.br
\fIamount\fP 
.RE
.PP

.PP
Definition at line \fB78\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
78                                                             {
79 
80     // Prevent writing past the buffer bounds
81     size_t start = m_offset + offset;
82     ASSERT(start <= m_capacity, "Offset past buffer end");
83 
84     if (amount == 0) amount = m_capacity \- start;
85     ASSERT(start + amount <= m_capacity, "Buffer overflow");
86 
87     memset(m_bytes + start, byte, amount);
88 
89 }
.fi

.PP
References \fBASSERT\fP, and \fBmemset()\fP\&.
.SS "\fBuint8_t\fP * Buffer::raw () const"

.PP
The raw pointer to the bytes stored in memory, use is not recommended\&. 
.PP
\fBReturns\fP
.RS 4
The address of buffer's storage 
.RE
.PP

.PP
Definition at line \fB57\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
57                            {
58 
59     return m_bytes;
60 }
.fi

.PP
Referenced by \fBcopy_from()\fP, \fBcopy_from()\fP, \fBcopy_from()\fP, \fBcopy_from()\fP, \fBcopy_to()\fP, \fBcopy_to()\fP, \fBcopy_to()\fP, and \fBcopy_to()\fP\&.
.SS "\fBuint8_t\fP Buffer::read ()"

.PP
Safely reads a byte from the buffer at the current offset\&. 
.PP
\fBReturns\fP
.RS 4
The read byte 
.RE
.PP

.PP
Definition at line \fB168\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
168                      {
169     set_offset(m_offset + 1);
170     return m_bytes[m_offset \- 1];
171 }
.fi

.PP
References \fBset_offset()\fP\&.
.PP
Referenced by \fBMaxOS::drivers::disk::AdvancedTechnologyAttachment::write()\fP\&.
.SS "\fBuint8_t\fP Buffer::read (\fBsize_t\fP offset)"

.PP
Safely reads a byte from the buffer at the specified offset\&. 
.PP
\fBParameters\fP
.RS 4
\fIoffset\fP The offset into the buffer storage array
.RE
.PP
\fBReturns\fP
.RS 4
The read byte 
.RE
.PP

.PP
Definition at line \fB180\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
180                                   {
181 
182     // Prevent writing past the buffer bounds
183     ASSERT(m_offset + offset < capacity(), "Buffer overflow");
184 
185     // Set the byte
186     set_offset(m_offset + 1);
187     return m_bytes[(m_offset \- 1) + offset];
188 }
.fi

.PP
References \fBASSERT\fP, \fBcapacity()\fP, and \fBset_offset()\fP\&.
.SS "\fBvoid\fP Buffer::resize (\fBsize_t\fP size)"

.PP
Grow the buffer to fit a new size\&. 
.PP
\fBParameters\fP
.RS 4
\fIsize\fP The new max capacity of the buffer 
.RE
.PP

.PP
Definition at line \fB104\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
104                                {
105 
106     // Create the new buffer
107     auto* new_buffer = new uint8_t[size];
108 
109     // Copy the old buffer
110     if (m_bytes)
111         memcpy(new_buffer, m_bytes, m_capacity);
112 
113     // Store the new buffer
114     if (!m_dont_delete && m_bytes)
115         delete[] m_bytes;
116 
117     m_bytes = new_buffer;
118     m_capacity = size;
119     m_dont_delete = true;
120 
121 }
.fi

.PP
References \fBmemcpy()\fP\&.
.SS "\fBvoid\fP Buffer::set_offset (\fBsize_t\fP offset)"

.PP
Set the offset for where operations should begin from\&. 
.PP
\fBParameters\fP
.RS 4
\fIoffset\fP The new offset 
.RE
.PP

.PP
Definition at line \fB128\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
128                                      {
129 
130     if (update_offset)
131         m_offset = offset;
132 
133 }
.fi

.PP
References \fBupdate_offset\fP\&.
.PP
Referenced by \fBcopy_from()\fP, \fBcopy_from()\fP, \fBcopy_to()\fP, \fBcopy_to()\fP, \fBread()\fP, \fBMaxOS::filesystem::format::Fat32File::read()\fP, \fBread()\fP, \fBMaxOS::filesystem::format::ext2::Ext2Volume::read_block()\fP, \fBMaxOS::filesystem::format::Fat32File::write()\fP, \fBwrite()\fP, \fBwrite()\fP, and \fBMaxOS::filesystem::format::ext2::Ext2Volume::write_block()\fP\&.
.SS "\fBvoid\fP Buffer::write (\fBsize_t\fP offset, \fBuint8_t\fP byte)"

.PP
Safely writes a byte to the buffer at the specified offset\&. 
.PP
\fBParameters\fP
.RS 4
\fIoffset\fP The offset into the buffer storage array 
.br
\fIbyte\fP The byte to write 
.RE
.PP

.PP
Definition at line \fB152\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
152                                               {
153 
154     // Prevent writing past the buffer bounds
155     ASSERT(m_offset + offset < capacity(), "Buffer overflow");
156 
157     // Set the byte
158     m_bytes[m_offset + offset] = byte;
159     set_offset(m_offset + 1);
160 
161 }
.fi

.PP
References \fBASSERT\fP, \fBcapacity()\fP, and \fBset_offset()\fP\&.
.SS "\fBvoid\fP Buffer::write (\fBuint8_t\fP byte)"

.PP
Safely writes a byte to the buffer at the current offset\&. 
.PP
\fBParameters\fP
.RS 4
\fIbyte\fP The byte to write 
.RE
.PP

.PP
Definition at line \fB140\fP of file \fBbuffer\&.cpp\fP\&..PP
.nf
140                                {
141     m_bytes[m_offset] = byte;
142     set_offset(m_offset + 1);
143 }
.fi

.PP
References \fBset_offset()\fP\&.
.SH "Member Data Documentation"
.PP 
.SS "\fBbool\fP MaxOS::common::Buffer::update_offset = \fBtrue\fP"

.PP
Should operations write/read/copy update the offset in the buffer? 
.PP
Definition at line \fB44\fP of file \fBbuffer\&.h\fP\&.
.PP
Referenced by \fBset_offset()\fP, and \fBMaxOS::filesystem::format::ext2::Ext2Volume::write_block()\fP\&.

.SH "Author"
.PP 
Generated automatically by Doxygen for Max OS from the source code\&.
