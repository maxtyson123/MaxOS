.TH "MaxOS::drivers::peripherals::KeyboardInterpreterEN_US" 3 "Version 0.1" "Max OS" \" -*- nroff -*-
.ad l
.nh
.SH NAME
MaxOS::drivers::peripherals::KeyboardInterpreterEN_US \- Interprets the scan codes from the keyboard for the EN_US keyboard layout\&.  

.SH SYNOPSIS
.br
.PP
.PP
\fC#include <keyboard\&.h>\fP
.PP
Inherits \fBMaxOS::drivers::peripherals::KeyboardInterpreter\fP\&.
.SS "Public Types"

.in +1c
.ti -1c
.RI "enum class \fBKeyCodeEN_US\fP { \fBescape\fP = 0x01, \fBf1\fP = 0x3B, \fBf2\fP = 0x3C, \fBf3\fP = 0x3D, \fBf4\fP = 0x3E, \fBf5\fP = 0x3F, \fBf6\fP = 0x40, \fBf7\fP = 0x41, \fBf8\fP = 0x42, \fBf9\fP = 0x43, \fBf10\fP = 0x44, \fBf11\fP = 0x57, \fBf12\fP = 0x58, \fBprintScreen\fP = 0x37, \fBscrollLock\fP = 0x46, \fBpauseBreak\fP = 0x45, \fBsquigglyLine\fP = 0x29, \fBone\fP = 0x02, \fBtwo\fP = 0x03, \fBthree\fP = 0x04, \fBfour\fP = 0x05, \fBfive\fP = 0x06, \fBsix\fP = 0x07, \fBseven\fP = 0x08, \fBeight\fP = 0x09, \fBnine\fP = 0x0A, \fBzero\fP = 0x0B, \fBminus\fP = 0x0C, \fBequals\fP = 0x0D, \fBbackspace\fP = 0x0E, \fBinsert\fP = 0x52, \fBhome\fP = 0x47, \fBpageUp\fP = 0x49, \fBnumberPadLock\fP = 0x45, \fBnumberPadForwardSlash\fP = 0x35, \fBnumberPadMultiply\fP = 0x37, \fBnumberPadMinus\fP = 0x4A, \fBtab\fP = 0x0F, \fBQ\fP = 0x10, \fBW\fP = 0x11, \fBE\fP = 0x12, \fBR\fP = 0x13, \fBT\fP = 0x14, \fBY\fP = 0x15, \fBU\fP = 0x16, \fBI\fP = 0x17, \fBO\fP = 0x18, \fBP\fP = 0x19, \fBopenSquareBracket\fP = 0x1A, \fBcloseSquareBracket\fP = 0x1B, \fBbackslash\fP = 0x2B, \fBdeleteKey\fP = 0x53, \fBend\fP = 0x4F, \fBpageDown\fP = 0x51, \fBnumberPadSeven\fP = 0x47, \fBnumberPadEight\fP = 0x48, \fBnumberPadNine\fP = 0x49, \fBnumberPadPlus\fP = 0x4E, \fBcapsLock\fP = 0x3A, \fBA\fP = 0x1E, \fBS\fP = 0x1F, \fBD\fP = 0x20, \fBF\fP = 0x21, \fBG\fP = 0x22, \fBH\fP = 0x23, \fBJ\fP = 0x24, \fBK\fP = 0x25, \fBL\fP = 0x26, \fBsemicolon\fP = 0x27, \fBapostrophe\fP = 0x28, \fBenter\fP = 0x1C, \fBnumberPadFour\fP = 0x4B, \fBnumberPadFive\fP = 0x4C, \fBnumberPadSix\fP = 0x4D, \fBleftShift\fP = 0x2A, \fBZ\fP = 0x2C, \fBX\fP = 0x2D, \fBC\fP = 0x2E, \fBV\fP = 0x2F, \fBB\fP = 0x30, \fBN\fP = 0x31, \fBM\fP = 0x32, \fBcomma\fP = 0x33, \fBfullStop\fP = 0x34, \fBforwardSlash\fP = 0x35, \fBrightShift\fP = 0x36, \fBupArrow\fP = 0x48, \fBnumberPadOne\fP = 0x4F, \fBnumberPadTwo\fP = 0x50, \fBnumberPadThree\fP = 0x51, \fBnumberPadEnter\fP = 0x1C, \fBleftControl\fP = 0x1D, \fBleftOS\fP = 0x5B, \fBleftAlt\fP = 0x38, \fBspace\fP = 0x39, \fBrightAlt\fP = 0x38, \fBfunction\fP = 0x5D, \fBrightControl\fP = 0x1D, \fBleftArrow\fP = 0x4B, \fBdownArrow\fP = 0x50, \fBrightArrow\fP = 0x4D, \fBnumberPadZero\fP = 0x52, \fBnumberPadFullStop\fP = 0x53 }"
.br
.RI "The scan codes for the EN_US keyboard layout\&. "
.in -1c
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "\fBvoid\fP \fBon_stream_read\fP (\fBuint8_t\fP \fBscan_code\fP) \fBfinal\fP"
.br
.RI "Handle the key down event\&. "
.in -1c

Public Member Functions inherited from \fBMaxOS::drivers::peripherals::KeyboardInterpreter\fP
.in +1c
.ti -1c
.RI "\fBvoid\fP \fBon_key_read\fP (\fBbool\fP, \fBconst\fP \fBKeyboardState\fP &, \fBKeyCode\fP)"
.br
.RI "Handle the key event\&. "
.in -1c

Public Member Functions inherited from \fBMaxOS::common::InputStreamEventHandler< uint8_t >\fP
.in +1c
.ti -1c
.RI "\fBInputStreamEventHandler\fP ()"
.br
.RI "_______________________________________________TEMPLATES_________________________________________________________________/// "
.ti -1c
.RI "\fB~InputStreamEventHandler\fP ()"
.br
.RI "Destroys the \fBInputStreamProcessor\fP and disconnects it from all streams\&. "
.ti -1c
.RI "\fBvirtual\fP \fBvoid\fP \fBon_stream_read\fP (\fBuint8_t\fP)"
.br
.RI "Called when data is read from a stream (overridden by subclasses) "
.ti -1c
.RI "\fBvirtual\fP \fBvoid\fP \fBon_end_of_stream\fP (\fBGenericInputStream\fP< \fBuint8_t\fP > *)"
.br
.RI "Called when a stream has finished\&. Removes the stream from the array of streams\&. "
.in -1c

Public Member Functions inherited from \fBMaxOS::common::EventManager< KeyboardEvents >\fP
.in +1c
.ti -1c
.RI "\fBvoid\fP \fBconnect_event_handler\fP (\fBEventHandler\fP< KeyboardEvents > *\fBhandler\fP)"
.br
.RI "Connect an event handler to the event manager if it is not already connected\&. "
.ti -1c
.RI "\fBvoid\fP \fBdisconnect_event_handler\fP (\fBEventHandler\fP< KeyboardEvents > *\fBhandler\fP)"
.br
.RI "Disconnect an event handler from the event manager if it is connected\&. "
.ti -1c
.RI "\fBVector\fP< \fBEvent\fP< KeyboardEvents > * > \fBraise_event\fP (\fBEvent\fP< KeyboardEvents > *\fBevent\fP)"
.br
.RI "Calls the on_event function of all the event m_handlers connected to the event manager and returns a list of the results\&. "
.in -1c
.SS "Additional Inherited Members"


Protected Attributes inherited from \fBMaxOS::drivers::peripherals::KeyboardInterpreter\fP
.in +1c
.ti -1c
.RI "\fBKeyboardState\fP \fBm_keyboard_state\fP"
.br
.RI "The current state of what special keys are pressed on the keyboard\&. "
.ti -1c
.RI "bool \fBm_next_is_first_extended_code\fP = false"
.br
.RI "If true, the next code should be interpreted as an extended code (set when receiving 0xE0) "
.ti -1c
.RI "uint8_t \fBm_extended_scan_code_bytes\fP = 0"
.br
.RI "How many bytes are left to read for the current extended scan code\&. "
.ti -1c
.RI "uint16_t \fBm_extended_code_buffer\fP = 0"
.br
.RI "The storage for scan codes that take more than one byte\&. "
.in -1c

Protected Attributes inherited from \fBMaxOS::common::InputStreamEventHandler< uint8_t >\fP
.in +1c
.ti -1c
.RI "\fBcommon::Vector\fP< \fBGenericInputStream\fP< \fBuint8_t\fP > * > \fBm_generic_input_streams\fP"
.br
.RI "List of streams being observed by this handler\&. "
.in -1c

Protected Attributes inherited from \fBMaxOS::common::EventManager< KeyboardEvents >\fP
.in +1c
.ti -1c
.RI "\fBVector\fP< \fBEventHandler\fP< KeyboardEvents > * > \fBm_handlers\fP"
.br
.in -1c
.SH "Detailed Description"
.PP 
Interprets the scan codes from the keyboard for the EN_US keyboard layout\&. 
.PP
Definition at line \fB300\fP of file \fBkeyboard\&.h\fP\&.
.SH "Member Enumeration Documentation"
.PP 
.SS "enum class \fBMaxOS::drivers::peripherals::KeyboardInterpreterEN_US::KeyCodeEN_US\fP\fC [strong]\fP"

.PP
The scan codes for the EN_US keyboard layout\&. 
.PP
Definition at line \fB308\fP of file \fBkeyboard\&.h\fP\&..PP
.nf
308                                             {
309                         // First Row
310                         escape = 0x01,
311                         f1 = 0x3B,
312                         f2 = 0x3C,
313                         f3 = 0x3D,
314                         f4 = 0x3E,
315                         f5 = 0x3F,
316                         f6 = 0x40,
317                         f7 = 0x41,
318                         f8 = 0x42,
319                         f9 = 0x43,
320                         f10 = 0x44,
321                         f11 = 0x57,
322                         f12 = 0x58,
323                         printScreen = 0x37,
324                         scrollLock = 0x46,
325                         pauseBreak = 0x45,
326 
327                         // Second Row
328                         squigglyLine = 0x29,
329                         one = 0x02,
330                         two = 0x03,
331                         three = 0x04,
332                         four = 0x05,
333                         five = 0x06,
334                         six = 0x07,
335                         seven = 0x08,
336                         eight = 0x09,
337                         nine = 0x0A,
338                         zero = 0x0B,
339                         minus = 0x0C,
340                         equals = 0x0D,
341                         backspace = 0x0E,
342                         insert = 0x52,
343                         home = 0x47,
344                         pageUp = 0x49,
345                         numberPadLock = 0x45,
346                         numberPadForwardSlash = 0x35,
347                         numberPadMultiply = 0x37,
348                         numberPadMinus = 0x4A,
349 
350                         // Third Row
351                         tab = 0x0F,
352                         Q = 0x10,
353                         W = 0x11,
354                         E = 0x12,
355                         R = 0x13,
356                         T = 0x14,
357                         Y = 0x15,
358                         U = 0x16,
359                         I = 0x17,
360                         O = 0x18,
361                         P = 0x19,
362                         openSquareBracket = 0x1A,
363                         closeSquareBracket = 0x1B,
364                         backslash = 0x2B,
365                         deleteKey = 0x53,
366                         end = 0x4F,
367                         pageDown = 0x51,
368                         numberPadSeven = 0x47,
369                         numberPadEight = 0x48,
370                         numberPadNine = 0x49,
371                         numberPadPlus = 0x4E,
372 
373                         // Fourth Row
374                         capsLock = 0x3A,
375                         A = 0x1E,
376                         S = 0x1F,
377                         D = 0x20,
378                         F = 0x21,
379                         G = 0x22,
380                         H = 0x23,
381                         J = 0x24,
382                         K = 0x25,
383                         L = 0x26,
384                         semicolon = 0x27,
385                         apostrophe = 0x28,
386                         enter = 0x1C,
387                         numberPadFour = 0x4B,
388                         numberPadFive = 0x4C,
389                         numberPadSix = 0x4D,
390 
391                         // Fifth Row
392                         leftShift = 0x2A,
393                         Z = 0x2C,
394                         X = 0x2D,
395                         C = 0x2E,
396                         V = 0x2F,
397                         B = 0x30,
398                         N = 0x31,
399                         M = 0x32,
400                         comma = 0x33,
401                         fullStop = 0x34,
402                         forwardSlash = 0x35,
403                         rightShift = 0x36,
404                         upArrow = 0x48,
405                         numberPadOne = 0x4F,
406                         numberPadTwo = 0x50,
407                         numberPadThree = 0x51,
408                         numberPadEnter = 0x1C,
409 
410                         // Sixth Row
411                         leftControl = 0x1D,
412                         leftOS = 0x5B,
413                         leftAlt = 0x38,
414                         space = 0x39,
415                         rightAlt = 0x38,
416                         function = 0x5D,
417                         rightControl = 0x1D,
418                         leftArrow = 0x4B,
419                         downArrow = 0x50,
420                         rightArrow = 0x4D,
421                         numberPadZero = 0x52,
422                         numberPadFullStop = 0x53
423                     };
.fi

.SH "Constructor & Destructor Documentation"
.PP 
.SS "KeyboardInterpreterEN_US::KeyboardInterpreterEN_US ()"

.PP
Definition at line \fB147\fP of file \fBkeyboard\&.cpp\fP\&..PP
.nf
148 : KeyboardInterpreter()
149 {
150 
151 }
.fi

.SH "Member Function Documentation"
.PP 
.SS "\fBvoid\fP KeyboardInterpreterEN_US::on_stream_read (\fBuint8_t\fP scan_code)\fC [final]\fP"

.PP
Handle the key down event\&. 
.PP
\fBParameters\fP
.RS 4
\fIscan_code\fP The scan code of the key that was pressed
.RE
.PP
\fBTodo\fP
.RS 4
Probably a better way to do this (investigate when adding more keyboard layouts) 
.RE
.PP
First row
.PP
Second row
.PP
Fourth row
.PP
Fifth row
.PP
Sixth row
.PP
Definition at line \fB162\fP of file \fBkeyboard\&.cpp\fP\&..PP
.nf
162                                                                {
163 
164 
165     // Check if the key was released
166     bool released = (scan_code & 0x80)
167                     && (m_extended_scan_code_bytes || (scan_code != 0xe1))
168                     && (m_next_is_first_extended_code || (scan_code != 0xe0));
169 
170     // Clear the released bit
171     if (released)
172         scan_code &= ~0x80;
173 
174     // Start of a scan code that takes more than one byte
175     if (scan_code == 0xe0) {
176         m_next_is_first_extended_code = true;
177         return;
178     }
179 
180     // Handle extended scan codes
181     ScanCodeType type = ScanCodeType::REGULAR;
182     if (m_next_is_first_extended_code) {
183 
184         type = ScanCodeType::EXTENDED;
185         m_next_is_first_extended_code = false;
186 
187         // Check if the scan_code represents a shift key and return (fake shift)
188         if ((KeyboardInterpreterEN_US::KeyCodeEN_US) scan_code == KeyCodeEN_US::leftShift ||
189             (KeyboardInterpreterEN_US::KeyCodeEN_US) scan_code == KeyCodeEN_US::rightShift)
190             return;
191     }
192 
193     // The scan code takes three bytes
194     if (scan_code == 0xe1) {
195         m_extended_scan_code_bytes = 1;
196         return;
197     }
198 
199     // Take the second byte of a three\-byte scan code and wait for the last byte (if applicable)
200     if (m_extended_scan_code_bytes == 1) {
201         m_extended_scan_code_bytes = 2;
202         m_extended_code_buffer = scan_code;
203         return;
204     }
205 
206     // Take the last byte of a three\-byte scan code
207     if (m_extended_scan_code_bytes == 2) {
208         type = ScanCodeType::EXTENDED;
209         m_extended_scan_code_bytes = 0;
210         m_extended_code_buffer |= (((uint16_t) scan_code) << 8);
211     }
212 
213     // Scan code value manipulations
214     bool is_shifting = this\->m_keyboard_state\&.left_shift || this\->m_keyboard_state\&.right_shift;
215     bool should_be_upper_case = is_shifting != this\->m_keyboard_state\&.caps_lock;
216 
217     if (type == ScanCodeType::REGULAR)
218         switch ((KeyCodeEN_US) scan_code) {
219 
221             case KeyCodeEN_US::escape:
222                 on_key_read(released, this\->m_keyboard_state, KeyCode::escape);
223                 break;
224 
225             case KeyCodeEN_US::f1:
226                 on_key_read(released, this\->m_keyboard_state, KeyCode::f1);
227                 break;
228 
229             case KeyCodeEN_US::f2:
230                 on_key_read(released, this\->m_keyboard_state, KeyCode::f2);
231                 break;
232 
233             case KeyCodeEN_US::f3:
234                 on_key_read(released, this\->m_keyboard_state, KeyCode::f3);
235                 break;
236 
237             case KeyCodeEN_US::f4:
238                 on_key_read(released, this\->m_keyboard_state, KeyCode::f4);
239                 break;
240 
241             case KeyCodeEN_US::f5:
242                 on_key_read(released, this\->m_keyboard_state, KeyCode::f5);
243                 break;
244 
245             case KeyCodeEN_US::f6:
246                 on_key_read(released, this\->m_keyboard_state, KeyCode::f6);
247                 break;
248 
249             case KeyCodeEN_US::f7:
250                 on_key_read(released, this\->m_keyboard_state, KeyCode::f7);
251                 break;
252 
253             case KeyCodeEN_US::f8:
254                 on_key_read(released, this\->m_keyboard_state, KeyCode::f8);
255                 break;
256 
257             case KeyCodeEN_US::f9:
258                 on_key_read(released, this\->m_keyboard_state, KeyCode::f9);
259                 break;
260 
261             case KeyCodeEN_US::f10:
262                 on_key_read(released, this\->m_keyboard_state, KeyCode::f10);
263                 break;
264 
265             case KeyCodeEN_US::f11:
266                 on_key_read(released, this\->m_keyboard_state, KeyCode::f11);
267                 break;
268 
269             case KeyCodeEN_US::f12:
270                 on_key_read(released, this\->m_keyboard_state, KeyCode::f12);
271                 break;
272 
273             case KeyCodeEN_US::printScreen:
274                 on_key_read(released, this\->m_keyboard_state, this\->m_keyboard_state\&.number_pad_lock ? KeyCode::numberPadMultiply : KeyCode::printScreen);
275                 break;
276 
277             case KeyCodeEN_US::scrollLock:
278                 on_key_read(released, this\->m_keyboard_state, KeyCode::scrollLock);
279                 break;
280 
282             case KeyCodeEN_US::squigglyLine:
283                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::squigglyLine : KeyCode::slantedApostrophe);
284                 break;
285 
286             case KeyCodeEN_US::one:
287                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::exclamationMark : KeyCode::one);
288                 break;
289 
290             case KeyCodeEN_US::two:
291                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::atSign : KeyCode::two);
292                 break;
293 
294             case KeyCodeEN_US::three:
295                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::hash : KeyCode::three);
296                 break;
297 
298             case KeyCodeEN_US::four:
299                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::dollarSign : KeyCode::four);
300                 break;
301 
302             case KeyCodeEN_US::five:
303                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::percentSign : KeyCode::five);
304                 break;
305 
306             case KeyCodeEN_US::six:
307                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::powerSign : KeyCode::six);
308                 break;
309 
310             case KeyCodeEN_US::seven:
311                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::andSign : KeyCode::seven);
312                 break;
313 
314             case KeyCodeEN_US::eight:
315                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::multiply : KeyCode::eight);
316                 break;
317 
318             case KeyCodeEN_US::nine:
319                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::openBracket : KeyCode::nine);
320                 break;
321 
322             case KeyCodeEN_US::zero:
323                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::closeBracket : KeyCode::zero);
324                 break;
325 
326             case KeyCodeEN_US::minus:
327                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::underscore : KeyCode::minus);
328                 break;
329 
330             case KeyCodeEN_US::equals:
331                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::plus : KeyCode::equals);
332                 break;
333 
334             case KeyCodeEN_US::backspace:
335                 on_key_read(released, this\->m_keyboard_state, KeyCode::backspace);
336                 break;
337 
338             case KeyCodeEN_US::insert:
339                 on_key_read(released, this\->m_keyboard_state, this\->m_keyboard_state\&.number_pad_lock ? KeyCode::numberPadZero : KeyCode::insert);
340                 break;
341 
342             case KeyCodeEN_US::home:
343                 on_key_read(released, this\->m_keyboard_state, this\->m_keyboard_state\&.number_pad_lock
344                                                               ? KeyCode::numberPadSeven : KeyCode::home);
345                 break;
346 
347             case KeyCodeEN_US::pageUp:
348                 on_key_read(released, this\->m_keyboard_state, this\->m_keyboard_state\&.number_pad_lock ? KeyCode::numberPadNine : KeyCode::pageUp);
349                 break;
350 
351             case KeyCodeEN_US::numberPadLock:
352 
353                 // Ensure this is not a repeat
354                 if (!released) {
355                     this\->m_keyboard_state\&.number_pad_lock = !this\->m_keyboard_state\&.number_pad_lock;
356                 }
357                 on_key_read(released, this\->m_keyboard_state, KeyCode::numberPadLock);
358                 break;
359 
360             case KeyCodeEN_US::numberPadForwardSlash:
361 
362                 // Check if number pad lock is on
363                 if (this\->m_keyboard_state\&.number_pad_lock) {
364                     on_key_read(released, this\->m_keyboard_state, KeyCode::numberPadForwardSlash);
365                 } else {
366 
367                     // Normal Forward Slash
368                     on_key_read(released, this\->m_keyboard_state,
369                                 should_be_upper_case ? KeyCode::questionMark : KeyCode::forwardSlash);
370                 }
371                 break;
372 
373             // Number Pad Multiply is same as print screen
374 
375             case KeyCodeEN_US::numberPadMinus:
376                 on_key_read(released, this\->m_keyboard_state, KeyCode::numberPadMinus);
377                 break;
378 
379             // Third row
380             case KeyCodeEN_US::tab:
381                 on_key_read(released, this\->m_keyboard_state, KeyCode::tab);
382                 break;
383 
384             case KeyCodeEN_US::Q:
385                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::Q : KeyCode::q);
386                 break;
387 
388             case KeyCodeEN_US::W:
389                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::W : KeyCode::w);
390                 break;
391 
392             case KeyCodeEN_US::E:
393                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::E : KeyCode::e);
394                 break;
395 
396             case KeyCodeEN_US::R:
397                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::R : KeyCode::r);
398                 break;
399 
400             case KeyCodeEN_US::T:
401                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::T : KeyCode::t);
402                 break;
403 
404             case KeyCodeEN_US::Y:
405                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::Y : KeyCode::y);
406                 break;
407 
408             case KeyCodeEN_US::U:
409                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::U : KeyCode::u);
410                 break;
411 
412             case KeyCodeEN_US::I:
413                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::I : KeyCode::i);
414                 break;
415 
416             case KeyCodeEN_US::O:
417                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::O : KeyCode::o);
418                 break;
419 
420             case KeyCodeEN_US::P:
421                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::P : KeyCode::p);
422                 break;
423 
424             case KeyCodeEN_US::openSquareBracket:
425                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::openCurlyBracket : KeyCode::openSquareBracket);
426                 break;
427 
428             case KeyCodeEN_US::closeSquareBracket:
429                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::closeCurlyBracket : KeyCode::closeSquareBracket);
430                 break;
431 
432             case KeyCodeEN_US::backslash:
433                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::lineThing : KeyCode::backslash);
434                 break;
435 
436             case KeyCodeEN_US::deleteKey:
437                 on_key_read(released, this\->m_keyboard_state, this\->m_keyboard_state\&.number_pad_lock
438                                                               ? KeyCode::numberPadFullStop : KeyCode::deleteKey);
439                 break;
440 
441             case KeyCodeEN_US::end:
442                 on_key_read(released, this\->m_keyboard_state, this\->m_keyboard_state\&.number_pad_lock ? KeyCode::numberPadOne : KeyCode::end);
443                 break;
444 
445             case KeyCodeEN_US::pageDown:
446                 on_key_read(released, this\->m_keyboard_state, this\->m_keyboard_state\&.number_pad_lock
447                                                               ? KeyCode::numberPadThree : KeyCode::pageDown);
448                 break;
449 
450             // Number pad 7 is same as home
451 
452             case KeyCodeEN_US::numberPadEight:
453                 on_key_read(released, this\->m_keyboard_state, this\->m_keyboard_state\&.number_pad_lock ? KeyCode::numberPadEight : KeyCode::upArrow);
454                 break;
455 
456             // Number pad 9 is same as page up
457 
458             case KeyCodeEN_US::numberPadPlus:
459                 on_key_read(released, this\->m_keyboard_state, KeyCode::numberPadPlus);
460                 break;
461 
463             case KeyCodeEN_US::capsLock:
464                 // Ensure this is not a repeat
465                 if (!released) {
466                     this\->m_keyboard_state\&.caps_lock = !this\->m_keyboard_state\&.caps_lock;
467                 }
468 
469                 on_key_read(released, this\->m_keyboard_state, KeyCode::capsLock);
470                 break;
471 
472             case KeyCodeEN_US::A:
473                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::A : KeyCode::a);
474                 break;
475 
476             case KeyCodeEN_US::S:
477                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::S : KeyCode::s);
478                 break;
479 
480             case KeyCodeEN_US::D:
481                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::D : KeyCode::d);
482                 break;
483 
484             case KeyCodeEN_US::F:
485                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::F : KeyCode::f);
486                 break;
487 
488             case KeyCodeEN_US::G:
489                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::G : KeyCode::g);
490                 break;
491 
492             case KeyCodeEN_US::H:
493                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::H : KeyCode::h);
494                 break;
495 
496             case KeyCodeEN_US::J:
497                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::J : KeyCode::j);
498                 break;
499 
500             case KeyCodeEN_US::K:
501                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::K : KeyCode::k);
502                 break;
503 
504             case KeyCodeEN_US::L:
505                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::L : KeyCode::l);
506                 break;
507 
508             case KeyCodeEN_US::semicolon:
509                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::colon : KeyCode::semicolon);
510                 break;
511 
512             case KeyCodeEN_US::apostrophe:
513                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::quotationMark : KeyCode::apostrophe);
514                 break;
515 
516             case KeyCodeEN_US::enter:
517                 on_key_read(released, this\->m_keyboard_state, this\->m_keyboard_state\&.number_pad_lock ? KeyCode::numberPadEnter : KeyCode::enter);
518                 break;
519 
520             case KeyCodeEN_US::numberPadFour:
521                 on_key_read(released, this\->m_keyboard_state, this\->m_keyboard_state\&.number_pad_lock ? KeyCode::numberPadFour : KeyCode::leftArrow);
522                 break;
523 
524             case KeyCodeEN_US::numberPadFive:
525                 on_key_read(released, this\->m_keyboard_state, KeyCode::numberPadFive);
526                 break;
527 
528             case KeyCodeEN_US::numberPadSix:
529                 on_key_read(released, this\->m_keyboard_state, this\->m_keyboard_state\&.number_pad_lock ? KeyCode::numberPadSix : KeyCode::rightArrow);
530                 break;
531 
533             case KeyCodeEN_US::leftShift:
534                 this\->m_keyboard_state\&.left_shift = !this\->m_keyboard_state\&.left_shift;
535                 on_key_read(released, this\->m_keyboard_state, KeyCode::leftShift);
536                 break;
537 
538             case KeyCodeEN_US::Z:
539                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::Z : KeyCode::z);
540                 break;
541 
542             case KeyCodeEN_US::X:
543                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::X : KeyCode::x);
544                 break;
545 
546             case KeyCodeEN_US::C:
547                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::C : KeyCode::c);
548                 break;
549 
550             case KeyCodeEN_US::V:
551                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::V : KeyCode::v);
552                 break;
553 
554             case KeyCodeEN_US::B:
555                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::B : KeyCode::b);
556                 break;
557 
558             case KeyCodeEN_US::N:
559                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::N : KeyCode::n);
560                 break;
561 
562             case KeyCodeEN_US::M:
563                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::M : KeyCode::m);
564                 break;
565 
566             case KeyCodeEN_US::comma:
567                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::lessThan : KeyCode::comma);
568                 break;
569 
570             case KeyCodeEN_US::fullStop:
571                 on_key_read(released, this\->m_keyboard_state, should_be_upper_case ? KeyCode::greaterThan : KeyCode::fullStop);
572                 break;
573 
574             // Forward slash is same as number pad forward slash
575 
576             case KeyCodeEN_US::rightShift:
577                 // Check if this is a repeat
578                 if (!released) {
579                     this\->m_keyboard_state\&.right_shift = !this\->m_keyboard_state\&.right_shift;
580                 }
581 
582                 on_key_read(released, this\->m_keyboard_state, KeyCode::rightShift);
583                 break;
584 
585             // Up Arrow is the same as number pad 8
586 
587             // Number pad 1 is the same as end
588 
589             case KeyCodeEN_US::numberPadTwo:
590                 on_key_read(released, this\->m_keyboard_state, this\->m_keyboard_state\&.number_pad_lock ? KeyCode::numberPadTwo : KeyCode::downArrow);
591                 break;
592 
593             // Number pad 3 is the same as page down
594 
595             // Number pad enter is the same as enter
596 
598             case KeyCodeEN_US::leftControl:
599                 // Check if this is a repeat
600                 if (!released) {
601                     this\->m_keyboard_state\&.left_control = !this\->m_keyboard_state\&.left_control;
602                     this\->m_keyboard_state\&.right_control = !this\->m_keyboard_state\&.right_control;
603                 }
604 
605                 on_key_read(released, this\->m_keyboard_state, KeyCode::leftControl);
606                 break;
607 
608             case KeyCodeEN_US::leftOS:
609                 on_key_read(released, this\->m_keyboard_state, KeyCode::leftOS);
610                 break;
611 
612             case KeyCodeEN_US::leftAlt:
613                 // Check if this is a repeat
614                 if (!released) {
615                     this\->m_keyboard_state\&.left_alt = !this\->m_keyboard_state\&.left_alt;
616                     this\->m_keyboard_state\&.right_alt = !this\->m_keyboard_state\&.right_alt;
617                 }
618 
619                 on_key_read(released, this\->m_keyboard_state, KeyCode::leftAlt);
620                 break;
621 
622             case KeyCodeEN_US::space:
623                 on_key_read(released, this\->m_keyboard_state, KeyCode::space);
624                 break;
625 
626             // Right Alt is the same as left alt
627 
628             // Right Control is the same as left control
629 
630             // Left Arrow is the same as number pad 4
631 
632             // Down Arrow is the same as number pad 2
633 
634             // Right Arrow is the same as number pad 6
635 
636             // Number pad 0 is the same as insert
637 
638             // Number pad full stop is the same as delete
639 
640             default:
641                 break;
642 
643         }
644 
645 }
.fi

.PP
References \fBMaxOS::drivers::peripherals::KeyboardState::caps_lock\fP, \fBMaxOS::drivers::peripherals::KeyboardState::left_alt\fP, \fBMaxOS::drivers::peripherals::KeyboardState::left_control\fP, \fBMaxOS::drivers::peripherals::KeyboardState::left_shift\fP, \fBMaxOS::drivers::peripherals::KeyboardInterpreter::m_extended_code_buffer\fP, \fBMaxOS::drivers::peripherals::KeyboardInterpreter::m_extended_scan_code_bytes\fP, \fBMaxOS::drivers::peripherals::KeyboardInterpreter::m_keyboard_state\fP, \fBMaxOS::drivers::peripherals::KeyboardInterpreter::m_next_is_first_extended_code\fP, \fBMaxOS::drivers::peripherals::KeyboardState::number_pad_lock\fP, \fBMaxOS::drivers::peripherals::KeyboardInterpreter::on_key_read()\fP, \fBMaxOS::drivers::peripherals::KeyboardState::right_alt\fP, \fBMaxOS::drivers::peripherals::KeyboardState::right_control\fP, \fBMaxOS::drivers::peripherals::KeyboardState::right_shift\fP, and \fBtype\fP\&.

.SH "Author"
.PP 
Generated automatically by Doxygen for Max OS from the source code\&.
