.TH "/home/runner/work/MaxOS/MaxOS/kernel/src/kernel.cpp" 3 "Version 0.1" "Max OS" \" -*- nroff -*-
.ad l
.nh
.SH NAME
/home/runner/work/MaxOS/MaxOS/kernel/src/kernel.cpp
.SH SYNOPSIS
.br
.PP
\fC#include <stdint\&.h>\fP
.br
\fC#include <common/logger\&.h>\fP
.br
\fC#include <hardwarecommunication/interrupts\&.h>\fP
.br
\fC#include <drivers/console/serial\&.h>\fP
.br
\fC#include <drivers/console/vesaboot\&.h>\fP
.br
\fC#include <drivers/driver\&.h>\fP
.br
\fC#include <drivers/video/vesa\&.h>\fP
.br
\fC#include <gui/desktop\&.h>\fP
.br
\fC#include <processes/scheduler\&.h>\fP
.br
\fC#include <system/cpu\&.h>\fP
.br
\fC#include <system/syscalls\&.h>\fP
.br
\fC#include <memory/memorymanagement\&.h>\fP
.br
\fC#include <memory/physical\&.h>\fP
.br
\fC#include <memory/virtual\&.h>\fP
.br
\fC#include <filesystem/vfs\&.h>\fP
.br
\fC#include <filesystem/vfsresource\&.h>\fP
.br

.SS "Functions"

.in +1c
.ti -1c
.RI "void \fBcall_constructors\fP ()"
.br
.ti -1c
.RI "\fBvoid\fP \fBkernel_main\fP (\fBunsigned\fP \fBlong\fP addr, \fBunsigned\fP \fBlong\fP \fBmagic\fP)"
.br
.in -1c
.SH "Function Documentation"
.PP 
.SS "void call_constructors ()"

.PP
Definition at line \fB22\fP of file \fBcplusplus\&.cpp\fP\&..PP
.nf
22                                     {
23     // Loop through and initialise all the global constructors
24     for (constructor* i = &start_ctors; i != &end_ctors; i++)
25         (*i)();
26 }
.fi

.PP
References \fBend_ctors\fP, and \fBstart_ctors\fP\&.
.PP
Referenced by \fBkernel_main()\fP\&.
.SS "\fBvoid\fP kernel_main (\fBunsigned\fP \fBlong\fP addr, \fBunsigned\fP \fBlong\fP magic)"

.PP
Definition at line \fB33\fP of file \fBkernel\&.cpp\fP\&..PP
.nf
33                                                                                   {
34 
35     call_constructors();
36 
37     // Initialise the logger
38     Logger logger;
39     SerialConsole serial_console(&logger);
40     Logger::INFO() << "MaxOS Booted Successfully \\n";
41 
42     Logger::HEADER() << "Stage {1}: System Initialisation\\n";
43     Multiboot multiboot(addr, magic);
44     GlobalDescriptorTable gdt;
45     InterruptManager interrupts;
46 
47     Logger::HEADER() << "Stage {1\&.1}: Memory Initialisation\\n";
48     PhysicalMemoryManager pmm(&multiboot);
49     VirtualMemoryManager vmm;
50     MemoryManager memoryManager(&vmm);
51 
52     Logger::HEADER() << "Stage {1\&.2}: Console Initialisation\\n";
53     VideoElectronicsStandardsAssociation vesa(multiboot\&.framebuffer());
54     VESABootConsole console(&vesa);
55 
56     Logger::HEADER() << "Stage {2}: Hardware Initialisation\\n";
57     VirtualFileSystem vfs;
58     CPU cpu(&gdt, &multiboot);
59     Clock kernel_clock(cpu\&.apic, 1);
60     DriverManager driver_manager;
61     driver_manager\&.add_driver(&kernel_clock);
62     driver_manager\&.find_drivers();
63     uint32_t reset_wait_time = driver_manager\&.reset_devices();
64 
65     Logger::HEADER() << "Stage {3}: Device Finalisation\\n";
66     interrupts\&.activate();
67     kernel_clock\&.calibrate();
68     kernel_clock\&.delay(reset_wait_time);
69     driver_manager\&.initialise_drivers();
70     driver_manager\&.activate_drivers();
71 
72     Logger::HEADER() << "Stage {4}: System Finalisation\\n";
73     Scheduler scheduler(multiboot);
74     VFSResourceRegistry vfs_registry(&vfs);
75     SyscallManager syscalls;
76     console\&.finish();
77     scheduler\&.activate();
78 
79     // Idle loop  (read Idle\&.md)
80     while (true)
81         asm("nop");
82 }
.fi

.PP
References \fBcall_constructors()\fP, \fBMaxOS::drivers::console::VESABootConsole::finish()\fP, \fBLogger::HEADER()\fP, \fBLogger::INFO()\fP, and \fBmagic\fP\&.
.SH "Author"
.PP 
Generated automatically by Doxygen for Max OS from the source code\&.
