.TH "MaxOS::filesystem::DirectoryResource" 3 "Version 0.3" "Max OS" \" -*- nroff -*-
.ad l
.nh
.SH NAME
MaxOS::filesystem::DirectoryResource \- A wrapper for a \fBDirectory\fP which exposes \fBDirectory\fP operations as Resource operations\&.  

.SH SYNOPSIS
.br
.PP
.PP
\fC#include <vfsresource\&.h>\fP
.PP
Inherits \fBMaxOS::processes::Resource\fP\&.
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "\fBDirectoryResource\fP (\fBconst\fP \fBstring\fP &\fBname\fP, \fBsize_t\fP flags, \fBprocesses::resource_type_t\fP \fBtype\fP)"
.br
.RI "Construct a new \fBDirectory\fP Resource object\&. "
.ti -1c
.RI "\fBint\fP \fBread\fP (\fBvoid\fP *buffer, \fBsize_t\fP size, \fBsize_t\fP flags) \fBfinal\fP"
.br
.RI "read from a directory resource "
.ti -1c
.RI "\fBint\fP \fBwrite\fP (\fBconst\fP \fBvoid\fP *buffer, \fBsize_t\fP size, \fBsize_t\fP flags) \fBfinal\fP"
.br
.RI "write to a directory resource "
.in -1c

Public Member Functions inherited from \fBMaxOS::processes::Resource\fP
.in +1c
.ti -1c
.RI "\fBResource\fP (const \fBstring\fP &\fBname\fP, size_t flags, \fBresource_type_t\fP \fBtype\fP)"
.br
.RI "Constructs a new \fBResource\fP object\&. "
.ti -1c
.RI "\fBstring\fP \fBname\fP ()"
.br
.RI "Gets the name of this resource\&. "
.ti -1c
.RI "\fBresource_type_t\fP \fBtype\fP ()"
.br
.RI "Gets the type of this resource\&. "
.ti -1c
.RI "virtual void \fBopen\fP (size_t flags)"
.br
.RI "Opens the resource\&. "
.ti -1c
.RI "virtual void \fBclose\fP (size_t flags)"
.br
.RI "Closes the resource\&. "
.in -1c
.SS "Public Attributes"

.in +1c
.ti -1c
.RI "\fBDirectory\fP * \fBdirectory\fP"
.br
.RI "The directory that this resource handles & exposes\&. "
.in -1c
.SH "Detailed Description"
.PP 
A wrapper for a \fBDirectory\fP which exposes \fBDirectory\fP operations as Resource operations\&. 
.PP
Definition at line \fB49\fP of file \fBvfsresource\&.h\fP\&.
.SH "Constructor & Destructor Documentation"
.PP 
.SS "DirectoryResource::DirectoryResource (\fBconst\fP \fBstring\fP & name, \fBsize_t\fP flags, \fBprocesses::resource_type_t\fP type)"

.PP
Construct a new \fBDirectory\fP Resource object\&. 
.PP
\fBParameters\fP
.RS 4
\fIname\fP The name of the resource 
.br
\fIflags\fP The flags for the resource when opened 
.br
\fItype\fP The type of the resource 
.RE
.PP

.PP
Definition at line \fB134\fP of file \fBvfsresource\&.cpp\fP\&..PP
.nf
135 : Resource(name, flags, type),
136   directory(nullptr)
137 {
138 
139 }
.fi

.SH "Member Function Documentation"
.PP 
.SS "\fBint\fP DirectoryResource::read (\fBvoid\fP * buffer, \fBsize_t\fP size, \fBsize_t\fP flags)\fC [final]\fP, \fC [virtual]\fP"

.PP
read from a directory resource 
.PP
\fBParameters\fP
.RS 4
\fIbuffer\fP The buffer to read into 
.br
\fIsize\fP The number of bytes to read 
.br
\fIflags\fP The flags to pass to the reading 
.RE
.PP
\fBReturns\fP
.RS 4
The number of bytes successfully read or -1 on error 
.RE
.PP

.PP
Reimplemented from \fBMaxOS::processes::Resource\fP\&.
.PP
Definition at line \fB230\fP of file \fBvfsresource\&.cpp\fP\&..PP
.nf
230                                                                    {
231 
232     // Directory not found
233     if(!directory)
234         return \-1;
235 
236     switch ((DirectoryFlags)flags){
237         case DirectoryFlags::READ_ENTRIES:{
238             write_entries(buffer, size);
239             break;
240         }
241 
242         case DirectoryFlags::READ_ENTRIES_SIZE:{
243             return entries_size();
244         }
245 
246         default:
247             return \-1;
248     }
249 
250     return size;
251 
252 }
.fi

.PP
References \fBdirectory\fP\&.
.SS "\fBint\fP DirectoryResource::write (\fBconst\fP \fBvoid\fP * buffer, \fBsize_t\fP size, \fBsize_t\fP flags)\fC [final]\fP, \fC [virtual]\fP"

.PP
write to a directory resource 
.PP
\fBParameters\fP
.RS 4
\fIbuffer\fP The buffer to write from 
.br
\fIsize\fP The number of bytes to write 
.br
\fIflags\fP The flags to pass to the writing 
.RE
.PP
\fBReturns\fP
.RS 4
The number of bytes successfully written or -1 on error 
.RE
.PP

.PP
Reimplemented from \fBMaxOS::processes::Resource\fP\&.
.PP
Definition at line \fB262\fP of file \fBvfsresource\&.cpp\fP\&..PP
.nf
262                                                                           {
263 
264     // Directory not found
265     if(!directory)
266         return \-1;
267 
268     auto registry = GlobalResourceRegistry::get_registry(resource_type_t::FILESYSTEM);
269 
270     switch ((DirectoryFlags)flags){
271 
272         case DirectoryFlags::WRITE_NAME : {
273 
274             // Open the parent
275             Resource* parent = registry\->get_resource(Path::parent_directory(name()));
276             auto parent_directory = ((DirectoryResource*)parent)\->directory;
277 
278             // Rename
279             string new_name = string((uint8_t*)buffer, size);
280             parent_directory\->rename_subdirectory(directory, new_name);
281             break;
282         }
283 
284         case DirectoryFlags::WRITE_NEW_FILE:{
285 
286             string new_name = string((uint8_t*)buffer, size);
287             directory\->create_file(new_name);
288             break;
289         }
290 
291 
292         case DirectoryFlags::WRITE_NEW_DIR:{
293 
294             string new_name = string((uint8_t*)buffer, size);
295             directory\->create_subdirectory(new_name);
296             break;
297         }
298 
299         case DirectoryFlags::WRITE_REMOVE_FILE:{
300 
301             string new_name = string((uint8_t*)buffer, size);
302             directory\->remove_file(new_name);
303             break;
304         }
305         case DirectoryFlags::WRITE_REMOVE_DIR:{
306 
307             string new_name = string((uint8_t*)buffer, size);
308             directory\->remove_subdirectory(new_name);
309             break;
310         }
311 
312         default:
313             return \-1;
314     }
315 
316     return size;
317 }
.fi

.PP
References \fBMaxOS::filesystem::Directory::create_file()\fP, \fBMaxOS::filesystem::Directory::create_subdirectory()\fP, \fBdirectory\fP, \fBMaxOS::processes::GlobalResourceRegistry::get_registry()\fP, \fBMaxOS::processes::Resource::name()\fP, \fBMaxOS::filesystem::Path::parent_directory()\fP, \fBMaxOS::filesystem::Directory::remove_file()\fP, and \fBMaxOS::filesystem::Directory::remove_subdirectory()\fP\&.
.SH "Member Data Documentation"
.PP 
.SS "\fBDirectory\fP* MaxOS::filesystem::DirectoryResource::directory"

.PP
The directory that this resource handles & exposes\&. 
.PP
Definition at line \fB61\fP of file \fBvfsresource\&.h\fP\&.
.PP
Referenced by \fBread()\fP, and \fBwrite()\fP\&.

.SH "Author"
.PP 
Generated automatically by Doxygen for Max OS from the source code\&.
