.TH "MaxOS::drivers::console::ConsoleStream" 3 "Version 0.1" "Max OS" \" -*- nroff -*-
.ad l
.nh
.SH NAME
MaxOS::drivers::console::ConsoleStream \- A stream that can be used to write to a console\&.  

.SH SYNOPSIS
.br
.PP
.PP
\fC#include <console\&.h>\fP
.PP
Inherits \fBMaxOS::common::OutputStream\fP\&.
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "\fBConsoleStream\fP (\fBConsole\fP *)"
.br
.RI "Construct a new \fBConsole\fP Stream object\&. "
.ti -1c
.RI "\fBvoid\fP \fBwrite_char\fP (\fBchar\fP c) \fBoverride\fP"
.br
.RI "write a character to the console stream "
.ti -1c
.RI "\fBvoid\fP \fBset_cursor\fP (\fBuint16_t\fP x, \fBuint16_t\fP y)"
.br
.RI "Set the m_position of the cursor\&. "
.in -1c

Public Member Functions inherited from \fBMaxOS::common::OutputStream\fP
.in +1c
.ti -1c
.RI "\fBvirtual\fP \fBvoid\fP \fBline_feed\fP ()"
.br
.RI "Writes a newline to the output stream\&. "
.ti -1c
.RI "\fBvirtual\fP \fBvoid\fP \fBcarriageReturn\fP ()"
.br
.RI "Writes a carriage return to the output stream\&. "
.ti -1c
.RI "\fBvirtual\fP \fBvoid\fP \fBclear\fP ()"
.br
.RI "Clears the output stream\&. "
.ti -1c
.RI "\fBvoid\fP \fBwrite\fP (\fBstring\fP \fBstring_to_write\fP) \fBoverride\fP"
.br
.RI "Writes a string to the output stream\&. "
.ti -1c
.RI "\fBvoid\fP \fBwrite\fP (\fBconst\fP \fBchar\fP *\fBstring_to_write\fP)"
.br
.RI "Writes a string to the output stream\&. "
.ti -1c
.RI "\fBvirtual\fP \fBvoid\fP \fBwrite_int\fP (\fBint\fP \fBint_to_write\fP)"
.br
.RI "Writes an integer to the output stream\&. "
.ti -1c
.RI "\fBvirtual\fP \fBvoid\fP \fBwrite_hex\fP (\fBuint64_t\fP \fBhex_to_write\fP)"
.br
.RI "Writes a hex to the output stream\&. "
.ti -1c
.RI "\fBOutputStream\fP & \fBoperator<<\fP (\fBstring\fP \fBstring_to_write\fP) \fBoverride\fP"
.br
.RI "Writes a string to the output stream\&. "
.ti -1c
.RI "\fBOutputStream\fP & \fBoperator<<\fP (\fBconst\fP \fBchar\fP *\fBstring_to_write\fP)"
.br
.RI "Writes a string to the output stream\&. "
.ti -1c
.RI "\fBOutputStream\fP & \fBoperator<<\fP (\fBint\fP \fBint_to_write\fP)"
.br
.RI "Writes a integer to the output stream\&. "
.ti -1c
.RI "\fBOutputStream\fP & \fBoperator<<\fP (\fBuint64_t\fP \fBhex_to_write\fP)"
.br
.RI "Writes a hexadecimal to the output stream\&. "
.ti -1c
.RI "\fBOutputStream\fP & \fBoperator<<\fP (\fBchar\fP \fBchar_to_write\fP)"
.br
.RI "Writes a character to the output stream\&. "
.in -1c

Public Member Functions inherited from \fBMaxOS::common::GenericOutputStream< string >\fP
.in +1c
.ti -1c
.RI "\fBGenericOutputStream\fP ()"
.br
.RI "__________________________________________Templates__________________________________________________/// "
.ti -1c
.RI "\fB~GenericOutputStream\fP ()"
.br
.RI "Destructor of the \fBGenericOutputStream\fP class\&. "
.ti -1c
.RI "\fBvoid\fP \fBon_stream_read\fP (\fBstring\fP) \fBoverride\fP"
.br
.RI "Writes the date that was read from the input stream to the output stream\&. "
.ti -1c
.RI "\fBvoid\fP \fBon_end_of_stream\fP (\fBGenericInputStream\fP< \fBstring\fP > *) \fBoverride\fP"
.br
.RI "Close the stream and remove it from the list of streams when the end of the stream is reached\&. "
.ti -1c
.RI "\fBvirtual\fP \fBvoid\fP \fBwrite\fP (\fBstring\fP)"
.br
.RI "write an element to the stream\&. "
.ti -1c
.RI "\fBvirtual\fP \fBvoid\fP \fBclose\fP ()"
.br
.RI "Close the stream\&. "
.ti -1c
.RI "\fBvirtual\fP \fBGenericOutputStream\fP< \fBstring\fP > & \fBoperator<<\fP (\fBstring\fP)"
.br
.RI "Overload the << operator to write an element to the stream\&. "
.in -1c

Public Member Functions inherited from \fBMaxOS::common::InputStreamProcessor< Type, ProcessorType >\fP
.in +1c
.ti -1c
.RI "\fBInputStreamProcessor\fP ()"
.br
.RI "Creates a new \fBInputStreamProcessor\fP\&. "
.ti -1c
.RI "\fBInputStreamProcessor\fP (\fBInputStreamEventHandler\fP< \fBProcessorType\fP > *\fBgeneric_stream_event_handler\fP)"
.br
.RI "Creates a new \fBInputStreamProcessor\fP\&. "
.ti -1c
.RI "\fB~InputStreamProcessor\fP ()"
.br
.RI "Destroys the \fBInputStreamProcessor\fP\&. "
.ti -1c
.RI "\fBvoid\fP \fBon_end_of_stream\fP (\fBGenericInputStream\fP< \fBType\fP > *\fBstream\fP) \fBoverride\fP"
.br
.RI "Called when a stream has finished\&. Passes the event on to the handlers and then removes the stream from the array of streams\&. "
.in -1c

Public Member Functions inherited from \fBMaxOS::common::InputStreamEventHandler< Type >\fP
.in +1c
.ti -1c
.RI "\fBInputStreamEventHandler\fP ()"
.br
.RI "_______________________________________________TEMPLATES_________________________________________________________________/// "
.ti -1c
.RI "\fB~InputStreamEventHandler\fP ()"
.br
.RI "Destroys the \fBInputStreamProcessor\fP and disconnects it from all streams\&. "
.in -1c

Public Member Functions inherited from \fBMaxOS::common::GenericInputStream< ProcessorType >\fP
.in +1c
.ti -1c
.RI "\fBGenericInputStream\fP ()"
.br
.RI "Creates a new \fBGenericInputStream\fP\&. "
.ti -1c
.RI "\fBGenericInputStream\fP (\fBInputStreamEventHandler\fP< \fBProcessorType\fP > *)"
.br
.RI "Creates a new \fBGenericInputStream\fP and connects it to the handler\&. "
.ti -1c
.RI "\fB~GenericInputStream\fP ()"
.br
.RI "Destroys the \fBGenericInputStream\fP and disconnects all handlers\&. "
.ti -1c
.RI "\fBvoid\fP \fBconnect_input_stream_event_handler\fP (\fBInputStreamEventHandler\fP< \fBProcessorType\fP > *)"
.br
.RI "Adds a inputStreamEventHandler to the list of internetProtocolHandlers\&. "
.ti -1c
.RI "\fBvoid\fP \fBdisconnect_input_stream_event_handler\fP (\fBInputStreamEventHandler\fP< \fBProcessorType\fP > *)"
.br
.RI "Removes a handler from the list of handlers\&. "
.in -1c
.SS "Additional Inherited Members"


Protected Attributes inherited from \fBMaxOS::common::InputStreamEventHandler< Type >\fP
.in +1c
.ti -1c
.RI "\fBcommon::Vector\fP< \fBGenericInputStream\fP< \fBType\fP > * > \fBm_generic_input_streams\fP"
.br
.RI "List of streams being observed by this handler\&. "
.in -1c

Protected Attributes inherited from \fBMaxOS::common::GenericInputStream< ProcessorType >\fP
.in +1c
.ti -1c
.RI "\fBcommon::Vector\fP< \fBInputStreamEventHandler\fP< \fBProcessorType\fP > * > \fBm_input_stream_event_handlers\fP"
.br
.RI "List of streams being observed by this handler\&. "
.in -1c
.SH "Detailed Description"
.PP 
A stream that can be used to write to a console\&. 
.PP
Definition at line \fB94\fP of file \fBconsole\&.h\fP\&.
.SH "Constructor & Destructor Documentation"
.PP 
.SS "ConsoleStream::ConsoleStream (\fBConsole\fP * console)"

.PP
Construct a new \fBConsole\fP Stream object\&. 
.PP
\fBParameters\fP
.RS 4
\fIconsole\fP The console to create the stream on 
.RE
.PP

.PP
Definition at line \fB425\fP of file \fBconsole\&.cpp\fP\&..PP
.nf
426 : m_console(console)
427 {
428 
429 }
.fi

.SS "ConsoleStream::~ConsoleStream ()"

.PP
Definition at line \fB431\fP of file \fBconsole\&.cpp\fP\&..PP
.nf
431                               {
432 
433 }
.fi

.SH "Member Function Documentation"
.PP 
.SS "\fBvoid\fP ConsoleStream::set_cursor (\fBuint16_t\fP x, \fBuint16_t\fP y)"

.PP
Set the m_position of the cursor\&. 
.PP
\fBParameters\fP
.RS 4
\fIx\fP The x coordinate of the cursor 
.br
\fIy\fP The y coordinate of the cursor 
.RE
.PP

.PP
Definition at line \fB514\fP of file \fBconsole\&.cpp\fP\&..PP
.nf
514                                                      {
515 
516     // Set the x and y coordinates
517     m_cursor_x = x;
518     m_cursor_y = y;
519 }
.fi

.PP
Referenced by \fBMaxOS::drivers::console::VESABootConsole::finish()\fP\&.
.SS "\fBvoid\fP ConsoleStream::write_char (\fBchar\fP c)\fC [override]\fP, \fC [virtual]\fP"

.PP
write a character to the console stream 
.PP
\fBParameters\fP
.RS 4
\fIc\fP The character to write 
.RE
.PP

.PP
Reimplemented from \fBMaxOS::common::OutputStream\fP\&.
.PP
Definition at line \fB440\fP of file \fBconsole\&.cpp\fP\&..PP
.nf
440                                      {
441 
442     uint16_t spaces = 0;
443 
444     // If the character placement is more than the width of the console go on a new line
445     if(m_cursor_x >= m_console\->width() && c != '\\n'){
446         line_feed();
447         write("             ");
448     }
449 
450     // Check if the character is an ANSI escape code
451     if(c == '\\033') is_ansi = true;
452 
453     // Handle the character
454     switch (c) {
455         // New line
456         case '\\n':
457             // Go to the next line, if it is more then what the console can fit then scroll
458             if(++m_cursor_y >= m_console\->height()){
459                 m_console\->scroll_up();
460 
461                 // Ensure there is space at the bottom to write
462                 m_cursor_y = m_console\->height()\-1;
463             }
464 
465             // don't break here, we want to go to the next case because of the \\r
466             [[fallthrough]];
467 
468         // Carriage return
469         case '\\r':
470             m_cursor_x = 0;
471             break;
472 
473         // End of string
474         case '\\0':
475             break;
476 
477         // Backspace
478         case '\\b':
479             m_cursor_x\-\-;
480             break;
481 
482         // Tab
483         case '\\t':
484 
485             // Pad with spaces until a tab is reached
486             spaces = 8 \- (m_cursor_x % 8);
487             for(uint16_t i = 0; i < spaces; i++)
488                 write_char(' ');
489             break;
490 
491         default:
492             // Put the character on the console
493             m_console\->put_character(m_cursor_x, m_cursor_y, c);
494 
495             // Increment the x coordinate (ANSI aren't rendered)
496             if(!is_ansi)
497               m_cursor_x++;
498 
499             break;
500 
501     }
502 
503     // Check if the ANSI code is complete
504     if(c == 'm') is_ansi = false;
505 
506 }
.fi

.PP
References \fBMaxOS::drivers::console::Console::height()\fP, \fBMaxOS::common::OutputStream::line_feed()\fP, \fBMaxOS::drivers::console::Console::put_character()\fP, \fBMaxOS::drivers::console::Console::scroll_up()\fP, \fBMaxOS::drivers::console::Console::width()\fP, \fBwrite\fP, and \fBwrite_char()\fP\&.
.PP
Referenced by \fBwrite_char()\fP\&.

.SH "Author"
.PP 
Generated automatically by Doxygen for Max OS from the source code\&.
