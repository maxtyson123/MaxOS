.TH "MaxOS::drivers::console::ConsoleStream" 3 "Version 0.1" "Max OS" \" -*- nroff -*-
.ad l
.nh
.SH NAME
MaxOS::drivers::console::ConsoleStream \- A stream that can be used to write to a console\&.  

.SH SYNOPSIS
.br
.PP
.PP
\fC#include <console\&.h>\fP
.PP
Inherits \fBMaxOS::common::OutputStream\fP\&.
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "\fBConsoleStream\fP (\fBConsole\fP *)"
.br
.ti -1c
.RI "\fB~ConsoleStream\fP ()"
.br
.ti -1c
.RI "\fBvoid\fP \fBwrite_char\fP (\fBchar\fP c) \fBoverride\fP"
.br
.RI "write a character to the console stream "
.ti -1c
.RI "\fBvoid\fP \fBset_cursor\fP (\fBuint16_t\fP x, \fBuint16_t\fP y)"
.br
.RI "Set the m_position of the cursor\&. "
.in -1c

Public Member Functions inherited from \fBMaxOS::common::OutputStream\fP
.in +1c
.ti -1c
.RI "\fBOutputStream\fP ()"
.br
.ti -1c
.RI "\fB~OutputStream\fP ()"
.br
.ti -1c
.RI "\fBvirtual\fP \fBvoid\fP \fBlineFeed\fP ()"
.br
.RI "Writes a newline to the output stream\&. "
.ti -1c
.RI "\fBvirtual\fP \fBvoid\fP \fBcarriageReturn\fP ()"
.br
.RI "Writes a carriage return to the output stream\&. "
.ti -1c
.RI "\fBvirtual\fP \fBvoid\fP \fBclear\fP ()"
.br
.RI "Clears the output stream\&. "
.ti -1c
.RI "\fBvoid\fP \fBwrite\fP (\fBstring\fP \fBstring_to_write\fP) \fBoverride\fP"
.br
.RI "Writes a string to the output stream\&. "
.ti -1c
.RI "\fBvoid\fP \fBwrite\fP (\fBconst\fP \fBchar\fP *\fBstring_to_write\fP)"
.br
.RI "Writes a string to the output stream\&. "
.ti -1c
.RI "\fBvirtual\fP \fBvoid\fP \fBwrite_int\fP (\fBint\fP \fBint_to_write\fP)"
.br
.RI "Writes an integer to the output stream\&. "
.ti -1c
.RI "\fBvirtual\fP \fBvoid\fP \fBwrite_hex\fP (\fBuint64_t\fP \fBhex_to_write\fP)"
.br
.RI "Writes a hex to the output stream\&. "
.ti -1c
.RI "\fBOutputStream\fP & \fBoperator<<\fP (\fBstring\fP \fBstring_to_write\fP) \fBoverride\fP"
.br
.RI "Writes a string to the output stream\&. "
.ti -1c
.RI "\fBOutputStream\fP & \fBoperator<<\fP (\fBconst\fP \fBchar\fP *\fBstring_to_write\fP)"
.br
.RI "Writes a string to the output stream\&. "
.ti -1c
.RI "\fBOutputStream\fP & \fBoperator<<\fP (\fBint\fP \fBint_to_write\fP)"
.br
.RI "Writes a integer to the output stream\&. "
.ti -1c
.RI "\fBOutputStream\fP & \fBoperator<<\fP (\fBuint64_t\fP \fBhex_to_write\fP)"
.br
.RI "Writes a hexadecimal to the output stream\&. "
.ti -1c
.RI "\fBOutputStream\fP & \fBoperator<<\fP (\fBchar\fP \fBchar_to_write\fP)"
.br
.RI "Writes a character to the output stream\&. "
.in -1c

Public Member Functions inherited from \fBMaxOS::common::GenericOutputStream< string >\fP
.in +1c
.ti -1c
.RI "\fBGenericOutputStream\fP ()"
.br
.RI "__________________________________________Templates__________________________________________________/// "
.ti -1c
.RI "\fB~GenericOutputStream\fP ()"
.br
.RI "Destructor of the \fBGenericOutputStream\fP class\&. "
.ti -1c
.RI "\fBvoid\fP \fBon_stream_read\fP (\fBstring\fP) \fBoverride\fP"
.br
.RI "Writes the date that was read from the input stream to the output stream\&. "
.ti -1c
.RI "\fBvoid\fP \fBon_end_of_stream\fP (\fBGenericInputStream\fP< \fBstring\fP > *) \fBoverride\fP"
.br
.RI "Close the stream and remove it from the list of streams when the end of the stream is reached\&. "
.ti -1c
.RI "\fBvirtual\fP \fBvoid\fP \fBwrite\fP (\fBstring\fP)"
.br
.RI "write an element to the stream\&. "
.ti -1c
.RI "\fBvirtual\fP \fBvoid\fP \fBclose\fP ()"
.br
.RI "Close the stream\&. "
.ti -1c
.RI "\fBvirtual\fP \fBGenericOutputStream\fP< \fBstring\fP > & \fBoperator<<\fP (\fBstring\fP)"
.br
.RI "Overload the << operator to write an element to the stream\&. "
.in -1c

Public Member Functions inherited from \fBMaxOS::common::InputStreamProcessor< Type, ProcessorType >\fP
.in +1c
.ti -1c
.RI "\fBInputStreamProcessor\fP ()"
.br
.ti -1c
.RI "\fBInputStreamProcessor\fP (\fBInputStreamEventHandler\fP< \fBProcessorType\fP > *\fBgeneric_stream_event_handler\fP)"
.br
.ti -1c
.RI "\fB~InputStreamProcessor\fP ()"
.br
.ti -1c
.RI "\fBvoid\fP \fBon_end_of_stream\fP (\fBGenericInputStream\fP< \fBType\fP > *\fBstream\fP) \fBoverride\fP"
.br
.in -1c

Public Member Functions inherited from \fBMaxOS::common::InputStreamEventHandler< Type >\fP
.in +1c
.ti -1c
.RI "\fBInputStreamEventHandler\fP ()"
.br
.RI "_______________________________________________TEMPLATES_________________________________________________________________/// "
.ti -1c
.RI "\fB~InputStreamEventHandler\fP ()"
.br
.in -1c

Public Member Functions inherited from \fBMaxOS::common::GenericInputStream< ProcessorType >\fP
.in +1c
.ti -1c
.RI "\fBGenericInputStream\fP ()"
.br
.ti -1c
.RI "\fBGenericInputStream\fP (\fBInputStreamEventHandler\fP< \fBProcessorType\fP > *)"
.br
.ti -1c
.RI "\fB~GenericInputStream\fP ()"
.br
.ti -1c
.RI "\fBvoid\fP \fBconnect_input_stream_event_handler\fP (\fBInputStreamEventHandler\fP< \fBProcessorType\fP > *)"
.br
.ti -1c
.RI "\fBvoid\fP \fBdisconnect_input_stream_event_handler\fP (\fBInputStreamEventHandler\fP< \fBProcessorType\fP > *)"
.br
.in -1c
.SS "Protected Attributes"

.in +1c
.ti -1c
.RI "\fBConsole\fP * \fBm_console\fP"
.br
.ti -1c
.RI "\fBcommon::ConsoleColour\fP \fBm_foreground\fP { \fBcommon::ConsoleColour::LightGrey\fP }"
.br
.ti -1c
.RI "\fBcommon::ConsoleColour\fP \fBm_background\fP { \fBcommon::ConsoleColour::Black\fP }"
.br
.ti -1c
.RI "bool \fBis_ansi\fP = false"
.br
.ti -1c
.RI "uint16_t \fBm_cursor_x\fP { 0 }"
.br
.ti -1c
.RI "uint16_t \fBm_cursor_y\fP { 0 }"
.br
.in -1c

Protected Attributes inherited from \fBMaxOS::common::InputStreamEventHandler< Type >\fP
.in +1c
.ti -1c
.RI "\fBcommon::Vector\fP< \fBGenericInputStream\fP< \fBType\fP > * > \fBm_generic_input_streams\fP"
.br
.in -1c

Protected Attributes inherited from \fBMaxOS::common::GenericInputStream< ProcessorType >\fP
.in +1c
.ti -1c
.RI "\fBcommon::Vector\fP< \fBInputStreamEventHandler\fP< \fBProcessorType\fP > * > \fBm_input_stream_event_handlers\fP"
.br
.in -1c
.SH "Detailed Description"
.PP 
A stream that can be used to write to a console\&. 
.PP
Definition at line \fB92\fP of file \fBconsole\&.h\fP\&.
.SH "Constructor & Destructor Documentation"
.PP 
.SS "ConsoleStream::ConsoleStream (\fBConsole\fP * console)"

.PP
Definition at line \fB397\fP of file \fBconsole\&.cpp\fP\&..PP
.nf
398 : m_console(console)
399 {
400 
401 }
.fi

.SS "ConsoleStream::~ConsoleStream ()"

.PP
Definition at line \fB403\fP of file \fBconsole\&.cpp\fP\&..PP
.nf
403                               {
404 
405 }
.fi

.SH "Member Function Documentation"
.PP 
.SS "\fBvoid\fP ConsoleStream::set_cursor (\fBuint16_t\fP x, \fBuint16_t\fP y)"

.PP
Set the m_position of the cursor\&. 
.PP
\fBParameters\fP
.RS 4
\fIx\fP The x coordinate of the cursor 
.br
\fIy\fP The y coordinate of the cursor 
.RE
.PP

.PP
Definition at line \fB486\fP of file \fBconsole\&.cpp\fP\&..PP
.nf
486                                                      {
487 
488     // Set the x and y coordinates
489     m_cursor_x = x;
490     m_cursor_y = y;
491 }
.fi

.PP
References \fBm_cursor_x\fP, and \fBm_cursor_y\fP\&.
.PP
Referenced by \fBMaxOS::drivers::console::VESABootConsole::finish()\fP\&.
.SS "\fBvoid\fP ConsoleStream::write_char (\fBchar\fP c)\fC [override]\fP, \fC [virtual]\fP"

.PP
write a character to the console stream 
.PP
\fBParameters\fP
.RS 4
\fIc\fP The character to write 
.RE
.PP

.PP
Reimplemented from \fBMaxOS::common::OutputStream\fP\&.
.PP
Definition at line \fB412\fP of file \fBconsole\&.cpp\fP\&..PP
.nf
412                                      {
413 
414     uint16_t spaces = 0;
415 
416     // If the character placement is more than the width of the console go on a new line
417     if(m_cursor_x >= m_console\->width() && c != '\\n'){
418         lineFeed();
419         write("             ");
420     }
421 
422     // Check if the character is an ANSI escape code
423     if(c == '\\033') is_ansi = true;
424 
425     // Handle the character
426     switch (c) {
427         // New line
428         case '\\n':
429             // Go to the next line, if it is more then what the console can fit then scroll
430             if(++m_cursor_y >= m_console\->height()){
431                 m_console\->scroll_up();
432 
433                 // Ensure there is space at the bottom to write
434                 m_cursor_y = m_console\->height()\-1;
435             }
436 
437             // don't break here, we want to go to the next case because of the \\r
438             [[fallthrough]];
439 
440         // Carriage return
441         case '\\r':
442             m_cursor_x = 0;
443             break;
444 
445         // End of string
446         case '\\0':
447             break;
448 
449         // Backspace
450         case '\\b':
451             m_cursor_x\-\-;
452             break;
453 
454         // Tab
455         case '\\t':
456 
457             // Pad with spaces until a tab is reached
458             spaces = 8 \- (m_cursor_x % 8);
459             for(uint16_t i = 0; i < spaces; i++)
460                 write_char(' ');
461             break;
462 
463         default:
464             // Put the character on the console
465             m_console\->put_character(m_cursor_x, m_cursor_y, c);
466 
467             // Increment the x coordinate (ANSI aren't rendered)
468             if(!is_ansi)
469               m_cursor_x++;
470 
471             break;
472 
473     }
474 
475     // Check if the ANSI code is complete
476     if(c == 'm') is_ansi = false;
477 
478 }
.fi

.PP
References \fBMaxOS::drivers::console::Console::height()\fP, \fBis_ansi\fP, \fBMaxOS::common::OutputStream::lineFeed()\fP, \fBm_console\fP, \fBm_cursor_x\fP, \fBm_cursor_y\fP, \fBMaxOS::drivers::console::Console::put_character()\fP, \fBMaxOS::drivers::console::Console::scroll_up()\fP, \fBMaxOS::drivers::console::Console::width()\fP, \fBwrite\fP, and \fBwrite_char()\fP\&.
.PP
Referenced by \fBwrite_char()\fP\&.
.SH "Member Data Documentation"
.PP 
.SS "bool MaxOS::drivers::console::ConsoleStream::is_ansi = false\fC [protected]\fP"

.PP
Definition at line \fB99\fP of file \fBconsole\&.h\fP\&.
.PP
Referenced by \fBwrite_char()\fP\&.
.SS "\fBcommon::ConsoleColour\fP MaxOS::drivers::console::ConsoleStream::m_background { \fBcommon::ConsoleColour::Black\fP }\fC [protected]\fP"

.PP
Definition at line \fB98\fP of file \fBconsole\&.h\fP\&..PP
.nf
98 { common::ConsoleColour::Black };
.fi

.SS "\fBConsole\fP* MaxOS::drivers::console::ConsoleStream::m_console\fC [protected]\fP"

.PP
Definition at line \fB95\fP of file \fBconsole\&.h\fP\&.
.PP
Referenced by \fBwrite_char()\fP\&.
.SS "uint16_t MaxOS::drivers::console::ConsoleStream::m_cursor_x { 0 }\fC [protected]\fP"

.PP
Definition at line \fB101\fP of file \fBconsole\&.h\fP\&..PP
.nf
101 { 0 };
.fi

.PP
Referenced by \fBset_cursor()\fP, and \fBwrite_char()\fP\&.
.SS "uint16_t MaxOS::drivers::console::ConsoleStream::m_cursor_y { 0 }\fC [protected]\fP"

.PP
Definition at line \fB102\fP of file \fBconsole\&.h\fP\&..PP
.nf
102 { 0 };
.fi

.PP
Referenced by \fBset_cursor()\fP, and \fBwrite_char()\fP\&.
.SS "\fBcommon::ConsoleColour\fP MaxOS::drivers::console::ConsoleStream::m_foreground { \fBcommon::ConsoleColour::LightGrey\fP }\fC [protected]\fP"

.PP
Definition at line \fB97\fP of file \fBconsole\&.h\fP\&..PP
.nf
97 { common::ConsoleColour::LightGrey };
.fi


.SH "Author"
.PP 
Generated automatically by Doxygen for Max OS from the source code\&.
