.TH "MaxOS::hardwarecommunication::AdvancedProgrammableInterruptController" 3 "Version 0.1" "Max OS" \" -*- nroff -*-
.ad l
.nh
.SH NAME
MaxOS::hardwarecommunication::AdvancedProgrammableInterruptController \- Handles both the Local APIC (boot core) and IO APIC\&.  

.SH SYNOPSIS
.br
.PP
.PP
\fC#include <apic\&.h>\fP
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "\fBAdvancedProgrammableInterruptController\fP (\fBAdvancedConfigurationAndPowerInterface\fP *acpi)"
.br
.RI "Construct a new Advanced Programmable Interrupt Controller object and initialises the Local APIC and IO APIC, disabling the legacy PIC\&. "
.ti -1c
.RI "\fBLocalAPIC\fP * \fBlocal_apic\fP () const"
.br
.RI "Get the local apic\&. "
.ti -1c
.RI "\fBIOAPIC\fP * \fBio_apic\fP () const"
.br
.RI "Get the io apic\&. "
.in -1c
.SH "Detailed Description"
.PP 
Handles both the Local APIC (boot core) and IO APIC\&. 


.PP
\fBTodo\fP
.RS 4
Should either handle all Local APICs or none (only boot core right now, others accessed per core directly which is inconsistent) 
.RE
.PP

.PP
Definition at line \fB203\fP of file \fBapic\&.h\fP\&.
.SH "Constructor & Destructor Documentation"
.PP 
.SS "AdvancedProgrammableInterruptController::AdvancedProgrammableInterruptController (\fBAdvancedConfigurationAndPowerInterface\fP * acpi)"

.PP
Construct a new Advanced Programmable Interrupt Controller object and initialises the Local APIC and IO APIC, disabling the legacy PIC\&. 
.PP
\fBParameters\fP
.RS 4
\fIacpi\fP The ACPI interface to get the \fBMADT\fP from 
.RE
.PP

.PP
Definition at line \fB412\fP of file \fBapic\&.cpp\fP\&..PP
.nf
413 : m_pic_master_command_port(0x20),
414   m_pic_master_data_port(0x21),
415   m_pic_slave_command_port(0xA0),
416   m_pic_slave_data_port(0xA1)
417 {
418 
419     // Register this APIC
420     Logger::INFO() << "Setting up APIC\\n";
421     InterruptManager::active_interrupt_manager()\->set_apic(this);
422 
423     // Init the Local APIC
424     Logger::DEBUG() << "Initialising Local APIC\\n";
425     m_local_apic = new LocalAPIC();
426 
427     // Disable the legacy mode PIC
428     Logger::DEBUG() << "Disabling PIC\\n";
429     disable_pic();
430 
431     // Init the IO APIC
432     Logger::DEBUG() << "Initialising IO APIC\\n";
433     m_io_apic = new IOAPIC(acpi);
434 }
.fi

.PP
References \fBMaxOS::hardwarecommunication::InterruptManager::active_interrupt_manager()\fP, \fBLogger::DEBUG()\fP, \fBLogger::INFO()\fP, and \fBMaxOS::hardwarecommunication::InterruptManager::set_apic()\fP\&.
.SS "AdvancedProgrammableInterruptController::~AdvancedProgrammableInterruptController ()"

.PP
Definition at line \fB436\fP of file \fBapic\&.cpp\fP\&..PP
.nf
436                                                                                   {
437 
438     // Free the memory
439     delete m_local_apic;
440     delete m_io_apic;
441 }
.fi

.SH "Member Function Documentation"
.PP 
.SS "\fBIOAPIC\fP * AdvancedProgrammableInterruptController::io_apic () const"

.PP
Get the io apic\&. 
.PP
\fBReturns\fP
.RS 4
The io apic 
.RE
.PP

.PP
Definition at line \fB484\fP of file \fBapic\&.cpp\fP\&..PP
.nf
484                                                                {
485 
486     return m_io_apic;
487 }
.fi

.PP
Referenced by \fBMaxOS::system::CPU::find_cores()\fP\&.
.SS "\fBLocalAPIC\fP * AdvancedProgrammableInterruptController::local_apic () const"

.PP
Get the local apic\&. 
.PP
\fBReturns\fP
.RS 4
The local apic 
.RE
.PP

.PP
Definition at line \fB474\fP of file \fBapic\&.cpp\fP\&..PP
.nf
474                                                                      {
475 
476     return m_local_apic;
477 }
.fi

.PP
Referenced by \fBMaxOS::drivers::clock::Clock::calibrate()\fP, and \fBMaxOS::system::CPU::CPU()\fP\&.

.SH "Author"
.PP 
Generated automatically by Doxygen for Max OS from the source code\&.
