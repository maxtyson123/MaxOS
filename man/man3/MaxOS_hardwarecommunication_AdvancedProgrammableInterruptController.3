.TH "MaxOS::hardwarecommunication::AdvancedProgrammableInterruptController" 3 "Sun Oct 13 2024" "Version 0.1" "Max OS" \" -*- nroff -*-
.ad l
.nh
.SH NAME
MaxOS::hardwarecommunication::AdvancedProgrammableInterruptController
.SH SYNOPSIS
.br
.PP
.PP
\fC#include <apic\&.h>\fP
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "\fBAdvancedProgrammableInterruptController\fP (\fBAdvancedConfigurationAndPowerInterface\fP *acpi)"
.br
.ti -1c
.RI "\fB~AdvancedProgrammableInterruptController\fP ()"
.br
.in -1c
.SS "Protected Member Functions"

.in +1c
.ti -1c
.RI "void \fBdisable_pic\fP ()"
.br
.in -1c
.SS "Protected Attributes"

.in +1c
.ti -1c
.RI "\fBLocalAPIC\fP \fBm_local_apic\fP"
.br
.ti -1c
.RI "\fBIOAPIC\fP \fBm_io_apic\fP"
.br
.ti -1c
.RI "\fBPort8BitSlow\fP \fBm_pic_master_command_port\fP"
.br
.ti -1c
.RI "\fBPort8BitSlow\fP \fBm_pic_master_data_port\fP"
.br
.ti -1c
.RI "\fBPort8BitSlow\fP \fBm_pic_slave_command_port\fP"
.br
.ti -1c
.RI "\fBPort8BitSlow\fP \fBm_pic_slave_data_port\fP"
.br
.in -1c
.SH "Detailed Description"
.PP 
Definition at line 107 of file apic\&.h\&.
.SH "Constructor & Destructor Documentation"
.PP 
.SS "AdvancedProgrammableInterruptController::AdvancedProgrammableInterruptController (\fBAdvancedConfigurationAndPowerInterface\fP * acpi)"

.PP
Definition at line 259 of file apic\&.cpp\&.
.PP
.nf
260 : m_local_apic(),
261   m_io_apic(acpi),
262   m_pic_master_command_port(0x20),
263   m_pic_master_data_port(0x21),
264   m_pic_slave_command_port(0xA0),
265   m_pic_slave_data_port(0xA1)
266 {
267 
268   // Init the Local APIC
269   _kprintf("Initialising Local APIC\n");
270   m_local_apic\&.init();
271 
272   // Disable the old PIC
273   _kprintf("Disabling PIC\n");
274   disable_pic();
275 
276   // Init the IO APIC
277   _kprintf("Initialising IO APIC\n");
278   m_io_apic\&.init();
279 
280 }
.fi
.PP
References _kprintf, disable_pic(), MaxOS::hardwarecommunication::LocalAPIC::init(), MaxOS::hardwarecommunication::IOAPIC::init(), m_io_apic, and m_local_apic\&.
.SS "AdvancedProgrammableInterruptController::~AdvancedProgrammableInterruptController ()"

.PP
Definition at line 282 of file apic\&.cpp\&.
.PP
.nf
282                                                                                   {
283 
284 }
.fi
.SH "Member Function Documentation"
.PP 
.SS "void AdvancedProgrammableInterruptController::disable_pic ()\fC [protected]\fP"

.PP
Definition at line 286 of file apic\&.cpp\&.
.PP
.nf
286                                                           {
287 
288   // Initialise the PIC
289   m_pic_master_command_port\&.write(0x11);
290   m_pic_slave_command_port\&.write(0x11);
291 
292   // Set the offsets
293   m_pic_master_data_port\&.write(0x20);
294   m_pic_slave_data_port\&.write(0x28);
295 
296   // Set the slave/master relationships
297   m_pic_master_data_port\&.write(0x04);
298   m_pic_slave_data_port\&.write(0x02);
299 
300   // Set the modes (8086/8086)
301   m_pic_master_data_port\&.write(0x01);
302   m_pic_slave_data_port\&.write(0x01);
303 
304   // Mask the interrupts
305   m_pic_master_data_port\&.write(0xFF);
306   m_pic_slave_data_port\&.write(0xFF);
307 
308 }
.fi
.PP
References m_pic_master_command_port, m_pic_master_data_port, m_pic_slave_command_port, m_pic_slave_data_port, and MaxOS::hardwarecommunication::Port8BitSlow::write()\&.
.PP
Referenced by AdvancedProgrammableInterruptController()\&.
.SH "Member Data Documentation"
.PP 
.SS "\fBIOAPIC\fP MaxOS::hardwarecommunication::AdvancedProgrammableInterruptController::m_io_apic\fC [protected]\fP"

.PP
Definition at line 111 of file apic\&.h\&.
.PP
Referenced by AdvancedProgrammableInterruptController()\&.
.SS "\fBLocalAPIC\fP MaxOS::hardwarecommunication::AdvancedProgrammableInterruptController::m_local_apic\fC [protected]\fP"

.PP
Definition at line 110 of file apic\&.h\&.
.PP
Referenced by AdvancedProgrammableInterruptController()\&.
.SS "\fBPort8BitSlow\fP MaxOS::hardwarecommunication::AdvancedProgrammableInterruptController::m_pic_master_command_port\fC [protected]\fP"

.PP
Definition at line 113 of file apic\&.h\&.
.PP
Referenced by disable_pic()\&.
.SS "\fBPort8BitSlow\fP MaxOS::hardwarecommunication::AdvancedProgrammableInterruptController::m_pic_master_data_port\fC [protected]\fP"

.PP
Definition at line 114 of file apic\&.h\&.
.PP
Referenced by disable_pic()\&.
.SS "\fBPort8BitSlow\fP MaxOS::hardwarecommunication::AdvancedProgrammableInterruptController::m_pic_slave_command_port\fC [protected]\fP"

.PP
Definition at line 115 of file apic\&.h\&.
.PP
Referenced by disable_pic()\&.
.SS "\fBPort8BitSlow\fP MaxOS::hardwarecommunication::AdvancedProgrammableInterruptController::m_pic_slave_data_port\fC [protected]\fP"

.PP
Definition at line 116 of file apic\&.h\&.
.PP
Referenced by disable_pic()\&.

.SH "Author"
.PP 
Generated automatically by Doxygen for Max OS from the source code\&.
